(()=>{var vh=Object.create;var Do=Object.defineProperty;var yh=Object.getOwnPropertyDescriptor;var Lh=Object.getOwnPropertyNames;var wh=Object.getPrototypeOf,bh=Object.prototype.hasOwnProperty;var Eh=(a,i)=>()=>(i||a((i={exports:{}}).exports,i),i.exports),Th=(a,i)=>{for(var r in i)Do(a,r,{get:i[r],enumerable:!0})},xh=(a,i,r,u)=>{if(i&&typeof i=="object"||typeof i=="function")for(let o of Lh(i))!bh.call(a,o)&&o!==r&&Do(a,o,{get:()=>i[o],enumerable:!(u=yh(i,o))||u.enumerable});return a};var Ph=(a,i,r)=>(r=a!=null?vh(wh(a)):{},xh(i||!a||!a.__esModule?Do(r,"default",{value:a,enumerable:!0}):r,a));var Ka=Eh((to,Ya)=>{(function(a,i){typeof to=="object"&&typeof Ya<"u"?i(to):typeof define=="function"&&define.amd?define(["exports"],i):(a=typeof globalThis<"u"?globalThis:a||self,i(a.leaflet={}))})(to,function(a){"use strict";var i="1.9.4";function r(t){var e,n,s,h;for(n=1,s=arguments.length;n<s;n++){h=arguments[n];for(e in h)t[e]=h[e]}return t}var u=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function o(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var s=n.call(arguments,2);return function(){return t.apply(e,s.length?s.concat(n.call(arguments)):arguments)}}var l=0;function c(t){return"_leaflet_id"in t||(t._leaflet_id=++l),t._leaflet_id}function f(t,e,n){var s,h,d,p;return p=function(){s=!1,h&&(d.apply(n,h),h=!1)},d=function(){s?h=arguments:(t.apply(n,arguments),setTimeout(p,e),s=!0)},d}function _(t,e,n){var s=e[1],h=e[0],d=s-h;return t===s&&n?t:((t-h)%d+d)%d+h}function m(){return!1}function g(t,e){if(e===!1)return t;var n=Math.pow(10,e===void 0?6:e);return Math.round(t*n)/n}function E(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function P(t){return E(t).split(/\s+/)}function x(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?u(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}function Y(t,e,n){var s=[];for(var h in t)s.push(encodeURIComponent(n?h.toUpperCase():h)+"="+encodeURIComponent(t[h]));return(!e||e.indexOf("?")===-1?"?":"&")+s.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function $(t,e){return t.replace(I,function(n,s){var h=e[s];if(h===void 0)throw new Error("No value provided for variable "+n);return typeof h=="function"&&(h=h(e)),h})}var B=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function Q(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function N(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var U=0;function G(t){var e=+new Date,n=Math.max(0,16-(e-U));return U=e+n,window.setTimeout(t,n)}var q=window.requestAnimationFrame||N("RequestAnimationFrame")||G,lt=window.cancelAnimationFrame||N("CancelAnimationFrame")||N("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function Z(t,e,n){if(n&&q===G)t.call(e);else return q.call(window,o(t,e))}function F(t){t&&lt.call(window,t)}var pt={__proto__:null,extend:r,create:u,bind:o,get lastId(){return l},stamp:c,throttle:f,wrapNum:_,falseFn:m,formatNum:g,trim:E,splitWords:P,setOptions:x,getParamString:Y,template:$,isArray:B,indexOf:Q,emptyImageUrl:K,requestFn:q,cancelFn:lt,requestAnimFrame:Z,cancelAnimFrame:F};function ot(){}ot.extend=function(t){var e=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,s=u(n);s.constructor=e,e.prototype=s;for(var h in this)Object.prototype.hasOwnProperty.call(this,h)&&h!=="prototype"&&h!=="__super__"&&(e[h]=this[h]);return t.statics&&r(e,t.statics),t.includes&&(Lt(t.includes),r.apply(null,[s].concat(t.includes))),r(s,t),delete s.statics,delete s.includes,s.options&&(s.options=n.options?u(n.options):{},r(s.options,t.options)),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var d=0,p=s._initHooks.length;d<p;d++)s._initHooks[d].call(this)}},e},ot.include=function(t){var e=this.prototype.options;return r(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},ot.mergeOptions=function(t){return r(this.prototype.options,t),this},ot.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function Lt(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=B(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var st={on:function(t,e,n){if(typeof t=="object")for(var s in t)this._on(s,t[s],e);else{t=P(t);for(var h=0,d=t.length;h<d;h++)this._on(t[h],e,n)}return this},off:function(t,e,n){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var s in t)this._off(s,t[s],e);else{t=P(t);for(var h=arguments.length===1,d=0,p=t.length;d<p;d++)h?this._off(t[d]):this._off(t[d],e,n)}return this},_on:function(t,e,n,s){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,n)===!1){n===this&&(n=void 0);var h={fn:e,ctx:n};s&&(h.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(h)}},_off:function(t,e,n){var s,h,d;if(this._events&&(s=this._events[t],!!s)){if(arguments.length===1){if(this._firingCount)for(h=0,d=s.length;h<d;h++)s[h].fn=m;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var p=this._listens(t,e,n);if(p!==!1){var v=s[p];this._firingCount&&(v.fn=m,this._events[t]=s=s.slice()),s.splice(p,1)}}},fire:function(t,e,n){if(!this.listens(t,n))return this;var s=r({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var h=this._events[t];if(h){this._firingCount=this._firingCount+1||1;for(var d=0,p=h.length;d<p;d++){var v=h[d],y=v.fn;v.once&&this.off(t,y,v.ctx),y.call(v.ctx||this,s)}this._firingCount--}}return n&&this._propagateEvent(s),this},listens:function(t,e,n,s){typeof t!="string"&&console.warn('"string" type argument expected');var h=e;typeof e!="function"&&(s=!!e,h=void 0,n=void 0);var d=this._events&&this._events[t];if(d&&d.length&&this._listens(t,h,n)!==!1)return!0;if(s){for(var p in this._eventParents)if(this._eventParents[p].listens(t,e,n,s))return!0}return!1},_listens:function(t,e,n){if(!this._events)return!1;var s=this._events[t]||[];if(!e)return!!s.length;n===this&&(n=void 0);for(var h=0,d=s.length;h<d;h++)if(s[h].fn===e&&s[h].ctx===n)return h;return!1},once:function(t,e,n){if(typeof t=="object")for(var s in t)this._on(s,t[s],e,!0);else{t=P(t);for(var h=0,d=t.length;h<d;h++)this._on(t[h],e,n,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[c(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[c(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,r({layer:t.target,propagatedFrom:t.target},t),!0)}};st.addEventListener=st.on,st.removeEventListener=st.clearAllEventListeners=st.off,st.addOneTimeEventListener=st.once,st.fireEvent=st.fire,st.hasEventListeners=st.listens;var St=ot.extend(st);function C(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var Pt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};C.prototype={clone:function(){return new C(this.x,this.y)},add:function(t){return this.clone()._add(S(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(S(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new C(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new C(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Pt(this.x),this.y=Pt(this.y),this},distanceTo:function(t){t=S(t);var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return t=S(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=S(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function S(t,e,n){return t instanceof C?t:B(t)?new C(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new C(t.x,t.y):new C(t,e,n)}function j(t,e){if(t)for(var n=e?[t,e]:t,s=0,h=n.length;s<h;s++)this.extend(n[s])}j.prototype={extend:function(t){var e,n;if(!t)return this;if(t instanceof C||typeof t[0]=="number"||"x"in t)e=n=S(t);else if(t=dt(t),e=t.min,n=t.max,!e||!n)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=n.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(t){return S((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return S(this.min.x,this.max.y)},getTopRight:function(){return S(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return typeof t[0]=="number"||t instanceof C?t=S(t):t=dt(t),t instanceof j?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=dt(t);var e=this.min,n=this.max,s=t.min,h=t.max,d=h.x>=e.x&&s.x<=n.x,p=h.y>=e.y&&s.y<=n.y;return d&&p},overlaps:function(t){t=dt(t);var e=this.min,n=this.max,s=t.min,h=t.max,d=h.x>e.x&&s.x<n.x,p=h.y>e.y&&s.y<n.y;return d&&p},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,n=this.max,s=Math.abs(e.x-n.x)*t,h=Math.abs(e.y-n.y)*t;return dt(S(e.x-s,e.y-h),S(n.x+s,n.y+h))},equals:function(t){return t?(t=dt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function dt(t,e){return!t||t instanceof j?t:new j(t,e)}function _t(t,e){if(t)for(var n=e?[t,e]:t,s=0,h=n.length;s<h;s++)this.extend(n[s])}_t.prototype={extend:function(t){var e=this._southWest,n=this._northEast,s,h;if(t instanceof V)s=t,h=t;else if(t instanceof _t){if(s=t._southWest,h=t._northEast,!s||!h)return this}else return t?this.extend(O(t)||X(t)):this;return!e&&!n?(this._southWest=new V(s.lat,s.lng),this._northEast=new V(h.lat,h.lng)):(e.lat=Math.min(s.lat,e.lat),e.lng=Math.min(s.lng,e.lng),n.lat=Math.max(h.lat,n.lat),n.lng=Math.max(h.lng,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,s=Math.abs(e.lat-n.lat)*t,h=Math.abs(e.lng-n.lng)*t;return new _t(new V(e.lat-s,e.lng-h),new V(n.lat+s,n.lng+h))},getCenter:function(){return new V((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new V(this.getNorth(),this.getWest())},getSouthEast:function(){return new V(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof V||"lat"in t?t=O(t):t=X(t);var e=this._southWest,n=this._northEast,s,h;return t instanceof _t?(s=t.getSouthWest(),h=t.getNorthEast()):s=h=t,s.lat>=e.lat&&h.lat<=n.lat&&s.lng>=e.lng&&h.lng<=n.lng},intersects:function(t){t=X(t);var e=this._southWest,n=this._northEast,s=t.getSouthWest(),h=t.getNorthEast(),d=h.lat>=e.lat&&s.lat<=n.lat,p=h.lng>=e.lng&&s.lng<=n.lng;return d&&p},overlaps:function(t){t=X(t);var e=this._southWest,n=this._northEast,s=t.getSouthWest(),h=t.getNorthEast(),d=h.lat>e.lat&&s.lat<n.lat,p=h.lng>e.lng&&s.lng<n.lng;return d&&p},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=X(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function X(t,e){return t instanceof _t?t:new _t(t,e)}function V(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==void 0&&(this.alt=+n)}V.prototype={equals:function(t,e){if(!t)return!1;t=O(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+g(this.lat,t)+", "+g(this.lng,t)+")"},distanceTo:function(t){return Ct.distance(this,O(t))},wrap:function(){return Ct.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return X([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new V(this.lat,this.lng,this.alt)}};function O(t,e,n){return t instanceof V?t:B(t)&&typeof t[0]!="object"?t.length===3?new V(t[0],t[1],t[2]):t.length===2?new V(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new V(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new V(t,e,n)}var mt={latLngToPoint:function(t,e){var n=this.projection.project(t),s=this.scale(e);return this.transformation._transform(n,s)},pointToLatLng:function(t,e){var n=this.scale(e),s=this.transformation.untransform(t,n);return this.projection.unproject(s)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t),s=this.transformation.transform(e.min,n),h=this.transformation.transform(e.max,n);return new j(s,h)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?_(t.lng,this.wrapLng,!0):t.lng,n=this.wrapLat?_(t.lat,this.wrapLat,!0):t.lat,s=t.alt;return new V(n,e,s)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),s=e.lat-n.lat,h=e.lng-n.lng;if(s===0&&h===0)return t;var d=t.getSouthWest(),p=t.getNorthEast(),v=new V(d.lat-s,d.lng-h),y=new V(p.lat-s,p.lng-h);return new _t(v,y)}},Ct=r({},mt,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,s=t.lat*n,h=e.lat*n,d=Math.sin((e.lat-t.lat)*n/2),p=Math.sin((e.lng-t.lng)*n/2),v=d*d+Math.cos(s)*Math.cos(h)*p*p,y=2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v));return this.R*y}}),ye=6378137,Zt={R:ye,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,s=Math.max(Math.min(n,t.lat),-n),h=Math.sin(s*e);return new C(this.R*t.lng*e,this.R*Math.log((1+h)/(1-h))/2)},unproject:function(t){var e=180/Math.PI;return new V((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=ye*Math.PI;return new j([-t,-t],[t,t])}()};function Le(t,e,n,s){if(B(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=n,this._d=s}Le.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new C((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function we(t,e,n,s){return new Le(t,e,n,s)}var be=r({},Ct,{code:"EPSG:3857",projection:Zt,transformation:function(){var t=.5/(Math.PI*Zt.R);return we(t,.5,-t,.5)}()}),io=r({},be,{code:"EPSG:900913"});function vi(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function tn(t,e){var n="",s,h,d,p,v,y;for(s=0,d=t.length;s<d;s++){for(v=t[s],h=0,p=v.length;h<p;h++)y=v[h],n+=(h?"L":"M")+y.x+" "+y.y;n+=e?M.svg?"z":"x":""}return n||"M0 0"}var yi=document.documentElement.style,Ee="ActiveXObject"in window,en=Ee&&!document.addEventListener,nn="msLaunchUri"in navigator&&!("documentMode"in document),Li=jt("webkit"),Gt=jt("android"),Te=jt("android 2")||jt("android 3"),on=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),sn=Gt&&jt("Google")&&on<537&&!("AudioNode"in window),xe=!!window.opera,wi=!nn&&jt("chrome"),bi=jt("gecko")&&!Li&&!xe&&!Ee,rn=!wi&&jt("safari"),Ei=jt("phantom"),ys="OTransition"in yi,Qa=navigator.platform.indexOf("Win")===0,Ls=Ee&&"transition"in yi,no="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Te,ws="MozPerspective"in yi,tl=!window.L_DISABLE_3D&&(Ls||no||ws)&&!ys&&!Ei,Ti=typeof orientation<"u"||jt("mobile"),el=Ti&&Li,il=Ti&&no,bs=!window.PointerEvent&&window.MSPointerEvent,Es=!!(window.PointerEvent||bs),Ts="ontouchstart"in window||!!window.TouchEvent,nl=!window.L_NO_TOUCH&&(Ts||Es),ol=Ti&&xe,sl=Ti&&bi,rl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,al=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",m,e),window.removeEventListener("testPassiveEventSupport",m,e)}catch{}return t}(),ll=function(){return!!document.createElement("canvas").getContext}(),oo=!!(document.createElementNS&&vi("svg").createSVGRect),hl=!!oo&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),cl=!oo&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),ul=navigator.platform.indexOf("Mac")===0,dl=navigator.platform.indexOf("Linux")===0;function jt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var M={ie:Ee,ielt9:en,edge:nn,webkit:Li,android:Gt,android23:Te,androidStock:sn,opera:xe,chrome:wi,gecko:bi,safari:rn,phantom:Ei,opera12:ys,win:Qa,ie3d:Ls,webkit3d:no,gecko3d:ws,any3d:tl,mobile:Ti,mobileWebkit:el,mobileWebkit3d:il,msPointer:bs,pointer:Es,touch:nl,touchNative:Ts,mobileOpera:ol,mobileGecko:sl,retina:rl,passiveEvents:al,canvas:ll,svg:oo,vml:cl,inlineSvg:hl,mac:ul,linux:dl},xs=M.msPointer?"MSPointerDown":"pointerdown",Ps=M.msPointer?"MSPointerMove":"pointermove",Cs=M.msPointer?"MSPointerUp":"pointerup",Ms=M.msPointer?"MSPointerCancel":"pointercancel",so={touchstart:xs,touchmove:Ps,touchend:Cs,touchcancel:Ms},ks={touchstart:vl,touchmove:an,touchend:an,touchcancel:an},Ue={},Ss=!1;function fl(t,e,n){return e==="touchstart"&&gl(),ks[e]?(n=ks[e].bind(this,n),t.addEventListener(so[e],n,!1),n):(console.warn("wrong event specified:",e),m)}function pl(t,e,n){if(!so[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(so[e],n,!1)}function _l(t){Ue[t.pointerId]=t}function ml(t){Ue[t.pointerId]&&(Ue[t.pointerId]=t)}function As(t){delete Ue[t.pointerId]}function gl(){Ss||(document.addEventListener(xs,_l,!0),document.addEventListener(Ps,ml,!0),document.addEventListener(Cs,As,!0),document.addEventListener(Ms,As,!0),Ss=!0)}function an(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var n in Ue)e.touches.push(Ue[n]);e.changedTouches=[e],t(e)}}function vl(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&wt(e),an(t,e)}function yl(t){var e={},n,s;for(s in t)n=t[s],e[s]=n&&n.bind?n.bind(t):n;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var Ll=200;function wl(t,e){t.addEventListener("dblclick",e);var n=0,s;function h(d){if(d.detail!==1){s=d.detail;return}if(!(d.pointerType==="mouse"||d.sourceCapabilities&&!d.sourceCapabilities.firesTouchEvents)){var p=Rs(d);if(!(p.some(function(y){return y instanceof HTMLLabelElement&&y.attributes.for})&&!p.some(function(y){return y instanceof HTMLInputElement||y instanceof HTMLSelectElement}))){var v=Date.now();v-n<=Ll?(s++,s===2&&e(yl(d))):s=1,n=v}}}return t.addEventListener("click",h),{dblclick:e,simDblclick:h}}function bl(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var ro=cn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),xi=cn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ds=xi==="webkitTransition"||xi==="OTransition"?xi+"End":"transitionend";function Os(t){return typeof t=="string"?document.getElementById(t):t}function Pi(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||n==="auto")&&document.defaultView){var s=document.defaultView.getComputedStyle(t,null);n=s?s[e]:null}return n==="auto"?null:n}function W(t,e,n){var s=document.createElement(t);return s.className=e||"",n&&n.appendChild(s),s}function et(t){var e=t.parentNode;e&&e.removeChild(t)}function ln(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ge(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function je(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ao(t,e){if(t.classList!==void 0)return t.classList.contains(e);var n=hn(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function R(t,e){if(t.classList!==void 0)for(var n=P(e),s=0,h=n.length;s<h;s++)t.classList.add(n[s]);else if(!ao(t,e)){var d=hn(t);lo(t,(d?d+" ":"")+e)}}function rt(t,e){t.classList!==void 0?t.classList.remove(e):lo(t,E((" "+hn(t)+" ").replace(" "+e+" "," ")))}function lo(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function hn(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Dt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&El(t,e)}function El(t,e){var n=!1,s="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(s)}catch{if(e===1)return}e=Math.round(e*100),n?(n.Enabled=e!==100,n.Opacity=e):t.style.filter+=" progid:"+s+"(opacity="+e+")"}function cn(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function Pe(t,e,n){var s=e||new C(0,0);t.style[ro]=(M.ie3d?"translate("+s.x+"px,"+s.y+"px)":"translate3d("+s.x+"px,"+s.y+"px,0)")+(n?" scale("+n+")":"")}function ht(t,e){t._leaflet_pos=e,M.any3d?Pe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Ce(t){return t._leaflet_pos||new C(0,0)}var Ci,Mi,ho;if("onselectstart"in document)Ci=function(){D(window,"selectstart",wt)},Mi=function(){J(window,"selectstart",wt)};else{var ki=cn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ci=function(){if(ki){var t=document.documentElement.style;ho=t[ki],t[ki]="none"}},Mi=function(){ki&&(document.documentElement.style[ki]=ho,ho=void 0)}}function co(){D(window,"dragstart",wt)}function uo(){J(window,"dragstart",wt)}var un,fo;function po(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(dn(),un=t,fo=t.style.outlineStyle,t.style.outlineStyle="none",D(window,"keydown",dn))}function dn(){un&&(un.style.outlineStyle=fo,un=void 0,fo=void 0,J(window,"keydown",dn))}function Is(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function _o(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Tl={__proto__:null,TRANSFORM:ro,TRANSITION:xi,TRANSITION_END:Ds,get:Os,getStyle:Pi,create:W,remove:et,empty:ln,toFront:Ge,toBack:je,hasClass:ao,addClass:R,removeClass:rt,setClass:lo,getClass:hn,setOpacity:Dt,testProp:cn,setTransform:Pe,setPosition:ht,getPosition:Ce,get disableTextSelection(){return Ci},get enableTextSelection(){return Mi},disableImageDrag:co,enableImageDrag:uo,preventOutline:po,restoreOutline:dn,getSizedParentNode:Is,getScale:_o};function D(t,e,n,s){if(e&&typeof e=="object")for(var h in e)go(t,h,e[h],n);else{e=P(e);for(var d=0,p=e.length;d<p;d++)go(t,e[d],n,s)}return this}var Yt="_leaflet_events";function J(t,e,n,s){if(arguments.length===1)Ns(t),delete t[Yt];else if(e&&typeof e=="object")for(var h in e)vo(t,h,e[h],n);else if(e=P(e),arguments.length===2)Ns(t,function(v){return Q(e,v)!==-1});else for(var d=0,p=e.length;d<p;d++)vo(t,e[d],n,s);return this}function Ns(t,e){for(var n in t[Yt]){var s=n.split(/\d/)[0];(!e||e(s))&&vo(t,s,null,null,n)}}var mo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function go(t,e,n,s){var h=e+c(n)+(s?"_"+c(s):"");if(t[Yt]&&t[Yt][h])return this;var d=function(v){return n.call(s||t,v||window.event)},p=d;!M.touchNative&&M.pointer&&e.indexOf("touch")===0?d=fl(t,e,d):M.touch&&e==="dblclick"?d=wl(t,d):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(mo[e]||e,d,M.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(d=function(v){v=v||window.event,Lo(t,v)&&p(v)},t.addEventListener(mo[e],d,!1)):t.addEventListener(e,p,!1):t.attachEvent("on"+e,d),t[Yt]=t[Yt]||{},t[Yt][h]=d}function vo(t,e,n,s,h){h=h||e+c(n)+(s?"_"+c(s):"");var d=t[Yt]&&t[Yt][h];if(!d)return this;!M.touchNative&&M.pointer&&e.indexOf("touch")===0?pl(t,e,d):M.touch&&e==="dblclick"?bl(t,d):"removeEventListener"in t?t.removeEventListener(mo[e]||e,d,!1):t.detachEvent("on"+e,d),t[Yt][h]=null}function Me(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function yo(t){return go(t,"wheel",Me),this}function Si(t){return D(t,"mousedown touchstart dblclick contextmenu",Me),t._leaflet_disable_click=!0,this}function wt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ke(t){return wt(t),Me(t),this}function Rs(t){if(t.composedPath)return t.composedPath();for(var e=[],n=t.target;n;)e.push(n),n=n.parentNode;return e}function zs(t,e){if(!e)return new C(t.clientX,t.clientY);var n=_o(e),s=n.boundingClientRect;return new C((t.clientX-s.left)/n.x-e.clientLeft,(t.clientY-s.top)/n.y-e.clientTop)}var xl=M.linux&&M.chrome?window.devicePixelRatio:M.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Bs(t){return M.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/xl:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Lo(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch{return!1}return n!==t}var Pl={__proto__:null,on:D,off:J,stopPropagation:Me,disableScrollPropagation:yo,disableClickPropagation:Si,preventDefault:wt,stop:ke,getPropagationPath:Rs,getMousePosition:zs,getWheelDelta:Bs,isExternalTarget:Lo,addListener:D,removeListener:J},$s=St.extend({run:function(t,e,n,s){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(s||.5,.2),this._startPos=Ce(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Z(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=this._duration*1e3;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ht(this._el,n),this.fire("step")},_complete:function(){F(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),H=St.extend({options:{crs:be,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=x(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(O(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=xi&&M.any3d&&!M.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),D(this._proxy,Ds,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(O(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==void 0&&(n.zoom=r({animate:n.animate},n.zoom),n.pan=r({animate:n.animate,duration:n.duration},n.pan));var s=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,n.pan&&n.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(M.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(M.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var s=this.getZoomScale(e),h=this.getSize().divideBy(2),d=t instanceof C?t:this.latLngToContainerPoint(t),p=d.subtract(h).multiplyBy(1-1/s),v=this.containerPointToLatLng(h.add(p));return this.setView(v,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():X(t);var n=S(e.paddingTopLeft||e.padding||[0,0]),s=S(e.paddingBottomRight||e.padding||[0,0]),h=this.getBoundsZoom(t,!1,n.add(s));if(h=typeof e.maxZoom=="number"?Math.min(e.maxZoom,h):h,h===1/0)return{center:t.getCenter(),zoom:h};var d=s.subtract(n).divideBy(2),p=this.project(t.getSouthWest(),h),v=this.project(t.getNorthEast(),h),y=this.unproject(p.add(v).divideBy(2).add(d),h);return{center:y,zoom:h}},fitBounds:function(t,e){if(t=X(t),!t.isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=S(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new $s,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){R(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(n=n||{},n.animate===!1||!M.any3d)return this.setView(t,e,n);this._stop();var s=this.project(this.getCenter()),h=this.project(t),d=this.getSize(),p=this._zoom;t=O(t),e=e===void 0?p:e;var v=Math.max(d.x,d.y),y=v*this.getZoomScale(p,e),w=h.distanceTo(s)||1,T=1.42,A=T*T;function z(ct){var Tn=ct?-1:1,ph=ct?y:v,_h=y*y-v*v+Tn*A*A*w*w,mh=2*ph*A*w,Ao=_h/mh,yr=Math.sqrt(Ao*Ao+1)-Ao,gh=yr<1e-9?-18:Math.log(yr);return gh}function Et(ct){return(Math.exp(ct)-Math.exp(-ct))/2}function gt(ct){return(Math.exp(ct)+Math.exp(-ct))/2}function It(ct){return Et(ct)/gt(ct)}var Mt=z(0);function Qe(ct){return v*(gt(Mt)/gt(Mt+T*ct))}function ch(ct){return v*(gt(Mt)*It(Mt+T*ct)-Et(Mt))/A}function uh(ct){return 1-Math.pow(1-ct,1.5)}var dh=Date.now(),gr=(z(1)-Mt)/T,fh=n.duration?1e3*n.duration:1e3*gr*.8;function vr(){var ct=(Date.now()-dh)/fh,Tn=uh(ct)*gr;ct<=1?(this._flyToFrame=Z(vr,this),this._move(this.unproject(s.add(h.subtract(s).multiplyBy(ch(Tn)/w)),p),this.getScaleZoom(v/Qe(Tn),p),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),vr.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return t=X(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),s=this._limitCenter(n,this._zoom,X(t));return n.equals(s)||this.panTo(s,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var n=S(e.paddingTopLeft||e.padding||[0,0]),s=S(e.paddingBottomRight||e.padding||[0,0]),h=this.project(this.getCenter()),d=this.project(t),p=this.getPixelBounds(),v=dt([p.min.add(n),p.max.subtract(s)]),y=v.getSize();if(!v.contains(d)){this._enforcingBounds=!0;var w=d.subtract(v.getCenter()),T=v.extend(d).getSize().subtract(y);h.x+=w.x<0?-T.x:T.x,h.y+=w.y<0?-T.y:T.y,this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=r({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var n=this.getSize(),s=e.divideBy(2).round(),h=n.divideBy(2).round(),d=s.subtract(h);return!d.x&&!d.y?this:(t.animate&&t.pan?this.panBy(d):(t.pan&&this._rawPanBy(d),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:n}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=r({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o(this._handleGeolocationResponse,this),n=o(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,n,t):navigator.geolocation.getCurrentPosition(e,n,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,n=t.coords.longitude,s=new V(e,n),h=s.toBounds(t.coords.accuracy*2),d=this._locateOptions;if(d.setView){var p=this.getBoundsZoom(h);this.setView(s,d.maxZoom?Math.min(p,d.maxZoom):p)}var v={latlng:s,bounds:h,timestamp:t.timestamp};for(var y in t.coords)typeof t.coords[y]=="number"&&(v[y]=t.coords[y]);this.fire("locationfound",v)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),et(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(F(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)et(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),s=W("div",n,e||this._mapPane);return t&&(this._panes[t]=s),s},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),n=this.unproject(t.getTopRight());return new _t(e,n)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=X(t),n=S(n||[0,0]);var s=this.getZoom()||0,h=this.getMinZoom(),d=this.getMaxZoom(),p=t.getNorthWest(),v=t.getSouthEast(),y=this.getSize().subtract(n),w=dt(this.project(v,s),this.project(p,s)).getSize(),T=M.any3d?this.options.zoomSnap:1,A=y.x/w.x,z=y.y/w.y,Et=e?Math.max(A,z):Math.min(A,z);return s=this.getScaleZoom(Et,s),T&&(s=Math.round(s/(T/100))*(T/100),s=e?Math.ceil(s/T)*T:Math.floor(s/T)*T),Math.max(h,Math.min(d,s))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new C(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new j(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===void 0?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===void 0?this._zoom:e;var s=n.zoom(t*n.scale(e));return isNaN(s)?1/0:s},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(O(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(S(t),e)},layerPointToLatLng:function(t){var e=S(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(O(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(O(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(X(t))},distance:function(t,e){return this.options.crs.distance(O(t),O(e))},containerPointToLayerPoint:function(t){return S(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return S(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(S(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(O(t)))},mouseEventToContainerPoint:function(t){return zs(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Os(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");D(e,"scroll",this._onScroll,this),this._containerId=c(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&M.any3d,R(t,"leaflet-container"+(M.touch?" leaflet-touch":"")+(M.retina?" leaflet-retina":"")+(M.ielt9?" leaflet-oldie":"")+(M.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Pi(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ht(this._mapPane,new C(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(R(t.markerPane,"leaflet-zoom-hide"),R(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,n){ht(this._mapPane,new C(0,0));var s=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var h=this._zoom!==e;this._moveStart(h,n)._move(t,e)._moveEnd(h),this.fire("viewreset"),s&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,s){e===void 0&&(e=this._zoom);var h=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),s?n&&n.pinch&&this.fire("zoom",n):((h||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return F(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ht(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[c(this._container)]=this;var e=t?J:D;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),M.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){F(this._resizeRequest),this._resizeRequest=Z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n=[],s,h=e==="mouseout"||e==="mouseover",d=t.target||t.srcElement,p=!1;d;){if(s=this._targets[c(d)],s&&(e==="click"||e==="preclick")&&this._draggableMoved(s)){p=!0;break}if(s&&s.listens(e,!0)&&(h&&!Lo(d,t)||(n.push(s),h))||d===this._container)break;d=d.parentNode}return!n.length&&!p&&!h&&this.listens(e,!0)&&(n=[this]),n},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var n=t.type;n==="mousedown"&&po(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if(t.type==="click"){var s=r({},t);s.type="preclick",this._fireDOMEvent(s,s.type,n)}var h=this._findEventTargets(t,e);if(n){for(var d=[],p=0;p<n.length;p++)n[p].listens(e,!0)&&d.push(n[p]);h=d.concat(h)}if(h.length){e==="contextmenu"&&wt(t);var v=h[0],y={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var w=v.getLatLng&&(!v._radius||v._radius<=10);y.containerPoint=w?this.latLngToContainerPoint(v.getLatLng()):this.mouseEventToContainerPoint(t),y.layerPoint=this.containerPointToLayerPoint(y.containerPoint),y.latlng=w?v.getLatLng():this.layerPointToLatLng(y.layerPoint)}for(p=0;p<h.length;p++)if(h[p].fire(e,y,!0),y.originalEvent._stopped||h[p].options.bubblingMouseEvents===!1&&Q(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Ce(this._mapPane)||new C(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var s=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(s)},_latLngBoundsToNewLayerBounds:function(t,e,n){var s=this._getNewPixelOrigin(n,e);return dt([this.project(t.getSouthWest(),e)._subtract(s),this.project(t.getNorthWest(),e)._subtract(s),this.project(t.getSouthEast(),e)._subtract(s),this.project(t.getNorthEast(),e)._subtract(s)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var s=this.project(t,e),h=this.getSize().divideBy(2),d=new j(s.subtract(h),s.add(h)),p=this._getBoundsOffset(d,n,e);return Math.abs(p.x)<=1&&Math.abs(p.y)<=1?t:this.unproject(s.add(p),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),s=new j(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(s,e))},_getBoundsOffset:function(t,e,n){var s=dt(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),h=s.min.subtract(t.min),d=s.max.subtract(t.max),p=this._rebound(h.x,-d.x),v=this._rebound(h.y,-d.y);return new C(p,v)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),s=M.any3d?this.options.zoomSnap:1;return s&&(t=Math.round(t/s)*s),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){rt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=W("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var n=ro,s=this._proxy.style[n];Pe(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),s===this._proxy.style[n]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){et(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Pe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var s=this.getZoomScale(e),h=this._getCenterOffset(t)._divideBy(1-1/s);return n.animate!==!0&&!this.getSize().contains(h)?!1:(Z(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,n,s){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,R(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:s}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&rt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Cl(t,e){return new H(t,e)}var Vt=ot.extend({options:{position:"topright"},initialize:function(t){x(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),s=t._controlCorners[n];return R(e,"leaflet-control"),n.indexOf("bottom")!==-1?s.insertBefore(e,s.firstChild):s.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(et(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ai=function(t){return new Vt(t)};H.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=W("div",e+"control-container",this._container);function s(h,d){var p=e+h+" "+e+d;t[h+d]=W("div",p,n)}s("top","left"),s("top","right"),s("bottom","left"),s("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)et(this._controlCorners[t]);et(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Hs=Vt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,s){return n<s?-1:s<n?1:0}},initialize:function(t,e,n){x(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var s in t)this._addLayer(t[s],s);for(s in e)this._addLayer(e[s],s,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Vt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(c(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){R(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(R(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):rt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return rt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=W("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Si(e),yo(e);var s=this._section=W("section",t+"-list");n&&(this._map.on("click",this.collapse,this),D(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var h=this._layersLink=W("a",t+"-toggle",e);h.href="#",h.title="Layers",h.setAttribute("role","button"),D(h,{keydown:function(d){d.keyCode===13&&this._expandSafely()},click:function(d){wt(d),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=W("div",t+"-base",s),this._separator=W("div",t+"-separator",s),this._overlaysList=W("div",t+"-overlays",s),e.appendChild(s)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&c(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(o(function(s,h){return this.options.sortFunction(s.layer,h.layer,s.name,h.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ln(this._baseLayersList),ln(this._overlaysList),this._layerControlInputs=[];var t,e,n,s,h=0;for(n=0;n<this._layers.length;n++)s=this._layers[n],this._addItem(s),e=e||s.overlay,t=t||!s.overlay,h+=s.overlay?0:1;return this.options.hideSingleBase&&(t=t&&h>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(c(t.target)),n=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",s=document.createElement("div");return s.innerHTML=n,s.firstChild},_addItem:function(t){var e=document.createElement("label"),n=this._map.hasLayer(t.layer),s;t.overlay?(s=document.createElement("input"),s.type="checkbox",s.className="leaflet-control-layers-selector",s.defaultChecked=n):s=this._createRadioElement("leaflet-base-layers_"+c(this),n),this._layerControlInputs.push(s),s.layerId=c(t.layer),D(s,"click",this._onInputClick,this);var h=document.createElement("span");h.innerHTML=" "+t.name;var d=document.createElement("span");e.appendChild(d),d.appendChild(s),d.appendChild(h);var p=t.overlay?this._overlaysList:this._baseLayersList;return p.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,n,s=[],h=[];this._handlingClick=!0;for(var d=t.length-1;d>=0;d--)e=t[d],n=this._getLayer(e.layerId).layer,e.checked?s.push(n):e.checked||h.push(n);for(d=0;d<h.length;d++)this._map.hasLayer(h[d])&&this._map.removeLayer(h[d]);for(d=0;d<s.length;d++)this._map.hasLayer(s[d])||this._map.addLayer(s[d]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,n,s=this._map.getZoom(),h=t.length-1;h>=0;h--)e=t[h],n=this._getLayer(e.layerId).layer,e.disabled=n.options.minZoom!==void 0&&s<n.options.minZoom||n.options.maxZoom!==void 0&&s>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,D(t,"click",wt),this.expand();var e=this;setTimeout(function(){J(t,"click",wt),e._preventClick=!1})}}),Ml=function(t,e,n){return new Hs(t,e,n)},wo=Vt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=W("div",e+" leaflet-bar"),s=this.options;return this._zoomInButton=this._createButton(s.zoomInText,s.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(s.zoomOutText,s.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,s,h){var d=W("a",n,s);return d.innerHTML=t,d.href="#",d.title=e,d.setAttribute("role","button"),d.setAttribute("aria-label",e),Si(d),D(d,"click",ke),D(d,"click",h,this),D(d,"click",this._refocusOnMap,this),d},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";rt(this._zoomInButton,e),rt(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(R(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(R(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});H.mergeOptions({zoomControl:!0}),H.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wo,this.addControl(this.zoomControl))});var kl=function(t){return new wo(t)},Zs=Vt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=W("div",e),s=this.options;return this._addScales(s,e+"-line",n),t.on(s.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=W("div",e,n)),t.imperial&&(this._iScale=W("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e=t*3.2808399,n,s,h;e>5280?(n=e/5280,s=this._getRoundNum(n),this._updateScale(this._iScale,s+" mi",s/n)):(h=this._getRoundNum(e),this._updateScale(this._iScale,h+" ft",h/e))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}}),Sl=function(t){return new Zs(t)},Al='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',bo=Vt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(M.inlineSvg?Al+" ":"")+"Leaflet</a>"},initialize:function(t){x(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=W("div","leaflet-control-attribution"),Si(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});H.mergeOptions({attributionControl:!0}),H.addInitHook(function(){this.options.attributionControl&&new bo().addTo(this)});var Dl=function(t){return new bo(t)};Vt.Layers=Hs,Vt.Zoom=wo,Vt.Scale=Zs,Vt.Attribution=bo,Ai.layers=Ml,Ai.zoom=kl,Ai.scale=Sl,Ai.attribution=Dl;var Kt=ot.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Kt.addTo=function(t,e){return t.addHandler(e,this),this};var Ol={Events:st},Vs=M.touch?"touchstart mousedown":"mousedown",le=St.extend({options:{clickTolerance:3},initialize:function(t,e,n,s){x(this,s),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(D(this._dragStartTarget,Vs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(le._dragging===this&&this.finishDrag(!0),J(this._dragStartTarget,Vs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ao(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){le._dragging===this&&this.finishDrag();return}if(!(le._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(le._dragging=this,this._preventOutline&&po(this._element),co(),Ci(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,n=Is(this._element);this._startPoint=new C(e.clientX,e.clientY),this._startPos=Ce(this._element),this._parentScale=_o(n);var s=t.type==="mousedown";D(document,s?"mousemove":"touchmove",this._onMove,this),D(document,s?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,n=new C(e.clientX,e.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,wt(t),this._moved||(this.fire("dragstart"),this._moved=!0,R(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),R(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ht(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){rt(document.body,"leaflet-dragging"),this._lastTarget&&(rt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),J(document,"mousemove touchmove",this._onMove,this),J(document,"mouseup touchend touchcancel",this._onUp,this),uo(),Mi();var e=this._moved&&this._moving;this._moving=!1,le._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Fs(t,e,n){var s,h=[1,4,2,8],d,p,v,y,w,T,A,z;for(d=0,T=t.length;d<T;d++)t[d]._code=Se(t[d],e);for(v=0;v<4;v++){for(A=h[v],s=[],d=0,T=t.length,p=T-1;d<T;p=d++)y=t[d],w=t[p],y._code&A?w._code&A||(z=fn(w,y,A,e,n),z._code=Se(z,e),s.push(z)):(w._code&A&&(z=fn(w,y,A,e,n),z._code=Se(z,e),s.push(z)),s.push(y));t=s}return t}function Ws(t,e){var n,s,h,d,p,v,y,w,T;if(!t||t.length===0)throw new Error("latlngs not passed");Ot(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var A=O([0,0]),z=X(t),Et=z.getNorthWest().distanceTo(z.getSouthWest())*z.getNorthEast().distanceTo(z.getNorthWest());Et<1700&&(A=Eo(t));var gt=t.length,It=[];for(n=0;n<gt;n++){var Mt=O(t[n]);It.push(e.project(O([Mt.lat-A.lat,Mt.lng-A.lng])))}for(v=y=w=0,n=0,s=gt-1;n<gt;s=n++)h=It[n],d=It[s],p=h.y*d.x-d.y*h.x,y+=(h.x+d.x)*p,w+=(h.y+d.y)*p,v+=p*3;v===0?T=It[0]:T=[y/v,w/v];var Qe=e.unproject(S(T));return O([Qe.lat+A.lat,Qe.lng+A.lng])}function Eo(t){for(var e=0,n=0,s=0,h=0;h<t.length;h++){var d=O(t[h]);e+=d.lat,n+=d.lng,s++}return O([e/s,n/s])}var Il={__proto__:null,clipPolygon:Fs,polygonCenter:Ws,centroid:Eo};function Us(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=zl(t,n),t=Rl(t,n),t}function Gs(t,e,n){return Math.sqrt(Di(t,e,n,!0))}function Nl(t,e,n){return Di(t,e,n)}function Rl(t,e){var n=t.length,s=typeof Uint8Array<"u"?Uint8Array:Array,h=new s(n);h[0]=h[n-1]=1,To(t,h,e,0,n-1);var d,p=[];for(d=0;d<n;d++)h[d]&&p.push(t[d]);return p}function To(t,e,n,s,h){var d=0,p,v,y;for(v=s+1;v<=h-1;v++)y=Di(t[v],t[s],t[h],!0),y>d&&(p=v,d=y);d>n&&(e[p]=1,To(t,e,n,s,p),To(t,e,n,p,h))}function zl(t,e){for(var n=[t[0]],s=1,h=0,d=t.length;s<d;s++)Bl(t[s],t[h])>e&&(n.push(t[s]),h=s);return h<d-1&&n.push(t[d-1]),n}var js;function Ys(t,e,n,s,h){var d=s?js:Se(t,n),p=Se(e,n),v,y,w;for(js=p;;){if(!(d|p))return[t,e];if(d&p)return!1;v=d||p,y=fn(t,e,v,n,h),w=Se(y,n),v===d?(t=y,d=w):(e=y,p=w)}}function fn(t,e,n,s,h){var d=e.x-t.x,p=e.y-t.y,v=s.min,y=s.max,w,T;return n&8?(w=t.x+d*(y.y-t.y)/p,T=y.y):n&4?(w=t.x+d*(v.y-t.y)/p,T=v.y):n&2?(w=y.x,T=t.y+p*(y.x-t.x)/d):n&1&&(w=v.x,T=t.y+p*(v.x-t.x)/d),new C(w,T,h)}function Se(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function Bl(t,e){var n=e.x-t.x,s=e.y-t.y;return n*n+s*s}function Di(t,e,n,s){var h=e.x,d=e.y,p=n.x-h,v=n.y-d,y=p*p+v*v,w;return y>0&&(w=((t.x-h)*p+(t.y-d)*v)/y,w>1?(h=n.x,d=n.y):w>0&&(h+=p*w,d+=v*w)),p=t.x-h,v=t.y-d,s?p*p+v*v:new C(h,d)}function Ot(t){return!B(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function Ks(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ot(t)}function qs(t,e){var n,s,h,d,p,v,y,w;if(!t||t.length===0)throw new Error("latlngs not passed");Ot(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var T=O([0,0]),A=X(t),z=A.getNorthWest().distanceTo(A.getSouthWest())*A.getNorthEast().distanceTo(A.getNorthWest());z<1700&&(T=Eo(t));var Et=t.length,gt=[];for(n=0;n<Et;n++){var It=O(t[n]);gt.push(e.project(O([It.lat-T.lat,It.lng-T.lng])))}for(n=0,s=0;n<Et-1;n++)s+=gt[n].distanceTo(gt[n+1])/2;if(s===0)w=gt[0];else for(n=0,d=0;n<Et-1;n++)if(p=gt[n],v=gt[n+1],h=p.distanceTo(v),d+=h,d>s){y=(d-s)/h,w=[v.x-y*(v.x-p.x),v.y-y*(v.y-p.y)];break}var Mt=e.unproject(S(w));return O([Mt.lat+T.lat,Mt.lng+T.lng])}var $l={__proto__:null,simplify:Us,pointToSegmentDistance:Gs,closestPointOnSegment:Nl,clipSegment:Ys,_getEdgeIntersection:fn,_getBitCode:Se,_sqClosestPointOnSegment:Di,isFlat:Ot,_flat:Ks,polylineCenter:qs},xo={project:function(t){return new C(t.lng,t.lat)},unproject:function(t){return new V(t.y,t.x)},bounds:new j([-180,-90],[180,90])},Po={R:6378137,R_MINOR:6356752314245179e-9,bounds:new j([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,n=this.R,s=t.lat*e,h=this.R_MINOR/n,d=Math.sqrt(1-h*h),p=d*Math.sin(s),v=Math.tan(Math.PI/4-s/2)/Math.pow((1-p)/(1+p),d/2);return s=-n*Math.log(Math.max(v,1e-10)),new C(t.lng*e*n,s)},unproject:function(t){for(var e=180/Math.PI,n=this.R,s=this.R_MINOR/n,h=Math.sqrt(1-s*s),d=Math.exp(-t.y/n),p=Math.PI/2-2*Math.atan(d),v=0,y=.1,w;v<15&&Math.abs(y)>1e-7;v++)w=h*Math.sin(p),w=Math.pow((1-w)/(1+w),h/2),y=Math.PI/2-2*Math.atan(d*w)-p,p+=y;return new V(p*e,t.x*e/n)}},Hl={__proto__:null,LonLat:xo,Mercator:Po,SphericalMercator:Zt},Zl=r({},Ct,{code:"EPSG:3395",projection:Po,transformation:function(){var t=.5/(Math.PI*Po.R);return we(t,.5,-t,.5)}()}),Xs=r({},Ct,{code:"EPSG:4326",projection:xo,transformation:we(1/180,1,-1/180,.5)}),Vl=r({},mt,{projection:xo,transformation:we(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,s=e.lat-t.lat;return Math.sqrt(n*n+s*s)},infinite:!0});mt.Earth=Ct,mt.EPSG3395=Zl,mt.EPSG3857=be,mt.EPSG900913=io,mt.EPSG4326=Xs,mt.Simple=Vl;var Ft=St.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[c(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[c(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",function(){e.off(n,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});H.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=c(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=c(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return c(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){t=t?B(t)?t:[t]:[];for(var e=0,n=t.length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[c(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=c(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var s in this._zoomBoundLayers){var h=this._zoomBoundLayers[s].options;t=h.minZoom===void 0?t:Math.min(t,h.minZoom),e=h.maxZoom===void 0?e:Math.max(e,h.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ye=Ft.extend({initialize:function(t,e){x(this,e),this._layers={};var n,s;if(t)for(n=0,s=t.length;n<s;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),n,s;for(n in this._layers)s=this._layers[n],s[t]&&s[t].apply(s,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return c(t)}}),Fl=function(t,e){return new Ye(t,e)},Jt=Ye.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Ye.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Ye.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new _t;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Wl=function(t,e){return new Jt(t,e)},Ke=ot.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){x(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var s=this._createImg(n,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(s,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),s},_setIconStyles:function(t,e){var n=this.options,s=n[e+"Size"];typeof s=="number"&&(s=[s,s]);var h=S(s),d=S(e==="shadow"&&n.shadowAnchor||n.iconAnchor||h&&h.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),d&&(t.style.marginLeft=-d.x+"px",t.style.marginTop=-d.y+"px"),h&&(t.style.width=h.x+"px",t.style.height=h.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return M.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Ul(t){return new Ke(t)}var Oi=Ke.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Oi.imagePath!="string"&&(Oi.imagePath=this._detectIconPath()),(this.options.imagePath||Oi.imagePath)+Ke.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(n,s,h){var d=s.exec(n);return d&&d[h]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=W("div","leaflet-default-icon-path",document.body),e=Pi(t,"background-image")||Pi(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),Js=Kt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new le(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),R(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&rt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,s=this._marker.options.autoPanSpeed,h=this._marker.options.autoPanPadding,d=Ce(e._icon),p=n.getPixelBounds(),v=n.getPixelOrigin(),y=dt(p.min._subtract(v).add(h),p.max._subtract(v).subtract(h));if(!y.contains(d)){var w=S((Math.max(y.max.x,d.x)-y.max.x)/(p.max.x-y.max.x)-(Math.min(y.min.x,d.x)-y.min.x)/(p.min.x-y.min.x),(Math.max(y.max.y,d.y)-y.max.y)/(p.max.y-y.max.y)-(Math.min(y.min.y,d.y)-y.min.y)/(p.min.y-y.min.y)).multiplyBy(s);n.panBy(w,{animate:!1}),this._draggable._newPos._add(w),this._draggable._startPos._add(w),ht(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=Z(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(F(this._panRequest),this._panRequest=Z(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,s=Ce(e._icon),h=e._map.layerPointToLatLng(s);n&&ht(n,s),e._latlng=h,t.latlng=h,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){F(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),pn=Ft.extend({options:{icon:new Oi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){x(this,e),this._latlng=O(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=O(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),s=!1;n!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(n.title=t.title),n.tagName==="IMG"&&(n.alt=t.alt||"")),R(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&D(n,"focus",this._panOnFocus,this);var h=t.icon.createShadow(this._shadow),d=!1;h!==this._shadow&&(this._removeShadow(),d=!0),h&&(R(h,e),h.alt=""),this._shadow=h,t.opacity<1&&this._updateOpacity(),s&&this.getPane().appendChild(this._icon),this._initInteraction(),h&&d&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&J(this._icon,"focus",this._panOnFocus,this),et(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&et(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ht(this._icon,t),this._shadow&&ht(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(R(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Js)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Js(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Dt(this._icon,t),this._shadow&&Dt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?S(e.iconSize):S(0,0),s=e.iconAnchor?S(e.iconAnchor):S(0,0);t.panInside(this._latlng,{paddingTopLeft:s,paddingBottomRight:n.subtract(s)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Gl(t,e){return new pn(t,e)}var he=Ft.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return x(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),_n=he.extend({options:{fill:!0,radius:10},initialize:function(t,e){x(this,e),this._latlng=O(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=O(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return he.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),s=[t+n,e+n];this._pxBounds=new j(this._point.subtract(s),this._point.add(s))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function jl(t,e){return new _n(t,e)}var Co=_n.extend({initialize:function(t,e,n){if(typeof e=="number"&&(e=r({},n,{radius:e})),x(this,e),this._latlng=O(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new _t(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:he.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,s=n.options.crs;if(s.distance===Ct.distance){var h=Math.PI/180,d=this._mRadius/Ct.R/h,p=n.project([e+d,t]),v=n.project([e-d,t]),y=p.add(v).divideBy(2),w=n.unproject(y).lat,T=Math.acos((Math.cos(d*h)-Math.sin(e*h)*Math.sin(w*h))/(Math.cos(e*h)*Math.cos(w*h)))/h;(isNaN(T)||T===0)&&(T=d/Math.cos(Math.PI/180*e)),this._point=y.subtract(n.getPixelOrigin()),this._radius=isNaN(T)?0:y.x-n.project([w,t-T]).x,this._radiusY=y.y-p.y}else{var A=s.unproject(s.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(A).x}this._updateBounds()}});function Yl(t,e,n){return new Co(t,e,n)}var Qt=he.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){x(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,n=null,s=Di,h,d,p=0,v=this._parts.length;p<v;p++)for(var y=this._parts[p],w=1,T=y.length;w<T;w++){h=y[w-1],d=y[w];var A=s(t,h,d,!0);A<e&&(e=A,n=s(t,h,d))}return n&&(n.distance=Math.sqrt(e)),n},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qs(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=O(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new _t,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ot(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=Ot(t),s=0,h=t.length;s<h;s++)n?(e[s]=O(t[s]),this._bounds.extend(e[s])):e[s]=this._convertLatLngs(t[s]);return e},_project:function(){var t=new j;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new C(t,t);this._rawPxBounds&&(this._pxBounds=new j([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var s=t[0]instanceof V,h=t.length,d,p;if(s){for(p=[],d=0;d<h;d++)p[d]=this._map.latLngToLayerPoint(t[d]),n.extend(p[d]);e.push(p)}else for(d=0;d<h;d++)this._projectLatlngs(t[d],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,n,s,h,d,p,v,y;for(n=0,h=0,d=this._rings.length;n<d;n++)for(y=this._rings[n],s=0,p=y.length;s<p-1;s++)v=Ys(y[s],y[s+1],t,s,!0),v&&(e[h]=e[h]||[],e[h].push(v[0]),(v[1]!==y[s+1]||s===p-2)&&(e[h].push(v[1]),h++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,s=t.length;n<s;n++)t[n]=Us(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,s,h,d,p,v,y=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,d=this._parts.length;n<d;n++)for(v=this._parts[n],s=0,p=v.length,h=p-1;s<p;h=s++)if(!(!e&&s===0)&&Gs(t,v[h],v[s])<=y)return!0;return!1}});function Kl(t,e){return new Qt(t,e)}Qt._flat=Ks;var qe=Qt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ws(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=Qt.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof V&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Qt.prototype._setLatLngs.call(this,t),Ot(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ot(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new C(e,e);if(t=new j(t.min.subtract(n),t.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var s=0,h=this._rings.length,d;s<h;s++)d=Fs(this._rings[s],t,!0),d.length&&this._parts.push(d)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,n,s,h,d,p,v,y,w;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(d=0,y=this._parts.length;d<y;d++)for(n=this._parts[d],p=0,w=n.length,v=w-1;p<w;v=p++)s=n[p],h=n[v],s.y>t.y!=h.y>t.y&&t.x<(h.x-s.x)*(t.y-s.y)/(h.y-s.y)+s.x&&(e=!e);return e||Qt.prototype._containsPoint.call(this,t,!0)}});function ql(t,e){return new qe(t,e)}var te=Jt.extend({initialize:function(t,e){x(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=B(t)?t:t.features,n,s,h;if(e){for(n=0,s=e.length;n<s;n++)h=e[n],(h.geometries||h.geometry||h.features||h.coordinates)&&this.addData(h);return this}var d=this.options;if(d.filter&&!d.filter(t))return this;var p=mn(t,d);return p?(p.feature=yn(t),p.defaultOptions=p.options,this.resetStyle(p),d.onEachFeature&&d.onEachFeature(t,p),this.addLayer(p)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=r({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function mn(t,e){var n=t.type==="Feature"?t.geometry:t,s=n?n.coordinates:null,h=[],d=e&&e.pointToLayer,p=e&&e.coordsToLatLng||Mo,v,y,w,T;if(!s&&!n)return null;switch(n.type){case"Point":return v=p(s),Qs(d,t,v,e);case"MultiPoint":for(w=0,T=s.length;w<T;w++)v=p(s[w]),h.push(Qs(d,t,v,e));return new Jt(h);case"LineString":case"MultiLineString":return y=gn(s,n.type==="LineString"?0:1,p),new Qt(y,e);case"Polygon":case"MultiPolygon":return y=gn(s,n.type==="Polygon"?1:2,p),new qe(y,e);case"GeometryCollection":for(w=0,T=n.geometries.length;w<T;w++){var A=mn({geometry:n.geometries[w],type:"Feature",properties:t.properties},e);A&&h.push(A)}return new Jt(h);case"FeatureCollection":for(w=0,T=n.features.length;w<T;w++){var z=mn(n.features[w],e);z&&h.push(z)}return new Jt(h);default:throw new Error("Invalid GeoJSON object.")}}function Qs(t,e,n,s){return t?t(e,n):new pn(n,s&&s.markersInheritOptions&&s)}function Mo(t){return new V(t[1],t[0],t[2])}function gn(t,e,n){for(var s=[],h=0,d=t.length,p;h<d;h++)p=e?gn(t[h],e-1,n):(n||Mo)(t[h]),s.push(p);return s}function ko(t,e){return t=O(t),t.alt!==void 0?[g(t.lng,e),g(t.lat,e),g(t.alt,e)]:[g(t.lng,e),g(t.lat,e)]}function vn(t,e,n,s){for(var h=[],d=0,p=t.length;d<p;d++)h.push(e?vn(t[d],Ot(t[d])?0:e-1,n,s):ko(t[d],s));return!e&&n&&h.length>0&&h.push(h[0].slice()),h}function Xe(t,e){return t.feature?r({},t.feature,{geometry:e}):yn(e)}function yn(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var So={toGeoJSON:function(t){return Xe(this,{type:"Point",coordinates:ko(this.getLatLng(),t)})}};pn.include(So),Co.include(So),_n.include(So),Qt.include({toGeoJSON:function(t){var e=!Ot(this._latlngs),n=vn(this._latlngs,e?1:0,!1,t);return Xe(this,{type:(e?"Multi":"")+"LineString",coordinates:n})}}),qe.include({toGeoJSON:function(t){var e=!Ot(this._latlngs),n=e&&!Ot(this._latlngs[0]),s=vn(this._latlngs,n?2:e?1:0,!0,t);return e||(s=[s]),Xe(this,{type:(n?"Multi":"")+"Polygon",coordinates:s})}}),Ye.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(n){e.push(n.toGeoJSON(t).geometry.coordinates)}),Xe(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var n=e==="GeometryCollection",s=[];return this.eachLayer(function(h){if(h.toGeoJSON){var d=h.toGeoJSON(t);if(n)s.push(d.geometry);else{var p=yn(d);p.type==="FeatureCollection"?s.push.apply(s,p.features):s.push(p)}}}),n?Xe(this,{geometries:s,type:"GeometryCollection"}):{type:"FeatureCollection",features:s}}});function tr(t,e){return new te(t,e)}var Xl=tr,Ln=Ft.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=X(e),x(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(R(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){et(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Ge(this._image),this},bringToBack:function(){return this._map&&je(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=X(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:W("img");if(R(e,"leaflet-image-layer"),this._zoomAnimated&&R(e,"leaflet-zoom-animated"),this.options.className&&R(e,this.options.className),e.onselectstart=m,e.onmousemove=m,e.onload=o(this.fire,this,"load"),e.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Pe(this._image,n,e)},_reset:function(){var t=this._image,e=new j(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ht(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){Dt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Jl=function(t,e,n){return new Ln(t,e,n)},er=Ln.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:W("video");if(R(e,"leaflet-image-layer"),this._zoomAnimated&&R(e,"leaflet-zoom-animated"),this.options.className&&R(e,this.options.className),e.onselectstart=m,e.onmousemove=m,e.onloadeddata=o(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),s=[],h=0;h<n.length;h++)s.push(n[h].src);this._url=n.length>0?s:[e.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var d=0;d<this._url.length;d++){var p=W("source");p.src=this._url[d],e.appendChild(p)}}});function Ql(t,e,n){return new er(t,e,n)}var ir=Ln.extend({_initImage:function(){var t=this._image=this._url;R(t,"leaflet-image-layer"),this._zoomAnimated&&R(t,"leaflet-zoom-animated"),this.options.className&&R(t,this.options.className),t.onselectstart=m,t.onmousemove=m}});function th(t,e,n){return new ir(t,e,n)}var qt=Ft.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof V||B(t))?(this._latlng=O(t),x(this,e)):(x(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Dt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Dt(this._container,1),this.bringToFront(),this.options.interactive&&(R(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Dt(this._container,0),this._removeTimeout=setTimeout(o(et,void 0,this._container),200)):et(this._container),this.options.interactive&&(rt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=O(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ge(this._container),this},bringToBack:function(){return this._map&&je(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Jt){e=null;var n=this._source._layers;for(var s in n)if(n[s]._map){e=n[s];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=S(this.options.offset),n=this._getAnchor();this._zoomAnimated?ht(this._container,t.add(n)):e=e.add(t).add(n);var s=this._containerBottom=-e.y,h=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=s+"px",this._container.style.left=h+"px"}},_getAnchor:function(){return[0,0]}});H.include({_initOverlay:function(t,e,n,s){var h=e;return h instanceof t||(h=new t(s).setContent(e)),n&&h.setLatLng(n),h}}),Ft.include({_initOverlay:function(t,e,n,s){var h=n;return h instanceof t?(x(h,s),h._source=this):(h=e&&!s?e:new t(s,this),h.setContent(n)),h}});var wn=qt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,qt.prototype.openOn.call(this,t)},onAdd:function(t){qt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof he||this._source.on("preclick",Me))},onRemove:function(t){qt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof he||this._source.off("preclick",Me))},getEvents:function(){var t=qt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=W("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=W("div",t+"-content-wrapper",e);if(this._contentNode=W("div",t+"-content",n),Si(e),yo(this._contentNode),D(e,"contextmenu",Me),this._tipContainer=W("div",t+"-tip-container",e),this._tip=W("div",t+"-tip",this._tipContainer),this.options.closeButton){var s=this._closeButton=W("a",t+"-close-button",e);s.setAttribute("role","button"),s.setAttribute("aria-label","Close popup"),s.href="#close",s.innerHTML='<span aria-hidden="true">&#215;</span>',D(s,"click",function(h){wt(h),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var s=t.offsetHeight,h=this.options.maxHeight,d="leaflet-popup-scrolled";h&&s>h?(e.height=h+"px",R(t,d)):rt(t,d),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ht(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Pi(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,s=this._containerWidth,h=new C(this._containerLeft,-n-this._containerBottom);h._add(Ce(this._container));var d=t.layerPointToContainerPoint(h),p=S(this.options.autoPanPadding),v=S(this.options.autoPanPaddingTopLeft||p),y=S(this.options.autoPanPaddingBottomRight||p),w=t.getSize(),T=0,A=0;d.x+s+y.x>w.x&&(T=d.x+s-w.x+y.x),d.x-T-v.x<0&&(T=d.x-v.x),d.y+n+y.y>w.y&&(A=d.y+n-w.y+y.y),d.y-A-v.y<0&&(A=d.y-v.y),(T||A)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([T,A]))}},_getAnchor:function(){return S(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),eh=function(t,e){return new wn(t,e)};H.mergeOptions({closePopupOnClick:!0}),H.include({openPopup:function(t,e,n){return this._initOverlay(wn,t,e,n).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Ft.include({bindPopup:function(t,e){return this._popup=this._initOverlay(wn,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Jt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){ke(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof he)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var bn=qt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){qt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){qt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=qt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=W("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,s=this._map,h=this._container,d=s.latLngToContainerPoint(s.getCenter()),p=s.layerPointToContainerPoint(t),v=this.options.direction,y=h.offsetWidth,w=h.offsetHeight,T=S(this.options.offset),A=this._getAnchor();v==="top"?(e=y/2,n=w):v==="bottom"?(e=y/2,n=0):v==="center"?(e=y/2,n=w/2):v==="right"?(e=0,n=w/2):v==="left"?(e=y,n=w/2):p.x<d.x?(v="right",e=0,n=w/2):(v="left",e=y+(T.x+A.x)*2,n=w/2),t=t.subtract(S(e,n,!0)).add(T).add(A),rt(h,"leaflet-tooltip-right"),rt(h,"leaflet-tooltip-left"),rt(h,"leaflet-tooltip-top"),rt(h,"leaflet-tooltip-bottom"),R(h,"leaflet-tooltip-"+v),ht(h,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Dt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return S(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ih=function(t,e){return new bn(t,e)};H.include({openTooltip:function(t,e,n){return this._initOverlay(bn,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Ft.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(bn,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Jt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(D(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),D(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,n,s;this._tooltip.options.sticky&&t.originalEvent&&(n=this._map.mouseEventToContainerPoint(t.originalEvent),s=this._map.containerPointToLayerPoint(n),e=this._map.layerPointToLatLng(s)),this._tooltip.setLatLng(e)}});var nr=Ke.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ln(e),e.appendChild(n.html)):e.innerHTML=n.html!==!1?n.html:"",n.bgPos){var s=S(n.bgPos);e.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function nh(t){return new nr(t)}Ke.Default=Oi;var Ii=Ft.extend({options:{tileSize:256,opacity:1,updateWhenIdle:M.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){x(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),et(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ge(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(je(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof C?t:new C(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,n=-t(-1/0,1/0),s=0,h=e.length,d;s<h;s++)d=e[s].style.zIndex,e[s]!==this._container&&d&&(n=t(n,+d));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!M.ielt9){Dt(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var s in this._tiles){var h=this._tiles[s];if(!(!h.current||!h.loaded)){var d=Math.min(1,(t-h.loaded)/200);Dt(h.el,d),d<1?e=!0:(h.active?n=!0:this._onOpaqueTile(h),h.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(F(this._fadeFrame),this._fadeFrame=Z(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=W("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(et(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var s=this._levels[t],h=this._map;return s||(s=this._levels[t]={},s.el=W("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=e,s.origin=h.project(h.unproject(h.getPixelOrigin()),t).round(),s.zoom=t,this._setZoomTransform(s,h.getCenter(),h.getZoom()),m(s.el.offsetWidth),this._onCreateLevel(s)),this._level=s,s}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var s=e.coords;this._retainParent(s.x,s.y,s.z,s.z-5)||this._retainChildren(s.x,s.y,s.z,s.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)et(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,s){var h=Math.floor(t/2),d=Math.floor(e/2),p=n-1,v=new C(+h,+d);v.z=+p;var y=this._tileCoordsToKey(v),w=this._tiles[y];return w&&w.active?(w.retain=!0,!0):(w&&w.loaded&&(w.retain=!0),p>s?this._retainParent(h,d,p,s):!1)},_retainChildren:function(t,e,n,s){for(var h=2*t;h<2*t+2;h++)for(var d=2*e;d<2*e+2;d++){var p=new C(h,d);p.z=n+1;var v=this._tileCoordsToKey(p),y=this._tiles[v];if(y&&y.active){y.retain=!0;continue}else y&&y.loaded&&(y.retain=!0);n+1<s&&this._retainChildren(h,d,n+1,s)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,s){var h=Math.round(e);this.options.maxZoom!==void 0&&h>this.options.maxZoom||this.options.minZoom!==void 0&&h<this.options.minZoom?h=void 0:h=this._clampZoom(h);var d=this.options.updateWhenZooming&&h!==this._tileZoom;(!s||d)&&(this._tileZoom=h,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),h!==void 0&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var s=this._map.getZoomScale(n,t.zoom),h=t.origin.multiplyBy(s).subtract(this._map._getNewPixelOrigin(e,n)).round();M.any3d?Pe(t.el,h,s):ht(t.el,h)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),s=this._tileZoom,h=this._map.getPixelWorldBounds(this._tileZoom);h&&(this._globalTileRange=this._pxBoundsToTileRange(h)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],s).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],s).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],s).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],s).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),s=e.getZoomScale(n,this._tileZoom),h=e.project(t,this._tileZoom).floor(),d=e.getSize().divideBy(s*2);return new j(h.subtract(d),h.add(d))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var s=this._getTiledPixelBounds(t),h=this._pxBoundsToTileRange(s),d=h.getCenter(),p=[],v=this.options.keepBuffer,y=new j(h.getBottomLeft().subtract([v,-v]),h.getTopRight().add([v,-v]));if(!(isFinite(h.min.x)&&isFinite(h.min.y)&&isFinite(h.max.x)&&isFinite(h.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var w in this._tiles){var T=this._tiles[w].coords;(T.z!==this._tileZoom||!y.contains(new C(T.x,T.y)))&&(this._tiles[w].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(t,n);return}for(var A=h.min.y;A<=h.max.y;A++)for(var z=h.min.x;z<=h.max.x;z++){var Et=new C(z,A);if(Et.z=this._tileZoom,!!this._isValidTile(Et)){var gt=this._tiles[this._tileCoordsToKey(Et)];gt?gt.current=!0:p.push(Et)}}if(p.sort(function(Mt,Qe){return Mt.distanceTo(d)-Qe.distanceTo(d)}),p.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var It=document.createDocumentFragment();for(z=0;z<p.length;z++)this._addTile(p[z],It);this._level.el.appendChild(It)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var s=this._tileCoordsToBounds(t);return X(this.options.bounds).overlaps(s)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),s=t.scaleBy(n),h=s.add(n),d=e.unproject(s,t.z),p=e.unproject(h,t.z);return[d,p]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new _t(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new C(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(et(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){R(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=m,t.onmousemove=m,M.ielt9&&this.options.opacity<1&&Dt(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),s=this._tileCoordsToKey(t),h=this.createTile(this._wrapCoords(t),o(this._tileReady,this,t));this._initTile(h),this.createTile.length<2&&Z(o(this._tileReady,this,t,null,h)),ht(h,n),this._tiles[s]={el:h,coords:t,current:!0},e.appendChild(h),this.fire("tileloadstart",{tile:h,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var s=this._tileCoordsToKey(t);n=this._tiles[s],n&&(n.loaded=+new Date,this._map._fadeAnimated?(Dt(n.el,0),F(this._fadeFrame),this._fadeFrame=Z(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(R(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),M.ielt9||!this._map._fadeAnimated?Z(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new C(this._wrapX?_(t.x,this._wrapX):t.x,this._wrapY?_(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new j(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function oh(t){return new Ii(t)}var Je=Ii.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=x(this,e),e.detectRetina&&M.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return D(n,"load",o(this._tileOnLoad,this,e,n)),D(n,"error",o(this._tileOnError,this,e,n)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:M.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return $(this._url,r(e,this.options))},_tileOnLoad:function(t,e){M.ielt9?setTimeout(o(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var s=this.options.errorTileUrl;s&&e.getAttribute("src")!==s&&(e.src=s),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,n=this.options.zoomReverse,s=this.options.zoomOffset;return n&&(t=e-t),t+s},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=m,e.onerror=m,!e.complete)){e.src=K;var n=this._tiles[t].coords;et(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",K),Ii.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(!(!this._map||n&&n.getAttribute("src")===K))return Ii.prototype._tileReady.call(this,t,e,n)}});function or(t,e){return new Je(t,e)}var sr=Je.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=r({},this.defaultWmsParams);for(var s in e)s in this.options||(n[s]=e[s]);e=x(this,e);var h=e.detectRetina&&M.retina?2:1,d=this.getTileSize();n.width=d.x*h,n.height=d.y*h,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Je.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,s=dt(n.project(e[0]),n.project(e[1])),h=s.min,d=s.max,p=(this._wmsVersion>=1.3&&this._crs===Xs?[h.y,h.x,d.y,d.x]:[h.x,h.y,d.x,d.y]).join(","),v=Je.prototype.getTileUrl.call(this,t);return v+Y(this.wmsParams,v,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+p},setParams:function(t,e){return r(this.wmsParams,t),e||this.redraw(),this}});function sh(t,e){return new sr(t,e)}Je.WMS=sr,or.wms=sh;var ee=Ft.extend({options:{padding:.1},initialize:function(t){x(this,t),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),R(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),s=this._map.getSize().multiplyBy(.5+this.options.padding),h=this._map.project(this._center,e),d=s.multiplyBy(-n).add(h).subtract(this._map._getNewPixelOrigin(t,e));M.any3d?Pe(this._container,d,n):ht(this._container,d)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new j(n,n.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),rr=ee.extend({options:{tolerance:0},getEvents:function(){var t=ee.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ee.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");D(t,"mousemove",this._onMouseMove,this),D(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),D(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){F(this._redrawRequest),delete this._ctx,et(this._container),J(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ee.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),s=M.retina?2:1;ht(e,t.min),e.width=s*n.x,e.height=s*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",M.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ee.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[c(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,s=e.prev;n?n.prev=s:this._drawLast=s,s?s.next=n:this._drawFirst=n,delete t._order,delete this._layers[c(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),n=[],s,h;for(h=0;h<e.length;h++){if(s=Number(e[h]),isNaN(s))return;n.push(s)}t.options._dashArray=n}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||Z(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new j,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var s=this._drawFirst;s;s=s.next)t=s.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,s,h,d,p=t._parts,v=p.length,y=this._ctx;if(v){for(y.beginPath(),n=0;n<v;n++){for(s=0,h=p[n].length;s<h;s++)d=p[n][s],y[s?"lineTo":"moveTo"](d.x,d.y);e&&y.closePath()}this._fillStroke(y,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,n=this._ctx,s=Math.max(Math.round(t._radius),1),h=(Math.max(Math.round(t._radiusY),1)||s)/s;h!==1&&(n.save(),n.scale(1,h)),n.beginPath(),n.arc(e.x,e.y/h,s,0,Math.PI*2,!1),h!==1&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&n.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),n,s,h=this._drawFirst;h;h=h.next)n=h.layer,n.options.interactive&&n._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(n))&&(s=n);this._fireEvent(s?[s]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(rt(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,s,h=this._drawFirst;h;h=h.next)n=h.layer,n.options.interactive&&n._containsPoint(e)&&(s=n);s!==this._hoveredLayer&&(this._handleMouseOut(t),s&&(R(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseover"),this._hoveredLayer=s)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,s=e.prev;if(n)n.prev=s;else return;s?s.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,s=e.prev;if(s)s.next=n;else return;n?n.prev=s:s&&(this._drawLast=s),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function ar(t){return M.canvas?new rr(t):null}var Ni=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),rh={_initContainer:function(){this._container=W("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ee.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Ni("shape");R(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Ni("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[c(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;et(e),t.removeInteractiveTarget(e),delete this._layers[c(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,s=t.options,h=t._container;h.stroked=!!s.stroke,h.filled=!!s.fill,s.stroke?(e||(e=t._stroke=Ni("stroke")),h.appendChild(e),e.weight=s.weight+"px",e.color=s.color,e.opacity=s.opacity,s.dashArray?e.dashStyle=B(s.dashArray)?s.dashArray.join(" "):s.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=s.lineCap.replace("butt","flat"),e.joinstyle=s.lineJoin):e&&(h.removeChild(e),t._stroke=null),s.fill?(n||(n=t._fill=Ni("fill")),h.appendChild(n),n.color=s.fillColor||s.color,n.opacity=s.fillOpacity):n&&(h.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),s=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+s+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Ge(t._container)},_bringToBack:function(t){je(t._container)}},En=M.vml?Ni:vi,Ri=ee.extend({_initContainer:function(){this._container=En("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=En("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){et(this._container),J(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ee.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ht(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=En("path");t.options.className&&R(e,t.options.className),t.options.interactive&&R(e,"leaflet-interactive"),this._updateStyle(t),this._layers[c(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){et(t._path),t.removeInteractiveTarget(t._path),delete this._layers[c(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,tn(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),s=Math.max(Math.round(t._radiusY),1)||n,h="a"+n+","+s+" 0 1,0 ",d=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+h+n*2+",0 "+h+-n*2+",0 ";this._setPath(t,d)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Ge(t._path)},_bringToBack:function(t){je(t._path)}});M.vml&&Ri.include(rh);function lr(t){return M.svg||M.vml?new Ri(t):null}H.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ar(t)||lr(t)}});var hr=qe.extend({initialize:function(t,e){qe.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=X(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function ah(t,e){return new hr(t,e)}Ri.create=En,Ri.pointsToPath=tn,te.geometryToLayer=mn,te.coordsToLatLng=Mo,te.coordsToLatLngs=gn,te.latLngToCoords=ko,te.latLngsToCoords=vn,te.getFeature=Xe,te.asFeature=yn,H.mergeOptions({boxZoom:!0});var cr=Kt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){D(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){J(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){et(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ci(),co(),this._startPoint=this._map.mouseEventToContainerPoint(t),D(document,{contextmenu:ke,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=W("div","leaflet-zoom-box",this._container),R(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new j(this._point,this._startPoint),n=e.getSize();ht(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(et(this._box),rt(this._container,"leaflet-crosshair")),Mi(),uo(),J(document,{contextmenu:ke,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var e=new _t(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});H.addInitHook("addHandler","boxZoom",cr),H.mergeOptions({doubleClickZoom:!0});var ur=Kt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),s=e.options.zoomDelta,h=t.originalEvent.shiftKey?n-s:n+s;e.options.doubleClickZoom==="center"?e.setZoom(h):e.setZoomAround(t.containerPoint,h)}});H.addInitHook("addHandler","doubleClickZoom",ur),H.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var dr=Kt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new le(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}R(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){rt(this._map._container,"leaflet-grab"),rt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=X(this._map.options.maxBounds);this._offsetLimit=dt(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,s=this._draggable._newPos.x,h=(s-e+n)%t+e-n,d=(s+e+n)%t-e-n,p=Math.abs(h+n)<Math.abs(d+n)?h:d;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=p},_onDragEnd:function(t){var e=this._map,n=e.options,s=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),s)e.fire("moveend");else{this._prunePositions(+new Date);var h=this._lastPos.subtract(this._positions[0]),d=(this._lastTime-this._times[0])/1e3,p=n.easeLinearity,v=h.multiplyBy(p/d),y=v.distanceTo([0,0]),w=Math.min(n.inertiaMaxSpeed,y),T=v.multiplyBy(w/y),A=w/(n.inertiaDeceleration*p),z=T.multiplyBy(-A/2).round();!z.x&&!z.y?e.fire("moveend"):(z=e._limitOffset(z,e.options.maxBounds),Z(function(){e.panBy(z,{duration:A,easeLinearity:p,noMoveStart:!0,animate:!0})}))}}});H.addInitHook("addHandler","dragging",dr),H.mergeOptions({keyboard:!0,keyboardPanDelta:80});var fr=Kt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),D(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),J(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,s=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(s,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},n=this.keyCodes,s,h;for(s=0,h=n.left.length;s<h;s++)e[n.left[s]]=[-1*t,0];for(s=0,h=n.right.length;s<h;s++)e[n.right[s]]=[t,0];for(s=0,h=n.down.length;s<h;s++)e[n.down[s]]=[0,t];for(s=0,h=n.up.length;s<h;s++)e[n.up[s]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},n=this.keyCodes,s,h;for(s=0,h=n.zoomIn.length;s<h;s++)e[n.zoomIn[s]]=t;for(s=0,h=n.zoomOut.length;s<h;s++)e[n.zoomOut[s]]=-t},_addHooks:function(){D(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){J(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,n=this._map,s;if(e in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(s=this._panKeys[e],t.shiftKey&&(s=S(s).multiplyBy(3)),n.options.maxBounds&&(s=n._limitOffset(S(s),n.options.maxBounds)),n.options.worldCopyJump){var h=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(s)));n.panTo(h)}else n.panBy(s)}else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;ke(t)}}});H.addInitHook("addHandler","keyboard",fr),H.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var pr=Kt.extend({addHooks:function(){D(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){J(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Bs(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var s=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),s),ke(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var s=this._delta/(this._map.options.wheelPxPerZoomLevel*4),h=4*Math.log(2/(1+Math.exp(-Math.abs(s))))/Math.LN2,d=n?Math.ceil(h/n)*n:h,p=t._limitZoom(e+(this._delta>0?d:-d))-e;this._delta=0,this._startTime=null,p&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+p):t.setZoomAround(this._lastMousePos,e+p))}});H.addInitHook("addHandler","scrollWheelZoom",pr);var lh=600;H.mergeOptions({tapHold:M.touchNative&&M.safari&&M.mobile,tapTolerance:15});var _r=Kt.extend({addHooks:function(){D(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){J(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new C(e.clientX,e.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(D(document,"touchend",wt),D(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),lh),D(document,"touchend touchcancel contextmenu",this._cancel,this),D(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){J(document,"touchend",wt),J(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),J(document,"touchend touchcancel contextmenu",this._cancel,this),J(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new C(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});H.addInitHook("addHandler","tapHold",_r),H.mergeOptions({touchZoom:M.touch,bounceAtZoomLimits:!0});var mr=Kt.extend({addHooks:function(){R(this._map._container,"leaflet-touch-zoom"),D(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){rt(this._map._container,"leaflet-touch-zoom"),J(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var n=e.mouseEventToContainerPoint(t.touches[0]),s=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(s)._divideBy(2))),this._startDist=n.distanceTo(s),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),D(document,"touchmove",this._onTouchMove,this),D(document,"touchend touchcancel",this._onTouchEnd,this),wt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),s=e.mouseEventToContainerPoint(t.touches[1]),h=n.distanceTo(s)/this._startDist;if(this._zoom=e.getScaleZoom(h,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&h<1||this._zoom>e.getMaxZoom()&&h>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,h===1)return}else{var d=n._add(s)._divideBy(2)._subtract(this._centerPoint);if(h===1&&d.x===0&&d.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(d),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),F(this._animRequest);var p=o(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Z(p,this,!0),wt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,F(this._animRequest),J(document,"touchmove",this._onTouchMove,this),J(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});H.addInitHook("addHandler","touchZoom",mr),H.BoxZoom=cr,H.DoubleClickZoom=ur,H.Drag=dr,H.Keyboard=fr,H.ScrollWheelZoom=pr,H.TapHold=_r,H.TouchZoom=mr,a.Bounds=j,a.Browser=M,a.CRS=mt,a.Canvas=rr,a.Circle=Co,a.CircleMarker=_n,a.Class=ot,a.Control=Vt,a.DivIcon=nr,a.DivOverlay=qt,a.DomEvent=Pl,a.DomUtil=Tl,a.Draggable=le,a.Evented=St,a.FeatureGroup=Jt,a.GeoJSON=te,a.GridLayer=Ii,a.Handler=Kt,a.Icon=Ke,a.ImageOverlay=Ln,a.LatLng=V,a.LatLngBounds=_t,a.Layer=Ft,a.LayerGroup=Ye,a.LineUtil=$l,a.Map=H,a.Marker=pn,a.Mixin=Ol,a.Path=he,a.Point=C,a.PolyUtil=Il,a.Polygon=qe,a.Polyline=Qt,a.Popup=wn,a.PosAnimation=$s,a.Projection=Hl,a.Rectangle=hr,a.Renderer=ee,a.SVG=Ri,a.SVGOverlay=ir,a.TileLayer=Je,a.Tooltip=bn,a.Transformation=Le,a.Util=pt,a.VideoOverlay=er,a.bind=o,a.bounds=dt,a.canvas=ar,a.circle=Yl,a.circleMarker=jl,a.control=Ai,a.divIcon=nh,a.extend=r,a.featureGroup=Wl,a.geoJSON=tr,a.geoJson=Xl,a.gridLayer=oh,a.icon=Ul,a.imageOverlay=Jl,a.latLng=O,a.latLngBounds=X,a.layerGroup=Fl,a.map=Cl,a.marker=Gl,a.point=S,a.polygon=ql,a.polyline=Kl,a.popup=eh,a.rectangle=ah,a.setOptions=x,a.stamp=c,a.svg=lr,a.svgOverlay=th,a.tileLayer=or,a.tooltip=ih,a.transformation=we,a.version=i,a.videoOverlay=Ql;var hh=window.L;a.noConflict=function(){return window.L=hh,this},window.L=a})});var In={};Th(In,{afterMain:()=>xr,afterRead:()=>br,afterWrite:()=>Mr,applyStyles:()=>ei,arrow:()=>Pn,auto:()=>zi,basePlacements:()=>ie,beforeMain:()=>Er,beforeRead:()=>Lr,beforeWrite:()=>Pr,bottom:()=>ut,clippingParents:()=>Oo,computeStyles:()=>ni,createPopper:()=>Gi,createPopperBase:()=>zr,createPopperLite:()=>Br,detectOverflow:()=>xt,end:()=>ce,eventListeners:()=>oi,flip:()=>Sn,hide:()=>An,left:()=>nt,main:()=>Tr,modifierPhases:()=>No,offset:()=>Dn,placements:()=>$i,popper:()=>Ae,popperGenerator:()=>$e,popperOffsets:()=>ai,preventOverflow:()=>On,read:()=>wr,reference:()=>Io,right:()=>at,start:()=>Xt,top:()=>it,variationPlacements:()=>xn,viewport:()=>Bi,write:()=>Cr});var it="top",ut="bottom",at="right",nt="left",zi="auto",ie=[it,ut,at,nt],Xt="start",ce="end",Oo="clippingParents",Bi="viewport",Ae="popper",Io="reference",xn=ie.reduce(function(a,i){return a.concat([i+"-"+Xt,i+"-"+ce])},[]),$i=[].concat(ie,[zi]).reduce(function(a,i){return a.concat([i,i+"-"+Xt,i+"-"+ce])},[]),Lr="beforeRead",wr="read",br="afterRead",Er="beforeMain",Tr="main",xr="afterMain",Pr="beforeWrite",Cr="write",Mr="afterWrite",No=[Lr,wr,br,Er,Tr,xr,Pr,Cr,Mr];function vt(a){return a?(a.nodeName||"").toLowerCase():null}function tt(a){if(a==null)return window;if(a.toString()!=="[object Window]"){var i=a.ownerDocument;return i&&i.defaultView||window}return a}function Nt(a){var i=tt(a).Element;return a instanceof i||a instanceof Element}function ft(a){var i=tt(a).HTMLElement;return a instanceof i||a instanceof HTMLElement}function ti(a){if(typeof ShadowRoot>"u")return!1;var i=tt(a).ShadowRoot;return a instanceof i||a instanceof ShadowRoot}function Ch(a){var i=a.state;Object.keys(i.elements).forEach(function(r){var u=i.styles[r]||{},o=i.attributes[r]||{},l=i.elements[r];!ft(l)||!vt(l)||(Object.assign(l.style,u),Object.keys(o).forEach(function(c){var f=o[c];f===!1?l.removeAttribute(c):l.setAttribute(c,f===!0?"":f)}))})}function Mh(a){var i=a.state,r={popper:{position:i.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(i.elements.popper.style,r.popper),i.styles=r,i.elements.arrow&&Object.assign(i.elements.arrow.style,r.arrow),function(){Object.keys(i.elements).forEach(function(u){var o=i.elements[u],l=i.attributes[u]||{},c=Object.keys(i.styles.hasOwnProperty(u)?i.styles[u]:r[u]),f=c.reduce(function(_,m){return _[m]="",_},{});!ft(o)||!vt(o)||(Object.assign(o.style,f),Object.keys(l).forEach(function(_){o.removeAttribute(_)}))})}}var ei={name:"applyStyles",enabled:!0,phase:"write",fn:Ch,effect:Mh,requires:["computeStyles"]};function yt(a){return a.split("-")[0]}var Wt=Math.max,De=Math.min,ne=Math.round;function ii(){var a=navigator.userAgentData;return a!=null&&a.brands&&Array.isArray(a.brands)?a.brands.map(function(i){return i.brand+"/"+i.version}).join(" "):navigator.userAgent}function Hi(){return!/^((?!chrome|android).)*safari/i.test(ii())}function Rt(a,i,r){i===void 0&&(i=!1),r===void 0&&(r=!1);var u=a.getBoundingClientRect(),o=1,l=1;i&&ft(a)&&(o=a.offsetWidth>0&&ne(u.width)/a.offsetWidth||1,l=a.offsetHeight>0&&ne(u.height)/a.offsetHeight||1);var c=Nt(a)?tt(a):window,f=c.visualViewport,_=!Hi()&&r,m=(u.left+(_&&f?f.offsetLeft:0))/o,g=(u.top+(_&&f?f.offsetTop:0))/l,E=u.width/o,P=u.height/l;return{width:E,height:P,top:g,right:m+E,bottom:g+P,left:m,x:m,y:g}}function Oe(a){var i=Rt(a),r=a.offsetWidth,u=a.offsetHeight;return Math.abs(i.width-r)<=1&&(r=i.width),Math.abs(i.height-u)<=1&&(u=i.height),{x:a.offsetLeft,y:a.offsetTop,width:r,height:u}}function Zi(a,i){var r=i.getRootNode&&i.getRootNode();if(a.contains(i))return!0;if(r&&ti(r)){var u=i;do{if(u&&a.isSameNode(u))return!0;u=u.parentNode||u.host}while(u)}return!1}function Tt(a){return tt(a).getComputedStyle(a)}function Ro(a){return["table","td","th"].indexOf(vt(a))>=0}function bt(a){return((Nt(a)?a.ownerDocument:a.document)||window.document).documentElement}function oe(a){return vt(a)==="html"?a:a.assignedSlot||a.parentNode||(ti(a)?a.host:null)||bt(a)}function kr(a){return!ft(a)||Tt(a).position==="fixed"?null:a.offsetParent}function kh(a){var i=/firefox/i.test(ii()),r=/Trident/i.test(ii());if(r&&ft(a)){var u=Tt(a);if(u.position==="fixed")return null}var o=oe(a);for(ti(o)&&(o=o.host);ft(o)&&["html","body"].indexOf(vt(o))<0;){var l=Tt(o);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||i&&l.willChange==="filter"||i&&l.filter&&l.filter!=="none")return o;o=o.parentNode}return null}function Ut(a){for(var i=tt(a),r=kr(a);r&&Ro(r)&&Tt(r).position==="static";)r=kr(r);return r&&(vt(r)==="html"||vt(r)==="body"&&Tt(r).position==="static")?i:r||kh(a)||i}function Ie(a){return["top","bottom"].indexOf(a)>=0?"x":"y"}function Ne(a,i,r){return Wt(a,De(i,r))}function Sr(a,i,r){var u=Ne(a,i,r);return u>r?r:u}function Vi(){return{top:0,right:0,bottom:0,left:0}}function Fi(a){return Object.assign({},Vi(),a)}function Wi(a,i){return i.reduce(function(r,u){return r[u]=a,r},{})}var Sh=function(i,r){return i=typeof i=="function"?i(Object.assign({},r.rects,{placement:r.placement})):i,Fi(typeof i!="number"?i:Wi(i,ie))};function Ah(a){var i,r=a.state,u=a.name,o=a.options,l=r.elements.arrow,c=r.modifiersData.popperOffsets,f=yt(r.placement),_=Ie(f),m=[nt,at].indexOf(f)>=0,g=m?"height":"width";if(!(!l||!c)){var E=Sh(o.padding,r),P=Oe(l),x=_==="y"?it:nt,Y=_==="y"?ut:at,I=r.rects.reference[g]+r.rects.reference[_]-c[_]-r.rects.popper[g],$=c[_]-r.rects.reference[_],B=Ut(l),Q=B?_==="y"?B.clientHeight||0:B.clientWidth||0:0,K=I/2-$/2,N=E[x],U=Q-P[g]-E[Y],G=Q/2-P[g]/2+K,q=Ne(N,G,U),lt=_;r.modifiersData[u]=(i={},i[lt]=q,i.centerOffset=q-G,i)}}function Dh(a){var i=a.state,r=a.options,u=r.element,o=u===void 0?"[data-popper-arrow]":u;o!=null&&(typeof o=="string"&&(o=i.elements.popper.querySelector(o),!o)||Zi(i.elements.popper,o)&&(i.elements.arrow=o))}var Pn={name:"arrow",enabled:!0,phase:"main",fn:Ah,effect:Dh,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function zt(a){return a.split("-")[1]}var Oh={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ih(a,i){var r=a.x,u=a.y,o=i.devicePixelRatio||1;return{x:ne(r*o)/o||0,y:ne(u*o)/o||0}}function Ar(a){var i,r=a.popper,u=a.popperRect,o=a.placement,l=a.variation,c=a.offsets,f=a.position,_=a.gpuAcceleration,m=a.adaptive,g=a.roundOffsets,E=a.isFixed,P=c.x,x=P===void 0?0:P,Y=c.y,I=Y===void 0?0:Y,$=typeof g=="function"?g({x,y:I}):{x,y:I};x=$.x,I=$.y;var B=c.hasOwnProperty("x"),Q=c.hasOwnProperty("y"),K=nt,N=it,U=window;if(m){var G=Ut(r),q="clientHeight",lt="clientWidth";if(G===tt(r)&&(G=bt(r),Tt(G).position!=="static"&&f==="absolute"&&(q="scrollHeight",lt="scrollWidth")),G=G,o===it||(o===nt||o===at)&&l===ce){N=ut;var Z=E&&G===U&&U.visualViewport?U.visualViewport.height:G[q];I-=Z-u.height,I*=_?1:-1}if(o===nt||(o===it||o===ut)&&l===ce){K=at;var F=E&&G===U&&U.visualViewport?U.visualViewport.width:G[lt];x-=F-u.width,x*=_?1:-1}}var pt=Object.assign({position:f},m&&Oh),ot=g===!0?Ih({x,y:I},tt(r)):{x,y:I};if(x=ot.x,I=ot.y,_){var Lt;return Object.assign({},pt,(Lt={},Lt[N]=Q?"0":"",Lt[K]=B?"0":"",Lt.transform=(U.devicePixelRatio||1)<=1?"translate("+x+"px, "+I+"px)":"translate3d("+x+"px, "+I+"px, 0)",Lt))}return Object.assign({},pt,(i={},i[N]=Q?I+"px":"",i[K]=B?x+"px":"",i.transform="",i))}function Nh(a){var i=a.state,r=a.options,u=r.gpuAcceleration,o=u===void 0?!0:u,l=r.adaptive,c=l===void 0?!0:l,f=r.roundOffsets,_=f===void 0?!0:f,m={placement:yt(i.placement),variation:zt(i.placement),popper:i.elements.popper,popperRect:i.rects.popper,gpuAcceleration:o,isFixed:i.options.strategy==="fixed"};i.modifiersData.popperOffsets!=null&&(i.styles.popper=Object.assign({},i.styles.popper,Ar(Object.assign({},m,{offsets:i.modifiersData.popperOffsets,position:i.options.strategy,adaptive:c,roundOffsets:_})))),i.modifiersData.arrow!=null&&(i.styles.arrow=Object.assign({},i.styles.arrow,Ar(Object.assign({},m,{offsets:i.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:_})))),i.attributes.popper=Object.assign({},i.attributes.popper,{"data-popper-placement":i.placement})}var ni={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Nh,data:{}};var Cn={passive:!0};function Rh(a){var i=a.state,r=a.instance,u=a.options,o=u.scroll,l=o===void 0?!0:o,c=u.resize,f=c===void 0?!0:c,_=tt(i.elements.popper),m=[].concat(i.scrollParents.reference,i.scrollParents.popper);return l&&m.forEach(function(g){g.addEventListener("scroll",r.update,Cn)}),f&&_.addEventListener("resize",r.update,Cn),function(){l&&m.forEach(function(g){g.removeEventListener("scroll",r.update,Cn)}),f&&_.removeEventListener("resize",r.update,Cn)}}var oi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Rh,data:{}};var zh={left:"right",right:"left",bottom:"top",top:"bottom"};function si(a){return a.replace(/left|right|bottom|top/g,function(i){return zh[i]})}var Bh={start:"end",end:"start"};function Mn(a){return a.replace(/start|end/g,function(i){return Bh[i]})}function Re(a){var i=tt(a),r=i.pageXOffset,u=i.pageYOffset;return{scrollLeft:r,scrollTop:u}}function ze(a){return Rt(bt(a)).left+Re(a).scrollLeft}function zo(a,i){var r=tt(a),u=bt(a),o=r.visualViewport,l=u.clientWidth,c=u.clientHeight,f=0,_=0;if(o){l=o.width,c=o.height;var m=Hi();(m||!m&&i==="fixed")&&(f=o.offsetLeft,_=o.offsetTop)}return{width:l,height:c,x:f+ze(a),y:_}}function Bo(a){var i,r=bt(a),u=Re(a),o=(i=a.ownerDocument)==null?void 0:i.body,l=Wt(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),c=Wt(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),f=-u.scrollLeft+ze(a),_=-u.scrollTop;return Tt(o||r).direction==="rtl"&&(f+=Wt(r.clientWidth,o?o.clientWidth:0)-l),{width:l,height:c,x:f,y:_}}function Be(a){var i=Tt(a),r=i.overflow,u=i.overflowX,o=i.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+u)}function kn(a){return["html","body","#document"].indexOf(vt(a))>=0?a.ownerDocument.body:ft(a)&&Be(a)?a:kn(oe(a))}function ue(a,i){var r;i===void 0&&(i=[]);var u=kn(a),o=u===((r=a.ownerDocument)==null?void 0:r.body),l=tt(u),c=o?[l].concat(l.visualViewport||[],Be(u)?u:[]):u,f=i.concat(c);return o?f:f.concat(ue(oe(c)))}function ri(a){return Object.assign({},a,{left:a.x,top:a.y,right:a.x+a.width,bottom:a.y+a.height})}function $h(a,i){var r=Rt(a,!1,i==="fixed");return r.top=r.top+a.clientTop,r.left=r.left+a.clientLeft,r.bottom=r.top+a.clientHeight,r.right=r.left+a.clientWidth,r.width=a.clientWidth,r.height=a.clientHeight,r.x=r.left,r.y=r.top,r}function Dr(a,i,r){return i===Bi?ri(zo(a,r)):Nt(i)?$h(i,r):ri(Bo(bt(a)))}function Hh(a){var i=ue(oe(a)),r=["absolute","fixed"].indexOf(Tt(a).position)>=0,u=r&&ft(a)?Ut(a):a;return Nt(u)?i.filter(function(o){return Nt(o)&&Zi(o,u)&&vt(o)!=="body"}):[]}function $o(a,i,r,u){var o=i==="clippingParents"?Hh(a):[].concat(i),l=[].concat(o,[r]),c=l[0],f=l.reduce(function(_,m){var g=Dr(a,m,u);return _.top=Wt(g.top,_.top),_.right=De(g.right,_.right),_.bottom=De(g.bottom,_.bottom),_.left=Wt(g.left,_.left),_},Dr(a,c,u));return f.width=f.right-f.left,f.height=f.bottom-f.top,f.x=f.left,f.y=f.top,f}function Ui(a){var i=a.reference,r=a.element,u=a.placement,o=u?yt(u):null,l=u?zt(u):null,c=i.x+i.width/2-r.width/2,f=i.y+i.height/2-r.height/2,_;switch(o){case it:_={x:c,y:i.y-r.height};break;case ut:_={x:c,y:i.y+i.height};break;case at:_={x:i.x+i.width,y:f};break;case nt:_={x:i.x-r.width,y:f};break;default:_={x:i.x,y:i.y}}var m=o?Ie(o):null;if(m!=null){var g=m==="y"?"height":"width";switch(l){case Xt:_[m]=_[m]-(i[g]/2-r[g]/2);break;case ce:_[m]=_[m]+(i[g]/2-r[g]/2);break;default:}}return _}function xt(a,i){i===void 0&&(i={});var r=i,u=r.placement,o=u===void 0?a.placement:u,l=r.strategy,c=l===void 0?a.strategy:l,f=r.boundary,_=f===void 0?Oo:f,m=r.rootBoundary,g=m===void 0?Bi:m,E=r.elementContext,P=E===void 0?Ae:E,x=r.altBoundary,Y=x===void 0?!1:x,I=r.padding,$=I===void 0?0:I,B=Fi(typeof $!="number"?$:Wi($,ie)),Q=P===Ae?Io:Ae,K=a.rects.popper,N=a.elements[Y?Q:P],U=$o(Nt(N)?N:N.contextElement||bt(a.elements.popper),_,g,c),G=Rt(a.elements.reference),q=Ui({reference:G,element:K,strategy:"absolute",placement:o}),lt=ri(Object.assign({},K,q)),Z=P===Ae?lt:G,F={top:U.top-Z.top+B.top,bottom:Z.bottom-U.bottom+B.bottom,left:U.left-Z.left+B.left,right:Z.right-U.right+B.right},pt=a.modifiersData.offset;if(P===Ae&&pt){var ot=pt[o];Object.keys(F).forEach(function(Lt){var st=[at,ut].indexOf(Lt)>=0?1:-1,St=[it,ut].indexOf(Lt)>=0?"y":"x";F[Lt]+=ot[St]*st})}return F}function Ho(a,i){i===void 0&&(i={});var r=i,u=r.placement,o=r.boundary,l=r.rootBoundary,c=r.padding,f=r.flipVariations,_=r.allowedAutoPlacements,m=_===void 0?$i:_,g=zt(u),E=g?f?xn:xn.filter(function(Y){return zt(Y)===g}):ie,P=E.filter(function(Y){return m.indexOf(Y)>=0});P.length===0&&(P=E);var x=P.reduce(function(Y,I){return Y[I]=xt(a,{placement:I,boundary:o,rootBoundary:l,padding:c})[yt(I)],Y},{});return Object.keys(x).sort(function(Y,I){return x[Y]-x[I]})}function Zh(a){if(yt(a)===zi)return[];var i=si(a);return[Mn(a),i,Mn(i)]}function Vh(a){var i=a.state,r=a.options,u=a.name;if(!i.modifiersData[u]._skip){for(var o=r.mainAxis,l=o===void 0?!0:o,c=r.altAxis,f=c===void 0?!0:c,_=r.fallbackPlacements,m=r.padding,g=r.boundary,E=r.rootBoundary,P=r.altBoundary,x=r.flipVariations,Y=x===void 0?!0:x,I=r.allowedAutoPlacements,$=i.options.placement,B=yt($),Q=B===$,K=_||(Q||!Y?[si($)]:Zh($)),N=[$].concat(K).reduce(function(O,mt){return O.concat(yt(mt)===zi?Ho(i,{placement:mt,boundary:g,rootBoundary:E,padding:m,flipVariations:Y,allowedAutoPlacements:I}):mt)},[]),U=i.rects.reference,G=i.rects.popper,q=new Map,lt=!0,Z=N[0],F=0;F<N.length;F++){var pt=N[F],ot=yt(pt),Lt=zt(pt)===Xt,st=[it,ut].indexOf(ot)>=0,St=st?"width":"height",C=xt(i,{placement:pt,boundary:g,rootBoundary:E,altBoundary:P,padding:m}),Pt=st?Lt?at:nt:Lt?ut:it;U[St]>G[St]&&(Pt=si(Pt));var S=si(Pt),j=[];if(l&&j.push(C[ot]<=0),f&&j.push(C[Pt]<=0,C[S]<=0),j.every(function(O){return O})){Z=pt,lt=!1;break}q.set(pt,j)}if(lt)for(var dt=Y?3:1,_t=function(mt){var Ct=N.find(function(ye){var Zt=q.get(ye);if(Zt)return Zt.slice(0,mt).every(function(Le){return Le})});if(Ct)return Z=Ct,"break"},X=dt;X>0;X--){var V=_t(X);if(V==="break")break}i.placement!==Z&&(i.modifiersData[u]._skip=!0,i.placement=Z,i.reset=!0)}}var Sn={name:"flip",enabled:!0,phase:"main",fn:Vh,requiresIfExists:["offset"],data:{_skip:!1}};function Or(a,i,r){return r===void 0&&(r={x:0,y:0}),{top:a.top-i.height-r.y,right:a.right-i.width+r.x,bottom:a.bottom-i.height+r.y,left:a.left-i.width-r.x}}function Ir(a){return[it,at,ut,nt].some(function(i){return a[i]>=0})}function Fh(a){var i=a.state,r=a.name,u=i.rects.reference,o=i.rects.popper,l=i.modifiersData.preventOverflow,c=xt(i,{elementContext:"reference"}),f=xt(i,{altBoundary:!0}),_=Or(c,u),m=Or(f,o,l),g=Ir(_),E=Ir(m);i.modifiersData[r]={referenceClippingOffsets:_,popperEscapeOffsets:m,isReferenceHidden:g,hasPopperEscaped:E},i.attributes.popper=Object.assign({},i.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":E})}var An={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Fh};function Wh(a,i,r){var u=yt(a),o=[nt,it].indexOf(u)>=0?-1:1,l=typeof r=="function"?r(Object.assign({},i,{placement:a})):r,c=l[0],f=l[1];return c=c||0,f=(f||0)*o,[nt,at].indexOf(u)>=0?{x:f,y:c}:{x:c,y:f}}function Uh(a){var i=a.state,r=a.options,u=a.name,o=r.offset,l=o===void 0?[0,0]:o,c=$i.reduce(function(g,E){return g[E]=Wh(E,i.rects,l),g},{}),f=c[i.placement],_=f.x,m=f.y;i.modifiersData.popperOffsets!=null&&(i.modifiersData.popperOffsets.x+=_,i.modifiersData.popperOffsets.y+=m),i.modifiersData[u]=c}var Dn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Uh};function Gh(a){var i=a.state,r=a.name;i.modifiersData[r]=Ui({reference:i.rects.reference,element:i.rects.popper,strategy:"absolute",placement:i.placement})}var ai={name:"popperOffsets",enabled:!0,phase:"read",fn:Gh,data:{}};function Zo(a){return a==="x"?"y":"x"}function jh(a){var i=a.state,r=a.options,u=a.name,o=r.mainAxis,l=o===void 0?!0:o,c=r.altAxis,f=c===void 0?!1:c,_=r.boundary,m=r.rootBoundary,g=r.altBoundary,E=r.padding,P=r.tether,x=P===void 0?!0:P,Y=r.tetherOffset,I=Y===void 0?0:Y,$=xt(i,{boundary:_,rootBoundary:m,padding:E,altBoundary:g}),B=yt(i.placement),Q=zt(i.placement),K=!Q,N=Ie(B),U=Zo(N),G=i.modifiersData.popperOffsets,q=i.rects.reference,lt=i.rects.popper,Z=typeof I=="function"?I(Object.assign({},i.rects,{placement:i.placement})):I,F=typeof Z=="number"?{mainAxis:Z,altAxis:Z}:Object.assign({mainAxis:0,altAxis:0},Z),pt=i.modifiersData.offset?i.modifiersData.offset[i.placement]:null,ot={x:0,y:0};if(G){if(l){var Lt,st=N==="y"?it:nt,St=N==="y"?ut:at,C=N==="y"?"height":"width",Pt=G[N],S=Pt+$[st],j=Pt-$[St],dt=x?-lt[C]/2:0,_t=Q===Xt?q[C]:lt[C],X=Q===Xt?-lt[C]:-q[C],V=i.elements.arrow,O=x&&V?Oe(V):{width:0,height:0},mt=i.modifiersData["arrow#persistent"]?i.modifiersData["arrow#persistent"].padding:Vi(),Ct=mt[st],ye=mt[St],Zt=Ne(0,q[C],O[C]),Le=K?q[C]/2-dt-Zt-Ct-F.mainAxis:_t-Zt-Ct-F.mainAxis,we=K?-q[C]/2+dt+Zt+ye+F.mainAxis:X+Zt+ye+F.mainAxis,be=i.elements.arrow&&Ut(i.elements.arrow),io=be?N==="y"?be.clientTop||0:be.clientLeft||0:0,vi=(Lt=pt?.[N])!=null?Lt:0,tn=Pt+Le-vi-io,yi=Pt+we-vi,Ee=Ne(x?De(S,tn):S,Pt,x?Wt(j,yi):j);G[N]=Ee,ot[N]=Ee-Pt}if(f){var en,nn=N==="x"?it:nt,Li=N==="x"?ut:at,Gt=G[U],Te=U==="y"?"height":"width",on=Gt+$[nn],sn=Gt-$[Li],xe=[it,nt].indexOf(B)!==-1,wi=(en=pt?.[U])!=null?en:0,bi=xe?on:Gt-q[Te]-lt[Te]-wi+F.altAxis,rn=xe?Gt+q[Te]+lt[Te]-wi-F.altAxis:sn,Ei=x&&xe?Sr(bi,Gt,rn):Ne(x?bi:on,Gt,x?rn:sn);G[U]=Ei,ot[U]=Ei-Gt}i.modifiersData[u]=ot}}var On={name:"preventOverflow",enabled:!0,phase:"main",fn:jh,requiresIfExists:["offset"]};function Vo(a){return{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}}function Fo(a){return a===tt(a)||!ft(a)?Re(a):Vo(a)}function Yh(a){var i=a.getBoundingClientRect(),r=ne(i.width)/a.offsetWidth||1,u=ne(i.height)/a.offsetHeight||1;return r!==1||u!==1}function Wo(a,i,r){r===void 0&&(r=!1);var u=ft(i),o=ft(i)&&Yh(i),l=bt(i),c=Rt(a,o,r),f={scrollLeft:0,scrollTop:0},_={x:0,y:0};return(u||!u&&!r)&&((vt(i)!=="body"||Be(l))&&(f=Fo(i)),ft(i)?(_=Rt(i,!0),_.x+=i.clientLeft,_.y+=i.clientTop):l&&(_.x=ze(l))),{x:c.left+f.scrollLeft-_.x,y:c.top+f.scrollTop-_.y,width:c.width,height:c.height}}function Kh(a){var i=new Map,r=new Set,u=[];a.forEach(function(l){i.set(l.name,l)});function o(l){r.add(l.name);var c=[].concat(l.requires||[],l.requiresIfExists||[]);c.forEach(function(f){if(!r.has(f)){var _=i.get(f);_&&o(_)}}),u.push(l)}return a.forEach(function(l){r.has(l.name)||o(l)}),u}function Uo(a){var i=Kh(a);return No.reduce(function(r,u){return r.concat(i.filter(function(o){return o.phase===u}))},[])}function Go(a){var i;return function(){return i||(i=new Promise(function(r){Promise.resolve().then(function(){i=void 0,r(a())})})),i}}function jo(a){var i=a.reduce(function(r,u){var o=r[u.name];return r[u.name]=o?Object.assign({},o,u,{options:Object.assign({},o.options,u.options),data:Object.assign({},o.data,u.data)}):u,r},{});return Object.keys(i).map(function(r){return i[r]})}var Nr={placement:"bottom",modifiers:[],strategy:"absolute"};function Rr(){for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return!i.some(function(u){return!(u&&typeof u.getBoundingClientRect=="function")})}function $e(a){a===void 0&&(a={});var i=a,r=i.defaultModifiers,u=r===void 0?[]:r,o=i.defaultOptions,l=o===void 0?Nr:o;return function(f,_,m){m===void 0&&(m=l);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},Nr,l),modifiersData:{},elements:{reference:f,popper:_},attributes:{},styles:{}},E=[],P=!1,x={state:g,setOptions:function(B){var Q=typeof B=="function"?B(g.options):B;I(),g.options=Object.assign({},l,g.options,Q),g.scrollParents={reference:Nt(f)?ue(f):f.contextElement?ue(f.contextElement):[],popper:ue(_)};var K=Uo(jo([].concat(u,g.options.modifiers)));return g.orderedModifiers=K.filter(function(N){return N.enabled}),Y(),x.update()},forceUpdate:function(){if(!P){var B=g.elements,Q=B.reference,K=B.popper;if(Rr(Q,K)){g.rects={reference:Wo(Q,Ut(K),g.options.strategy==="fixed"),popper:Oe(K)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(F){return g.modifiersData[F.name]=Object.assign({},F.data)});for(var N=0;N<g.orderedModifiers.length;N++){if(g.reset===!0){g.reset=!1,N=-1;continue}var U=g.orderedModifiers[N],G=U.fn,q=U.options,lt=q===void 0?{}:q,Z=U.name;typeof G=="function"&&(g=G({state:g,options:lt,name:Z,instance:x})||g)}}}},update:Go(function(){return new Promise(function($){x.forceUpdate(),$(g)})}),destroy:function(){I(),P=!0}};if(!Rr(f,_))return x;x.setOptions(m).then(function($){!P&&m.onFirstUpdate&&m.onFirstUpdate($)});function Y(){g.orderedModifiers.forEach(function($){var B=$.name,Q=$.options,K=Q===void 0?{}:Q,N=$.effect;if(typeof N=="function"){var U=N({state:g,name:B,instance:x,options:K}),G=function(){};E.push(U||G)}})}function I(){E.forEach(function($){return $()}),E=[]}return x}}var zr=$e();var qh=[oi,ai,ni,ei],Br=$e({defaultModifiers:qh});var Xh=[oi,ai,ni,ei,Dn,Sn,On,Pn,An],Gi=$e({defaultModifiers:Xh});var de=new Map,Yo={set(a,i,r){de.has(a)||de.set(a,new Map);let u=de.get(a);if(!u.has(i)&&u.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(u.keys())[0]}.`);return}u.set(i,r)},get(a,i){return de.has(a)&&de.get(a).get(i)||null},remove(a,i){if(!de.has(a))return;let r=de.get(a);r.delete(i),r.size===0&&de.delete(a)}},Jh=1e6,Qh=1e3,hs="transitionend",fa=a=>(a&&window.CSS&&window.CSS.escape&&(a=a.replace(/#([^\s"#']+)/g,(i,r)=>`#${CSS.escape(r)}`)),a),tc=a=>a==null?`${a}`:Object.prototype.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase(),ec=a=>{do a+=Math.floor(Math.random()*Jh);while(document.getElementById(a));return a},ic=a=>{if(!a)return 0;let{transitionDuration:i,transitionDelay:r}=window.getComputedStyle(a),u=Number.parseFloat(i),o=Number.parseFloat(r);return!u&&!o?0:(i=i.split(",")[0],r=r.split(",")[0],(Number.parseFloat(i)+Number.parseFloat(r))*Qh)},pa=a=>{a.dispatchEvent(new Event(hs))},se=a=>!a||typeof a!="object"?!1:(typeof a.jquery<"u"&&(a=a[0]),typeof a.nodeType<"u"),fe=a=>se(a)?a.jquery?a[0]:a:typeof a=="string"&&a.length>0?document.querySelector(fa(a)):null,_i=a=>{if(!se(a)||a.getClientRects().length===0)return!1;let i=getComputedStyle(a).getPropertyValue("visibility")==="visible",r=a.closest("details:not([open])");if(!r)return i;if(r!==a){let u=a.closest("summary");if(u&&u.parentNode!==r||u===null)return!1}return i},pe=a=>!a||a.nodeType!==Node.ELEMENT_NODE||a.classList.contains("disabled")?!0:typeof a.disabled<"u"?a.disabled:a.hasAttribute("disabled")&&a.getAttribute("disabled")!=="false",_a=a=>{if(!document.documentElement.attachShadow)return null;if(typeof a.getRootNode=="function"){let i=a.getRootNode();return i instanceof ShadowRoot?i:null}return a instanceof ShadowRoot?a:a.parentNode?_a(a.parentNode):null},Fn=()=>{},Ji=a=>{a.offsetHeight},ma=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ko=[],nc=a=>{document.readyState==="loading"?(Ko.length||document.addEventListener("DOMContentLoaded",()=>{for(let i of Ko)i()}),Ko.push(a)):a()},Bt=()=>document.documentElement.dir==="rtl",Ht=a=>{nc(()=>{let i=ma();if(i){let r=a.NAME,u=i.fn[r];i.fn[r]=a.jQueryInterface,i.fn[r].Constructor=a,i.fn[r].noConflict=()=>(i.fn[r]=u,a.jQueryInterface)}})},kt=(a,i=[],r=a)=>typeof a=="function"?a.call(...i):r,ga=(a,i,r=!0)=>{if(!r){kt(a);return}let o=ic(i)+5,l=!1,c=({target:f})=>{f===i&&(l=!0,i.removeEventListener(hs,c),kt(a))};i.addEventListener(hs,c),setTimeout(()=>{l||pa(i)},o)},ps=(a,i,r,u)=>{let o=a.length,l=a.indexOf(i);return l===-1?!r&&u?a[o-1]:a[0]:(l+=r?1:-1,u&&(l=(l+o)%o),a[Math.max(0,Math.min(l,o-1))])},oc=/[^.]*(?=\..*)\.|.*/,sc=/\..*/,rc=/::\d+$/,qo={},$r=1,va={mouseenter:"mouseover",mouseleave:"mouseout"},ac=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ya(a,i){return i&&`${i}::${$r++}`||a.uidEvent||$r++}function La(a){let i=ya(a);return a.uidEvent=i,qo[i]=qo[i]||{},qo[i]}function lc(a,i){return function r(u){return _s(u,{delegateTarget:a}),r.oneOff&&b.off(a,u.type,i),i.apply(a,[u])}}function hc(a,i,r){return function u(o){let l=a.querySelectorAll(i);for(let{target:c}=o;c&&c!==this;c=c.parentNode)for(let f of l)if(f===c)return _s(o,{delegateTarget:c}),u.oneOff&&b.off(a,o.type,i,r),r.apply(c,[o])}}function wa(a,i,r=null){return Object.values(a).find(u=>u.callable===i&&u.delegationSelector===r)}function ba(a,i,r){let u=typeof i=="string",o=u?r:i||r,l=Ea(a);return ac.has(l)||(l=a),[u,o,l]}function Hr(a,i,r,u,o){if(typeof i!="string"||!a)return;let[l,c,f]=ba(i,r,u);i in va&&(c=(Y=>function(I){if(!I.relatedTarget||I.relatedTarget!==I.delegateTarget&&!I.delegateTarget.contains(I.relatedTarget))return Y.call(this,I)})(c));let _=La(a),m=_[f]||(_[f]={}),g=wa(m,c,l?r:null);if(g){g.oneOff=g.oneOff&&o;return}let E=ya(c,i.replace(oc,"")),P=l?hc(a,r,c):lc(a,c);P.delegationSelector=l?r:null,P.callable=c,P.oneOff=o,P.uidEvent=E,m[E]=P,a.addEventListener(f,P,l)}function cs(a,i,r,u,o){let l=wa(i[r],u,o);l&&(a.removeEventListener(r,l,!!o),delete i[r][l.uidEvent])}function cc(a,i,r,u){let o=i[r]||{};for(let[l,c]of Object.entries(o))l.includes(u)&&cs(a,i,r,c.callable,c.delegationSelector)}function Ea(a){return a=a.replace(sc,""),va[a]||a}var b={on(a,i,r,u){Hr(a,i,r,u,!1)},one(a,i,r,u){Hr(a,i,r,u,!0)},off(a,i,r,u){if(typeof i!="string"||!a)return;let[o,l,c]=ba(i,r,u),f=c!==i,_=La(a),m=_[c]||{},g=i.startsWith(".");if(typeof l<"u"){if(!Object.keys(m).length)return;cs(a,_,c,l,o?r:null);return}if(g)for(let E of Object.keys(_))cc(a,_,E,i.slice(1));for(let[E,P]of Object.entries(m)){let x=E.replace(rc,"");(!f||i.includes(x))&&cs(a,_,c,P.callable,P.delegationSelector)}},trigger(a,i,r){if(typeof i!="string"||!a)return null;let u=ma(),o=Ea(i),l=i!==o,c=null,f=!0,_=!0,m=!1;l&&u&&(c=u.Event(i,r),u(a).trigger(c),f=!c.isPropagationStopped(),_=!c.isImmediatePropagationStopped(),m=c.isDefaultPrevented());let g=_s(new Event(i,{bubbles:f,cancelable:!0}),r);return m&&g.preventDefault(),_&&a.dispatchEvent(g),g.defaultPrevented&&c&&c.preventDefault(),g}};function _s(a,i={}){for(let[r,u]of Object.entries(i))try{a[r]=u}catch{Object.defineProperty(a,r,{configurable:!0,get(){return u}})}return a}function Zr(a){if(a==="true")return!0;if(a==="false")return!1;if(a===Number(a).toString())return Number(a);if(a===""||a==="null")return null;if(typeof a!="string")return a;try{return JSON.parse(decodeURIComponent(a))}catch{return a}}function Xo(a){return a.replace(/[A-Z]/g,i=>`-${i.toLowerCase()}`)}var re={setDataAttribute(a,i,r){a.setAttribute(`data-bs-${Xo(i)}`,r)},removeDataAttribute(a,i){a.removeAttribute(`data-bs-${Xo(i)}`)},getDataAttributes(a){if(!a)return{};let i={},r=Object.keys(a.dataset).filter(u=>u.startsWith("bs")&&!u.startsWith("bsConfig"));for(let u of r){let o=u.replace(/^bs/,"");o=o.charAt(0).toLowerCase()+o.slice(1),i[o]=Zr(a.dataset[u])}return i},getDataAttribute(a,i){return Zr(a.getAttribute(`data-bs-${Xo(i)}`))}},Ve=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(i){return i=this._mergeConfigObj(i),i=this._configAfterMerge(i),this._typeCheckConfig(i),i}_configAfterMerge(i){return i}_mergeConfigObj(i,r){let u=se(r)?re.getDataAttribute(r,"config"):{};return{...this.constructor.Default,...typeof u=="object"?u:{},...se(r)?re.getDataAttributes(r):{},...typeof i=="object"?i:{}}}_typeCheckConfig(i,r=this.constructor.DefaultType){for(let[u,o]of Object.entries(r)){let l=i[u],c=se(l)?"element":tc(l);if(!new RegExp(o).test(c))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${u}" provided type "${c}" but expected type "${o}".`)}}},uc="5.3.6",At=class extends Ve{constructor(i,r){super(),i=fe(i),i&&(this._element=i,this._config=this._getConfig(r),Yo.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Yo.remove(this._element,this.constructor.DATA_KEY),b.off(this._element,this.constructor.EVENT_KEY);for(let i of Object.getOwnPropertyNames(this))this[i]=null}_queueCallback(i,r,u=!0){ga(i,r,u)}_getConfig(i){return i=this._mergeConfigObj(i,this._element),i=this._configAfterMerge(i),this._typeCheckConfig(i),i}static getInstance(i){return Yo.get(fe(i),this.DATA_KEY)}static getOrCreateInstance(i,r={}){return this.getInstance(i)||new this(i,typeof r=="object"?r:null)}static get VERSION(){return uc}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(i){return`${i}${this.EVENT_KEY}`}},Jo=a=>{let i=a.getAttribute("data-bs-target");if(!i||i==="#"){let r=a.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),i=r&&r!=="#"?r.trim():null}return i?i.split(",").map(r=>fa(r)).join(","):null},k={find(a,i=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(i,a))},findOne(a,i=document.documentElement){return Element.prototype.querySelector.call(i,a)},children(a,i){return[].concat(...a.children).filter(r=>r.matches(i))},parents(a,i){let r=[],u=a.parentNode.closest(i);for(;u;)r.push(u),u=u.parentNode.closest(i);return r},prev(a,i){let r=a.previousElementSibling;for(;r;){if(r.matches(i))return[r];r=r.previousElementSibling}return[]},next(a,i){let r=a.nextElementSibling;for(;r;){if(r.matches(i))return[r];r=r.nextElementSibling}return[]},focusableChildren(a){let i=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(r=>`${r}:not([tabindex^="-"])`).join(",");return this.find(i,a).filter(r=>!pe(r)&&_i(r))},getSelectorFromElement(a){let i=Jo(a);return i&&k.findOne(i)?i:null},getElementFromSelector(a){let i=Jo(a);return i?k.findOne(i):null},getMultipleElementsFromSelector(a){let i=Jo(a);return i?k.find(i):[]}},Qn=(a,i="hide")=>{let r=`click.dismiss${a.EVENT_KEY}`,u=a.NAME;b.on(document,r,`[data-bs-dismiss="${u}"]`,function(o){if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),pe(this))return;let l=k.getElementFromSelector(this)||this.closest(`.${u}`);a.getOrCreateInstance(l)[i]()})},dc="alert",fc="bs.alert",Ta=`.${fc}`,pc=`close${Ta}`,_c=`closed${Ta}`,mc="fade",gc="show",Wn=class a extends At{static get NAME(){return dc}close(){if(b.trigger(this._element,pc).defaultPrevented)return;this._element.classList.remove(gc);let r=this._element.classList.contains(mc);this._queueCallback(()=>this._destroyElement(),this._element,r)}_destroyElement(){this._element.remove(),b.trigger(this._element,_c),this.dispose()}static jQueryInterface(i){return this.each(function(){let r=a.getOrCreateInstance(this);if(typeof i=="string"){if(r[i]===void 0||i.startsWith("_")||i==="constructor")throw new TypeError(`No method named "${i}"`);r[i](this)}})}};Qn(Wn,"close");Ht(Wn);var vc="button",yc="bs.button",Lc=`.${yc}`,wc=".data-api",bc="active",Vr='[data-bs-toggle="button"]',Ec=`click${Lc}${wc}`,Un=class a extends At{static get NAME(){return vc}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(bc))}static jQueryInterface(i){return this.each(function(){let r=a.getOrCreateInstance(this);i==="toggle"&&r[i]()})}};b.on(document,Ec,Vr,a=>{a.preventDefault();let i=a.target.closest(Vr);Un.getOrCreateInstance(i).toggle()});Ht(Un);var Tc="swipe",mi=".bs.swipe",xc=`touchstart${mi}`,Pc=`touchmove${mi}`,Cc=`touchend${mi}`,Mc=`pointerdown${mi}`,kc=`pointerup${mi}`,Sc="touch",Ac="pen",Dc="pointer-event",Oc=40,Ic={endCallback:null,leftCallback:null,rightCallback:null},Nc={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},Gn=class a extends Ve{constructor(i,r){super(),this._element=i,!(!i||!a.isSupported())&&(this._config=this._getConfig(r),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ic}static get DefaultType(){return Nc}static get NAME(){return Tc}dispose(){b.off(this._element,mi)}_start(i){if(!this._supportPointerEvents){this._deltaX=i.touches[0].clientX;return}this._eventIsPointerPenTouch(i)&&(this._deltaX=i.clientX)}_end(i){this._eventIsPointerPenTouch(i)&&(this._deltaX=i.clientX-this._deltaX),this._handleSwipe(),kt(this._config.endCallback)}_move(i){this._deltaX=i.touches&&i.touches.length>1?0:i.touches[0].clientX-this._deltaX}_handleSwipe(){let i=Math.abs(this._deltaX);if(i<=Oc)return;let r=i/this._deltaX;this._deltaX=0,r&&kt(r>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(b.on(this._element,Mc,i=>this._start(i)),b.on(this._element,kc,i=>this._end(i)),this._element.classList.add(Dc)):(b.on(this._element,xc,i=>this._start(i)),b.on(this._element,Pc,i=>this._move(i)),b.on(this._element,Cc,i=>this._end(i)))}_eventIsPointerPenTouch(i){return this._supportPointerEvents&&(i.pointerType===Ac||i.pointerType===Sc)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}},Rc="carousel",zc="bs.carousel",ge=`.${zc}`,xa=".data-api",Bc="ArrowLeft",$c="ArrowRight",Hc=500,ji="next",li="prev",ci="left",Zn="right",Zc=`slide${ge}`,Qo=`slid${ge}`,Vc=`keydown${ge}`,Fc=`mouseenter${ge}`,Wc=`mouseleave${ge}`,Uc=`dragstart${ge}`,Gc=`load${ge}${xa}`,jc=`click${ge}${xa}`,Pa="carousel",Nn="active",Yc="slide",Kc="carousel-item-end",qc="carousel-item-start",Xc="carousel-item-next",Jc="carousel-item-prev",Ca=".active",Ma=".carousel-item",Qc=Ca+Ma,tu=".carousel-item img",eu=".carousel-indicators",iu="[data-bs-slide], [data-bs-slide-to]",nu='[data-bs-ride="carousel"]',ou={[Bc]:Zn,[$c]:ci},su={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ru={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},Ki=class a extends At{constructor(i,r){super(i,r),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=k.findOne(eu,this._element),this._addEventListeners(),this._config.ride===Pa&&this.cycle()}static get Default(){return su}static get DefaultType(){return ru}static get NAME(){return Rc}next(){this._slide(ji)}nextWhenVisible(){!document.hidden&&_i(this._element)&&this.next()}prev(){this._slide(li)}pause(){this._isSliding&&pa(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){b.one(this._element,Qo,()=>this.cycle());return}this.cycle()}}to(i){let r=this._getItems();if(i>r.length-1||i<0)return;if(this._isSliding){b.one(this._element,Qo,()=>this.to(i));return}let u=this._getItemIndex(this._getActive());if(u===i)return;let o=i>u?ji:li;this._slide(o,r[i])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(i){return i.defaultInterval=i.interval,i}_addEventListeners(){this._config.keyboard&&b.on(this._element,Vc,i=>this._keydown(i)),this._config.pause==="hover"&&(b.on(this._element,Fc,()=>this.pause()),b.on(this._element,Wc,()=>this._maybeEnableCycle())),this._config.touch&&Gn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let u of k.find(tu,this._element))b.on(u,Uc,o=>o.preventDefault());let r={leftCallback:()=>this._slide(this._directionToOrder(ci)),rightCallback:()=>this._slide(this._directionToOrder(Zn)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Hc+this._config.interval))}};this._swipeHelper=new Gn(this._element,r)}_keydown(i){if(/input|textarea/i.test(i.target.tagName))return;let r=ou[i.key];r&&(i.preventDefault(),this._slide(this._directionToOrder(r)))}_getItemIndex(i){return this._getItems().indexOf(i)}_setActiveIndicatorElement(i){if(!this._indicatorsElement)return;let r=k.findOne(Ca,this._indicatorsElement);r.classList.remove(Nn),r.removeAttribute("aria-current");let u=k.findOne(`[data-bs-slide-to="${i}"]`,this._indicatorsElement);u&&(u.classList.add(Nn),u.setAttribute("aria-current","true"))}_updateInterval(){let i=this._activeElement||this._getActive();if(!i)return;let r=Number.parseInt(i.getAttribute("data-bs-interval"),10);this._config.interval=r||this._config.defaultInterval}_slide(i,r=null){if(this._isSliding)return;let u=this._getActive(),o=i===ji,l=r||ps(this._getItems(),u,o,this._config.wrap);if(l===u)return;let c=this._getItemIndex(l),f=x=>b.trigger(this._element,x,{relatedTarget:l,direction:this._orderToDirection(i),from:this._getItemIndex(u),to:c});if(f(Zc).defaultPrevented||!u||!l)return;let m=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(c),this._activeElement=l;let g=o?qc:Kc,E=o?Xc:Jc;l.classList.add(E),Ji(l),u.classList.add(g),l.classList.add(g);let P=()=>{l.classList.remove(g,E),l.classList.add(Nn),u.classList.remove(Nn,E,g),this._isSliding=!1,f(Qo)};this._queueCallback(P,u,this._isAnimated()),m&&this.cycle()}_isAnimated(){return this._element.classList.contains(Yc)}_getActive(){return k.findOne(Qc,this._element)}_getItems(){return k.find(Ma,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(i){return Bt()?i===ci?li:ji:i===ci?ji:li}_orderToDirection(i){return Bt()?i===li?ci:Zn:i===li?Zn:ci}static jQueryInterface(i){return this.each(function(){let r=a.getOrCreateInstance(this,i);if(typeof i=="number"){r.to(i);return}if(typeof i=="string"){if(r[i]===void 0||i.startsWith("_")||i==="constructor")throw new TypeError(`No method named "${i}"`);r[i]()}})}};b.on(document,jc,iu,function(a){let i=k.getElementFromSelector(this);if(!i||!i.classList.contains(Pa))return;a.preventDefault();let r=Ki.getOrCreateInstance(i),u=this.getAttribute("data-bs-slide-to");if(u){r.to(u),r._maybeEnableCycle();return}if(re.getDataAttribute(this,"slide")==="next"){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()});b.on(window,Gc,()=>{let a=k.find(nu);for(let i of a)Ki.getOrCreateInstance(i)});Ht(Ki);var au="collapse",lu="bs.collapse",Qi=`.${lu}`,hu=".data-api",cu=`show${Qi}`,uu=`shown${Qi}`,du=`hide${Qi}`,fu=`hidden${Qi}`,pu=`click${Qi}${hu}`,ts="show",di="collapse",Rn="collapsing",_u="collapsed",mu=`:scope .${di} .${di}`,gu="collapse-horizontal",vu="width",yu="height",Lu=".collapse.show, .collapse.collapsing",us='[data-bs-toggle="collapse"]',wu={parent:null,toggle:!0},bu={parent:"(null|element)",toggle:"boolean"},jn=class a extends At{constructor(i,r){super(i,r),this._isTransitioning=!1,this._triggerArray=[];let u=k.find(us);for(let o of u){let l=k.getSelectorFromElement(o),c=k.find(l).filter(f=>f===this._element);l!==null&&c.length&&this._triggerArray.push(o)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return wu}static get DefaultType(){return bu}static get NAME(){return au}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let i=[];if(this._config.parent&&(i=this._getFirstLevelChildren(Lu).filter(f=>f!==this._element).map(f=>a.getOrCreateInstance(f,{toggle:!1}))),i.length&&i[0]._isTransitioning||b.trigger(this._element,cu).defaultPrevented)return;for(let f of i)f.hide();let u=this._getDimension();this._element.classList.remove(di),this._element.classList.add(Rn),this._element.style[u]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let o=()=>{this._isTransitioning=!1,this._element.classList.remove(Rn),this._element.classList.add(di,ts),this._element.style[u]="",b.trigger(this._element,uu)},c=`scroll${u[0].toUpperCase()+u.slice(1)}`;this._queueCallback(o,this._element,!0),this._element.style[u]=`${this._element[c]}px`}hide(){if(this._isTransitioning||!this._isShown()||b.trigger(this._element,du).defaultPrevented)return;let r=this._getDimension();this._element.style[r]=`${this._element.getBoundingClientRect()[r]}px`,Ji(this._element),this._element.classList.add(Rn),this._element.classList.remove(di,ts);for(let o of this._triggerArray){let l=k.getElementFromSelector(o);l&&!this._isShown(l)&&this._addAriaAndCollapsedClass([o],!1)}this._isTransitioning=!0;let u=()=>{this._isTransitioning=!1,this._element.classList.remove(Rn),this._element.classList.add(di),b.trigger(this._element,fu)};this._element.style[r]="",this._queueCallback(u,this._element,!0)}_isShown(i=this._element){return i.classList.contains(ts)}_configAfterMerge(i){return i.toggle=!!i.toggle,i.parent=fe(i.parent),i}_getDimension(){return this._element.classList.contains(gu)?vu:yu}_initializeChildren(){if(!this._config.parent)return;let i=this._getFirstLevelChildren(us);for(let r of i){let u=k.getElementFromSelector(r);u&&this._addAriaAndCollapsedClass([r],this._isShown(u))}}_getFirstLevelChildren(i){let r=k.find(mu,this._config.parent);return k.find(i,this._config.parent).filter(u=>!r.includes(u))}_addAriaAndCollapsedClass(i,r){if(i.length)for(let u of i)u.classList.toggle(_u,!r),u.setAttribute("aria-expanded",r)}static jQueryInterface(i){let r={};return typeof i=="string"&&/show|hide/.test(i)&&(r.toggle=!1),this.each(function(){let u=a.getOrCreateInstance(this,r);if(typeof i=="string"){if(typeof u[i]>"u")throw new TypeError(`No method named "${i}"`);u[i]()}})}};b.on(document,pu,us,function(a){(a.target.tagName==="A"||a.delegateTarget&&a.delegateTarget.tagName==="A")&&a.preventDefault();for(let i of k.getMultipleElementsFromSelector(this))jn.getOrCreateInstance(i,{toggle:!1}).toggle()});Ht(jn);var Fr="dropdown",Eu="bs.dropdown",Fe=`.${Eu}`,ms=".data-api",Tu="Escape",Wr="Tab",xu="ArrowUp",Ur="ArrowDown",Pu=2,Cu=`hide${Fe}`,Mu=`hidden${Fe}`,ku=`show${Fe}`,Su=`shown${Fe}`,ka=`click${Fe}${ms}`,Sa=`keydown${Fe}${ms}`,Au=`keyup${Fe}${ms}`,ui="show",Du="dropup",Ou="dropend",Iu="dropstart",Nu="dropup-center",Ru="dropdown-center",He='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',zu=`${He}.${ui}`,Vn=".dropdown-menu",Bu=".navbar",$u=".navbar-nav",Hu=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Zu=Bt()?"top-end":"top-start",Vu=Bt()?"top-start":"top-end",Fu=Bt()?"bottom-end":"bottom-start",Wu=Bt()?"bottom-start":"bottom-end",Uu=Bt()?"left-start":"right-start",Gu=Bt()?"right-start":"left-start",ju="top",Yu="bottom",Ku={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},qu={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},_e=class a extends At{constructor(i,r){super(i,r),this._popper=null,this._parent=this._element.parentNode,this._menu=k.next(this._element,Vn)[0]||k.prev(this._element,Vn)[0]||k.findOne(Vn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ku}static get DefaultType(){return qu}static get NAME(){return Fr}toggle(){return this._isShown()?this.hide():this.show()}show(){if(pe(this._element)||this._isShown())return;let i={relatedTarget:this._element};if(!b.trigger(this._element,ku,i).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest($u))for(let u of[].concat(...document.body.children))b.on(u,"mouseover",Fn);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ui),this._element.classList.add(ui),b.trigger(this._element,Su,i)}}hide(){if(pe(this._element)||!this._isShown())return;let i={relatedTarget:this._element};this._completeHide(i)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(i){if(!b.trigger(this._element,Cu,i).defaultPrevented){if("ontouchstart"in document.documentElement)for(let u of[].concat(...document.body.children))b.off(u,"mouseover",Fn);this._popper&&this._popper.destroy(),this._menu.classList.remove(ui),this._element.classList.remove(ui),this._element.setAttribute("aria-expanded","false"),re.removeDataAttribute(this._menu,"popper"),b.trigger(this._element,Mu,i),this._element.focus()}}_getConfig(i){if(i=super._getConfig(i),typeof i.reference=="object"&&!se(i.reference)&&typeof i.reference.getBoundingClientRect!="function")throw new TypeError(`${Fr.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return i}_createPopper(){if(typeof In>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let i=this._element;this._config.reference==="parent"?i=this._parent:se(this._config.reference)?i=fe(this._config.reference):typeof this._config.reference=="object"&&(i=this._config.reference);let r=this._getPopperConfig();this._popper=Gi(i,this._menu,r)}_isShown(){return this._menu.classList.contains(ui)}_getPlacement(){let i=this._parent;if(i.classList.contains(Ou))return Uu;if(i.classList.contains(Iu))return Gu;if(i.classList.contains(Nu))return ju;if(i.classList.contains(Ru))return Yu;let r=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return i.classList.contains(Du)?r?Vu:Zu:r?Wu:Fu}_detectNavbar(){return this._element.closest(Bu)!==null}_getOffset(){let{offset:i}=this._config;return typeof i=="string"?i.split(",").map(r=>Number.parseInt(r,10)):typeof i=="function"?r=>i(r,this._element):i}_getPopperConfig(){let i={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(re.setDataAttribute(this._menu,"popper","static"),i.modifiers=[{name:"applyStyles",enabled:!1}]),{...i,...kt(this._config.popperConfig,[void 0,i])}}_selectMenuItem({key:i,target:r}){let u=k.find(Hu,this._menu).filter(o=>_i(o));u.length&&ps(u,r,i===Ur,!u.includes(r)).focus()}static jQueryInterface(i){return this.each(function(){let r=a.getOrCreateInstance(this,i);if(typeof i=="string"){if(typeof r[i]>"u")throw new TypeError(`No method named "${i}"`);r[i]()}})}static clearMenus(i){if(i.button===Pu||i.type==="keyup"&&i.key!==Wr)return;let r=k.find(zu);for(let u of r){let o=a.getInstance(u);if(!o||o._config.autoClose===!1)continue;let l=i.composedPath(),c=l.includes(o._menu);if(l.includes(o._element)||o._config.autoClose==="inside"&&!c||o._config.autoClose==="outside"&&c||o._menu.contains(i.target)&&(i.type==="keyup"&&i.key===Wr||/input|select|option|textarea|form/i.test(i.target.tagName)))continue;let f={relatedTarget:o._element};i.type==="click"&&(f.clickEvent=i),o._completeHide(f)}}static dataApiKeydownHandler(i){let r=/input|textarea/i.test(i.target.tagName),u=i.key===Tu,o=[xu,Ur].includes(i.key);if(!o&&!u||r&&!u)return;i.preventDefault();let l=this.matches(He)?this:k.prev(this,He)[0]||k.next(this,He)[0]||k.findOne(He,i.delegateTarget.parentNode),c=a.getOrCreateInstance(l);if(o){i.stopPropagation(),c.show(),c._selectMenuItem(i);return}c._isShown()&&(i.stopPropagation(),c.hide(),l.focus())}};b.on(document,Sa,He,_e.dataApiKeydownHandler);b.on(document,Sa,Vn,_e.dataApiKeydownHandler);b.on(document,ka,_e.clearMenus);b.on(document,Au,_e.clearMenus);b.on(document,ka,He,function(a){a.preventDefault(),_e.getOrCreateInstance(this).toggle()});Ht(_e);var Aa="backdrop",Xu="fade",Gr="show",jr=`mousedown.bs.${Aa}`,Ju={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Qu={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},Yn=class extends Ve{constructor(i){super(),this._config=this._getConfig(i),this._isAppended=!1,this._element=null}static get Default(){return Ju}static get DefaultType(){return Qu}static get NAME(){return Aa}show(i){if(!this._config.isVisible){kt(i);return}this._append();let r=this._getElement();this._config.isAnimated&&Ji(r),r.classList.add(Gr),this._emulateAnimation(()=>{kt(i)})}hide(i){if(!this._config.isVisible){kt(i);return}this._getElement().classList.remove(Gr),this._emulateAnimation(()=>{this.dispose(),kt(i)})}dispose(){this._isAppended&&(b.off(this._element,jr),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let i=document.createElement("div");i.className=this._config.className,this._config.isAnimated&&i.classList.add(Xu),this._element=i}return this._element}_configAfterMerge(i){return i.rootElement=fe(i.rootElement),i}_append(){if(this._isAppended)return;let i=this._getElement();this._config.rootElement.append(i),b.on(i,jr,()=>{kt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(i){ga(i,this._getElement(),this._config.isAnimated)}},td="focustrap",ed="bs.focustrap",Kn=`.${ed}`,id=`focusin${Kn}`,nd=`keydown.tab${Kn}`,od="Tab",sd="forward",Yr="backward",rd={autofocus:!0,trapElement:null},ad={autofocus:"boolean",trapElement:"element"},qn=class extends Ve{constructor(i){super(),this._config=this._getConfig(i),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return rd}static get DefaultType(){return ad}static get NAME(){return td}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),b.off(document,Kn),b.on(document,id,i=>this._handleFocusin(i)),b.on(document,nd,i=>this._handleKeydown(i)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,b.off(document,Kn))}_handleFocusin(i){let{trapElement:r}=this._config;if(i.target===document||i.target===r||r.contains(i.target))return;let u=k.focusableChildren(r);u.length===0?r.focus():this._lastTabNavDirection===Yr?u[u.length-1].focus():u[0].focus()}_handleKeydown(i){i.key===od&&(this._lastTabNavDirection=i.shiftKey?Yr:sd)}},Kr=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",qr=".sticky-top",zn="padding-right",Xr="margin-right",qi=class{constructor(){this._element=document.body}getWidth(){let i=document.documentElement.clientWidth;return Math.abs(window.innerWidth-i)}hide(){let i=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,zn,r=>r+i),this._setElementAttributes(Kr,zn,r=>r+i),this._setElementAttributes(qr,Xr,r=>r-i)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,zn),this._resetElementAttributes(Kr,zn),this._resetElementAttributes(qr,Xr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(i,r,u){let o=this.getWidth(),l=c=>{if(c!==this._element&&window.innerWidth>c.clientWidth+o)return;this._saveInitialAttribute(c,r);let f=window.getComputedStyle(c).getPropertyValue(r);c.style.setProperty(r,`${u(Number.parseFloat(f))}px`)};this._applyManipulationCallback(i,l)}_saveInitialAttribute(i,r){let u=i.style.getPropertyValue(r);u&&re.setDataAttribute(i,r,u)}_resetElementAttributes(i,r){let u=o=>{let l=re.getDataAttribute(o,r);if(l===null){o.style.removeProperty(r);return}re.removeDataAttribute(o,r),o.style.setProperty(r,l)};this._applyManipulationCallback(i,u)}_applyManipulationCallback(i,r){if(se(i)){r(i);return}for(let u of k.find(i,this._element))r(u)}},ld="modal",hd="bs.modal",$t=`.${hd}`,cd=".data-api",ud="Escape",dd=`hide${$t}`,fd=`hidePrevented${$t}`,Da=`hidden${$t}`,Oa=`show${$t}`,pd=`shown${$t}`,_d=`resize${$t}`,md=`click.dismiss${$t}`,gd=`mousedown.dismiss${$t}`,vd=`keydown.dismiss${$t}`,yd=`click${$t}${cd}`,Jr="modal-open",Ld="fade",Qr="show",es="modal-static",wd=".modal.show",bd=".modal-dialog",Ed=".modal-body",Td='[data-bs-toggle="modal"]',xd={backdrop:!0,focus:!0,keyboard:!0},Pd={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},fi=class a extends At{constructor(i,r){super(i,r),this._dialog=k.findOne(bd,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new qi,this._addEventListeners()}static get Default(){return xd}static get DefaultType(){return Pd}static get NAME(){return ld}toggle(i){return this._isShown?this.hide():this.show(i)}show(i){this._isShown||this._isTransitioning||b.trigger(this._element,Oa,{relatedTarget:i}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Jr),this._adjustDialog(),this._backdrop.show(()=>this._showElement(i)))}hide(){!this._isShown||this._isTransitioning||b.trigger(this._element,dd).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Qr),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){b.off(window,$t),b.off(this._dialog,$t),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Yn({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new qn({trapElement:this._element})}_showElement(i){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let r=k.findOne(Ed,this._dialog);r&&(r.scrollTop=0),Ji(this._element),this._element.classList.add(Qr);let u=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,b.trigger(this._element,pd,{relatedTarget:i})};this._queueCallback(u,this._dialog,this._isAnimated())}_addEventListeners(){b.on(this._element,vd,i=>{if(i.key===ud){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),b.on(window,_d,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),b.on(this._element,gd,i=>{b.one(this._element,md,r=>{if(!(this._element!==i.target||this._element!==r.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Jr),this._resetAdjustments(),this._scrollBar.reset(),b.trigger(this._element,Da)})}_isAnimated(){return this._element.classList.contains(Ld)}_triggerBackdropTransition(){if(b.trigger(this._element,fd).defaultPrevented)return;let r=this._element.scrollHeight>document.documentElement.clientHeight,u=this._element.style.overflowY;u==="hidden"||this._element.classList.contains(es)||(r||(this._element.style.overflowY="hidden"),this._element.classList.add(es),this._queueCallback(()=>{this._element.classList.remove(es),this._queueCallback(()=>{this._element.style.overflowY=u},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let i=this._element.scrollHeight>document.documentElement.clientHeight,r=this._scrollBar.getWidth(),u=r>0;if(u&&!i){let o=Bt()?"paddingLeft":"paddingRight";this._element.style[o]=`${r}px`}if(!u&&i){let o=Bt()?"paddingRight":"paddingLeft";this._element.style[o]=`${r}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(i,r){return this.each(function(){let u=a.getOrCreateInstance(this,i);if(typeof i=="string"){if(typeof u[i]>"u")throw new TypeError(`No method named "${i}"`);u[i](r)}})}};b.on(document,yd,Td,function(a){let i=k.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&a.preventDefault(),b.one(i,Oa,o=>{o.defaultPrevented||b.one(i,Da,()=>{_i(this)&&this.focus()})});let r=k.findOne(wd);r&&fi.getInstance(r).hide(),fi.getOrCreateInstance(i).toggle(this)});Qn(fi);Ht(fi);var Cd="offcanvas",Md="bs.offcanvas",ae=`.${Md}`,Ia=".data-api",kd=`load${ae}${Ia}`,Sd="Escape",ta="show",ea="showing",ia="hiding",Ad="offcanvas-backdrop",Na=".offcanvas.show",Dd=`show${ae}`,Od=`shown${ae}`,Id=`hide${ae}`,na=`hidePrevented${ae}`,Ra=`hidden${ae}`,Nd=`resize${ae}`,Rd=`click${ae}${Ia}`,zd=`keydown.dismiss${ae}`,Bd='[data-bs-toggle="offcanvas"]',$d={backdrop:!0,keyboard:!0,scroll:!1},Hd={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"},me=class a extends At{constructor(i,r){super(i,r),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return $d}static get DefaultType(){return Hd}static get NAME(){return Cd}toggle(i){return this._isShown?this.hide():this.show(i)}show(i){if(this._isShown||b.trigger(this._element,Dd,{relatedTarget:i}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new qi().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ea);let u=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(ta),this._element.classList.remove(ea),b.trigger(this._element,Od,{relatedTarget:i})};this._queueCallback(u,this._element,!0)}hide(){if(!this._isShown||b.trigger(this._element,Id).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ia),this._backdrop.hide();let r=()=>{this._element.classList.remove(ta,ia),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new qi().reset(),b.trigger(this._element,Ra)};this._queueCallback(r,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let i=()=>{if(this._config.backdrop==="static"){b.trigger(this._element,na);return}this.hide()},r=!!this._config.backdrop;return new Yn({className:Ad,isVisible:r,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:r?i:null})}_initializeFocusTrap(){return new qn({trapElement:this._element})}_addEventListeners(){b.on(this._element,zd,i=>{if(i.key===Sd){if(this._config.keyboard){this.hide();return}b.trigger(this._element,na)}})}static jQueryInterface(i){return this.each(function(){let r=a.getOrCreateInstance(this,i);if(typeof i=="string"){if(r[i]===void 0||i.startsWith("_")||i==="constructor")throw new TypeError(`No method named "${i}"`);r[i](this)}})}};b.on(document,Rd,Bd,function(a){let i=k.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&a.preventDefault(),pe(this))return;b.one(i,Ra,()=>{_i(this)&&this.focus()});let r=k.findOne(Na);r&&r!==i&&me.getInstance(r).hide(),me.getOrCreateInstance(i).toggle(this)});b.on(window,kd,()=>{for(let a of k.find(Na))me.getOrCreateInstance(a).show()});b.on(window,Nd,()=>{for(let a of k.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(a).position!=="fixed"&&me.getOrCreateInstance(a).hide()});Qn(me);Ht(me);var Zd=/^aria-[\w-]*$/i,za={"*":["class","dir","id","lang","role",Zd],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Vd=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Fd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Wd=(a,i)=>{let r=a.nodeName.toLowerCase();return i.includes(r)?Vd.has(r)?!!Fd.test(a.nodeValue):!0:i.filter(u=>u instanceof RegExp).some(u=>u.test(r))};function Ud(a,i,r){if(!a.length)return a;if(r&&typeof r=="function")return r(a);let o=new window.DOMParser().parseFromString(a,"text/html"),l=[].concat(...o.body.querySelectorAll("*"));for(let c of l){let f=c.nodeName.toLowerCase();if(!Object.keys(i).includes(f)){c.remove();continue}let _=[].concat(...c.attributes),m=[].concat(i["*"]||[],i[f]||[]);for(let g of _)Wd(g,m)||c.removeAttribute(g.nodeName)}return o.body.innerHTML}var Gd="TemplateFactory",jd={allowList:za,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Yd={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Kd={entry:"(string|element|function|null)",selector:"(string|element)"},ds=class extends Ve{constructor(i){super(),this._config=this._getConfig(i)}static get Default(){return jd}static get DefaultType(){return Yd}static get NAME(){return Gd}getContent(){return Object.values(this._config.content).map(i=>this._resolvePossibleFunction(i)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(i){return this._checkContent(i),this._config.content={...this._config.content,...i},this}toHtml(){let i=document.createElement("div");i.innerHTML=this._maybeSanitize(this._config.template);for(let[o,l]of Object.entries(this._config.content))this._setContent(i,l,o);let r=i.children[0],u=this._resolvePossibleFunction(this._config.extraClass);return u&&r.classList.add(...u.split(" ")),r}_typeCheckConfig(i){super._typeCheckConfig(i),this._checkContent(i.content)}_checkContent(i){for(let[r,u]of Object.entries(i))super._typeCheckConfig({selector:r,entry:u},Kd)}_setContent(i,r,u){let o=k.findOne(u,i);if(o){if(r=this._resolvePossibleFunction(r),!r){o.remove();return}if(se(r)){this._putElementInTemplate(fe(r),o);return}if(this._config.html){o.innerHTML=this._maybeSanitize(r);return}o.textContent=r}}_maybeSanitize(i){return this._config.sanitize?Ud(i,this._config.allowList,this._config.sanitizeFn):i}_resolvePossibleFunction(i){return kt(i,[void 0,this])}_putElementInTemplate(i,r){if(this._config.html){r.innerHTML="",r.append(i);return}r.textContent=i.textContent}},qd="tooltip",Xd=new Set(["sanitize","allowList","sanitizeFn"]),is="fade",Jd="modal",Bn="show",Qd=".tooltip-inner",oa=`.${Jd}`,sa="hide.bs.modal",Yi="hover",ns="focus",tf="click",ef="manual",nf="hide",of="hidden",sf="show",rf="shown",af="inserted",lf="click",hf="focusin",cf="focusout",uf="mouseenter",df="mouseleave",ff={AUTO:"auto",TOP:"top",RIGHT:Bt()?"left":"right",BOTTOM:"bottom",LEFT:Bt()?"right":"left"},pf={allowList:za,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},_f={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},pi=class a extends At{constructor(i,r){if(typeof In>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(i,r),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return pf}static get DefaultType(){return _f}static get NAME(){return qd}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),b.off(this._element.closest(oa),sa,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let i=b.trigger(this._element,this.constructor.eventName(sf)),u=(_a(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(i.defaultPrevented||!u)return;this._disposePopper();let o=this._getTipElement();this._element.setAttribute("aria-describedby",o.getAttribute("id"));let{container:l}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(l.append(o),b.trigger(this._element,this.constructor.eventName(af))),this._popper=this._createPopper(o),o.classList.add(Bn),"ontouchstart"in document.documentElement)for(let f of[].concat(...document.body.children))b.on(f,"mouseover",Fn);let c=()=>{b.trigger(this._element,this.constructor.eventName(rf)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(c,this.tip,this._isAnimated())}hide(){if(!this._isShown()||b.trigger(this._element,this.constructor.eventName(nf)).defaultPrevented)return;if(this._getTipElement().classList.remove(Bn),"ontouchstart"in document.documentElement)for(let o of[].concat(...document.body.children))b.off(o,"mouseover",Fn);this._activeTrigger[tf]=!1,this._activeTrigger[ns]=!1,this._activeTrigger[Yi]=!1,this._isHovered=null;let u=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),b.trigger(this._element,this.constructor.eventName(of)))};this._queueCallback(u,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(i){let r=this._getTemplateFactory(i).toHtml();if(!r)return null;r.classList.remove(is,Bn),r.classList.add(`bs-${this.constructor.NAME}-auto`);let u=ec(this.constructor.NAME).toString();return r.setAttribute("id",u),this._isAnimated()&&r.classList.add(is),r}setContent(i){this._newContent=i,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(i){return this._templateFactory?this._templateFactory.changeContent(i):this._templateFactory=new ds({...this._config,content:i,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Qd]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(i){return this.constructor.getOrCreateInstance(i.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(is)}_isShown(){return this.tip&&this.tip.classList.contains(Bn)}_createPopper(i){let r=kt(this._config.placement,[this,i,this._element]),u=ff[r.toUpperCase()];return Gi(this._element,i,this._getPopperConfig(u))}_getOffset(){let{offset:i}=this._config;return typeof i=="string"?i.split(",").map(r=>Number.parseInt(r,10)):typeof i=="function"?r=>i(r,this._element):i}_resolvePossibleFunction(i){return kt(i,[this._element,this._element])}_getPopperConfig(i){let r={placement:i,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:u=>{this._getTipElement().setAttribute("data-popper-placement",u.state.placement)}}]};return{...r,...kt(this._config.popperConfig,[void 0,r])}}_setListeners(){let i=this._config.trigger.split(" ");for(let r of i)if(r==="click")b.on(this._element,this.constructor.eventName(lf),this._config.selector,u=>{this._initializeOnDelegatedTarget(u).toggle()});else if(r!==ef){let u=r===Yi?this.constructor.eventName(uf):this.constructor.eventName(hf),o=r===Yi?this.constructor.eventName(df):this.constructor.eventName(cf);b.on(this._element,u,this._config.selector,l=>{let c=this._initializeOnDelegatedTarget(l);c._activeTrigger[l.type==="focusin"?ns:Yi]=!0,c._enter()}),b.on(this._element,o,this._config.selector,l=>{let c=this._initializeOnDelegatedTarget(l);c._activeTrigger[l.type==="focusout"?ns:Yi]=c._element.contains(l.relatedTarget),c._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},b.on(this._element.closest(oa),sa,this._hideModalHandler)}_fixTitle(){let i=this._element.getAttribute("title");i&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",i),this._element.setAttribute("data-bs-original-title",i),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(i,r){clearTimeout(this._timeout),this._timeout=setTimeout(i,r)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(i){let r=re.getDataAttributes(this._element);for(let u of Object.keys(r))Xd.has(u)&&delete r[u];return i={...r,...typeof i=="object"&&i?i:{}},i=this._mergeConfigObj(i),i=this._configAfterMerge(i),this._typeCheckConfig(i),i}_configAfterMerge(i){return i.container=i.container===!1?document.body:fe(i.container),typeof i.delay=="number"&&(i.delay={show:i.delay,hide:i.delay}),typeof i.title=="number"&&(i.title=i.title.toString()),typeof i.content=="number"&&(i.content=i.content.toString()),i}_getDelegateConfig(){let i={};for(let[r,u]of Object.entries(this._config))this.constructor.Default[r]!==u&&(i[r]=u);return i.selector=!1,i.trigger="manual",i}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(i){return this.each(function(){let r=a.getOrCreateInstance(this,i);if(typeof i=="string"){if(typeof r[i]>"u")throw new TypeError(`No method named "${i}"`);r[i]()}})}};Ht(pi);var mf="popover",gf=".popover-header",vf=".popover-body",yf={...pi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Lf={...pi.DefaultType,content:"(null|string|element|function)"},fs=class a extends pi{static get Default(){return yf}static get DefaultType(){return Lf}static get NAME(){return mf}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[gf]:this._getTitle(),[vf]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(i){return this.each(function(){let r=a.getOrCreateInstance(this,i);if(typeof i=="string"){if(typeof r[i]>"u")throw new TypeError(`No method named "${i}"`);r[i]()}})}};Ht(fs);var wf="scrollspy",bf="bs.scrollspy",gs=`.${bf}`,Ef=".data-api",Tf=`activate${gs}`,ra=`click${gs}`,xf=`load${gs}${Ef}`,Pf="dropdown-item",hi="active",Cf='[data-bs-spy="scroll"]',os="[href]",Mf=".nav, .list-group",aa=".nav-link",kf=".nav-item",Sf=".list-group-item",Af=`${aa}, ${kf} > ${aa}, ${Sf}`,Df=".dropdown",Of=".dropdown-toggle",If={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Nf={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},Xn=class a extends At{constructor(i,r){super(i,r),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return If}static get DefaultType(){return Nf}static get NAME(){return wf}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let i of this._observableSections.values())this._observer.observe(i)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(i){return i.target=fe(i.target)||document.body,i.rootMargin=i.offset?`${i.offset}px 0px -30%`:i.rootMargin,typeof i.threshold=="string"&&(i.threshold=i.threshold.split(",").map(r=>Number.parseFloat(r))),i}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(b.off(this._config.target,ra),b.on(this._config.target,ra,os,i=>{let r=this._observableSections.get(i.target.hash);if(r){i.preventDefault();let u=this._rootElement||window,o=r.offsetTop-this._element.offsetTop;if(u.scrollTo){u.scrollTo({top:o,behavior:"smooth"});return}u.scrollTop=o}}))}_getNewObserver(){let i={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(r=>this._observerCallback(r),i)}_observerCallback(i){let r=c=>this._targetLinks.get(`#${c.target.id}`),u=c=>{this._previousScrollData.visibleEntryTop=c.target.offsetTop,this._process(r(c))},o=(this._rootElement||document.documentElement).scrollTop,l=o>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=o;for(let c of i){if(!c.isIntersecting){this._activeTarget=null,this._clearActiveClass(r(c));continue}let f=c.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(l&&f){if(u(c),!o)return;continue}!l&&!f&&u(c)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let i=k.find(os,this._config.target);for(let r of i){if(!r.hash||pe(r))continue;let u=k.findOne(decodeURI(r.hash),this._element);_i(u)&&(this._targetLinks.set(decodeURI(r.hash),r),this._observableSections.set(r.hash,u))}}_process(i){this._activeTarget!==i&&(this._clearActiveClass(this._config.target),this._activeTarget=i,i.classList.add(hi),this._activateParents(i),b.trigger(this._element,Tf,{relatedTarget:i}))}_activateParents(i){if(i.classList.contains(Pf)){k.findOne(Of,i.closest(Df)).classList.add(hi);return}for(let r of k.parents(i,Mf))for(let u of k.prev(r,Af))u.classList.add(hi)}_clearActiveClass(i){i.classList.remove(hi);let r=k.find(`${os}.${hi}`,i);for(let u of r)u.classList.remove(hi)}static jQueryInterface(i){return this.each(function(){let r=a.getOrCreateInstance(this,i);if(typeof i=="string"){if(r[i]===void 0||i.startsWith("_")||i==="constructor")throw new TypeError(`No method named "${i}"`);r[i]()}})}};b.on(window,xf,()=>{for(let a of k.find(Cf))Xn.getOrCreateInstance(a)});Ht(Xn);var Rf="tab",zf="bs.tab",We=`.${zf}`,Bf=`hide${We}`,$f=`hidden${We}`,Hf=`show${We}`,Zf=`shown${We}`,Vf=`click${We}`,Ff=`keydown${We}`,Wf=`load${We}`,Uf="ArrowLeft",la="ArrowRight",Gf="ArrowUp",ha="ArrowDown",ss="Home",ca="End",Ze="active",ua="fade",rs="show",jf="dropdown",Ba=".dropdown-toggle",Yf=".dropdown-menu",as=`:not(${Ba})`,Kf='.list-group, .nav, [role="tablist"]',qf=".nav-item, .list-group-item",Xf=`.nav-link${as}, .list-group-item${as}, [role="tab"]${as}`,$a='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ls=`${Xf}, ${$a}`,Jf=`.${Ze}[data-bs-toggle="tab"], .${Ze}[data-bs-toggle="pill"], .${Ze}[data-bs-toggle="list"]`,Xi=class a extends At{constructor(i){super(i),this._parent=this._element.closest(Kf),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),b.on(this._element,Ff,r=>this._keydown(r)))}static get NAME(){return Rf}show(){let i=this._element;if(this._elemIsActive(i))return;let r=this._getActiveElem(),u=r?b.trigger(r,Bf,{relatedTarget:i}):null;b.trigger(i,Hf,{relatedTarget:r}).defaultPrevented||u&&u.defaultPrevented||(this._deactivate(r,i),this._activate(i,r))}_activate(i,r){if(!i)return;i.classList.add(Ze),this._activate(k.getElementFromSelector(i));let u=()=>{if(i.getAttribute("role")!=="tab"){i.classList.add(rs);return}i.removeAttribute("tabindex"),i.setAttribute("aria-selected",!0),this._toggleDropDown(i,!0),b.trigger(i,Zf,{relatedTarget:r})};this._queueCallback(u,i,i.classList.contains(ua))}_deactivate(i,r){if(!i)return;i.classList.remove(Ze),i.blur(),this._deactivate(k.getElementFromSelector(i));let u=()=>{if(i.getAttribute("role")!=="tab"){i.classList.remove(rs);return}i.setAttribute("aria-selected",!1),i.setAttribute("tabindex","-1"),this._toggleDropDown(i,!1),b.trigger(i,$f,{relatedTarget:r})};this._queueCallback(u,i,i.classList.contains(ua))}_keydown(i){if(![Uf,la,Gf,ha,ss,ca].includes(i.key))return;i.stopPropagation(),i.preventDefault();let r=this._getChildren().filter(o=>!pe(o)),u;if([ss,ca].includes(i.key))u=r[i.key===ss?0:r.length-1];else{let o=[la,ha].includes(i.key);u=ps(r,i.target,o,!0)}u&&(u.focus({preventScroll:!0}),a.getOrCreateInstance(u).show())}_getChildren(){return k.find(ls,this._parent)}_getActiveElem(){return this._getChildren().find(i=>this._elemIsActive(i))||null}_setInitialAttributes(i,r){this._setAttributeIfNotExists(i,"role","tablist");for(let u of r)this._setInitialAttributesOnChild(u)}_setInitialAttributesOnChild(i){i=this._getInnerElement(i);let r=this._elemIsActive(i),u=this._getOuterElement(i);i.setAttribute("aria-selected",r),u!==i&&this._setAttributeIfNotExists(u,"role","presentation"),r||i.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(i,"role","tab"),this._setInitialAttributesOnTargetPanel(i)}_setInitialAttributesOnTargetPanel(i){let r=k.getElementFromSelector(i);r&&(this._setAttributeIfNotExists(r,"role","tabpanel"),i.id&&this._setAttributeIfNotExists(r,"aria-labelledby",`${i.id}`))}_toggleDropDown(i,r){let u=this._getOuterElement(i);if(!u.classList.contains(jf))return;let o=(l,c)=>{let f=k.findOne(l,u);f&&f.classList.toggle(c,r)};o(Ba,Ze),o(Yf,rs),u.setAttribute("aria-expanded",r)}_setAttributeIfNotExists(i,r,u){i.hasAttribute(r)||i.setAttribute(r,u)}_elemIsActive(i){return i.classList.contains(Ze)}_getInnerElement(i){return i.matches(ls)?i:k.findOne(ls,i)}_getOuterElement(i){return i.closest(qf)||i}static jQueryInterface(i){return this.each(function(){let r=a.getOrCreateInstance(this);if(typeof i=="string"){if(r[i]===void 0||i.startsWith("_")||i==="constructor")throw new TypeError(`No method named "${i}"`);r[i]()}})}};b.on(document,Vf,$a,function(a){["A","AREA"].includes(this.tagName)&&a.preventDefault(),!pe(this)&&Xi.getOrCreateInstance(this).show()});b.on(window,Wf,()=>{for(let a of k.find(Jf))Xi.getOrCreateInstance(a)});Ht(Xi);var Qf="toast",tp="bs.toast",ve=`.${tp}`,ep=`mouseover${ve}`,ip=`mouseout${ve}`,np=`focusin${ve}`,op=`focusout${ve}`,sp=`hide${ve}`,rp=`hidden${ve}`,ap=`show${ve}`,lp=`shown${ve}`,hp="fade",da="hide",$n="show",Hn="showing",cp={animation:"boolean",autohide:"boolean",delay:"number"},up={animation:!0,autohide:!0,delay:5e3},Jn=class a extends At{constructor(i,r){super(i,r),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return up}static get DefaultType(){return cp}static get NAME(){return Qf}show(){if(b.trigger(this._element,ap).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(hp);let r=()=>{this._element.classList.remove(Hn),b.trigger(this._element,lp),this._maybeScheduleHide()};this._element.classList.remove(da),Ji(this._element),this._element.classList.add($n,Hn),this._queueCallback(r,this._element,this._config.animation)}hide(){if(!this.isShown()||b.trigger(this._element,sp).defaultPrevented)return;let r=()=>{this._element.classList.add(da),this._element.classList.remove(Hn,$n),b.trigger(this._element,rp)};this._element.classList.add(Hn),this._queueCallback(r,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove($n),super.dispose()}isShown(){return this._element.classList.contains($n)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(i,r){switch(i.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=r;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=r;break}}if(r){this._clearTimeout();return}let u=i.relatedTarget;this._element===u||this._element.contains(u)||this._maybeScheduleHide()}_setListeners(){b.on(this._element,ep,i=>this._onInteraction(i,!0)),b.on(this._element,ip,i=>this._onInteraction(i,!1)),b.on(this._element,np,i=>this._onInteraction(i,!0)),b.on(this._element,op,i=>this._onInteraction(i,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(i){return this.each(function(){let r=a.getOrCreateInstance(this,i);if(typeof i=="string"){if(typeof r[i]>"u")throw new TypeError(`No method named "${i}"`);r[i](this)}})}};Qn(Jn);Ht(Jn);var dp="OpenGISLK",gi="cache";async function Ha(){return new Promise((a,i)=>{if(!window.indexedDB)return alert("Sorry! Your browser does not support IndexedDB"),i("No IndexedDB support");let r=indexedDB.open(dp,3);r.onupgradeneeded=u=>{let o=u.target.result;o.objectStoreNames.contains(gi)||o.createObjectStore(gi,{keyPath:"url"})},r.onsuccess=u=>{a(u.target.result)},r.onerror=u=>{i("IndexedDB error: "+u.target.errorCode)}})}async function fp(a,i){return new Promise((r,u)=>{if(typeof i!="string")return r(!1);let o=a.get(i);o.onsuccess=()=>{r(o.result!==void 0)},o.onerror=()=>{r(!1)}})}async function Za(a){let u=(await Ha()).transaction(gi,"readonly").objectStore(gi);return await fp(u,a),null}async function Va(a,i){let o=(await Ha()).transaction(gi,"readwrite").objectStore(gi),l={url:a,content:i,timestamp:Date.now()};return new Promise((c,f)=>{let _=o.put(l);_.onsuccess=()=>c(!0),_.onerror=()=>{console.error("IndexedDB write error:",_.error),f(_.error)}})}function Fa(a){try{return JSON.parse(a),!0}catch{return!1}}async function Wa(a){let i=await Za(a.toString());return i??new Promise((r,u)=>{let o=new XMLHttpRequest;o.open("GET",a,!0),o.setRequestHeader("Accept","application/json"),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(o.status===200?(Va(a.toString(),o.responseText),r(o.responseText)):u(o.status))},o.onerror=()=>u(o.statusText),o.send()})}async function Ua(a){let i=new URL(attributeDataURL.toString());Object.entries(a).forEach(([u,o])=>{i.searchParams.append(u,o)});let r=await Wa(i);if(!Fa(r)){console.log("invalidJSON");return}return r=JSON.parse(r),r}async function Ga(a){let i=new URL(dataURL.toString());Object.entries(a).forEach(([u,o])=>{i.searchParams.append(u,o)});let r=await Wa(i);if(!Fa(r)){console.log("invalidJSON");return}return r=JSON.parse(r),r}async function vs(){let i=await Ua({product_id:"products"});return i||(console.error("Invalid product data received"),[])}async function ja(a){return await Ga(a)}var Zv=Ph(Ka());(function(a,i,r){function u(o,l){for(;(o=o.parentElement)&&!o.classList.contains(l););return o}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(o,l){this._map=o,this._container=o._container,this._overlayPane=o._panes.overlayPane,this._popupPane=o._panes.popupPane,l&&l.shapeOptions&&(l.shapeOptions=L.Util.extend({},this.options.shapeOptions,l.shapeOptions)),L.setOptions(this,l);var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var o=this._map;o&&(L.DomUtil.disableTextSelection(),o.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(o){L.setOptions(this,o)},_fireCreatedEvent:function(o){this._map.fire(L.Draw.Event.CREATED,{layer:o,layerType:this.type})},_cancelDrawing:function(o){o.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(o,l){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,l&&l.drawError&&(l.drawError=L.Util.extend({},this.options.drawError,l.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,o,l)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var o=this._markers.pop(),l=this._poly,c=l.getLatLngs(),f=c.splice(-1,1)[0];this._poly.setLatLngs(c),this._markerGroup.removeLayer(o),l.getLatLngs().length<2&&this._map.removeLayer(l),this._vertexChanged(f,!1)}},addVertex:function(o){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(o))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(o)),this._poly.addLatLng(o),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(o,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var o=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),l=this._poly.newLatLngIntersects(o[o.length-1]);if(!this.options.allowIntersection&&l||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(o){var l=this._map.mouseEventToLayerPoint(o.originalEvent),c=this._map.layerPointToLatLng(l);this._currentLatLng=c,this._updateTooltip(c),this._updateGuide(l),this._mouseMarker.setLatLng(c),L.DomEvent.preventDefault(o.originalEvent)},_vertexChanged:function(o,l){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(o,l),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(o){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(o),this._clickHandled=!0,this._disableNewMarkers();var l=o.originalEvent,c=l.clientX,f=l.clientY;this._startPoint.call(this,c,f)}},_startPoint:function(o,l){this._mouseDownOrigin=L.point(o,l)},_onMouseUp:function(o){var l=o.originalEvent,c=l.clientX,f=l.clientY;this._endPoint.call(this,c,f,o),this._clickHandled=null},_endPoint:function(o,l,c){if(this._mouseDownOrigin){var f=L.point(o,l).distanceTo(this._mouseDownOrigin),_=this._calculateFinishDistance(c.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(c.latlng),this._finishShape()):_<10&&L.Browser.touch?this._finishShape():Math.abs(f)<9*(a.devicePixelRatio||1)&&this.addVertex(c.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(o){var l,c,f=o.originalEvent;!f.touches||!f.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(l=f.touches[0].clientX,c=f.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,l,c),this._endPoint.call(this,l,c,o),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(o){var l;if(this._markers.length>0){var c;if(this.type===L.Draw.Polyline.TYPE)c=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;c=this._markers[0]}var f=this._map.latLngToContainerPoint(c.getLatLng()),_=new L.Marker(o,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),m=this._map.latLngToContainerPoint(_.getLatLng());l=f.distanceTo(m)}else l=1/0;return l},_updateFinishHandler:function(){var o=this._markers.length;o>1&&this._markers[o-1].on("click",this._finishShape,this),o>2&&this._markers[o-2].off("click",this._finishShape,this)},_createMarker:function(o){var l=new L.Marker(o,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(l),l},_updateGuide:function(o){var l=this._markers?this._markers.length:0;l>0&&(o=o||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[l-1].getLatLng()),o))},_updateTooltip:function(o){var l=this._getTooltipText();o&&this._tooltip.updatePosition(o),this._errorShown||this._tooltip.updateContent(l)},_drawGuide:function(o,l){var c,f,_,m=Math.floor(Math.sqrt(Math.pow(l.x-o.x,2)+Math.pow(l.y-o.y,2))),g=this.options.guidelineDistance,E=this.options.maxGuideLineLength,P=m>E?m-E:g;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));P<m;P+=this.options.guidelineDistance)c=P/m,f={x:Math.floor(o.x*(1-c)+c*l.x),y:Math.floor(o.y*(1-c)+c*l.y)},_=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),_.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(_,f)},_updateGuideColor:function(o){if(this._guidesContainer)for(var l=0,c=this._guidesContainer.childNodes.length;l<c;l++)this._guidesContainer.childNodes[l].style.backgroundColor=o},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var o,l,c=this.options.showLength;return this._markers.length===0?o={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(l=c?this._getMeasurementString():"",o=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:l}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:l}),o},_updateRunningMeasure:function(o,l){var c,f,_=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(c=_-(l?2:1),f=L.GeometryUtil.isVersion07x()?o.distanceTo(this._markers[c].getLatLng())*(this.options.factor||1):this._map.distance(o,this._markers[c].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=f*(l?1:-1))},_getMeasurementString:function(){var o,l=this._currentLatLng,c=this._markers[this._markers.length-1].getLatLng();return o=L.GeometryUtil.isVersion07x()?c&&l&&l.distanceTo?this._measurementRunningTotal+l.distanceTo(c)*(this.options.factor||1):this._measurementRunningTotal||0:c&&l?this._measurementRunningTotal+this._map.distance(l,c)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(o,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var o=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,o)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(o,l){L.Draw.Polyline.prototype.initialize.call(this,o,l),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var o=this._markers.length;o===1&&this._markers[0].on("click",this._finishShape,this),o>2&&(this._markers[o-1].on("dblclick",this._finishShape,this),o>3&&this._markers[o-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var o,l;return this._markers.length===0?o=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(o=L.drawLocal.draw.handlers.polygon.tooltip.cont,l=this._getMeasurementString()):(o=L.drawLocal.draw.handlers.polygon.tooltip.end,l=this._getMeasurementString()),{text:o,subtext:l}},_getMeasurementString:function(){var o=this._area,l="";return o||this.options.showLength?(this.options.showLength&&(l=L.Draw.Polyline.prototype._getMeasurementString.call(this)),o&&(l+="<br>"+L.GeometryUtil.readableArea(o,this.options.metric,this.options.precision)),l):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(o,l){var c;!this.options.allowIntersection&&this.options.showArea&&(c=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(c)),L.Draw.Polyline.prototype._vertexChanged.call(this,o,l)},_cleanUpShape:function(){var o=this._markers.length;o>0&&(this._markers[0].off("click",this._finishShape,this),o>2&&this._markers[o-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(o,l){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,o,l)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),i.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(i,"mouseup",this._onMouseUp,this),L.DomEvent.off(i,"touchend",this._onMouseUp,this),i.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(o){this._isDrawing=!0,this._startLatLng=o.latlng,L.DomEvent.on(i,"mouseup",this._onMouseUp,this).on(i,"touchend",this._onMouseUp,this).preventDefault(o.originalEvent)},_onMouseMove:function(o){var l=o.latlng;this._tooltip.updatePosition(l),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(l))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(o,l){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,o,l)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(o){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!u(o.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(o){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,o)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,o),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var o=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,o)},_getTooltipText:function(){var o,l,c,f=L.Draw.SimpleShape.prototype._getTooltipText.call(this),_=this._shape,m=this.options.showArea;return _&&(o=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),l=L.GeometryUtil.geodesicArea(o),c=m?L.GeometryUtil.readableArea(l,this.options.metric):""),{text:f.text,subtext:c}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(o,l){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,o,l)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(o){var l=o.latlng;this._tooltip.updatePosition(l),this._mouseMarker.setLatLng(l),this._marker?(l=this._mouseMarker.getLatLng(),this._marker.setLatLng(l)):(this._marker=this._createMarker(l),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(o){return new L.Marker(o,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(o){this._onMouseMove(o),this._onClick()},_fireCreatedEvent:function(){var o=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,o)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(o,l){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,o,l)},_fireCreatedEvent:function(){var o=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,o)},_createMarker:function(o){return new L.CircleMarker(o,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(o,l){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,o,l)},_drawShape:function(o){if(L.GeometryUtil.isVersion07x())var l=this._startLatLng.distanceTo(o);else var l=this._map.distance(this._startLatLng,o);this._shape?this._shape.setRadius(l):(this._shape=new L.Circle(this._startLatLng,l,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var o=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,o)},_onMouseMove:function(o){var l,c=o.latlng,f=this.options.showRadius,_=this.options.metric;if(this._tooltip.updatePosition(c),this._isDrawing){this._drawShape(c),l=this._shape.getRadius().toFixed(1);var m="";f&&(m=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(l,_,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:m})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(o,l){this._marker=o,L.setOptions(this,l)},addHooks:function(){var o=this._marker;o.dragging.enable(),o.on("dragend",this._onDragEnd,o),this._toggleMarkerHighlight()},removeHooks:function(){var o=this._marker;o.dragging.disable(),o.off("dragend",this._onDragEnd,o),this._toggleMarkerHighlight()},_onDragEnd:function(o){var l=o.target;l.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:l})},_toggleMarkerHighlight:function(){var o=this._marker._icon;o&&(o.style.display="none",L.DomUtil.hasClass(o,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(o,"leaflet-edit-marker-selected"),this._offsetMarker(o,-4)):(L.DomUtil.addClass(o,"leaflet-edit-marker-selected"),this._offsetMarker(o,4)),o.style.display="")},_offsetMarker:function(o,l){var c=parseInt(o.style.marginTop,10)-l,f=parseInt(o.style.marginLeft,10)-l;o.style.marginTop=c+"px",o.style.marginLeft=f+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(o){this.latlngs=[o._latlngs],o._holes&&(this.latlngs=this.latlngs.concat(o._holes)),this._poly=o,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(o){for(var l=0;l<this._verticesHandlers.length;l++)o(this._verticesHandlers[l])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(o){o.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(o){o.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(o){o.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var o=0;o<this.latlngs.length;o++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[o],this._poly.options.poly))},_updateLatLngs:function(o){this.latlngs=[o.layer._latlngs],o.layer._holes&&(this.latlngs=this.latlngs.concat(o.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(o,l,c){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=o,c&&c.drawError&&(c.drawError=L.Util.extend({},this.options.drawError,c.drawError)),this._latlngs=l,L.setOptions(this,c)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var o=this._poly,l=o._path;o instanceof L.Polygon||(o.options.fill=!1,o.options.editing&&(o.options.editing.fill=!1)),l&&o.options.editing&&o.options.editing.className&&(o.options.original.className&&o.options.original.className.split(" ").forEach(function(c){L.DomUtil.removeClass(l,c)}),o.options.editing.className.split(" ").forEach(function(c){L.DomUtil.addClass(l,c)})),o.setStyle(o.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var o=this._poly,l=o._path;l&&o.options.editing&&o.options.editing.className&&(o.options.editing.className.split(" ").forEach(function(c){L.DomUtil.removeClass(l,c)}),o.options.original.className&&o.options.original.className.split(" ").forEach(function(c){L.DomUtil.addClass(l,c)})),o.setStyle(o.options.original),o._map&&(o._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var o,l,c,f,_=this._defaultShape();for(o=0,c=_.length;o<c;o++)f=this._createMarker(_[o],o),f.on("click",this._onMarkerClick,this),f.on("contextmenu",this._onContextMenu,this),this._markers.push(f);var m,g;for(o=0,l=c-1;o<c;l=o++)(o!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(m=this._markers[l],g=this._markers[o],this._createMiddleMarker(m,g),this._updatePrevNext(m,g))},_createMarker:function(o,l){var c=new L.Marker.Touch(o,{draggable:!0,icon:this.options.icon});return c._origLatLng=o,c._index=l,c.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(c),c},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var o=this._defaultShape(),l=[].splice.apply(o,arguments);return this._poly._convertLatLngs(o,!0),this._poly.redraw(),l},_removeMarker:function(o){var l=o._index;this._markerGroup.removeLayer(o),this._markers.splice(l,1),this._spliceLatLngs(l,1),this._updateIndexes(l,-1),o.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(o){var l=o.target,c=this._poly,f=L.LatLngUtil.cloneLatLng(l._origLatLng);if(L.extend(l._origLatLng,l._latlng),c.options.poly){var _=c._map._editTooltip;if(!c.options.poly.allowIntersection&&c.intersects()){L.extend(l._origLatLng,f),l.setLatLng(f);var m=c.options.color;c.setStyle({color:this.options.drawError.color}),_&&_.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){c.setStyle({color:m}),_&&_.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}l._middleLeft&&l._middleLeft.setLatLng(this._getMiddleLatLng(l._prev,l)),l._middleRight&&l._middleRight.setLatLng(this._getMiddleLatLng(l,l._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var g=this._poly.getLatLngs();this._poly._convertLatLngs(g,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(o){var l=L.Polygon&&this._poly instanceof L.Polygon?4:3,c=o.target;this._defaultShape().length<l||(this._removeMarker(c),this._updatePrevNext(c._prev,c._next),c._middleLeft&&this._markerGroup.removeLayer(c._middleLeft),c._middleRight&&this._markerGroup.removeLayer(c._middleRight),c._prev&&c._next?this._createMiddleMarker(c._prev,c._next):c._prev?c._next||(c._prev._middleRight=null):c._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(o){var l=o.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:l,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(o){var l=this._map.mouseEventToLayerPoint(o.originalEvent.touches[0]),c=this._map.layerPointToLatLng(l),f=o.target;L.extend(f._origLatLng,c),f._middleLeft&&f._middleLeft.setLatLng(this._getMiddleLatLng(f._prev,f)),f._middleRight&&f._middleRight.setLatLng(this._getMiddleLatLng(f,f._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(o,l){this._markerGroup.eachLayer(function(c){c._index>o&&(c._index+=l)})},_createMiddleMarker:function(o,l){var c,f,_,m=this._getMiddleLatLng(o,l),g=this._createMarker(m);g.setOpacity(.6),o._middleRight=l._middleLeft=g,f=function(){g.off("touchmove",f,this);var E=l._index;g._index=E,g.off("click",c,this).on("click",this._onMarkerClick,this),m.lat=g.getLatLng().lat,m.lng=g.getLatLng().lng,this._spliceLatLngs(E,0,m),this._markers.splice(E,0,g),g.setOpacity(1),this._updateIndexes(E,1),l._index++,this._updatePrevNext(o,g),this._updatePrevNext(g,l),this._poly.fire("editstart")},_=function(){g.off("dragstart",f,this),g.off("dragend",_,this),g.off("touchmove",f,this),this._createMiddleMarker(o,g),this._createMiddleMarker(g,l)},c=function(){f.call(this),_.call(this),this._fireEdit()},g.on("click",c,this).on("dragstart",f,this).on("dragend",_,this).on("touchmove",f,this),this._markerGroup.addLayer(g)},_updatePrevNext:function(o,l){o&&(o._next=l),l&&(l._prev=o)},_getMiddleLatLng:function(o,l){var c=this._poly._map,f=c.project(o.getLatLng()),_=c.project(l.getLatLng());return c.unproject(f._add(_)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(o,l){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=o,L.Util.setOptions(this,l)},addHooks:function(){var o=this._shape;this._shape._map&&(this._map=this._shape._map,o.setStyle(o.options.editing),o._map&&(this._map=o._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var o=this._shape;if(o.setStyle(o.options.original),o._map){this._unbindMarker(this._moveMarker);for(var l=0,c=this._resizeMarkers.length;l<c;l++)this._unbindMarker(this._resizeMarkers[l]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(o,l){var c=new L.Marker.Touch(o,{draggable:!0,icon:l,zIndexOffset:10});return this._bindMarker(c),this._markerGroup.addLayer(c),c},_bindMarker:function(o){o.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(o){o.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(o){o.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(o){var l=o.target,c=l.getLatLng();l===this._moveMarker?this._move(c):this._resize(c),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(o){o.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(o){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,o),typeof this._getCorners=="function"){var l=this._getCorners(),c=o.target,f=c._cornerIndex;c.setOpacity(0),this._oppositeCorner=l[(f+2)%4],this._toggleCornerMarkers(0,f)}this._shape.fire("editstart")},_onTouchMove:function(o){var l=this._map.mouseEventToLayerPoint(o.originalEvent.touches[0]),c=this._map.layerPointToLatLng(l);return o.target===this._moveMarker?this._move(c):this._resize(c),this._shape.redraw(),!1},_onTouchEnd:function(o){o.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var o=this._shape.getBounds(),l=o.getCenter();this._moveMarker=this._createMarker(l,this.options.moveIcon)},_createResizeMarker:function(){var o=this._getCorners();this._resizeMarkers=[];for(var l=0,c=o.length;l<c;l++)this._resizeMarkers.push(this._createMarker(o[l],this.options.resizeIcon)),this._resizeMarkers[l]._cornerIndex=l},_onMarkerDragStart:function(o){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,o);var l=this._getCorners(),c=o.target,f=c._cornerIndex;this._oppositeCorner=l[(f+2)%4],this._toggleCornerMarkers(0,f)},_onMarkerDragEnd:function(o){var l,c,f=o.target;f===this._moveMarker&&(l=this._shape.getBounds(),c=l.getCenter(),f.setLatLng(c)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,o)},_move:function(o){for(var l,c=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),f=this._shape.getBounds(),_=f.getCenter(),m=[],g=0,E=c.length;g<E;g++)l=[c[g].lat-_.lat,c[g].lng-_.lng],m.push([o.lat+l[0],o.lng+l[1]]);this._shape.setLatLngs(m),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(o){var l;this._shape.setBounds(L.latLngBounds(o,this._oppositeCorner)),l=this._shape.getBounds(),this._moveMarker.setLatLng(l.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var o=this._shape.getBounds();return[o.getNorthWest(),o.getNorthEast(),o.getSouthEast(),o.getSouthWest()]},_toggleCornerMarkers:function(o){for(var l=0,c=this._resizeMarkers.length;l<c;l++)this._resizeMarkers[l].setOpacity(o)},_repositionCornerMarkers:function(){for(var o=this._getCorners(),l=0,c=this._resizeMarkers.length;l<c;l++)this._resizeMarkers[l].setLatLng(o[l])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var o=this._shape.getLatLng();this._moveMarker=this._createMarker(o,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(o){if(this._resizeMarkers.length){var l=this._getResizeMarkerPoint(o);this._resizeMarkers[0].setLatLng(l)}this._shape.setLatLng(o),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var o=this._shape.getLatLng(),l=this._getResizeMarkerPoint(o);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(l,this.options.resizeIcon))},_getResizeMarkerPoint:function(o){var l=this._shape._radius*Math.cos(Math.PI/4),c=this._map.project(o);return this._map.unproject([c.x+l,c.y-l])},_resize:function(o){var l=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=l.distanceTo(o):radius=this._map.distance(l,o),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(o,l){var c={};if(o.touches!==void 0){if(!o.touches.length)return;c=o.touches[0]}else if(o.pointerType!=="touch"||(c=o,!this._filterClick(o)))return;var f=this._map.mouseEventToContainerPoint(c),_=this._map.mouseEventToLayerPoint(c),m=this._map.layerPointToLatLng(_);this._map.fire(l,{latlng:m,layerPoint:_,containerPoint:f,pageX:c.pageX,pageY:c.pageY,originalEvent:o})},_filterClick:function(o){var l=o.timeStamp||o.originalEvent.timeStamp,c=L.DomEvent._lastClick&&l-L.DomEvent._lastClick;return c&&c>100&&c<500||o.target._simulatedClick&&!o._simulated?(L.DomEvent.stop(o),!1):(L.DomEvent._lastClick=l,!0)},_onTouchStart:function(o){this._map._loaded&&this._touchEvent(o,"touchstart")},_onTouchEnd:function(o){this._map._loaded&&this._touchEvent(o,"touchend")},_onTouchCancel:function(o){if(this._map._loaded){var l="touchcancel";this._detectIE()&&(l="pointercancel"),this._touchEvent(o,l)}},_onTouchLeave:function(o){this._map._loaded&&this._touchEvent(o,"touchleave")},_onTouchMove:function(o){this._map._loaded&&this._touchEvent(o,"touchmove")},_detectIE:function(){var o=a.navigator.userAgent,l=o.indexOf("MSIE ");if(l>0)return parseInt(o.substring(l+5,o.indexOf(".",l)),10);if(o.indexOf("Trident/")>0){var c=o.indexOf("rv:");return parseInt(o.substring(c+3,o.indexOf(".",c)),10)}var f=o.indexOf("Edge/");return f>0&&parseInt(o.substring(f+5,o.indexOf(".",f)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var o=this._icon,l=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?l.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):l.concat(["touchcancel"]),L.DomUtil.addClass(o,"leaflet-clickable"),L.DomEvent.on(o,"click",this._onMouseClick,this),L.DomEvent.on(o,"keypress",this._onKeyPress,this);for(var c=0;c<l.length;c++)L.DomEvent.on(o,l[c],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var o=a.navigator.userAgent,l=o.indexOf("MSIE ");if(l>0)return parseInt(o.substring(l+5,o.indexOf(".",l)),10);if(o.indexOf("Trident/")>0){var c=o.indexOf("rv:");return parseInt(o.substring(c+3,o.indexOf(".",c)),10)}var f=o.indexOf("Edge/");return f>0&&parseInt(o.substring(f+5,o.indexOf(".",f)),10)}}),L.LatLngUtil={cloneLatLngs:function(o){for(var l=[],c=0,f=o.length;c<f;c++)Array.isArray(o[c])?l.push(L.LatLngUtil.cloneLatLngs(o[c])):l.push(this.cloneLatLng(o[c]));return l},cloneLatLng:function(o){return L.latLng(o.lat,o.lng)}},function(){var o={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(l){var c,f,_=l.length,m=0,g=Math.PI/180;if(_>2){for(var E=0;E<_;E++)c=l[E],f=l[(E+1)%_],m+=(f.lng-c.lng)*g*(2+Math.sin(c.lat*g)+Math.sin(f.lat*g));m=6378137*m*6378137/2}return Math.abs(m)},formattedNumber:function(l,c){var f=parseFloat(l).toFixed(c),_=L.drawLocal.format&&L.drawLocal.format.numeric,m=_&&_.delimiters,g=m&&m.thousands,E=m&&m.decimal;if(g||E){var P=f.split(".");f=g?P[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+g):P[0],E=E||".",P.length>1&&(f=f+E+P[1])}return f},readableArea:function(l,c,g){var _,m,g=L.Util.extend({},o,g);return c?(m=["ha","m"],type=typeof c,type==="string"?m=[c]:type!=="boolean"&&(m=c),_=l>=1e6&&m.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*l,g.km)+" km\xB2":l>=1e4&&m.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*l,g.ha)+" ha":L.GeometryUtil.formattedNumber(l,g.m)+" m\xB2"):(l/=.836127,_=l>=3097600?L.GeometryUtil.formattedNumber(l/3097600,g.mi)+" mi\xB2":l>=4840?L.GeometryUtil.formattedNumber(l/4840,g.ac)+" acres":L.GeometryUtil.formattedNumber(l,g.yd)+" yd\xB2"),_},readableDistance:function(l,c,f,_,E){var g,E=L.Util.extend({},o,E);switch(c?typeof c=="string"?c:"metric":f?"feet":_?"nauticalMile":"yards"){case"metric":g=l>1e3?L.GeometryUtil.formattedNumber(l/1e3,E.km)+" km":L.GeometryUtil.formattedNumber(l,E.m)+" m";break;case"feet":l*=3.28083,g=L.GeometryUtil.formattedNumber(l,E.ft)+" ft";break;case"nauticalMile":l*=.53996,g=L.GeometryUtil.formattedNumber(l/1e3,E.nm)+" nm";break;case"yards":default:l*=1.09361,g=l>1760?L.GeometryUtil.formattedNumber(l/1760,E.mi)+" miles":L.GeometryUtil.formattedNumber(l,E.yd)+" yd"}return g},isVersion07x:function(){var l=L.version.split(".");return parseInt(l[0],10)===0&&parseInt(l[1],10)===7}})}(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(o,l,c,f){return this._checkCounterclockwise(o,c,f)!==this._checkCounterclockwise(l,c,f)&&this._checkCounterclockwise(o,l,c)!==this._checkCounterclockwise(o,l,f)},_checkCounterclockwise:function(o,l,c){return(c.y-o.y)*(l.x-o.x)>(l.y-o.y)*(c.x-o.x)}}),L.Polyline.include({intersects:function(){var o,l,c,f=this._getProjectedPoints(),_=f?f.length:0;if(this._tooFewPointsForIntersection())return!1;for(o=_-1;o>=3;o--)if(l=f[o-1],c=f[o],this._lineSegmentsIntersectsRange(l,c,o-2))return!0;return!1},newLatLngIntersects:function(o,l){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(o),l)},newPointIntersects:function(o,l){var c=this._getProjectedPoints(),f=c?c.length:0,_=c?c[f-1]:null,m=f-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(_,o,m,l?1:0)},_tooFewPointsForIntersection:function(o){var l=this._getProjectedPoints(),c=l?l.length:0;return c+=o||0,!l||c<=3},_lineSegmentsIntersectsRange:function(o,l,c,f){var _,m,g=this._getProjectedPoints();f=f||0;for(var E=c;E>f;E--)if(_=g[E-1],m=g[E],L.LineUtil.segmentsIntersect(o,l,_,m))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var o=[],l=this._defaultShape(),c=0;c<l.length;c++)o.push(this._map.latLngToLayerPoint(l[c]));return o}}),L.Polygon.include({intersects:function(){var o,l,c,f,_=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(o=_.length,l=_[0],c=_[o-1],f=o-2,this._lineSegmentsIntersectsRange(c,l,f,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(o){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,o);var l;this._toolbars={},L.DrawToolbar&&this.options.draw&&(l=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=l,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(l=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=l,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(o){var l,c=L.DomUtil.create("div","leaflet-draw"),f=!1;for(var _ in this._toolbars)this._toolbars.hasOwnProperty(_)&&(l=this._toolbars[_].addToolbar(o))&&(f||(L.DomUtil.hasClass(l,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(l.childNodes[0],"leaflet-draw-toolbar-top"),f=!0),c.appendChild(l));return c},onRemove:function(){for(var o in this._toolbars)this._toolbars.hasOwnProperty(o)&&this._toolbars[o].removeToolbar()},setDrawingOptions:function(o){for(var l in this._toolbars)this._toolbars[l]instanceof L.DrawToolbar&&this._toolbars[l].setOptions(o)},_toolbarEnabled:function(o){var l=o.target;for(var c in this._toolbars)this._toolbars[c]!==l&&this._toolbars[c].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(o){L.setOptions(this,o),this._modes={},this._actionButtons=[],this._activeMode=null;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(o){var l,c=L.DomUtil.create("div","leaflet-draw-section"),f=0,_=this._toolbarClass||"",m=this.getModeHandlers(o);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=o,l=0;l<m.length;l++)m[l].enabled&&this._initModeHandler(m[l].handler,this._toolbarContainer,f++,_,m[l].title);if(f)return this._lastButtonIndex=--f,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),c.appendChild(this._toolbarContainer),c.appendChild(this._actionsContainer),c},removeToolbar:function(){for(var o in this._modes)this._modes.hasOwnProperty(o)&&(this._disposeButton(this._modes[o].button,this._modes[o].handler.enable,this._modes[o].handler),this._modes[o].handler.disable(),this._modes[o].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var l=0,c=this._actionButtons.length;l<c;l++)this._disposeButton(this._actionButtons[l].button,this._actionButtons[l].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(o,l,c,f,_){var m=o.type;this._modes[m]={},this._modes[m].handler=o,this._modes[m].button=this._createButton({type:m,title:_,className:f+"-"+m,container:l,callback:this._modes[m].handler.enable,context:this._modes[m].handler}),this._modes[m].buttonIndex=c,this._modes[m].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!a.MSStream},_createButton:function(o){var l=L.DomUtil.create("a",o.className||"",o.container),c=L.DomUtil.create("span","sr-only",o.container);l.href="#",l.appendChild(c),o.title&&(l.title=o.title,c.innerHTML=o.title),o.text&&(l.innerHTML=o.text,c.innerHTML=o.text);var f=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(l,"click",L.DomEvent.stopPropagation).on(l,"mousedown",L.DomEvent.stopPropagation).on(l,"dblclick",L.DomEvent.stopPropagation).on(l,"touchstart",L.DomEvent.stopPropagation).on(l,"click",L.DomEvent.preventDefault).on(l,f,o.callback,o.context),l},_disposeButton:function(o,l){var c=this._detectIOS()?"touchstart":"click";L.DomEvent.off(o,"click",L.DomEvent.stopPropagation).off(o,"mousedown",L.DomEvent.stopPropagation).off(o,"dblclick",L.DomEvent.stopPropagation).off(o,"touchstart",L.DomEvent.stopPropagation).off(o,"click",L.DomEvent.preventDefault).off(o,c,l)},_handlerActivated:function(o){this.disable(),this._activeMode=this._modes[o.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(o){var l,c,f,_,m=this._actionsContainer,g=this.getActions(o),E=g.length;for(c=0,f=this._actionButtons.length;c<f;c++)this._disposeButton(this._actionButtons[c].button,this._actionButtons[c].callback);for(this._actionButtons=[];m.firstChild;)m.removeChild(m.firstChild);for(var P=0;P<E;P++)"enabled"in g[P]&&!g[P].enabled||(l=L.DomUtil.create("li","",m),_=this._createButton({title:g[P].title,text:g[P].text,container:l,callback:g[P].callback,context:g[P].context}),this._actionButtons.push({button:_,callback:g[P].callback}))},_showActionsToolbar:function(){var o=this._activeMode.buttonIndex,l=this._lastButtonIndex,c=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=c+"px",o===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),o===l&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(o){this._map=o,this._popupPane=o._panes.popupPane,this._visible=!1,this._container=o.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(o){return this._container?(o.subtext=o.subtext||"",o.subtext.length!==0||this._singleLineLabel?o.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(o.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+o.subtext+"</span><br />":"")+"<span>"+o.text+"</span>",o.text||o.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(o){var l=this._map.latLngToLayerPoint(o),c=this._container;return this._container&&(this._visible&&(c.style.visibility="inherit"),L.DomUtil.setPosition(c,l)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(o){for(var l in this.options)this.options.hasOwnProperty(l)&&o[l]&&(o[l]=L.extend({},this.options[l],o[l]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,o)},getModeHandlers:function(o){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(o,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(o,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(o,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(o,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(o,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(o,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(o){return[{enabled:o.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:o.completeShape,context:o},{enabled:o.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:o.deleteLastVertex,context:o},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(o){L.setOptions(this,o);for(var l in this._modes)this._modes.hasOwnProperty(l)&&o.hasOwnProperty(l)&&this._modes[l].handler.setOptions(o[l])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(o){o.edit&&(o.edit.selectedPathOptions===void 0&&(o.edit.selectedPathOptions=this.options.edit.selectedPathOptions),o.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,o.edit.selectedPathOptions)),o.remove&&(o.remove=L.extend({},this.options.remove,o.remove)),o.poly&&(o.poly=L.extend({},this.options.poly,o.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,o),this._selectedFeatureCount=0},getModeHandlers:function(o){var l=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(o,{featureGroup:l,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(o,{featureGroup:l}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(o){var l=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return o.removeAllLayers&&l.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),l},addToolbar:function(o){var l=L.Toolbar.prototype.addToolbar.call(this,o);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),l},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var o,l=this.options.featureGroup,c=l.getLayers().length!==0;this.options.edit&&(o=this._modes[L.EditToolbar.Edit.TYPE].button,c?L.DomUtil.removeClass(o,"leaflet-disabled"):L.DomUtil.addClass(o,"leaflet-disabled"),o.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(o=this._modes[L.EditToolbar.Delete.TYPE].button,c?L.DomUtil.removeClass(o,"leaflet-disabled"):L.DomUtil.addClass(o,"leaflet-disabled"),o.setAttribute("title",c?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(o,l){if(L.Handler.prototype.initialize.call(this,o),L.setOptions(this,l),this._featureGroup=l.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var o=this._map;o&&(o.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),o._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(o){this._revertLayer(o)},this)},save:function(){var o=new L.LayerGroup;this._featureGroup.eachLayer(function(l){l.edited&&(o.addLayer(l),l.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:o})},_backupLayer:function(o){var l=L.Util.stamp(o);this._uneditedLayerProps[l]||(o instanceof L.Polyline||o instanceof L.Polygon||o instanceof L.Rectangle?this._uneditedLayerProps[l]={latlngs:L.LatLngUtil.cloneLatLngs(o.getLatLngs())}:o instanceof L.Circle?this._uneditedLayerProps[l]={latlng:L.LatLngUtil.cloneLatLng(o.getLatLng()),radius:o.getRadius()}:(o instanceof L.Marker||o instanceof L.CircleMarker)&&(this._uneditedLayerProps[l]={latlng:L.LatLngUtil.cloneLatLng(o.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(o){var l=L.Util.stamp(o);o.edited=!1,this._uneditedLayerProps.hasOwnProperty(l)&&(o instanceof L.Polyline||o instanceof L.Polygon||o instanceof L.Rectangle?o.setLatLngs(this._uneditedLayerProps[l].latlngs):o instanceof L.Circle?(o.setLatLng(this._uneditedLayerProps[l].latlng),o.setRadius(this._uneditedLayerProps[l].radius)):(o instanceof L.Marker||o instanceof L.CircleMarker)&&o.setLatLng(this._uneditedLayerProps[l].latlng),o.fire("revert-edited",{layer:o}))},_enableLayerEdit:function(o){var l,c,f=o.layer||o.target||o;this._backupLayer(f),this.options.poly&&(c=L.Util.extend({},this.options.poly),f.options.poly=c),this.options.selectedPathOptions&&(l=L.Util.extend({},this.options.selectedPathOptions),l.maintainColor&&(l.color=f.options.color,l.fillColor=f.options.fillColor),f.options.original=L.extend({},f.options),f.options.editing=l),f instanceof L.Marker?(f.editing&&f.editing.enable(),f.dragging.enable(),f.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):f.editing.enable()},_disableLayerEdit:function(o){var l=o.layer||o.target||o;l.edited=!1,l.editing&&l.editing.disable(),delete l.options.editing,delete l.options.original,this._selectedPathOptions&&(l instanceof L.Marker?this._toggleMarkerHighlight(l):(l.setStyle(l.options.previousOptions),delete l.options.previousOptions)),l instanceof L.Marker?(l.dragging.disable(),l.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):l.editing.disable()},_onMouseMove:function(o){this._tooltip.updatePosition(o.latlng)},_onMarkerDragEnd:function(o){var l=o.target;l.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:l})},_onTouchMove:function(o){var l=o.originalEvent.changedTouches[0],c=this._map.mouseEventToLayerPoint(l),f=this._map.layerPointToLatLng(c);o.target.setLatLng(f)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(o,l){if(L.Handler.prototype.initialize.call(this,o),L.Util.setOptions(this,l),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var c=L.version.split(".");parseInt(c[0],10)===1&&parseInt(c[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var o=this._map;o&&(o.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(o){this._deletableLayers.addLayer(o),o.fire("revert-deleted",{layer:o})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(o){this._removeLayer({layer:o})},this),this.save()},_enableLayerDelete:function(o){(o.layer||o.target||o).on("click",this._removeLayer,this)},_disableLayerDelete:function(o){var l=o.layer||o.target||o;l.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(l)},_removeLayer:function(o){var l=o.layer||o.target||o;this._deletableLayers.removeLayer(l),this._deletedLayers.addLayer(l),l.fire("deleted")},_onMouseMove:function(o){this._tooltip.updatePosition(o.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);window.map=L.map("dataset-map").setView([7.9,83.58],8);L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(map);var eo=new L.FeatureGroup,pp=new L.Control.Draw({draw:{polygon:!1,polyline:!1,circle:!1,circlemarker:!1,marker:!1,rectangle:{shapeOptions:{color:"red"},showArea:!0,metric:["km","ha","m"]}},edit:{featureGroup:eo}});map.on(L.Draw.Event.CREATED,function(a){var i=a.layer,r=i.getLatLngs()[0],u=Xa(r);if(u<100){alert("Box area must be greater than 100 km\xB2. Your box was: "+u.toFixed(2)+" km\xB2");return}eo.clearLayers(),eo.addLayer(i),console.log("Rectangle coordinates:",r)});map.on(L.Draw.Event.EDITED,function(a){a.layers.eachLayer(function(i){var r=i.getLatLngs()[0],u=Xa(r);console.log("Edited rectangle coordinates:",r)})});map.addLayer(eo);map.addControl(pp);function _p(a,i){var r=i.getBounds();let u=new L.Popup,o=a.properties||{},l=o.name_en||o.gnd_n||o.dsd_n||o.dist_n||o.prov_n||"No name",c="",f=["name_en","gnd_n","dsd_n","dist_n","prov_n","gnd_c","dsd_c","dist_c","prov_c","pcode","code","dist_name","dsd_name","gnd_name","prov_name","dist_code","dsd_code","gnd_code","prov_code"];for(let m in o)o.hasOwnProperty(m)&&!f.includes(m)&&(c+=`
        <tr>
            <th style="text-align:left; padding-right: 10px;">${m}</th>
            <td>${o[m]}</td>
        </tr>`);let _=`
        <div class="card border-0" style="width: 18rem;">
            <div class="card-body">
                <h5 class="card-title">${l}</h5>
                ${c?`<table class="table table-sm">
                    <tbody>
                        ${c}
                    </tbody>
                </table>`:"<p>No additional attributes</p>"}
            </div>
        </div>
    `;return u.setLatLng(r.getCenter()),u.setContent(_),u}function qa(a,i=null){window.currentGeoLayer&&window.map.removeLayer(window.currentGeoLayer),window.currentGeoLayer=new L.GeoJSON(a,{style:{color:"blue",fillColor:"lightblue",fillOpacity:.5,weight:2},onEachFeature:function(r,u){u.on("click",function(o){popup=_p(r,u),window.map.openPopup(popup)})}}),window.map.addLayer(window.currentGeoLayer),window.map.fitBounds(window.currentGeoLayer.getBounds())}function Xa(a){let i=L.latLngBounds(a),r=i.getSouthWest(),u=i.getNorthEast(),o=L.latLng(r.lat,r.lng).distanceTo(L.latLng(r.lat,u.lng)),l=L.latLng(r.lat,r.lng).distanceTo(L.latLng(u.lat,r.lng));return o*l/1e6}window.AppConfig={product_id:null,product_level:null,extents:null,extent_level:null,derived_extent_level:null};var Ja={0:"Country",1:"Province",2:"District",3:"DSD",4:"GND",5:"50K_Tile"},mp=document.getElementById("productTabContent"),gp=document.querySelector("#topics-list");function vp(){document.getElementById("loading-overlay").classList.remove("d-none")}function yp(){document.getElementById("loading-overlay").classList.add("d-none")}async function Lp(){(await vs()).categories.forEach((i,r)=>{let u=`tab-${i.name.toLowerCase()}`,o=r===0?"active":"";gp.innerHTML+=`
      <li class="nav-item" title="${i.name}">
        <a href="${i.url}"
          class="nav-link d-flex justify-content-between align-items-center ${o}">
          <span class="item-label">
            <i class="${i.icon} me-2 d-inline-block"></i>
            <span class="d-inline-block">${i.name}</span>
          </span>
          <!--span class="badge bg-secondary">${i.count}</span-->
        </a>
      </li>
    `,mp.innerHTML+=`
      <div class="tab-pane fade ${r===0?"show active":""}"
           id="${u}" role="tabpanel" aria-labelledby="${u}-tab">
        <div class="row g-3" id="dataset-list-${i.name.toLowerCase()}"></div>
      </div>
    `})}async function wp(){let a=await vs();if(!a?.datasets)return;let i={},r=l=>l.map(c=>`<span class="badge bg-secondary">${c}</span>`).join(""),u=l=>l.sort((c,f)=>f-c).map(c=>`<li><a class="dropdown-item" href="#" data-level="${c}">
            ${Ja[c]||`Level ${c}`}
          </a></li>`).join(""),o=l=>{let c=[...l.level].sort((E,P)=>P-E),f=c[0],_=Ja[f]||"",m=u(c),g=r(l.tags);return`
      <div class="p-0">
        <div class="form-check border p-3 pt-1 pb-1 mx-0 h-100 rounded-1 shadow-sm">
          <input class="form-check-input d-none" type="radio"
            name="dataset-${l.tags[0].toLowerCase()}"
            id="${l.id}" value="${l.id}"
            productaoitype="undefined"
            productlevel="${l.level.join(",")}">
          
          <label class="form-check-label p-1" for="${l.id}">
            <strong>${l.name}</strong><br>
            
            <div class="mt-1 mb-1 small text-muted dataset-meta">
              <span title="Source">
                <i class="bi bi-globe"></i>
                <a href="${l.sourceLink}" target="_blank" class="text-decoration-none">${l.source}</a>
              </span>
              <span class="ms-3" title="Date added">
                <i class="bi bi-calendar2-event"></i> ${l.dateAdded}
              </span>
              <span class="ms-3" title="Dataset level">
                <i class="bi bi-geo-alt"></i> ${_}
              </span>
              <span class="ms-3" title="Tags">
                <i class="bi bi-tags"></i>
                ${g}
              </span>
            </div>

            <small class="text-muted">${l.description}</small>
            
            <div class="d-flex justify-content-start align-items-center mt-3">
              <button data-action="preview" data-id="${l.id}" class="btn btn-light border-secondary btn-xs pb-0 pt-0 me-3">Preview</button>
              <button data-action="shapefile" data-id="${l.id}" class="btn btn-light border-secondary btn-xs pb-0 pt-0 me-3">ShapeFile</button>
              <button data-action="geojson" data-id="${l.id}" class="btn btn-light border-secondary btn-xs pb-0 pt-0 me-3">GeoJSON</button>
              <button data-action="wkt" data-id="${l.id}" class="btn btn-light border-secondary btn-xs pb-0 pt-0 me-3">WKT</button>
              <button data-action="wkb" data-id="${l.id}" class="btn btn-light border-secondary btn-xs pb-0 pt-0 me-3">WKB</button>
              <button data-action="pgsql" data-id="${l.id}" class="btn btn-light border-secondary btn-xs pb-0 pt-0 me-3">PGSQL</button>

              <div class="d-flex btn btn-light rounded-1 btn-xs p-0 px-1 border-secondary ms-2" title="Aggregation level">
                <span class="form-label m-0 p-0 text-muted">Aggr</span>
                <div class="derivedLevel d-flex align-items-center mx-0">
                  <a href="#" class="btn btn-xs pb-0 pt-0 dropdown-toggle"
                     id="derive-${l.id}" data-bs-toggle="dropdown" aria-expanded="false"
                     data-selected-level="${f}">
                    ${_}
                  </a>
                  <ul class="dropdown-menu border-secondary rounded-1" aria-labelledby="derive-${l.id}">
                    ${m}
                  </ul>
                </div>
              </div>
            </div>
          </label>
        </div>
      </div>
    `};a.datasets.forEach(l=>{l.tags.forEach(c=>{let f=`dataset-list-${c.toLowerCase()}`;if(!document.getElementById(f))return;i[f]||(i[f]=document.createDocumentFragment());let m=document.createElement("div");m.innerHTML=o(l),i[f].appendChild(m.firstElementChild)})}),Object.entries(i).forEach(([l,c])=>{document.getElementById(l).appendChild(c)}),document.body.addEventListener("click",l=>{let c=l.target.closest("button[data-action]");if(c){let{action:_,id:m}=c.dataset;switch(console.log("btn press",_),_){case"preview":bp(m);break;case"shapefile":break;case"geojson":break;case"wkt":break;case"wkb":break;case"pgsql":break}return}let f=l.target.closest(".dropdown-item");if(f){l.preventDefault();let _=f.closest(".derivedLevel").querySelector(".dropdown-toggle");_.textContent=f.textContent,_.dataset.selectedLevel=f.dataset.level}})}async function bp(a){let r=await ja({product_id:a});qa(r)}document.addEventListener("DOMContentLoaded",async()=>{vp(),await Lp(),await wp(),yp()});})();
/*! Bundled license information:

leaflet/dist/leaflet-src.js:
  (* @preserve
   * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
   * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
   *)

bootstrap/dist/js/bootstrap.esm.js:
  (*!
    * Bootstrap v5.3.6 (https://getbootstrap.com/)
    * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
    *)
*/
