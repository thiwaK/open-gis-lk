(()=>{var O3=Object.create;var B2=Object.defineProperty;var N3=Object.getOwnPropertyDescriptor;var z3=Object.getOwnPropertyNames;var $3=Object.getPrototypeOf,F3=Object.prototype.hasOwnProperty;var Wp=(y,w)=>()=>(w||y((w={exports:{}}).exports,w),w.exports),B3=(y,w)=>{for(var N in w)B2(y,N,{get:w[N],enumerable:!0})},j3=(y,w,N,ee)=>{if(w&&typeof w=="object"||typeof w=="function")for(let R of z3(w))!F3.call(y,R)&&R!==N&&B2(y,R,{get:()=>w[R],enumerable:!(ee=N3(w,R))||ee.enumerable});return y};var j2=(y,w,N)=>(N=y!=null?O3($3(y)):{},j3(w||!y||!y.__esModule?B2(N,"default",{value:y,enumerable:!0}):N,y));var Cd=Wp((e1,qc)=>{"use strict";(function(y,w){typeof define=="function"&&define.amd?define([],w):typeof e1=="object"?qc.exports=w():y.alasql=w()})(e1,function(){let y=function(i,_,p,f){if(_=_||[],typeof importScripts!="function"&&y.webworker){var v=y.lastid++;y.buffer[v]=p,y.webworker.postMessage({id:v,sql:i,params:_});return}return arguments.length===0?new de.Select({columns:[new de.Column({columnid:"*"})],from:[new de.ParamValue({param:0})]}):arguments.length===1&&i.constructor===Array?y.promise(i):(typeof _=="function"&&(f=p,p=_,_=[]),typeof _!="object"&&(_=[_]),typeof i=="string"&&i[0]==="#"&&typeof document=="object"?i=document.querySelector(i).textContent:typeof i=="object"&&i instanceof HTMLElement?i=i.textContent:typeof i=="function"&&(i=i.toString(),i=(/\/\*([\S\s]+)\*\//m.exec(i)||["","Function given as SQL. Plese Provide SQL string or have a /* ... */ syle comment with SQL in the function."])[1]),y.exec(i,_,p,f))};y.version="4.6.5",y.build="develop-f6e298b2",y.debug=void 0;var w=function(){return null},N="",ee=function(){var i=function(ro,rr,fr,W){for(fr=fr||{},W=ro.length;W--;fr[ro[W]]=rr);return fr},_=[2,13],p=[1,104],f=[1,102],v=[1,103],T=[1,6],P=[1,42],D=[1,79],V=[1,76],ae=[1,94],ie=[1,93],Q=[1,69],$=[1,101],F=[1,85],_e=[1,64],ue=[1,71],ze=[1,84],ve=[1,66],Ie=[1,70],Me=[1,68],Ut=[1,61],jt=[1,74],Zt=[1,62],ei=[1,67],xi=[1,83],Ci=[1,77],Mi=[1,86],We=[1,87],Wi=[1,81],Li=[1,82],Ht=[1,80],or=[1,88],vr=[1,89],dn=[1,90],qr=[1,91],hr=[1,92],lr=[1,98],pn=[1,65],Rr=[1,78],Sr=[1,72],sr=[1,96],Br=[1,97],nn=[1,63],Fn=[1,73],ds=[1,108],es=[1,107],ln=[10,311,607,768],$e=[10,311,315,607,768],Le=[1,115],wn=[1,117],Ue=[1,116],Ze=[1,118],qe=[1,119],et=[1,120],Pe=[1,121],Rn=[130,358,415],Or=[1,129],xr=[1,128],_l=[1,136],Fe=[1,166],rt=[1,178],Ve=[1,181],Lt=[1,176],Xe=[1,184],yt=[1,188],Tt=[1,162],He=[1,185],Ot=[1,172],Mt=[1,174],At=[1,177],Ge=[1,186],Ye=[1,203],ot=[1,204],Ct=[1,168],Et=[1,169],dt=[1,196],Pt=[1,191],Rt=[1,192],ft=[1,197],mt=[1,198],Qe=[1,199],ut=[1,200],st=[1,201],lt=[1,202],ht=[1,205],it=[1,206],pt=[1,179],_t=[1,180],nt=[1,182],xt=[1,183],zt=[1,189],$t=[1,195],Ke=[1,187],kt=[1,190],St=[1,175],Dt=[1,173],Oe=[1,194],De=[1,207],kn=[2,4,5],i1=[2,480],Rl=[1,210],$o=[1,215],uo=[1,224],yl=[1,220],kl=[10,72,78,93,98,118,128,162,168,169,183,198,232,249,251,311,315,607,768],dc=[2,4,5,10,72,76,77,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,183,185,187,198,244,245,285,286,287,288,289,290,291,292,311,315,425,429,607,768],Fi=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],Bn=[1,253],P1=[1,260],pc=[1,261],fc=[1,270],$a=[1,275],Ao=[1,274],Dl=[2,4,5,10,72,77,78,93,98,107,118,128,131,132,137,143,145,149,152,154,156,162,168,169,179,180,181,183,198,232,244,245,249,251,269,270,271,275,276,278,285,286,287,288,289,290,291,292,294,295,296,297,298,299,300,301,302,303,304,307,308,311,315,317,322,425,429,607,768],r1=[2,162],Ll=[1,286],Fo=[10,74,78,311,315,510,607,768],pe=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,193,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,302,305,307,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,348,349,361,373,374,375,378,379,391,394,401,405,406,407,408,409,410,411,413,414,422,423,425,429,431,438,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,519,520,521,522,607,768],mc=[2,4,5,10,53,72,89,124,146,156,189,271,272,294,311,340,343,344,401,405,406,409,411,413,414,422,423,439,441,442,444,445,446,447,448,452,453,456,457,510,512,513,522,607,768],Qa=[1,567],gc=[1,569],Ol=[1,570],R1=[2,512],k1=[1,576],Bo=[1,587],Co=[1,590],ho=[1,591],D1=[10,78,89,132,137,146,189,301,311,315,475,607,768],va=[10,74,311,315,607,768],jr=[2,576],eo=[1,609],Nl=[2,4,5,156],Ui=[1,647],Ri=[1,619],Xt=[1,653],Wt=[1,654],ii=[1,627],L1=[1,638],di=[1,625],ui=[1,633],pi=[1,626],Ki=[1,634],Xi=[1,636],Ai=[1,628],Si=[1,629],Gi=[1,648],tr=[1,645],ir=[1,646],mi=[1,622],oi=[1,624],Ii=[1,616],ri=[1,617],yi=[1,618],ki=[1,620],si=[1,621],gi=[1,623],_i=[1,630],wi=[1,631],Bi=[1,635],$i=[1,637],ji=[1,639],Vi=[1,640],Oi=[1,641],Ni=[1,642],qi=[1,643],Ji=[1,649],ni=[1,650],Pi=[1,651],Qi=[1,652],zl=[2,4,5,10,53,72,74,76,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],bl=[2,291],Wn=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,302,305,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,348,361,373,374,378,379,401,405,406,409,411,413,414,422,423,425,429,431,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],Gc=[2,368],O1=[1,675],N1=[1,685],Ds=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,431,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],jo=[1,701],n1=[1,710],z1=[1,709],s1=[2,4,5,10,72,74,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,311,315,607,768],Cn=[10,72,74,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,311,315,607,768],$l=[2,202],Fl=[1,732],Io=[10,72,78,93,98,118,128,162,168,169,183,232,249,251,311,315,607,768],$1=[2,163],Bl=[1,735],a1=[2,4,5,112],Ks=[1,748],ws=[1,767],Ls=[1,747],Qs=[1,746],ea=[1,741],Es=[1,742],Ts=[1,744],ta=[1,745],ps=[1,749],Ur=[1,750],jn=[1,751],_n=[1,752],Os=[1,753],fs=[1,754],Ns=[1,755],Dn=[1,756],zs=[1,757],ms=[1,758],$s=[1,759],ia=[1,760],ra=[1,761],na=[1,762],ts=[1,763],is=[1,764],Kr=[1,766],rs=[1,768],Fs=[1,769],sa=[1,770],aa=[1,771],ns=[1,772],Bs=[1,773],Ss=[1,774],oa=[1,777],ss=[1,778],la=[1,779],sn=[1,780],In=[1,781],as=[1,782],Mn=[1,783],os=[1,784],As=[1,785],xa=[1,786],js=[1,787],Cs=[1,788],o1=[74,89,189],Gr=[10,74,78,154,187,230,302,311,315,348,361,373,374,378,379,607,768],Ln=[1,805],zi=[10,74,78,305,311,315,607,768],Yi=[1,806],l1=[1,812],_c=[1,813],Ko=[1,817],Xr=[10,74,78,311,315,607,768],Vo=[2,4,5,77,131,132,137,143,145,149,152,154,156,179,180,181,244,245,269,270,271,275,276,278,285,286,287,288,289,290,291,292,294,295,296,297,298,299,300,301,302,303,304,307,308,317,322,425,429],Cr=[10,72,78,93,98,107,118,128,162,168,169,183,198,232,249,251,311,315,607,768],Mo=[2,4,5,10,72,77,78,93,98,107,118,128,131,132,137,143,145,149,152,154,156,162,164,168,169,179,180,181,183,185,187,195,198,232,244,245,249,251,269,270,271,275,276,278,285,286,287,288,289,290,291,292,294,295,296,297,298,299,300,301,302,303,304,307,308,311,315,317,322,425,429,607,768],F1=[2,4,5,132,301],B1=[1,853],yc=[10,74,76,78,311,315,607,768],j1=[2,748],jl=[10,74,76,78,132,139,141,145,152,311,315,425,429,607,768],c1=[2,1171],Qo=[10,74,76,78,139,141,145,152,311,315,425,429,607,768],po=[10,74,76,78,139,141,145,311,315,425,429,607,768],u1=[10,74,78,139,141,311,315,607,768],bc=[10,78,89,132,146,189,301,311,315,475,607,768],Vl=[340,343,344],Po=[2,774],yn=[1,878],Ul=[1,879],V1=[1,880],vc=[1,881],vl=[1,890],xl=[1,889],wl=[164,166,339],ca=[2,453],h1=[1,945],nr=[2,4,5,77,131,156,270,294,295,296,297,298],pr=[1,960],el=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,134,135,137,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,318,319,320,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],d1=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,317,318,319,320,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],U1=[2,384],Xn=[1,967],p1=[311,313,315],Fa=[74,305],fo=[74,305,431],tl=[1,974],bn=[74,431],fn=[1,987],Ro=[1,986],Ba=[1,993],il=[10,72,78,93,98,118,128,162,168,169,232,249,251,311,315,607,768],rl=[1,1020],ua=[10,72,78,311,315,607,768],Vs=[1,1026],ls=[1,1027],Us=[1,1028],h=[2,4,5,10,72,74,76,77,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,198,244,245,285,286,287,288,289,290,291,292,311,315,425,429,607,768],e=[1,1078],r=[1,1077],o=[1,1091],l=[1,1090],d=[1,1098],b=[10,72,74,78,93,98,107,118,128,162,168,169,183,198,232,249,251,311,315,607,768],E=[1,1130],C=[10,78,89,146,189,311,315,475,607,768],k=[1,1150],O=[1,1149],j=[1,1148],B=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,302,305,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,348,361,373,374,378,379,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],H=[1,1164],X=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,318,319,320,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],le=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,318,320,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],oe=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,133,134,135,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,318,319,320,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],ce=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,124,128,129,130,131,132,134,135,137,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,318,319,320,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],fe=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,319,325,326,327,328,329,330,331,335,336,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],xe=[2,415],be=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,107,118,122,128,129,130,131,132,134,135,137,143,145,146,148,149,150,152,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,319,335,336,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],Ee=[2,289],Ce=[2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,431,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],we=[10,78,311,315,607,768],Je=[1,1200],Bt=[10,77,78,143,145,152,181,307,311,315,425,429,607,768],gt=[10,74,78,311,313,315,469,607,768],wt=[1,1211],bt=[10,72,78,118,128,162,168,169,232,249,251,311,315,607,768],Ei=[10,72,74,78,93,98,118,128,162,168,169,183,198,232,249,251,311,315,607,768],ti=[2,4,5,72,76,77,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,185,187,244,245,285,286,287,288,289,290,291,292,425,429],Jt=[2,4,5,72,74,76,77,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,185,187,244,245,285,286,287,288,289,290,291,292,425,429],Zi=[2,1095],Ir=[2,4,5,72,74,76,77,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,185,187,244,245,285,286,287,288,289,290,291,292,425,429],Dr=[1,1264],vn=[10,74,78,128,311,313,315,469,607,768],Qr=[115,116,124],En=[2,593],Tn=[1,1293],mn=[76,139],Jr=[2,734],cs=[1,1310],gs=[1,1311],_s=[2,4,5,10,53,72,76,89,124,146,156,189,230,271,272,294,311,315,340,343,344,401,405,406,409,411,413,414,422,423,439,441,442,444,445,446,447,448,452,453,456,457,510,512,513,522,607,768],Zr=[2,336],ko=[1,1335],ys=[1,1349],Do=[1,1351],nl=[2,496],Vn=[74,78],Pn=[10,311,313,315,469,607,768],sl=[10,72,78,118,162,168,169,232,249,251,311,315,607,768],Ra=[1,1368],mo=[1,1372],to=[1,1373],go=[1,1375],On=[1,1376],Nn=[1,1377],bs=[1,1378],an=[1,1379],al=[1,1380],ql=[1,1381],Gl=[1,1382],q1=[10,72,74,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,232,249,251,311,315,607,768],ol=[1,1407],ll=[10,72,78,118,162,168,169,249,251,311,315,607,768],zn=[10,72,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,232,249,251,311,315,607,768],_o=[1,1505],ja=[1,1507],Jn=[2,4,5,77,143,145,152,156,181,270,294,295,296,297,298,307,425,429],cl=[1,1521],ha=[10,72,74,78,162,168,169,249,251,311,315,607,768],G1=[1,1539],Ru=[1,1541],Zc=[1,1542],ku=[1,1538],Zl=[1,1537],Hl=[1,1536],Hc=[1,1543],uh=[1,1533],Wc=[1,1534],Du=[1,1535],hh=[1,1561],Xc=[2,4,5,10,53,72,89,124,146,156,189,271,272,294,311,315,340,343,344,401,405,406,409,411,413,414,422,423,439,441,442,444,445,446,447,448,452,453,456,457,510,512,513,522,607,768],dh=[1,1572],xc=[1,1580],Lu=[1,1579],Jc=[10,72,78,162,168,169,249,251,311,315,607,768],wa=[10,72,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,311,315,607,768],Ou=[2,4,5,10,72,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,311,315,607,768],Wl=[1,1640],ph=[1,1642],Z1=[1,1639],wc=[1,1641],f1=[187,193,373,374,375,378],Yc=[2,524],Kc=[1,1647],Ec=[1,1666],m1=[10,72,78,162,168,169,311,315,607,768],g1=[1,1676],_1=[1,1677],y1=[1,1678],fh=[1,1700],Xl=[4,10,247,311,315,348,361,607,768],H1=[1,1748],Jl=[10,72,74,78,118,162,168,169,239,249,251,311,315,607,768],W1=[2,4,5,77],io=[1,1844],Qc=[1,1856],Tc=[1,1875],mh=[10,72,78,162,168,169,311,315,420,607,768],eu=[10,74,78,230,311,315,607,768],tu={trace:function(){},yy:{},symbols_:{error:2,Literal:3,LITERAL:4,BRALITERAL:5,NonReserved:6,LiteralWithSpaces:7,main:8,Statements:9,EOF:10,Statements_group0:11,AStatement:12,ExplainStatement:13,EXPLAIN:14,QUERY:15,PLAN:16,Statement:17,AlterTable:18,AttachDatabase:19,Call:20,CreateDatabase:21,CreateIndex:22,CreateGraph:23,CreateTable:24,CreateView:25,CreateEdge:26,CreateVertex:27,Declare:28,Delete:29,DetachDatabase:30,DropDatabase:31,DropIndex:32,DropTable:33,DropView:34,If:35,Insert:36,Merge:37,Reindex:38,RenameTable:39,Select:40,ShowCreateTable:41,ShowColumns:42,ShowDatabases:43,ShowIndex:44,ShowTables:45,TruncateTable:46,WithSelect:47,CreateTrigger:48,DropTrigger:49,BeginTransaction:50,CommitTransaction:51,RollbackTransaction:52,EndTransaction:53,UseDatabase:54,Update:55,JavaScript:56,Source:57,Assert:58,While:59,Continue:60,Break:61,BeginEnd:62,Print:63,Require:64,SetVariable:65,ExpressionStatement:66,AddRule:67,Query:68,Echo:69,CreateFunction:70,CreateAggregate:71,WITH:72,WithTablesList:73,COMMA:74,WithTable:75,AS:76,LPAR:77,RPAR:78,SelectClause:79,Select_option0:80,IntoClause:81,FromClause:82,Select_option1:83,WhereClause:84,GroupClause:85,OrderClause:86,LimitClause:87,UnionClause:88,SEARCH:89,Select_repetition0:90,Select_option2:91,PivotClause:92,PIVOT:93,Expression:94,FOR:95,PivotClause_option0:96,PivotClause_option1:97,UNPIVOT:98,IN:99,ColumnsList:100,PivotClause_option2:101,PivotClause2:102,AsList:103,AsLiteral:104,AsPart:105,RemoveClause:106,REMOVE:107,RemoveClause_option0:108,RemoveColumnsList:109,RemoveColumn:110,Column:111,LIKE:112,StringValue:113,ArrowDot:114,ARROW:115,DOT:116,SearchSelector:117,ORDER:118,BY:119,OrderExpressionsList:120,SearchSelector_option0:121,DOTDOT:122,CARET:123,EQ:124,SearchSelector_repetition_plus0:125,SearchSelector_repetition_plus1:126,SearchSelector_option1:127,WHERE:128,OF:129,CLASS:130,NUMBER:131,STRING:132,SLASH:133,VERTEX:134,EDGE:135,EXCLAMATION:136,SHARP:137,MODULO:138,GT:139,LT:140,GTGT:141,LTLT:142,DOLLAR:143,Json:144,AT:145,SET:146,SetColumnsList:147,TO:148,VALUE:149,ROW:150,ExprList:151,COLON:152,PlusStar:153,NOT:154,SearchSelector_repetition2:155,IF:156,SearchSelector_repetition3:157,Aggregator:158,SearchSelector_repetition4:159,SearchSelector_group0:160,SearchSelector_repetition5:161,UNION:162,SearchSelectorList:163,ALL:164,SearchSelector_repetition6:165,ANY:166,SearchSelector_repetition7:167,INTERSECT:168,EXCEPT:169,AND:170,OR:171,PATH:172,RETURN:173,ResultColumns:174,REPEAT:175,SearchSelector_repetition8:176,SearchSelectorList_repetition0:177,SearchSelectorList_repetition1:178,PLUS:179,STAR:180,QUESTION:181,SearchFrom:182,FROM:183,SelectModifier:184,DISTINCT:185,TopClause:186,UNIQUE:187,SelectClause_option0:188,SELECT:189,COLUMN:190,MATRIX:191,TEXTSTRING:192,INDEX:193,RECORDSET:194,TOP:195,NumValue:196,TopClause_option0:197,INTO:198,Table:199,FuncValue:200,ParamValue:201,VarValue:202,FromTablesList:203,JoinTablesList:204,ApplyClause:205,CROSS:206,APPLY:207,OUTER:208,FromTable:209,FromTable_option0:210,FromTable_option1:211,INDEXED:212,INSERTED:213,FromString:214,JoinTable:215,JoinMode:216,JoinTableAs:217,OnClause:218,JoinTableAs_option0:219,JoinTableAs_option1:220,JoinModeMode:221,NATURAL:222,JOIN:223,INNER:224,LEFT:225,RIGHT:226,FULL:227,SEMI:228,ANTI:229,ON:230,USING:231,GROUP:232,GroupExpressionsList:233,HavingClause:234,GroupExpression:235,GROUPING:236,ROLLUP:237,CUBE:238,HAVING:239,CORRESPONDING:240,OrderExpression:241,NullsOrder:242,NULLS:243,FIRST:244,LAST:245,DIRECTION:246,COLLATE:247,NOCASE:248,LIMIT:249,OffsetClause:250,OFFSET:251,LimitClause_option0:252,FETCH:253,LimitClause_option1:254,LimitClause_option2:255,LimitClause_option3:256,ResultColumn:257,Star:258,AggrValue:259,Op:260,LogicValue:261,NullValue:262,ExistsValue:263,CaseValue:264,CastClause:265,ArrayValue:266,NewClause:267,Expression_group0:268,CURRENT_TIMESTAMP:269,CURRENT_DATE:270,JAVASCRIPT:271,CREATE:272,FUNCTION:273,AGGREGATE:274,NEW:275,CAST:276,ColumnType:277,CONVERT:278,PrimitiveValue:279,OverClause:280,OVER:281,OverPartitionClause:282,OverOrderByClause:283,PARTITION:284,SUM:285,TOTAL:286,COUNT:287,MIN:288,MAX:289,AVG:290,AGGR:291,ARRAY:292,FuncValue_option0:293,REPLACE:294,DATEADD:295,DATEDIFF:296,TIMESTAMPDIFF:297,INTERVAL:298,TRUE:299,FALSE:300,NSTRING:301,NULL:302,EXISTS:303,ARRAYLBRA:304,RBRA:305,ParamValue_group0:306,BRAQUESTION:307,CASE:308,WhensList:309,ElseClause:310,END:311,When:312,WHEN:313,THEN:314,ELSE:315,REGEXP:316,TILDA:317,GLOB:318,ESCAPE:319,NOT_LIKE:320,BARBAR:321,MINUS:322,AMPERSAND:323,BAR:324,GE:325,LE:326,EQEQ:327,EQEQEQ:328,NE:329,NEEQEQ:330,NEEQEQEQ:331,CondOp:332,AllSome:333,ColFunc:334,BETWEEN:335,NOT_BETWEEN:336,IS:337,DOUBLECOLON:338,SOME:339,UPDATE:340,SetColumn:341,SetColumn_group0:342,DELETE:343,INSERT:344,Into:345,Values:346,ValuesListsList:347,DEFAULT:348,VALUES:349,ValuesList:350,Value:351,DateValue:352,TemporaryClause:353,TableClass:354,IfNotExists:355,CreateTableDefClause:356,CreateTableOptionsClause:357,TABLE:358,CreateTableOptions:359,CreateTableOption:360,IDENTITY:361,TEMP:362,ColumnDefsList:363,ConstraintsList:364,Constraint:365,ConstraintName:366,PrimaryKey:367,ForeignKey:368,UniqueKey:369,IndexKey:370,Check:371,CONSTRAINT:372,CHECK:373,PRIMARY:374,KEY:375,PrimaryKey_option0:376,ColsList:377,FOREIGN:378,REFERENCES:379,ForeignKey_option0:380,OnForeignKeyClause:381,ParColsList:382,OnDeleteClause:383,OnUpdateClause:384,NO:385,ACTION:386,UniqueKey_option0:387,UniqueKey_option1:388,ColumnDef:389,ColumnConstraintsClause:390,ColumnConstraints:391,SingularColumnType:392,NumberMax:393,ENUM:394,MAXNUM:395,ColumnConstraintsList:396,ColumnConstraint:397,ParLiteral:398,ColumnConstraint_option0:399,ColumnConstraint_option1:400,DROP:401,DropTable_group0:402,IfExists:403,TablesList:404,ALTER:405,RENAME:406,ADD:407,MODIFY:408,ATTACH:409,DATABASE:410,DETACH:411,AsClause:412,USE:413,SHOW:414,VIEW:415,CreateView_option0:416,CreateView_option1:417,SubqueryRestriction:418,READ:419,ONLY:420,OPTION:421,SOURCE:422,ASSERT:423,JsonObject:424,ATLBRA:425,JsonArray:426,JsonValue:427,JsonPrimitiveValue:428,LCUR:429,JsonPropertiesList:430,RCUR:431,JsonElementsList:432,JsonProperty:433,OnOff:434,SetPropsList:435,AtDollar:436,SetProp:437,OFF:438,COMMIT:439,TRANSACTION:440,ROLLBACK:441,BEGIN:442,ElseStatement:443,WHILE:444,CONTINUE:445,BREAK:446,PRINT:447,REQUIRE:448,StringValuesList:449,PluginsList:450,Plugin:451,ECHO:452,DECLARE:453,DeclaresList:454,DeclareItem:455,TRUNCATE:456,MERGE:457,MergeInto:458,MergeUsing:459,MergeOn:460,MergeMatchedList:461,OutputClause:462,MergeMatched:463,MergeNotMatched:464,MATCHED:465,MergeMatchedAction:466,MergeNotMatchedAction:467,TARGET:468,OUTPUT:469,CreateVertex_option0:470,CreateVertex_option1:471,CreateVertex_option2:472,CreateVertexSet:473,SharpValue:474,CONTENT:475,CreateEdge_option0:476,GRAPH:477,GraphList:478,GraphVertexEdge:479,GraphElement:480,GraphVertexEdge_option0:481,GraphVertexEdge_option1:482,GraphElementVar:483,GraphVertexEdge_option2:484,GraphVertexEdge_option3:485,GraphVertexEdge_option4:486,GraphVar:487,GraphAsClause:488,GraphAtClause:489,GraphElement2:490,GraphElement2_option0:491,GraphElement2_option1:492,GraphElement2_option2:493,GraphElement2_option3:494,GraphElement_option0:495,GraphElement_option1:496,GraphElement_option2:497,SharpLiteral:498,GraphElement_option3:499,GraphElement_option4:500,GraphElement_option5:501,ColonLiteral:502,DeleteVertex:503,DeleteVertex_option0:504,DeleteEdge:505,DeleteEdge_option0:506,DeleteEdge_option1:507,DeleteEdge_option2:508,Term:509,COLONDASH:510,TermsList:511,QUESTIONDASH:512,CALL:513,TRIGGER:514,BeforeAfter:515,InsertDeleteUpdate:516,CreateTrigger_option0:517,CreateTrigger_option1:518,BEFORE:519,AFTER:520,INSTEAD:521,REINDEX:522,A:523,ABSENT:524,ABSOLUTE:525,ACCORDING:526,ADA:527,ADMIN:528,ALWAYS:529,ASC:530,ASSERTION:531,ASSIGNMENT:532,ATTRIBUTE:533,ATTRIBUTES:534,BASE64:535,BERNOULLI:536,BLOCKED:537,BOM:538,BREADTH:539,C:540,CASCADE:541,CATALOG:542,CATALOG_NAME:543,CHAIN:544,CHARACTERISTICS:545,CHARACTERS:546,CHARACTER_SET_CATALOG:547,CHARACTER_SET_NAME:548,CHARACTER_SET_SCHEMA:549,CLASS_ORIGIN:550,COBOL:551,COLLATION:552,COLLATION_CATALOG:553,COLLATION_NAME:554,COLLATION_SCHEMA:555,COLUMNS:556,COLUMN_NAME:557,COMMAND_FUNCTION:558,COMMAND_FUNCTION_CODE:559,COMMITTED:560,CONDITION_NUMBER:561,CONNECTION:562,CONNECTION_NAME:563,CONSTRAINTS:564,CONSTRAINT_CATALOG:565,CONSTRAINT_NAME:566,CONSTRAINT_SCHEMA:567,CONSTRUCTOR:568,CONTROL:569,CURSOR_NAME:570,DATA:571,DATETIME_INTERVAL_CODE:572,DATETIME_INTERVAL_PRECISION:573,DB:574,DEFAULTS:575,DEFERRABLE:576,DEFERRED:577,DEFINED:578,DEFINER:579,DEGREE:580,DEPTH:581,DERIVED:582,DESC:583,DESCRIPTOR:584,DIAGNOSTICS:585,DISPATCH:586,DOCUMENT:587,DOMAIN:588,DYNAMIC_FUNCTION:589,DYNAMIC_FUNCTION_CODE:590,EMPTY:591,ENCODING:592,ENFORCED:593,EXCLUDE:594,EXCLUDING:595,EXPRESSION:596,FILE:597,FINAL:598,FLAG:599,FOLLOWING:600,FORTRAN:601,FOUND:602,FS:603,G:604,GENERAL:605,GENERATED:606,GO:607,GOTO:608,GRANTED:609,HEX:610,HIERARCHY:611,ID:612,IGNORE:613,IMMEDIATE:614,IMMEDIATELY:615,IMPLEMENTATION:616,INCLUDING:617,INCREMENT:618,INDENT:619,INITIALLY:620,INPUT:621,INSTANCE:622,INSTANTIABLE:623,INTEGRITY:624,INVOKER:625,ISOLATION:626,K:627,KEY_MEMBER:628,KEY_TYPE:629,LENGTH:630,LEVEL:631,LIBRARY:632,LINK:633,LOCATION:634,LOCATOR:635,M:636,MAP:637,MAPPING:638,MAXVALUE:639,MESSAGE_LENGTH:640,MESSAGE_OCTET_LENGTH:641,MESSAGE_TEXT:642,MINVALUE:643,MORE:644,MUMPS:645,NAME:646,NAMES:647,NAMESPACE:648,NESTING:649,NEXT:650,NFC:651,NFD:652,NFKC:653,NFKD:654,NIL:655,NORMALIZED:656,NULLABLE:657,OBJECT:658,OCTETS:659,OPTIONS:660,ORDERING:661,ORDINALITY:662,OTHERS:663,OVERRIDING:664,P:665,PAD:666,PARAMETER_MODE:667,PARAMETER_NAME:668,PARAMETER_ORDINAL_POSITION:669,PARAMETER_SPECIFIC_CATALOG:670,PARAMETER_SPECIFIC_NAME:671,PARAMETER_SPECIFIC_SCHEMA:672,PARTIAL:673,PASCAL:674,PASSING:675,PASSTHROUGH:676,PERMISSION:677,PLACING:678,PLI:679,PRECEDING:680,PRESERVE:681,PRIOR:682,PRIVILEGES:683,PUBLIC:684,RECOVERY:685,RELATIVE:686,REPEATABLE:687,REQUIRING:688,RESPECT:689,RESTART:690,RESTORE:691,RESTRICT:692,RETURNED_CARDINALITY:693,RETURNED_LENGTH:694,RETURNED_OCTET_LENGTH:695,RETURNED_SQLSTATE:696,RETURNING:697,ROLE:698,ROUTINE:699,ROUTINE_CATALOG:700,ROUTINE_NAME:701,ROUTINE_SCHEMA:702,ROW_COUNT:703,SCALE:704,SCHEMA:705,SCHEMA_NAME:706,SCOPE_CATALOG:707,SCOPE_NAME:708,SCOPE_SCHEMA:709,SECTION:710,SECURITY:711,SELECTIVE:712,SELF:713,SEQUENCE:714,SERIALIZABLE:715,SERVER:716,SERVER_NAME:717,SESSION:718,SETS:719,SIMPLE:720,SIZE:721,SPACE:722,SPECIFIC_NAME:723,STANDALONE:724,STATE:725,STATEMENT:726,STRIP:727,STRUCTURE:728,STYLE:729,SUBCLASS_ORIGIN:730,T:731,TABLE_NAME:732,TEMPORARY:733,TIES:734,TOKEN:735,TOP_LEVEL_COUNT:736,TRANSACTIONS_COMMITTED:737,TRANSACTIONS_ROLLED_BACK:738,TRANSACTION_ACTIVE:739,TRANSFORM:740,TRANSFORMS:741,TRIGGER_CATALOG:742,TRIGGER_NAME:743,TRIGGER_SCHEMA:744,TYPE:745,UNBOUNDED:746,UNCOMMITTED:747,UNDER:748,UNLINK:749,UNNAMED:750,UNTYPED:751,URI:752,USAGE:753,USER_DEFINED_TYPE_CATALOG:754,USER_DEFINED_TYPE_CODE:755,USER_DEFINED_TYPE_NAME:756,USER_DEFINED_TYPE_SCHEMA:757,VALID:758,VERSION:759,WHITESPACE:760,WORK:761,WRAPPER:762,WRITE:763,XMLDECLARATION:764,XMLSCHEMA:765,YES:766,ZONE:767,SEMICOLON:768,PERCENT:769,ROWS:770,FuncValue_option0_group0:771,$accept:0,$end:1},terminals_:{2:"error",4:"LITERAL",5:"BRALITERAL",10:"EOF",14:"EXPLAIN",15:"QUERY",16:"PLAN",53:"EndTransaction",72:"WITH",74:"COMMA",76:"AS",77:"LPAR",78:"RPAR",89:"SEARCH",93:"PIVOT",95:"FOR",98:"UNPIVOT",99:"IN",107:"REMOVE",112:"LIKE",115:"ARROW",116:"DOT",118:"ORDER",119:"BY",122:"DOTDOT",123:"CARET",124:"EQ",128:"WHERE",129:"OF",130:"CLASS",131:"NUMBER",132:"STRING",133:"SLASH",134:"VERTEX",135:"EDGE",136:"EXCLAMATION",137:"SHARP",138:"MODULO",139:"GT",140:"LT",141:"GTGT",142:"LTLT",143:"DOLLAR",145:"AT",146:"SET",148:"TO",149:"VALUE",150:"ROW",152:"COLON",154:"NOT",156:"IF",162:"UNION",164:"ALL",166:"ANY",168:"INTERSECT",169:"EXCEPT",170:"AND",171:"OR",172:"PATH",173:"RETURN",175:"REPEAT",179:"PLUS",180:"STAR",181:"QUESTION",183:"FROM",185:"DISTINCT",187:"UNIQUE",189:"SELECT",190:"COLUMN",191:"MATRIX",192:"TEXTSTRING",193:"INDEX",194:"RECORDSET",195:"TOP",198:"INTO",206:"CROSS",207:"APPLY",208:"OUTER",212:"INDEXED",213:"INSERTED",222:"NATURAL",223:"JOIN",224:"INNER",225:"LEFT",226:"RIGHT",227:"FULL",228:"SEMI",229:"ANTI",230:"ON",231:"USING",232:"GROUP",236:"GROUPING",237:"ROLLUP",238:"CUBE",239:"HAVING",240:"CORRESPONDING",243:"NULLS",244:"FIRST",245:"LAST",246:"DIRECTION",247:"COLLATE",248:"NOCASE",249:"LIMIT",251:"OFFSET",253:"FETCH",269:"CURRENT_TIMESTAMP",270:"CURRENT_DATE",271:"JAVASCRIPT",272:"CREATE",273:"FUNCTION",274:"AGGREGATE",275:"NEW",276:"CAST",278:"CONVERT",281:"OVER",284:"PARTITION",285:"SUM",286:"TOTAL",287:"COUNT",288:"MIN",289:"MAX",290:"AVG",291:"AGGR",292:"ARRAY",294:"REPLACE",295:"DATEADD",296:"DATEDIFF",297:"TIMESTAMPDIFF",298:"INTERVAL",299:"TRUE",300:"FALSE",301:"NSTRING",302:"NULL",303:"EXISTS",304:"ARRAYLBRA",305:"RBRA",307:"BRAQUESTION",308:"CASE",311:"END",313:"WHEN",314:"THEN",315:"ELSE",316:"REGEXP",317:"TILDA",318:"GLOB",319:"ESCAPE",320:"NOT_LIKE",321:"BARBAR",322:"MINUS",323:"AMPERSAND",324:"BAR",325:"GE",326:"LE",327:"EQEQ",328:"EQEQEQ",329:"NE",330:"NEEQEQ",331:"NEEQEQEQ",335:"BETWEEN",336:"NOT_BETWEEN",337:"IS",338:"DOUBLECOLON",339:"SOME",340:"UPDATE",343:"DELETE",344:"INSERT",348:"DEFAULT",349:"VALUES",352:"DateValue",358:"TABLE",361:"IDENTITY",362:"TEMP",372:"CONSTRAINT",373:"CHECK",374:"PRIMARY",375:"KEY",378:"FOREIGN",379:"REFERENCES",385:"NO",386:"ACTION",391:"ColumnConstraints",394:"ENUM",395:"MAXNUM",401:"DROP",405:"ALTER",406:"RENAME",407:"ADD",408:"MODIFY",409:"ATTACH",410:"DATABASE",411:"DETACH",413:"USE",414:"SHOW",415:"VIEW",419:"READ",420:"ONLY",421:"OPTION",422:"SOURCE",423:"ASSERT",425:"ATLBRA",429:"LCUR",431:"RCUR",438:"OFF",439:"COMMIT",440:"TRANSACTION",441:"ROLLBACK",442:"BEGIN",444:"WHILE",445:"CONTINUE",446:"BREAK",447:"PRINT",448:"REQUIRE",452:"ECHO",453:"DECLARE",456:"TRUNCATE",457:"MERGE",465:"MATCHED",468:"TARGET",469:"OUTPUT",475:"CONTENT",477:"GRAPH",510:"COLONDASH",512:"QUESTIONDASH",513:"CALL",514:"TRIGGER",519:"BEFORE",520:"AFTER",521:"INSTEAD",522:"REINDEX",523:"A",524:"ABSENT",525:"ABSOLUTE",526:"ACCORDING",527:"ADA",528:"ADMIN",529:"ALWAYS",530:"ASC",531:"ASSERTION",532:"ASSIGNMENT",533:"ATTRIBUTE",534:"ATTRIBUTES",535:"BASE64",536:"BERNOULLI",537:"BLOCKED",538:"BOM",539:"BREADTH",540:"C",541:"CASCADE",542:"CATALOG",543:"CATALOG_NAME",544:"CHAIN",545:"CHARACTERISTICS",546:"CHARACTERS",547:"CHARACTER_SET_CATALOG",548:"CHARACTER_SET_NAME",549:"CHARACTER_SET_SCHEMA",550:"CLASS_ORIGIN",551:"COBOL",552:"COLLATION",553:"COLLATION_CATALOG",554:"COLLATION_NAME",555:"COLLATION_SCHEMA",556:"COLUMNS",557:"COLUMN_NAME",558:"COMMAND_FUNCTION",559:"COMMAND_FUNCTION_CODE",560:"COMMITTED",561:"CONDITION_NUMBER",562:"CONNECTION",563:"CONNECTION_NAME",564:"CONSTRAINTS",565:"CONSTRAINT_CATALOG",566:"CONSTRAINT_NAME",567:"CONSTRAINT_SCHEMA",568:"CONSTRUCTOR",569:"CONTROL",570:"CURSOR_NAME",571:"DATA",572:"DATETIME_INTERVAL_CODE",573:"DATETIME_INTERVAL_PRECISION",574:"DB",575:"DEFAULTS",576:"DEFERRABLE",577:"DEFERRED",578:"DEFINED",579:"DEFINER",580:"DEGREE",581:"DEPTH",582:"DERIVED",583:"DESC",584:"DESCRIPTOR",585:"DIAGNOSTICS",586:"DISPATCH",587:"DOCUMENT",588:"DOMAIN",589:"DYNAMIC_FUNCTION",590:"DYNAMIC_FUNCTION_CODE",591:"EMPTY",592:"ENCODING",593:"ENFORCED",594:"EXCLUDE",595:"EXCLUDING",596:"EXPRESSION",597:"FILE",598:"FINAL",599:"FLAG",600:"FOLLOWING",601:"FORTRAN",602:"FOUND",603:"FS",604:"G",605:"GENERAL",606:"GENERATED",607:"GO",608:"GOTO",609:"GRANTED",610:"HEX",611:"HIERARCHY",612:"ID",613:"IGNORE",614:"IMMEDIATE",615:"IMMEDIATELY",616:"IMPLEMENTATION",617:"INCLUDING",618:"INCREMENT",619:"INDENT",620:"INITIALLY",621:"INPUT",622:"INSTANCE",623:"INSTANTIABLE",624:"INTEGRITY",625:"INVOKER",626:"ISOLATION",627:"K",628:"KEY_MEMBER",629:"KEY_TYPE",630:"LENGTH",631:"LEVEL",632:"LIBRARY",633:"LINK",634:"LOCATION",635:"LOCATOR",636:"M",637:"MAP",638:"MAPPING",639:"MAXVALUE",640:"MESSAGE_LENGTH",641:"MESSAGE_OCTET_LENGTH",642:"MESSAGE_TEXT",643:"MINVALUE",644:"MORE",645:"MUMPS",646:"NAME",647:"NAMES",648:"NAMESPACE",649:"NESTING",650:"NEXT",651:"NFC",652:"NFD",653:"NFKC",654:"NFKD",655:"NIL",656:"NORMALIZED",657:"NULLABLE",658:"OBJECT",659:"OCTETS",660:"OPTIONS",661:"ORDERING",662:"ORDINALITY",663:"OTHERS",664:"OVERRIDING",665:"P",666:"PAD",667:"PARAMETER_MODE",668:"PARAMETER_NAME",669:"PARAMETER_ORDINAL_POSITION",670:"PARAMETER_SPECIFIC_CATALOG",671:"PARAMETER_SPECIFIC_NAME",672:"PARAMETER_SPECIFIC_SCHEMA",673:"PARTIAL",674:"PASCAL",675:"PASSING",676:"PASSTHROUGH",677:"PERMISSION",678:"PLACING",679:"PLI",680:"PRECEDING",681:"PRESERVE",682:"PRIOR",683:"PRIVILEGES",684:"PUBLIC",685:"RECOVERY",686:"RELATIVE",687:"REPEATABLE",688:"REQUIRING",689:"RESPECT",690:"RESTART",691:"RESTORE",692:"RESTRICT",693:"RETURNED_CARDINALITY",694:"RETURNED_LENGTH",695:"RETURNED_OCTET_LENGTH",696:"RETURNED_SQLSTATE",697:"RETURNING",698:"ROLE",699:"ROUTINE",700:"ROUTINE_CATALOG",701:"ROUTINE_NAME",702:"ROUTINE_SCHEMA",703:"ROW_COUNT",704:"SCALE",705:"SCHEMA",706:"SCHEMA_NAME",707:"SCOPE_CATALOG",708:"SCOPE_NAME",709:"SCOPE_SCHEMA",710:"SECTION",711:"SECURITY",712:"SELECTIVE",713:"SELF",714:"SEQUENCE",715:"SERIALIZABLE",716:"SERVER",717:"SERVER_NAME",718:"SESSION",719:"SETS",720:"SIMPLE",721:"SIZE",722:"SPACE",723:"SPECIFIC_NAME",724:"STANDALONE",725:"STATE",726:"STATEMENT",727:"STRIP",728:"STRUCTURE",729:"STYLE",730:"SUBCLASS_ORIGIN",731:"T",732:"TABLE_NAME",733:"TEMPORARY",734:"TIES",735:"TOKEN",736:"TOP_LEVEL_COUNT",737:"TRANSACTIONS_COMMITTED",738:"TRANSACTIONS_ROLLED_BACK",739:"TRANSACTION_ACTIVE",740:"TRANSFORM",741:"TRANSFORMS",742:"TRIGGER_CATALOG",743:"TRIGGER_NAME",744:"TRIGGER_SCHEMA",745:"TYPE",746:"UNBOUNDED",747:"UNCOMMITTED",748:"UNDER",749:"UNLINK",750:"UNNAMED",751:"UNTYPED",752:"URI",753:"USAGE",754:"USER_DEFINED_TYPE_CATALOG",755:"USER_DEFINED_TYPE_CODE",756:"USER_DEFINED_TYPE_NAME",757:"USER_DEFINED_TYPE_SCHEMA",758:"VALID",759:"VERSION",760:"WHITESPACE",761:"WORK",762:"WRAPPER",763:"WRITE",764:"XMLDECLARATION",765:"XMLSCHEMA",766:"YES",767:"ZONE",768:"SEMICOLON",769:"PERCENT",770:"ROWS"},productions_:[0,[3,1],[3,1],[3,2],[7,1],[7,2],[8,2],[9,3],[9,1],[9,1],[13,2],[13,4],[12,1],[17,0],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[47,3],[73,3],[73,1],[75,5],[40,10],[40,4],[92,8],[92,11],[102,4],[104,2],[104,1],[103,3],[103,1],[105,1],[105,3],[106,3],[109,3],[109,1],[110,1],[110,2],[114,1],[114,1],[117,1],[117,5],[117,5],[117,1],[117,2],[117,1],[117,2],[117,2],[117,3],[117,4],[117,4],[117,4],[117,4],[117,4],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,2],[117,2],[117,2],[117,1],[117,1],[117,1],[117,1],[117,1],[117,1],[117,2],[117,3],[117,4],[117,3],[117,1],[117,4],[117,2],[117,2],[117,4],[117,4],[117,4],[117,4],[117,4],[117,5],[117,4],[117,4],[117,4],[117,4],[117,4],[117,4],[117,4],[117,4],[117,6],[163,3],[163,1],[153,1],[153,1],[153,1],[182,2],[79,4],[79,4],[79,4],[79,3],[184,1],[184,2],[184,2],[184,2],[184,2],[184,2],[184,2],[184,2],[186,3],[186,4],[186,0],[81,0],[81,2],[81,2],[81,2],[81,2],[81,2],[82,2],[82,3],[82,5],[82,0],[205,6],[205,7],[205,6],[205,7],[203,1],[203,3],[209,4],[209,5],[209,3],[209,3],[209,2],[209,3],[209,1],[209,3],[209,2],[209,3],[209,1],[209,1],[209,2],[209,3],[209,1],[209,1],[209,2],[209,3],[209,1],[209,2],[209,3],[214,1],[199,3],[199,1],[204,2],[204,2],[204,1],[204,1],[215,3],[217,1],[217,2],[217,3],[217,3],[217,2],[217,3],[217,4],[217,5],[217,1],[217,2],[217,3],[217,1],[217,2],[217,3],[216,1],[216,2],[221,1],[221,2],[221,2],[221,3],[221,2],[221,3],[221,2],[221,3],[221,2],[221,2],[221,2],[218,2],[218,2],[218,4],[218,0],[84,0],[84,2],[85,0],[85,4],[233,1],[233,3],[235,5],[235,4],[235,4],[235,1],[234,0],[234,2],[88,0],[88,2],[88,3],[88,2],[88,2],[88,3],[88,4],[88,3],[88,3],[86,0],[86,3],[120,1],[120,3],[242,2],[242,2],[241,1],[241,2],[241,3],[241,3],[241,4],[87,0],[87,3],[87,8],[250,0],[250,2],[174,3],[174,1],[257,3],[257,2],[257,3],[257,2],[257,3],[257,2],[257,1],[258,5],[258,3],[258,1],[111,5],[111,3],[111,3],[111,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,1],[94,3],[94,3],[94,3],[94,1],[94,1],[94,1],[56,1],[70,5],[71,5],[267,2],[267,2],[265,6],[265,8],[265,6],[265,8],[279,1],[279,1],[279,1],[279,1],[279,1],[279,1],[279,1],[279,1],[259,5],[259,6],[259,6],[280,0],[280,4],[280,4],[280,5],[282,3],[283,3],[158,1],[158,1],[158,1],[158,1],[158,1],[158,1],[158,1],[158,1],[158,1],[158,1],[200,5],[200,3],[200,4],[200,4],[200,3],[200,8],[200,8],[200,8],[200,8],[200,8],[200,3],[151,1],[151,3],[196,1],[261,1],[261,1],[113,1],[113,1],[262,1],[202,2],[263,4],[266,3],[201,2],[201,2],[201,1],[201,1],[264,5],[264,4],[309,2],[309,1],[312,4],[310,2],[310,0],[260,3],[260,3],[260,3],[260,3],[260,5],[260,3],[260,5],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,5],[260,3],[260,3],[260,3],[260,5],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,3],[260,6],[260,6],[260,3],[260,3],[260,2],[260,2],[260,2],[260,2],[260,2],[260,3],[260,5],[260,6],[260,5],[260,6],[260,4],[260,5],[260,3],[260,4],[260,3],[260,4],[260,3],[260,3],[260,3],[260,3],[260,3],[334,1],[334,1],[334,4],[332,1],[332,1],[332,1],[332,1],[332,1],[332,1],[333,1],[333,1],[333,1],[55,6],[55,4],[147,1],[147,3],[341,3],[341,4],[29,5],[29,3],[36,5],[36,4],[36,7],[36,6],[36,5],[36,4],[36,5],[36,8],[36,7],[36,4],[36,6],[36,7],[346,1],[346,1],[345,0],[345,1],[347,3],[347,1],[347,1],[347,5],[347,3],[347,3],[350,1],[350,3],[351,1],[351,1],[351,1],[351,1],[351,1],[351,1],[100,1],[100,3],[24,9],[24,5],[354,1],[354,1],[357,0],[357,1],[359,2],[359,1],[360,1],[360,3],[360,3],[360,3],[353,0],[353,1],[355,0],[355,3],[356,3],[356,1],[356,2],[364,1],[364,3],[365,2],[365,2],[365,2],[365,2],[365,2],[366,0],[366,2],[371,4],[367,6],[368,9],[382,3],[381,0],[381,2],[383,4],[384,4],[369,6],[370,5],[370,5],[377,1],[377,1],[377,3],[377,3],[363,1],[363,3],[389,3],[389,2],[389,1],[392,6],[392,4],[392,1],[392,4],[277,2],[277,1],[393,1],[393,1],[390,0],[390,1],[396,2],[396,1],[398,3],[397,2],[397,5],[397,3],[397,6],[397,1],[397,2],[397,4],[397,2],[397,1],[397,2],[397,1],[397,1],[397,3],[397,5],[33,4],[404,3],[404,1],[403,0],[403,2],[18,6],[18,6],[18,6],[18,8],[18,6],[39,5],[19,4],[19,7],[19,6],[19,9],[30,3],[21,4],[21,6],[21,9],[21,6],[412,0],[412,2],[54,3],[54,2],[31,4],[31,5],[31,5],[22,8],[22,9],[32,3],[43,2],[43,4],[43,3],[43,5],[45,2],[45,4],[45,4],[45,6],[42,4],[42,6],[44,4],[44,6],[41,4],[41,6],[25,11],[25,8],[418,3],[418,3],[418,5],[34,4],[66,2],[57,2],[58,2],[58,2],[58,4],[144,4],[144,2],[144,2],[144,2],[144,2],[144,1],[144,2],[144,2],[427,1],[427,1],[428,1],[428,1],[428,1],[428,1],[428,1],[428,1],[428,1],[428,3],[424,3],[424,4],[424,2],[426,2],[426,3],[426,1],[430,3],[430,1],[433,3],[433,3],[433,3],[432,3],[432,1],[65,4],[65,3],[65,4],[65,5],[65,5],[65,6],[436,1],[436,1],[435,3],[435,2],[437,1],[437,1],[437,3],[434,1],[434,1],[51,2],[52,2],[50,2],[35,4],[35,3],[443,2],[59,3],[60,1],[61,1],[62,3],[63,2],[63,2],[64,2],[64,2],[451,1],[451,1],[69,2],[449,3],[449,1],[450,3],[450,1],[28,2],[454,1],[454,3],[455,3],[455,4],[455,5],[455,6],[46,3],[37,6],[458,1],[458,2],[459,2],[459,4],[460,2],[461,2],[461,2],[461,1],[461,1],[463,4],[463,6],[466,1],[466,3],[464,5],[464,7],[464,7],[464,9],[464,7],[464,9],[467,3],[467,6],[467,3],[467,6],[462,0],[462,2],[462,5],[462,4],[462,7],[27,6],[474,2],[473,0],[473,2],[473,2],[473,1],[26,8],[23,3],[23,4],[478,3],[478,1],[479,3],[479,7],[479,6],[479,3],[479,4],[483,1],[483,1],[487,2],[488,3],[489,2],[490,4],[480,4],[480,3],[480,2],[480,1],[502,2],[498,2],[498,2],[503,4],[505,6],[67,3],[67,2],[511,3],[511,1],[509,1],[509,4],[68,2],[20,2],[48,9],[48,8],[48,9],[515,0],[515,1],[515,1],[515,1],[515,2],[516,1],[516,1],[516,1],[49,3],[38,2],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[11,1],[11,1],[80,0],[80,1],[83,0],[83,1],[90,0],[90,2],[91,0],[91,1],[96,0],[96,1],[97,0],[97,1],[101,0],[101,1],[108,0],[108,1],[121,0],[121,1],[125,1],[125,2],[126,1],[126,2],[127,0],[127,1],[155,0],[155,2],[157,0],[157,2],[159,0],[159,2],[160,1],[160,1],[161,0],[161,2],[165,0],[165,2],[167,0],[167,2],[176,0],[176,2],[177,0],[177,2],[178,0],[178,2],[188,0],[188,1],[197,0],[197,1],[210,0],[210,1],[211,0],[211,1],[219,0],[219,1],[220,0],[220,1],[252,0],[252,1],[254,0],[254,1],[255,0],[255,1],[256,0],[256,1],[268,1],[268,1],[771,1],[771,1],[293,0],[293,1],[306,1],[306,1],[342,1],[342,1],[376,0],[376,1],[380,0],[380,1],[387,0],[387,1],[388,0],[388,1],[399,0],[399,1],[400,0],[400,1],[402,1],[402,1],[416,0],[416,1],[417,0],[417,1],[470,0],[470,1],[471,0],[471,1],[472,0],[472,1],[476,0],[476,1],[481,0],[481,1],[482,0],[482,1],[484,0],[484,1],[485,0],[485,1],[486,0],[486,1],[491,0],[491,1],[492,0],[492,1],[493,0],[493,1],[494,0],[494,1],[495,0],[495,1],[496,0],[496,1],[497,0],[497,1],[499,0],[499,1],[500,0],[500,1],[501,0],[501,1],[504,0],[504,2],[506,0],[506,2],[507,0],[507,2],[508,0],[508,2],[517,0],[517,1],[518,0],[518,1]],performAction:function(ro,rr,fr,W,tn,A,Ea){var I=A.length-1;switch(tn){case 1:y.options.casesensitive?this.$=A[I]:this.$=A[I].toLowerCase();break;case 2:this.$=Ne(A[I].substr(1,A[I].length-2));break;case 3:this.$=A[I].toLowerCase();break;case 4:this.$=A[I];break;case 5:this.$=A[I]?A[I-1]+" "+A[I]:A[I-1];break;case 6:return new W.Statements({statements:A[I-1]});case 7:this.$=A[I-2],A[I]&&A[I-2].push(A[I]);break;case 8:case 9:case 70:case 80:case 85:case 143:case 177:case 205:case 206:case 243:case 262:case 277:case 363:case 381:case 460:case 483:case 484:case 488:case 496:case 537:case 538:case 575:case 658:case 668:case 692:case 694:case 696:case 711:case 712:case 742:case 766:this.$=[A[I]];break;case 10:this.$=A[I],A[I].explain=!0;break;case 11:this.$=A[I],A[I].explain=!0;break;case 12:this.$=A[I],W.exists&&(this.$.exists=W.exists),delete W.exists,W.queries&&(this.$.queries=W.queries),delete W.queries;break;case 13:case 162:case 172:case 238:case 239:case 241:case 249:case 251:case 260:case 271:case 274:case 384:case 500:case 510:case 512:case 524:case 530:case 531:case 576:this.$=void 0;break;case 68:this.$=new W.WithSelect({withs:A[I-1],select:A[I]});break;case 69:case 574:A[I-2].push(A[I]),this.$=A[I-2];break;case 71:this.$={name:A[I-4],select:A[I-1]};break;case 72:W.extend(this.$,A[I-9]),W.extend(this.$,A[I-8]),W.extend(this.$,A[I-7]),W.extend(this.$,A[I-6]),W.extend(this.$,A[I-5]),W.extend(this.$,A[I-4]),W.extend(this.$,A[I-3]),W.extend(this.$,A[I-2]),W.extend(this.$,A[I-1]),W.extend(this.$,A[I]),this.$=A[I-9],W.exists&&(this.$.exists=W.exists.slice());break;case 73:this.$=new W.Search({selectors:A[I-2],from:A[I]}),W.extend(this.$,A[I-1]);break;case 74:this.$={pivot:{expr:A[I-5],columnid:A[I-3],inlist:A[I-2],as:A[I]}};break;case 75:this.$={unpivot:{tocolumnid:A[I-8],forcolumnid:A[I-6],inlist:A[I-3],as:A[I]}};break;case 76:case 529:case 558:case 594:case 628:case 645:case 646:case 649:case 671:this.$=A[I-1];break;case 77:case 78:case 86:case 147:case 185:case 248:case 284:case 292:case 293:case 294:case 295:case 296:case 297:case 298:case 299:case 300:case 301:case 302:case 303:case 304:case 305:case 308:case 309:case 325:case 326:case 327:case 328:case 329:case 330:case 383:case 449:case 450:case 451:case 452:case 453:case 454:case 525:case 551:case 555:case 557:case 632:case 633:case 634:case 635:case 636:case 637:case 641:case 643:case 644:case 653:case 669:case 670:case 733:case 748:case 749:case 751:case 752:case 758:case 759:this.$=A[I];break;case 79:case 84:case 741:case 765:this.$=A[I-2],this.$.push(A[I]);break;case 81:this.$={expr:A[I]};break;case 82:this.$={expr:A[I-2],as:A[I]};break;case 83:this.$={removecolumns:A[I]};break;case 87:this.$={like:A[I]};break;case 90:case 104:this.$={srchid:"PROP",args:[A[I]]};break;case 91:this.$={srchid:"ORDERBY",args:A[I-1]};break;case 92:var El=A[I-1];El||(El="ASC"),this.$={srchid:"ORDERBY",args:[{expression:new W.Column({columnid:"_"}),direction:El}]};break;case 93:this.$={srchid:"PARENT"};break;case 94:this.$={srchid:"APROP",args:[A[I]]};break;case 95:this.$={selid:"ROOT"};break;case 96:this.$={srchid:"EQ",args:[A[I]]};break;case 97:this.$={srchid:"LIKE",args:[A[I]]};break;case 98:case 99:this.$={selid:"WITH",args:A[I-1]};break;case 100:this.$={srchid:A[I-3].toUpperCase(),args:A[I-1]};break;case 101:this.$={srchid:"WHERE",args:[A[I-1]]};break;case 102:this.$={selid:"OF",args:[A[I-1]]};break;case 103:this.$={srchid:"CLASS",args:[A[I-1]]};break;case 105:this.$={srchid:"NAME",args:[A[I].substr(1,A[I].length-2)]};break;case 106:this.$={srchid:"CHILD"};break;case 107:this.$={srchid:"VERTEX"};break;case 108:this.$={srchid:"EDGE"};break;case 109:this.$={srchid:"REF"};break;case 110:this.$={srchid:"SHARP",args:[A[I]]};break;case 111:this.$={srchid:"ATTR",args:typeof A[I]>"u"?void 0:[A[I]]};break;case 112:this.$={srchid:"ATTR"};break;case 113:this.$={srchid:"OUT"};break;case 114:this.$={srchid:"IN"};break;case 115:this.$={srchid:"OUTOUT"};break;case 116:this.$={srchid:"ININ"};break;case 117:this.$={srchid:"CONTENT"};break;case 118:this.$={srchid:"EX",args:[new W.Json({value:A[I]})]};break;case 119:this.$={srchid:"AT",args:[A[I]]};break;case 120:this.$={srchid:"AS",args:[A[I]]};break;case 121:this.$={srchid:"SET",args:A[I-1]};break;case 122:this.$={selid:"TO",args:[A[I]]};break;case 123:this.$={srchid:"VALUE"};break;case 124:this.$={srchid:"ROW",args:A[I-1]};break;case 125:this.$={srchid:"CLASS",args:[A[I]]};break;case 126:this.$={selid:A[I],args:[A[I-1]]};break;case 127:this.$={selid:"NOT",args:A[I-1]};break;case 128:this.$={selid:"IF",args:A[I-1]};break;case 129:this.$={selid:A[I-3],args:A[I-1]};break;case 130:this.$={selid:"DISTINCT",args:A[I-1]};break;case 131:this.$={selid:"UNION",args:A[I-1]};break;case 132:this.$={selid:"UNIONALL",args:A[I-1]};break;case 133:this.$={selid:"ALL",args:[A[I-1]]};break;case 134:this.$={selid:"ANY",args:[A[I-1]]};break;case 135:this.$={selid:"INTERSECT",args:A[I-1]};break;case 136:this.$={selid:"EXCEPT",args:A[I-1]};break;case 137:this.$={selid:"AND",args:A[I-1]};break;case 138:this.$={selid:"OR",args:A[I-1]};break;case 139:this.$={selid:"PATH",args:[A[I-1]]};break;case 140:this.$={srchid:"RETURN",args:A[I-1]};break;case 141:this.$={selid:"REPEAT",sels:A[I-3],args:A[I-1]};break;case 142:this.$=A[I-2],this.$.push(A[I]);break;case 144:this.$="PLUS";break;case 145:this.$="STAR";break;case 146:this.$="QUESTION";break;case 148:this.$=new W.Select({columns:A[I],distinct:!0}),W.extend(this.$,A[I-3]),W.extend(this.$,A[I-1]);break;case 149:this.$=new W.Select({columns:A[I],distinct:!0}),W.extend(this.$,A[I-3]),W.extend(this.$,A[I-1]);break;case 150:this.$=new W.Select({columns:A[I],all:!0}),W.extend(this.$,A[I-3]),W.extend(this.$,A[I-1]);break;case 151:A[I]?(this.$=new W.Select({columns:A[I]}),W.extend(this.$,A[I-2]),W.extend(this.$,A[I-1])):this.$=new W.Select({columns:[new W.Column({columnid:"_"})],modifier:"COLUMN"});break;case 152:A[I]=="SELECT"?this.$=void 0:this.$={modifier:A[I]};break;case 153:this.$={modifier:"VALUE"};break;case 154:this.$={modifier:"ROW"};break;case 155:this.$={modifier:"COLUMN"};break;case 156:this.$={modifier:"MATRIX"};break;case 157:this.$={modifier:"TEXTSTRING"};break;case 158:this.$={modifier:"INDEX"};break;case 159:this.$={modifier:"RECORDSET"};break;case 160:this.$={top:A[I-1],percent:typeof A[I]<"u"?!0:void 0};break;case 161:this.$={top:A[I-1]};break;case 163:case 336:case 532:case 533:case 734:this.$=void 0;break;case 164:case 165:case 166:case 167:this.$={into:A[I]};break;case 168:var Yn=A[I];Yn=Yn.substr(1,Yn.length-2);var Va=Yn.substr(-3).toUpperCase(),yo=Yn.substr(-4).toUpperCase();Yn[0]=="#"?this.$={into:new W.FuncValue({funcid:"HTML",args:[new W.StringValue({value:Yn}),new W.Json({value:{headers:!0}})]})}:Va=="XLS"||Va=="CSV"||Va=="TAB"?this.$={into:new W.FuncValue({funcid:Va,args:[new W.StringValue({value:Yn}),new W.Json({value:{headers:!0}})]})}:(yo=="XLSX"||yo=="JSON")&&(this.$={into:new W.FuncValue({funcid:yo,args:[new W.StringValue({value:Yn}),new W.Json({value:{headers:!0}})]})});break;case 169:this.$={from:A[I]};break;case 170:this.$={from:A[I-1],joins:A[I]};break;case 171:this.$={from:A[I-2],joins:A[I-1]};break;case 173:this.$=new W.Apply({select:A[I-2],applymode:"CROSS",as:A[I]});break;case 174:this.$=new W.Apply({select:A[I-3],applymode:"CROSS",as:A[I]});break;case 175:this.$=new W.Apply({select:A[I-2],applymode:"OUTER",as:A[I]});break;case 176:this.$=new W.Apply({select:A[I-3],applymode:"OUTER",as:A[I]});break;case 178:case 244:case 461:case 539:case 540:this.$=A[I-2],A[I-2].push(A[I]);break;case 179:this.$=A[I-2],this.$.as=A[I];break;case 180:this.$=A[I-3],this.$.as=A[I];break;case 181:this.$=A[I-1],this.$.as="default";break;case 182:this.$=new W.Json({value:A[I-2]}),A[I-2].as=A[I];break;case 183:this.$=A[I-1],A[I-1].as=A[I];break;case 184:this.$=A[I-2],A[I-2].as=A[I];break;case 186:case 647:case 650:this.$=A[I-2];break;case 187:case 191:case 195:case 198:this.$=A[I-1],A[I-1].as=A[I];break;case 188:case 192:case 196:case 199:this.$=A[I-2],A[I-2].as=A[I];break;case 189:case 190:case 194:case 197:this.$=A[I],A[I].as="default";break;case 193:this.$={inserted:!0};break;case 200:var Yn=A[I];Yn=Yn.substr(1,Yn.length-2);var Va=Yn.substr(-3).toUpperCase(),yo=Yn.substr(-4).toUpperCase(),Lo;if(Yn[0]=="#")Lo=new W.FuncValue({funcid:"HTML",args:[new W.StringValue({value:Yn}),new W.Json({value:{headers:!0}})]});else if(Va=="XLS"||Va=="CSV"||Va=="TAB")Lo=new W.FuncValue({funcid:Va,args:[new W.StringValue({value:Yn}),new W.Json({value:{headers:!0}})]});else if(yo=="XLSX"||yo=="JSON")Lo=new W.FuncValue({funcid:yo,args:[new W.StringValue({value:Yn}),new W.Json({value:{headers:!0}})]});else throw new Error("Unknown string in FROM clause");this.$=Lo;break;case 201:A[I-2]=="INFORMATION_SCHEMA"?this.$=new W.FuncValue({funcid:A[I-2],args:[new W.StringValue({value:A[I]})]}):this.$=new W.Table({databaseid:A[I-2],tableid:A[I]});break;case 202:this.$=new W.Table({tableid:A[I]});break;case 203:case 204:this.$=A[I-1],A[I-1].push(A[I]);break;case 207:this.$=new W.Join(A[I-2]),W.extend(this.$,A[I-1]),W.extend(this.$,A[I]);break;case 208:this.$={table:A[I]};break;case 209:this.$={table:A[I-1],as:A[I]};break;case 210:this.$={table:A[I-2],as:A[I]};break;case 211:this.$={json:new W.Json({value:A[I-2],as:A[I]})};break;case 212:this.$={param:A[I-1],as:A[I]};break;case 213:this.$={param:A[I-2],as:A[I]};break;case 214:this.$={select:A[I-2],as:A[I]};break;case 215:this.$={select:A[I-3],as:A[I]};break;case 216:this.$={func:A[I],as:"default"};break;case 217:this.$={func:A[I-1],as:A[I]};break;case 218:this.$={func:A[I-2],as:A[I]};break;case 219:this.$={variable:A[I],as:"default"};break;case 220:this.$={variable:A[I-1],as:A[I]};break;case 221:this.$={variable:A[I-2],as:A[I]};break;case 222:this.$={joinmode:A[I]};break;case 223:this.$={joinmode:A[I-1],natural:!0};break;case 224:case 225:this.$="INNER";break;case 226:case 227:this.$="LEFT";break;case 228:case 229:this.$="RIGHT";break;case 230:case 231:this.$="OUTER";break;case 232:this.$="SEMI";break;case 233:this.$="ANTI";break;case 234:this.$="CROSS";break;case 235:this.$={on:A[I]};break;case 236:case 706:this.$={using:A[I]};break;case 237:case 707:this.$={using:A[I-1]};break;case 240:this.$={where:new W.Expression({expression:A[I]})};break;case 242:this.$={group:A[I-1]},W.extend(this.$,A[I]);break;case 245:this.$=new W.GroupExpression({type:"GROUPING SETS",group:A[I-1]});break;case 246:this.$=new W.GroupExpression({type:"ROLLUP",group:A[I-1]});break;case 247:this.$=new W.GroupExpression({type:"CUBE",group:A[I-1]});break;case 250:this.$={having:A[I]};break;case 252:this.$={union:A[I]};break;case 253:this.$={unionall:A[I]};break;case 254:this.$={except:A[I]};break;case 255:this.$={intersect:A[I]};break;case 256:this.$={union:A[I],corresponding:!0};break;case 257:this.$={unionall:A[I],corresponding:!0};break;case 258:this.$={except:A[I],corresponding:!0};break;case 259:this.$={intersect:A[I],corresponding:!0};break;case 261:this.$={order:A[I]};break;case 263:this.$=A[I-2],A[I-2].push(A[I]);break;case 264:this.$={nullsOrder:"FIRST"};break;case 265:this.$={nullsOrder:"LAST"};break;case 266:this.$=new W.Expression({expression:A[I],direction:"ASC"});break;case 267:this.$=new W.Expression({expression:A[I-1],direction:A[I].toUpperCase()});break;case 268:this.$=new W.Expression({expression:A[I-2],direction:A[I-1].toUpperCase()}),W.extend(this.$,A[I]);break;case 269:this.$=new W.Expression({expression:A[I-2],direction:"ASC",nocase:!0});break;case 270:this.$=new W.Expression({expression:A[I-3],direction:A[I].toUpperCase(),nocase:!0});break;case 272:this.$={limit:A[I-1]},W.extend(this.$,A[I]);break;case 273:this.$={limit:A[I-2],offset:A[I-6]};break;case 275:this.$={offset:A[I]};break;case 276:case 518:case 542:case 657:case 667:case 691:case 693:case 697:A[I-2].push(A[I]),this.$=A[I-2];break;case 278:case 280:case 282:A[I-2].as=A[I],this.$=A[I-2];break;case 279:case 281:case 283:A[I-1].as=A[I],this.$=A[I-1];break;case 285:this.$=new W.Column({columid:A[I],tableid:A[I-2],databaseid:A[I-4]});break;case 286:this.$=new W.Column({columnid:A[I],tableid:A[I-2]});break;case 287:this.$=new W.Column({columnid:A[I]});break;case 288:this.$=new W.Column({columnid:A[I],tableid:A[I-2],databaseid:A[I-4]});break;case 289:case 290:this.$=new W.Column({columnid:A[I],tableid:A[I-2]});break;case 291:this.$=new W.Column({columnid:A[I]});break;case 306:this.$=new W.DomainValueValue;break;case 307:this.$=new W.Json({value:A[I]});break;case 310:case 311:case 312:W.queries||(W.queries=[]),W.queries.push(A[I-1]),A[I-1].queriesidx=W.queries.length,this.$=A[I-1];break;case 313:this.$=A[I];break;case 314:this.$=new W.FuncValue({funcid:"CURRENT_TIMESTAMP"});break;case 315:this.$=new W.FuncValue({funcid:"CURRENT_DATE"});break;case 316:this.$=new W.JavaScript({value:A[I].substr(2,A[I].length-4)});break;case 317:this.$=new W.JavaScript({value:'alasql.fn["'+A[I-2]+'"] = '+A[I].substr(2,A[I].length-4)});break;case 318:this.$=new W.JavaScript({value:'alasql.aggr["'+A[I-2]+'"] = '+A[I].substr(2,A[I].length-4)});break;case 319:this.$=new W.FuncValue({funcid:A[I],newid:!0});break;case 320:this.$=A[I],W.extend(this.$,{newid:!0});break;case 321:this.$=new W.Convert({expression:A[I-3]}),W.extend(this.$,A[I-1]);break;case 322:this.$=new W.Convert({expression:A[I-5],style:A[I-1]}),W.extend(this.$,A[I-3]);break;case 323:this.$=new W.Convert({expression:A[I-1]}),W.extend(this.$,A[I-3]);break;case 324:this.$=new W.Convert({expression:A[I-3],style:A[I-1]}),W.extend(this.$,A[I-5]);break;case 331:this.$=new W.FuncValue({funcid:"CURRENT_TIMESTAMP"});break;case 332:this.$=new W.FuncValue({funcid:"CURRENT_DATE"});break;case 333:A[I-2].length>1&&(A[I-4].toUpperCase()=="MAX"||A[I-4].toUpperCase()=="MIN")?this.$=new W.FuncValue({funcid:A[I-4],args:A[I-2]}):this.$=new W.AggrValue({aggregatorid:A[I-4].toUpperCase(),expression:A[I-2].pop(),over:A[I]});break;case 334:this.$=new W.AggrValue({aggregatorid:A[I-5].toUpperCase(),expression:A[I-2],distinct:!0,over:A[I]});break;case 335:this.$=new W.AggrValue({aggregatorid:A[I-5].toUpperCase(),expression:A[I-2],over:A[I]});break;case 337:case 338:this.$=new W.Over,W.extend(this.$,A[I-1]);break;case 339:this.$=new W.Over,W.extend(this.$,A[I-2]),W.extend(this.$,A[I-1]);break;case 340:this.$={partition:A[I]};break;case 341:this.$={order:A[I]};break;case 342:this.$="SUM";break;case 343:this.$="TOTAL";break;case 344:this.$="COUNT";break;case 345:this.$="MIN";break;case 346:case 553:this.$="MAX";break;case 347:this.$="AVG";break;case 348:this.$="FIRST";break;case 349:this.$="LAST";break;case 350:this.$="AGGR";break;case 351:this.$="ARRAY";break;case 352:var b1=A[I-4],Sn=A[I-1];Sn.length>1&&(b1.toUpperCase()=="MIN"||b1.toUpperCase()=="MAX")?this.$=new W.FuncValue({funcid:b1,args:Sn}):y.aggr[A[I-4]]?this.$=new W.AggrValue({aggregatorid:"REDUCE",funcid:b1,expression:Sn.pop(),distinct:A[I-2]=="DISTINCT"}):this.$=new W.FuncValue({funcid:b1,args:Sn});break;case 353:case 356:this.$=new W.FuncValue({funcid:A[I-2]});break;case 354:this.$=new W.FuncValue({funcid:"IIF",args:A[I-1]});break;case 355:this.$=new W.FuncValue({funcid:"REPLACE",args:A[I-1]});break;case 357:this.$=new W.FuncValue({funcid:"DATEADD",args:[new W.StringValue({value:A[I-5]}),A[I-3],A[I-1]]});break;case 358:this.$=new W.FuncValue({funcid:"DATEADD",args:[A[I-5],A[I-3],A[I-1]]});break;case 359:this.$=new W.FuncValue({funcid:"DATEDIFF",args:[new W.StringValue({value:A[I-5]}),A[I-3],A[I-1]]});break;case 360:this.$=new W.FuncValue({funcid:"DATEDIFF",args:[A[I-5],A[I-3],A[I-1]]});break;case 361:this.$=new W.FuncValue({funcid:"TIMESTAMPDIFF",args:[new W.StringValue({value:A[I-5]}),A[I-3],A[I-1]]});break;case 362:this.$=new W.FuncValue({funcid:"INTERVAL",args:[A[I-1],new W.StringValue({value:A[I].toLowerCase()})]});break;case 364:A[I-2].push(A[I]),this.$=A[I-2];break;case 365:this.$=new W.NumValue({value:+A[I]});break;case 366:this.$=new W.LogicValue({value:!0});break;case 367:this.$=new W.LogicValue({value:!1});break;case 368:this.$=new W.StringValue({value:A[I].substr(1,A[I].length-2).replace(/(\\\')/g,"'").replace(/(\'\')/g,"'")});break;case 369:this.$=new W.StringValue({value:A[I].substr(2,A[I].length-3).replace(/(\\\')/g,"'").replace(/(\'\')/g,"'")});break;case 370:this.$=new W.NullValue({value:void 0});break;case 371:this.$=new W.VarValue({variable:A[I]});break;case 372:W.exists||(W.exists=[]),this.$=new W.ExistsValue({value:A[I-1],existsidx:W.exists.length}),W.exists.push(A[I-1]);break;case 373:this.$=new W.ArrayValue({value:A[I-1]});break;case 374:case 375:this.$=new W.ParamValue({param:A[I]});break;case 376:typeof W.question>"u"&&(W.question=0),this.$=new W.ParamValue({param:W.question++});break;case 377:typeof W.question>"u"&&(W.question=0),this.$=new W.ParamValue({param:W.question++,array:!0});break;case 378:this.$=new W.CaseValue({expression:A[I-3],whens:A[I-2],elses:A[I-1]});break;case 379:this.$=new W.CaseValue({whens:A[I-2],elses:A[I-1]});break;case 380:case 709:case 710:this.$=A[I-1],this.$.push(A[I]);break;case 382:this.$={when:A[I-2],then:A[I]};break;case 385:case 386:this.$=new W.Op({left:A[I-2],op:"REGEXP",right:A[I]});break;case 387:this.$=new W.Op({left:A[I-2],op:"GLOB",right:A[I]});break;case 388:this.$=new W.Op({left:A[I-2],op:"LIKE",right:A[I]});break;case 389:this.$=new W.Op({left:A[I-4],op:"LIKE",right:A[I-2],escape:A[I]});break;case 390:this.$=new W.Op({left:A[I-2],op:"NOT LIKE",right:A[I]});break;case 391:this.$=new W.Op({left:A[I-4],op:"NOT LIKE",right:A[I-2],escape:A[I]});break;case 392:this.$=new W.Op({left:A[I-2],op:"||",right:A[I]});break;case 393:this.$=new W.Op({left:A[I-2],op:"+",right:A[I]});break;case 394:this.$=new W.Op({left:A[I-2],op:"-",right:A[I]});break;case 395:this.$=new W.Op({left:A[I-2],op:"*",right:A[I]});break;case 396:this.$=new W.Op({left:A[I-2],op:"/",right:A[I]});break;case 397:this.$=new W.Op({left:A[I-2],op:"%",right:A[I]});break;case 398:this.$=new W.Op({left:A[I-2],op:"^",right:A[I]});break;case 399:this.$=new W.Op({left:A[I-2],op:">>",right:A[I]});break;case 400:this.$=new W.Op({left:A[I-2],op:"<<",right:A[I]});break;case 401:this.$=new W.Op({left:A[I-2],op:"&",right:A[I]});break;case 402:this.$=new W.Op({left:A[I-2],op:"|",right:A[I]});break;case 403:case 404:case 406:this.$=new W.Op({left:A[I-2],op:"->",right:A[I]});break;case 405:this.$=new W.Op({left:A[I-4],op:"->",right:A[I-1]});break;case 407:case 408:case 410:this.$=new W.Op({left:A[I-2],op:"!",right:A[I]});break;case 409:this.$=new W.Op({left:A[I-4],op:"!",right:A[I-1]});break;case 411:this.$=new W.Op({left:A[I-2],op:">",right:A[I]});break;case 412:this.$=new W.Op({left:A[I-2],op:">=",right:A[I]});break;case 413:this.$=new W.Op({left:A[I-2],op:"<",right:A[I]});break;case 414:this.$=new W.Op({left:A[I-2],op:"<=",right:A[I]});break;case 415:this.$=new W.Op({left:A[I-2],op:"=",right:A[I]});break;case 416:this.$=new W.Op({left:A[I-2],op:"==",right:A[I]});break;case 417:this.$=new W.Op({left:A[I-2],op:"===",right:A[I]});break;case 418:this.$=new W.Op({left:A[I-2],op:"!=",right:A[I]});break;case 419:this.$=new W.Op({left:A[I-2],op:"!==",right:A[I]});break;case 420:this.$=new W.Op({left:A[I-2],op:"!===",right:A[I]});break;case 421:W.queries||(W.queries=[]),this.$=new W.Op({left:A[I-5],op:A[I-4],allsome:A[I-3],right:A[I-1],queriesidx:W.queries.length}),W.queries.push(A[I-1]);break;case 422:this.$=new W.Op({left:A[I-5],op:A[I-4],allsome:A[I-3],right:A[I-1]});break;case 423:A[I-2].op=="BETWEEN1"?A[I-2].left.op=="AND"?this.$=new W.Op({left:A[I-2].left.left,op:"AND",right:new W.Op({left:A[I-2].left.right,op:"BETWEEN",right1:A[I-2].right,right2:A[I]})}):this.$=new W.Op({left:A[I-2].left,op:"BETWEEN",right1:A[I-2].right,right2:A[I]}):A[I-2].op=="NOT BETWEEN1"?A[I-2].left.op=="AND"?this.$=new W.Op({left:A[I-2].left.left,op:"AND",right:new W.Op({left:A[I-2].left.right,op:"NOT BETWEEN",right1:A[I-2].right,right2:A[I]})}):this.$=new W.Op({left:A[I-2].left,op:"NOT BETWEEN",right1:A[I-2].right,right2:A[I]}):this.$=new W.Op({left:A[I-2],op:"AND",right:A[I]});break;case 424:this.$=new W.Op({left:A[I-2],op:"OR",right:A[I]});break;case 425:this.$=new W.UniOp({op:"NOT",right:A[I]});break;case 426:this.$=new W.UniOp({op:"-",right:A[I]});break;case 427:this.$=new W.UniOp({op:"+",right:A[I]});break;case 428:this.$=new W.UniOp({op:"~",right:A[I]});break;case 429:this.$=new W.UniOp({op:"#",right:A[I]});break;case 430:this.$=new W.UniOp({right:A[I-1]});break;case 431:W.queries||(W.queries=[]),this.$=new W.Op({left:A[I-4],op:"IN",right:A[I-1],queriesidx:W.queries.length}),W.queries.push(A[I-1]);break;case 432:W.queries||(W.queries=[]),this.$=new W.Op({left:A[I-5],op:"NOT IN",right:A[I-1],queriesidx:W.queries.length}),W.queries.push(A[I-1]);break;case 433:this.$=new W.Op({left:A[I-4],op:"IN",right:A[I-1]});break;case 434:this.$=new W.Op({left:A[I-5],op:"NOT IN",right:A[I-1]});break;case 435:this.$=new W.Op({left:A[I-3],op:"IN",right:[]});break;case 436:this.$=new W.Op({left:A[I-4],op:"NOT IN",right:[]});break;case 437:case 439:this.$=new W.Op({left:A[I-2],op:"IN",right:A[I]});break;case 438:case 440:this.$=new W.Op({left:A[I-3],op:"NOT IN",right:A[I]});break;case 441:this.$=new W.Op({left:A[I-2],op:"BETWEEN1",right:A[I]});break;case 442:this.$=new W.Op({left:A[I-2],op:"NOT BETWEEN1",right:A[I]});break;case 443:this.$=new W.Op({op:"IS",left:A[I-2],right:A[I]});break;case 444:this.$=new W.Op({op:"IS",left:A[I-2],right:new W.UniOp({op:"NOT",right:new W.NullValue({value:void 0})})});break;case 445:this.$=new W.Convert({expression:A[I-2]}),W.extend(this.$,A[I]);break;case 446:case 447:this.$=A[I];break;case 448:this.$=A[I-1];break;case 455:this.$="ALL";break;case 456:this.$="SOME";break;case 457:this.$="ANY";break;case 458:this.$=new W.Update({table:A[I-4],columns:A[I-2],where:A[I]});break;case 459:this.$=new W.Update({table:A[I-2],columns:A[I]});break;case 462:this.$=new W.SetColumn({column:A[I-2],expression:A[I]});break;case 463:this.$=new W.SetColumn({variable:A[I-2],expression:A[I],method:A[I-3]});break;case 464:this.$=new W.Delete({table:A[I-2],where:A[I]});break;case 465:this.$=new W.Delete({table:A[I]});break;case 466:this.$=new W.Insert({into:A[I-2],values:A[I]});break;case 467:this.$=new W.Insert({into:A[I-1],values:A[I]});break;case 468:case 470:this.$=new W.Insert({into:A[I-2],values:A[I],orreplace:!0});break;case 469:case 471:this.$=new W.Insert({into:A[I-1],values:A[I],orreplace:!0});break;case 472:this.$=new W.Insert({into:A[I-2],default:!0});break;case 473:this.$=new W.Insert({into:A[I-5],columns:A[I-3],values:A[I]});break;case 474:this.$=new W.Insert({into:A[I-4],columns:A[I-2],values:A[I]});break;case 475:this.$=new W.Insert({into:A[I-1],select:A[I]});break;case 476:this.$=new W.Insert({into:A[I-1],select:A[I],orreplace:!0});break;case 477:this.$=new W.Insert({into:A[I-4],columns:A[I-2],select:A[I]});break;case 482:this.$=[A[I-1]];break;case 485:this.$=A[I-4],A[I-4].push(A[I-1]);break;case 486:case 487:case 489:case 497:this.$=A[I-2],A[I-2].push(A[I]);break;case 498:this.$=new W.CreateTable({table:A[I-4]}),W.extend(this.$,A[I-7]),W.extend(this.$,A[I-6]),W.extend(this.$,A[I-5]),W.extend(this.$,A[I-2]),W.extend(this.$,A[I]);break;case 499:this.$=new W.CreateTable({table:A[I]}),W.extend(this.$,A[I-3]),W.extend(this.$,A[I-2]),W.extend(this.$,A[I-1]);break;case 501:this.$={class:!0};break;case 511:this.$={temporary:!0};break;case 513:this.$={ifnotexists:!0};break;case 514:this.$={columns:A[I-2],constraints:A[I]};break;case 515:this.$={columns:A[I]};break;case 516:this.$={as:A[I]};break;case 517:case 541:this.$=[A[I]];break;case 519:case 520:case 521:case 522:case 523:A[I].constraintid=A[I-1],this.$=A[I];break;case 526:this.$={type:"CHECK",expression:A[I-1]};break;case 527:this.$={type:"PRIMARY KEY",columns:A[I-1],clustered:(A[I-3]+"").toUpperCase()};break;case 528:this.$={type:"FOREIGN KEY",columns:A[I-5],fktable:A[I-2],fkcolumns:A[I-1]};break;case 534:this.$={type:"UNIQUE",columns:A[I-1],clustered:(A[I-3]+"").toUpperCase()};break;case 543:this.$=new W.ColumnDef({columnid:A[I-2]}),W.extend(this.$,A[I-1]),W.extend(this.$,A[I]);break;case 544:this.$=new W.ColumnDef({columnid:A[I-1]}),W.extend(this.$,A[I]);break;case 545:this.$=new W.ColumnDef({columnid:A[I],dbtypeid:""});break;case 546:this.$={dbtypeid:A[I-5],dbsize:A[I-3],dbprecision:+A[I-1]};break;case 547:this.$={dbtypeid:A[I-3],dbsize:A[I-1]};break;case 548:this.$={dbtypeid:A[I]};break;case 549:this.$={dbtypeid:"ENUM",enumvalues:A[I-1]};break;case 550:this.$=A[I-1],A[I-1].dbtypeid+="["+A[I]+"]";break;case 552:case 760:this.$=+A[I];break;case 554:this.$=void 0;break;case 556:W.extend(A[I-1],A[I]),this.$=A[I-1];break;case 559:this.$={primarykey:!0};break;case 560:case 561:this.$={foreignkey:{table:A[I-1],columnid:A[I]}};break;case 562:this.$={identity:{value:A[I-3],step:A[I-1]}};break;case 563:this.$={identity:{value:1,step:1}};break;case 564:case 566:this.$={default:A[I]};break;case 565:this.$={default:A[I-1]};break;case 567:this.$={null:!0};break;case 568:this.$={notnull:!0};break;case 569:this.$={check:A[I]};break;case 570:this.$={unique:!0};break;case 571:this.$={onupdate:A[I]};break;case 572:this.$={onupdate:A[I-1]};break;case 573:this.$=new W.DropTable({tables:A[I],type:A[I-2]}),W.extend(this.$,A[I-1]);break;case 577:this.$={ifexists:!0};break;case 578:this.$=new W.AlterTable({table:A[I-3],renameto:A[I]});break;case 579:this.$=new W.AlterTable({table:A[I-3],addcolumn:A[I]});break;case 580:this.$=new W.AlterTable({table:A[I-3],modifycolumn:A[I]});break;case 581:this.$=new W.AlterTable({table:A[I-5],renamecolumn:A[I-2],to:A[I]});break;case 582:this.$=new W.AlterTable({table:A[I-3],dropcolumn:A[I]});break;case 583:this.$=new W.AlterTable({table:A[I-2],renameto:A[I]});break;case 584:this.$=new W.AttachDatabase({databaseid:A[I],engineid:A[I-2].toUpperCase()});break;case 585:this.$=new W.AttachDatabase({databaseid:A[I-3],engineid:A[I-5].toUpperCase(),args:A[I-1]});break;case 586:this.$=new W.AttachDatabase({databaseid:A[I-2],engineid:A[I-4].toUpperCase(),as:A[I]});break;case 587:this.$=new W.AttachDatabase({databaseid:A[I-5],engineid:A[I-7].toUpperCase(),as:A[I],args:A[I-3]});break;case 588:this.$=new W.DetachDatabase({databaseid:A[I]});break;case 589:this.$=new W.CreateDatabase({databaseid:A[I]}),W.extend(this.$,A[I]);break;case 590:this.$=new W.CreateDatabase({engineid:A[I-4].toUpperCase(),databaseid:A[I-1],as:A[I]}),W.extend(this.$,A[I-2]);break;case 591:this.$=new W.CreateDatabase({engineid:A[I-7].toUpperCase(),databaseid:A[I-4],args:A[I-2],as:A[I]}),W.extend(this.$,A[I-5]);break;case 592:this.$=new W.CreateDatabase({engineid:A[I-4].toUpperCase(),as:A[I],args:[A[I-1]]}),W.extend(this.$,A[I-2]);break;case 593:this.$=void 0;break;case 595:case 596:this.$=new W.UseDatabase({databaseid:A[I]});break;case 597:this.$=new W.DropDatabase({databaseid:A[I]}),W.extend(this.$,A[I-1]);break;case 598:case 599:this.$=new W.DropDatabase({databaseid:A[I],engineid:A[I-3].toUpperCase()}),W.extend(this.$,A[I-1]);break;case 600:this.$=new W.CreateIndex({indexid:A[I-5],table:A[I-3],columns:A[I-1]});break;case 601:this.$=new W.CreateIndex({indexid:A[I-5],table:A[I-3],columns:A[I-1],unique:!0});break;case 602:this.$=new W.DropIndex({indexid:A[I]});break;case 603:this.$=new W.ShowDatabases;break;case 604:this.$=new W.ShowDatabases({like:A[I]});break;case 605:this.$=new W.ShowDatabases({engineid:A[I-1].toUpperCase()});break;case 606:this.$=new W.ShowDatabases({engineid:A[I-3].toUpperCase(),like:A[I]});break;case 607:this.$=new W.ShowTables;break;case 608:this.$=new W.ShowTables({like:A[I]});break;case 609:this.$=new W.ShowTables({databaseid:A[I]});break;case 610:this.$=new W.ShowTables({like:A[I],databaseid:A[I-2]});break;case 611:this.$=new W.ShowColumns({table:A[I]});break;case 612:this.$=new W.ShowColumns({table:A[I-2],databaseid:A[I]});break;case 613:this.$=new W.ShowIndex({table:A[I]});break;case 614:this.$=new W.ShowIndex({table:A[I-2],databaseid:A[I]});break;case 615:this.$=new W.ShowCreateTable({table:A[I]});break;case 616:this.$=new W.ShowCreateTable({table:A[I-2],databaseid:A[I]});break;case 617:this.$=new W.CreateTable({table:A[I-6],view:!0,select:A[I-1],viewcolumns:A[I-4]}),W.extend(this.$,A[I-9]),W.extend(this.$,A[I-7]);break;case 618:this.$=new W.CreateTable({table:A[I-3],view:!0,select:A[I-1]}),W.extend(this.$,A[I-6]),W.extend(this.$,A[I-4]);break;case 622:this.$=new W.DropTable({tables:A[I],view:!0}),W.extend(this.$,A[I-1]);break;case 623:case 770:this.$=new W.ExpressionStatement({expression:A[I]});break;case 624:this.$=new W.Source({url:A[I].value});break;case 625:this.$=new W.Assert({value:A[I]});break;case 626:this.$=new W.Assert({value:A[I].value});break;case 627:this.$=new W.Assert({value:A[I],message:A[I-2]});break;case 629:case 640:case 642:this.$=A[I].value;break;case 630:case 638:this.$=+A[I].value;break;case 631:this.$=!!A[I].value;break;case 639:this.$=""+A[I].value;break;case 648:this.$={};break;case 651:this.$=[];break;case 652:W.extend(A[I-2],A[I]),this.$=A[I-2];break;case 654:this.$={},this.$[A[I-2].substr(1,A[I-2].length-2)]=A[I];break;case 655:case 656:this.$={},this.$[A[I-2]]=A[I];break;case 659:this.$=new W.SetVariable({variable:A[I-2].toLowerCase(),value:A[I]});break;case 660:this.$=new W.SetVariable({variable:A[I-1].toLowerCase(),value:A[I]});break;case 661:this.$=new W.SetVariable({variable:A[I-2],expression:A[I]});break;case 662:this.$=new W.SetVariable({variable:A[I-3],props:A[I-2],expression:A[I]});break;case 663:this.$=new W.SetVariable({variable:A[I-2],expression:A[I],method:A[I-3]});break;case 664:this.$=new W.SetVariable({variable:A[I-3],props:A[I-2],expression:A[I],method:A[I-4]});break;case 665:this.$="@";break;case 666:this.$="$";break;case 672:this.$=!0;break;case 673:this.$=!1;break;case 674:this.$=new W.CommitTransaction;break;case 675:this.$=new W.RollbackTransaction;break;case 676:this.$=new W.BeginTransaction;break;case 677:this.$=new W.If({expression:A[I-2],thenstat:A[I-1],elsestat:A[I]}),A[I-1].exists&&(this.$.exists=A[I-1].exists),A[I-1].queries&&(this.$.queries=A[I-1].queries);break;case 678:this.$=new W.If({expression:A[I-1],thenstat:A[I]}),A[I].exists&&(this.$.exists=A[I].exists),A[I].queries&&(this.$.queries=A[I].queries);break;case 679:this.$=A[I];break;case 680:this.$=new W.While({expression:A[I-1],loopstat:A[I]}),A[I].exists&&(this.$.exists=A[I].exists),A[I].queries&&(this.$.queries=A[I].queries);break;case 681:this.$=new W.Continue;break;case 682:this.$=new W.Break;break;case 683:this.$=new W.BeginEnd({statements:A[I-1]});break;case 684:this.$=new W.Print({exprs:A[I]});break;case 685:this.$=new W.Print({select:A[I]});break;case 686:this.$=new W.Require({paths:A[I]});break;case 687:this.$=new W.Require({plugins:A[I]});break;case 688:case 689:this.$=A[I].toUpperCase();break;case 690:this.$=new W.Echo({expr:A[I]});break;case 695:this.$=new W.Declare({declares:A[I]});break;case 698:this.$={variable:A[I-1]},W.extend(this.$,A[I]);break;case 699:this.$={variable:A[I-2]},W.extend(this.$,A[I]);break;case 700:this.$={variable:A[I-3],expression:A[I]},W.extend(this.$,A[I-2]);break;case 701:this.$={variable:A[I-4],expression:A[I]},W.extend(this.$,A[I-2]);break;case 702:this.$=new W.TruncateTable({table:A[I]});break;case 703:this.$=new W.Merge,W.extend(this.$,A[I-4]),W.extend(this.$,A[I-3]),W.extend(this.$,A[I-2]),W.extend(this.$,{matches:A[I-1]}),W.extend(this.$,A[I]);break;case 704:case 705:this.$={into:A[I]};break;case 708:this.$={on:A[I]};break;case 713:this.$={matched:!0,action:A[I]};break;case 714:this.$={matched:!0,expr:A[I-2],action:A[I]};break;case 715:this.$={delete:!0};break;case 716:this.$={update:A[I]};break;case 717:case 718:this.$={matched:!1,bytarget:!0,action:A[I]};break;case 719:case 720:this.$={matched:!1,bytarget:!0,expr:A[I-2],action:A[I]};break;case 721:this.$={matched:!1,bysource:!0,action:A[I]};break;case 722:this.$={matched:!1,bysource:!0,expr:A[I-2],action:A[I]};break;case 723:this.$={insert:!0,values:A[I]};break;case 724:this.$={insert:!0,values:A[I],columns:A[I-3]};break;case 725:this.$={insert:!0,defaultvalues:!0};break;case 726:this.$={insert:!0,defaultvalues:!0,columns:A[I-3]};break;case 728:this.$={output:{columns:A[I]}};break;case 729:this.$={output:{columns:A[I-3],intovar:A[I],method:A[I-1]}};break;case 730:this.$={output:{columns:A[I-2],intotable:A[I]}};break;case 731:this.$={output:{columns:A[I-5],intotable:A[I-3],intocolumns:A[I-1]}};break;case 732:this.$=new W.CreateVertex({class:A[I-3],sharp:A[I-2],name:A[I-1]}),W.extend(this.$,A[I]);break;case 735:this.$={sets:A[I]};break;case 736:this.$={content:A[I]};break;case 737:this.$={select:A[I]};break;case 738:this.$=new W.CreateEdge({from:A[I-3],to:A[I-1],name:A[I-5]}),W.extend(this.$,A[I]);break;case 739:this.$=new W.CreateGraph({graph:A[I]});break;case 740:this.$=new W.CreateGraph({from:A[I]});break;case 743:this.$=A[I-2],A[I-1]&&(this.$.json=new W.Json({value:A[I-1]})),A[I]&&(this.$.as=A[I]);break;case 744:this.$={source:A[I-6],target:A[I]},A[I-3]&&(this.$.json=new W.Json({value:A[I-3]})),A[I-2]&&(this.$.as=A[I-2]),W.extend(this.$,A[I-4]);break;case 745:this.$={source:A[I-5],target:A[I]},A[I-2]&&(this.$.json=new W.Json({value:A[I-3]})),A[I-1]&&(this.$.as=A[I-2]);break;case 746:this.$={source:A[I-2],target:A[I]};break;case 750:this.$={vars:A[I],method:A[I-1]};break;case 753:case 754:var Ua=A[I-1];this.$={prop:A[I-3],sharp:A[I-2],name:typeof Ua>"u"?void 0:Ua.substr(1,Ua.length-2),class:A[I]};break;case 755:var v1=A[I-1];this.$={sharp:A[I-2],name:typeof v1>"u"?void 0:v1.substr(1,v1.length-2),class:A[I]};break;case 756:var gn=A[I-1];this.$={name:typeof gn>"u"?void 0:gn.substr(1,gn.length-2),class:A[I]};break;case 757:this.$={class:A[I]};break;case 763:this.$=new W.AddRule({left:A[I-2],right:A[I]});break;case 764:this.$=new W.AddRule({right:A[I]});break;case 767:this.$={termid:A[I]};break;case 768:this.$={termid:A[I-3],args:A[I-1]};break;case 771:this.$=new W.CreateTrigger({trigger:A[I-6],when:A[I-5],action:A[I-4],table:A[I-2],statement:A[I]}),A[I].exists&&(this.$.exists=A[I].exists),A[I].queries&&(this.$.queries=A[I].queries);break;case 772:this.$=new W.CreateTrigger({trigger:A[I-5],when:A[I-4],action:A[I-3],table:A[I-1],funcid:A[I]});break;case 773:this.$=new W.CreateTrigger({trigger:A[I-6],when:A[I-4],action:A[I-3],table:A[I-5],statement:A[I]}),A[I].exists&&(this.$.exists=A[I].exists),A[I].queries&&(this.$.queries=A[I].queries);break;case 774:case 775:case 777:this.$="AFTER";break;case 776:this.$="BEFORE";break;case 778:this.$="INSTEADOF";break;case 779:this.$="INSERT";break;case 780:this.$="DELETE";break;case 781:this.$="UPDATE";break;case 782:this.$=new W.DropTrigger({trigger:A[I]});break;case 783:this.$=new W.Reindex({indexid:A[I]});break;case 1057:case 1077:case 1079:case 1081:case 1085:case 1087:case 1089:case 1091:case 1093:case 1095:this.$=[];break;case 1058:case 1072:case 1074:case 1078:case 1080:case 1082:case 1086:case 1088:case 1090:case 1092:case 1094:case 1096:A[I-1].push(A[I]);break;case 1071:case 1073:this.$=[A[I]];break}},table:[i([10,607,768],_,{8:1,9:2,12:3,13:4,17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,509:95,184:99,3:100,2:p,4:f,5:v,14:T,53:P,72:D,89:V,124:ae,146:ie,156:Q,189:$,271:F,272:_e,294:ue,340:ze,343:ve,344:Ie,401:Me,405:Ut,406:jt,409:Zt,411:ei,413:xi,414:Ci,422:Mi,423:We,439:Wi,441:Li,442:Ht,444:or,445:vr,446:dn,447:qr,448:hr,452:lr,453:pn,456:Rr,457:Sr,510:sr,512:Br,513:nn,522:Fn}),{1:[3]},{10:[1,105],11:106,607:ds,768:es},i(ln,[2,8]),i(ln,[2,9]),i($e,[2,12]),i(ln,_,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,509:95,184:99,3:100,12:109,2:p,4:f,5:v,15:[1,110],53:P,72:D,89:V,124:ae,146:ie,156:Q,189:$,271:F,272:_e,294:ue,340:ze,343:ve,344:Ie,401:Me,405:Ut,406:jt,409:Zt,411:ei,413:xi,414:Ci,422:Mi,423:We,439:Wi,441:Li,442:Ht,444:or,445:vr,446:dn,447:qr,448:hr,452:lr,453:pn,456:Rr,457:Sr,510:sr,512:Br,513:nn,522:Fn}),i($e,[2,14]),i($e,[2,15]),i($e,[2,16]),i($e,[2,17]),i($e,[2,18]),i($e,[2,19]),i($e,[2,20]),i($e,[2,21]),i($e,[2,22]),i($e,[2,23]),i($e,[2,24]),i($e,[2,25]),i($e,[2,26]),i($e,[2,27]),i($e,[2,28]),i($e,[2,29]),i($e,[2,30]),i($e,[2,31]),i($e,[2,32]),i($e,[2,33]),i($e,[2,34]),i($e,[2,35]),i($e,[2,36]),i($e,[2,37]),i($e,[2,38]),i($e,[2,39]),i($e,[2,40]),i($e,[2,41]),i($e,[2,42]),i($e,[2,43]),i($e,[2,44]),i($e,[2,45]),i($e,[2,46]),i($e,[2,47]),i($e,[2,48]),i($e,[2,49]),i($e,[2,50]),i($e,[2,51]),i($e,[2,52]),i($e,[2,53]),i($e,[2,54]),i($e,[2,55]),i($e,[2,56]),i($e,[2,57]),i($e,[2,58]),i($e,[2,59]),i($e,[2,60]),i($e,[2,61]),i($e,[2,62]),i($e,[2,63]),i($e,[2,64]),i($e,[2,65]),i($e,[2,66]),i($e,[2,67]),{358:[1,111]},{2:p,3:112,4:f,5:v},{2:p,3:114,4:f,5:v,156:Le,200:113,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe},i(Rn,[2,510],{3:123,353:127,2:p,4:f,5:v,134:Or,135:xr,187:[1,125],193:[1,124],273:[1,131],274:[1,132],362:[1,133],410:[1,122],477:[1,126],514:[1,130]}),{145:_l,454:134,455:135},{183:[1,137]},{410:[1,138]},{2:p,3:140,4:f,5:v,130:[1,146],193:[1,141],358:[1,145],402:142,410:[1,139],415:[1,143],514:[1,144]},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:147,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(kn,i1,{345:208,171:[1,209],198:Rl}),i(kn,i1,{345:211,198:Rl}),{2:p,3:223,4:f,5:v,77:$o,132:uo,143:Xe,144:216,145:yt,152:He,156:Le,181:Ge,198:[1,214],199:217,200:219,201:218,202:221,209:213,213:yl,214:222,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,307:Ke,424:193,425:Oe,429:De,458:212},{2:p,3:225,4:f,5:v},{358:[1,226]},i(kl,[2,1053],{80:227,106:228,107:[1,229]}),i(dc,[2,1057],{90:230}),{2:p,3:234,4:f,5:v,190:[1,232],193:[1,235],272:[1,231],358:[1,236],410:[1,233]},{358:[1,237]},{2:p,3:240,4:f,5:v,73:238,75:239},i([311,607,768],_,{12:3,13:4,17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,509:95,184:99,3:100,9:242,2:p,4:f,5:v,14:T,53:P,72:D,89:V,124:ae,146:ie,156:Q,189:$,271:F,272:_e,294:ue,340:ze,343:ve,344:Ie,401:Me,405:Ut,406:jt,409:Zt,411:ei,413:xi,414:Ci,422:Mi,423:We,439:Wi,440:[1,241],441:Li,442:Ht,444:or,445:vr,446:dn,447:qr,448:hr,452:lr,453:pn,456:Rr,457:Sr,510:sr,512:Br,513:nn,522:Fn}),{440:[1,243]},{440:[1,244]},{2:p,3:246,4:f,5:v,410:[1,245]},{2:p,3:248,4:f,5:v,199:247},i(Fi,[2,316]),{113:249,132:Ve,301:nt},{2:p,3:114,4:f,5:v,113:255,131:rt,132:[1,252],143:Xe,144:250,145:Bn,152:He,156:Le,181:Ge,196:254,200:259,201:258,261:256,262:257,269:P1,270:pc,279:251,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,307:Ke,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:262,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i($e,[2,681]),i($e,[2,682]),{2:p,3:171,4:f,5:v,40:264,56:167,77:Fe,79:75,89:V,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:263,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,184:99,189:$,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:271,4:f,5:v,113:268,132:Ve,301:nt,449:266,450:267,451:269,452:fc},{2:p,3:272,4:f,5:v,143:$a,145:Ao,436:273},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:276,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{510:[1,277]},{2:p,3:100,4:f,5:v,509:279,511:278},{2:p,3:114,4:f,5:v,156:Le,200:280,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:281,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Dl,r1,{186:285,164:[1,284],185:[1,282],187:[1,283],195:Ll}),i(Fo,[2,767],{77:[1,287]}),i([2,4,5,10,72,77,78,93,98,107,118,128,131,132,137,143,145,152,154,156,162,164,168,169,179,180,181,183,185,187,195,198,232,244,245,249,251,269,270,271,275,276,278,285,286,287,288,289,290,291,292,294,295,296,297,298,299,300,301,302,303,304,307,308,311,315,317,322,425,429,607,768],[2,152],{149:[1,288],150:[1,289],190:[1,290],191:[1,291],192:[1,292],193:[1,293],194:[1,294]}),i(pe,[2,1]),i(pe,[2,2]),{6:295,131:[1,444],172:[1,467],243:[1,443],244:[1,378],245:[1,412],249:[1,416],375:[1,409],386:[1,300],407:[1,302],415:[1,554],419:[1,476],421:[1,448],422:[1,514],438:[1,447],440:[1,530],445:[1,347],465:[1,423],469:[1,453],475:[1,346],519:[1,312],520:[1,304],521:[1,404],523:[1,296],524:[1,297],525:[1,298],526:[1,299],527:[1,301],528:[1,303],529:[1,305],530:[1,306],531:[1,307],532:[1,308],533:[1,309],534:[1,310],535:[1,311],536:[1,313],537:[1,314],538:[1,315],539:[1,316],540:[1,317],541:[1,318],542:[1,319],543:[1,320],544:[1,321],545:[1,322],546:[1,323],547:[1,324],548:[1,325],549:[1,326],550:[1,327],551:[1,328],552:[1,329],553:[1,330],554:[1,331],555:[1,332],556:[1,333],557:[1,334],558:[1,335],559:[1,336],560:[1,337],561:[1,338],562:[1,339],563:[1,340],564:[1,341],565:[1,342],566:[1,343],567:[1,344],568:[1,345],569:[1,348],570:[1,349],571:[1,350],572:[1,351],573:[1,352],574:[1,353],575:[1,354],576:[1,355],577:[1,356],578:[1,357],579:[1,358],580:[1,359],581:[1,360],582:[1,361],583:[1,362],584:[1,363],585:[1,364],586:[1,365],587:[1,366],588:[1,367],589:[1,368],590:[1,369],591:[1,370],592:[1,371],593:[1,372],594:[1,373],595:[1,374],596:[1,375],597:[1,376],598:[1,377],599:[1,379],600:[1,380],601:[1,381],602:[1,382],603:[1,383],604:[1,384],605:[1,385],606:[1,386],607:[1,387],608:[1,388],609:[1,389],610:[1,390],611:[1,391],612:[1,392],613:[1,393],614:[1,394],615:[1,395],616:[1,396],617:[1,397],618:[1,398],619:[1,399],620:[1,400],621:[1,401],622:[1,402],623:[1,403],624:[1,405],625:[1,406],626:[1,407],627:[1,408],628:[1,410],629:[1,411],630:[1,413],631:[1,414],632:[1,415],633:[1,417],634:[1,418],635:[1,419],636:[1,420],637:[1,421],638:[1,422],639:[1,424],640:[1,425],641:[1,426],642:[1,427],643:[1,428],644:[1,429],645:[1,430],646:[1,431],647:[1,432],648:[1,433],649:[1,434],650:[1,435],651:[1,436],652:[1,437],653:[1,438],654:[1,439],655:[1,440],656:[1,441],657:[1,442],658:[1,445],659:[1,446],660:[1,449],661:[1,450],662:[1,451],663:[1,452],664:[1,454],665:[1,455],666:[1,456],667:[1,457],668:[1,458],669:[1,459],670:[1,460],671:[1,461],672:[1,462],673:[1,463],674:[1,464],675:[1,465],676:[1,466],677:[1,468],678:[1,469],679:[1,470],680:[1,471],681:[1,472],682:[1,473],683:[1,474],684:[1,475],685:[1,477],686:[1,478],687:[1,479],688:[1,480],689:[1,481],690:[1,482],691:[1,483],692:[1,484],693:[1,485],694:[1,486],695:[1,487],696:[1,488],697:[1,489],698:[1,490],699:[1,491],700:[1,492],701:[1,493],702:[1,494],703:[1,495],704:[1,496],705:[1,497],706:[1,498],707:[1,499],708:[1,500],709:[1,501],710:[1,502],711:[1,503],712:[1,504],713:[1,505],714:[1,506],715:[1,507],716:[1,508],717:[1,509],718:[1,510],719:[1,511],720:[1,512],721:[1,513],722:[1,515],723:[1,516],724:[1,517],725:[1,518],726:[1,519],727:[1,520],728:[1,521],729:[1,522],730:[1,523],731:[1,524],732:[1,525],733:[1,526],734:[1,527],735:[1,528],736:[1,529],737:[1,531],738:[1,532],739:[1,533],740:[1,534],741:[1,535],742:[1,536],743:[1,537],744:[1,538],745:[1,539],746:[1,540],747:[1,541],748:[1,542],749:[1,543],750:[1,544],751:[1,545],752:[1,546],753:[1,547],754:[1,548],755:[1,549],756:[1,550],757:[1,551],758:[1,552],759:[1,553],760:[1,555],761:[1,556],762:[1,557],763:[1,558],764:[1,559],765:[1,560],766:[1,561],767:[1,562]},{1:[2,6]},i(ln,_,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,509:95,184:99,3:100,12:563,2:p,4:f,5:v,53:P,72:D,89:V,124:ae,146:ie,156:Q,189:$,271:F,272:_e,294:ue,340:ze,343:ve,344:Ie,401:Me,405:Ut,406:jt,409:Zt,411:ei,413:xi,414:Ci,422:Mi,423:We,439:Wi,441:Li,442:Ht,444:or,445:vr,446:dn,447:qr,448:hr,452:lr,453:pn,456:Rr,457:Sr,510:sr,512:Br,513:nn,522:Fn}),i(mc,[2,1051]),i(mc,[2,1052]),i(ln,[2,10]),{16:[1,564]},{2:p,3:248,4:f,5:v,199:565},{410:[1,566]},i($e,[2,770]),{77:Qa},{77:[1,568]},{77:gc},{77:Ol},{77:[1,571]},{77:[1,572]},{77:[1,573]},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:574,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(kn,R1,{355:575,156:k1}),{410:[1,577]},{2:p,3:578,4:f,5:v},{193:[1,579]},{2:p,3:585,4:f,5:v,132:Bo,137:Co,143:$a,145:Ao,152:ho,183:[1,581],436:592,478:580,479:582,480:583,483:584,487:589,498:586,502:588},{130:[1,596],354:593,358:[1,595],415:[1,594]},{113:598,132:Ve,183:[2,1151],301:nt,476:597},i(D1,[2,1145],{470:599,3:600,2:p,4:f,5:v}),{2:p,3:601,4:f,5:v},{4:[1,602]},{4:[1,603]},i(Rn,[2,511]),i($e,[2,695],{74:[1,604]}),i(va,[2,696]),{2:p,3:605,4:f,5:v},{2:p,3:248,4:f,5:v,199:606},{2:p,3:607,4:f,5:v},i(kn,jr,{403:608,156:eo}),{410:[1,610]},{2:p,3:611,4:f,5:v},i(kn,jr,{403:612,156:eo}),i(kn,jr,{403:613,156:eo}),{2:p,3:614,4:f,5:v},i(Nl,[2,1139]),i(Nl,[2,1140]),i($e,_,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,509:95,184:99,3:100,12:615,114:632,332:644,2:p,4:f,5:v,53:P,72:D,89:V,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:L1,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,146:ie,154:Gi,156:Q,170:tr,171:ir,179:mi,180:oi,189:$,271:F,272:_e,294:ue,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi,340:ze,343:ve,344:Ie,401:Me,405:Ut,406:jt,409:Zt,411:ei,413:xi,414:Ci,422:Mi,423:We,439:Wi,441:Li,442:Ht,444:or,445:vr,446:dn,447:qr,448:hr,452:lr,453:pn,456:Rr,457:Sr,510:sr,512:Br,513:nn,522:Fn}),i(Fi,[2,292]),i(Fi,[2,293]),i(Fi,[2,294]),i(Fi,[2,295]),i(Fi,[2,296]),i(Fi,[2,297]),i(Fi,[2,298]),i(Fi,[2,299]),i(Fi,[2,300]),i(Fi,[2,301]),i(Fi,[2,302]),i(Fi,[2,303]),i(Fi,[2,304]),i(Fi,[2,305]),i(Fi,[2,306]),i(Fi,[2,307]),i(Fi,[2,308]),i(Fi,[2,309]),{2:p,3:171,4:f,5:v,26:661,27:660,36:656,40:655,56:167,77:Fe,79:75,89:V,94:658,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,184:99,189:$,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,268:657,269:Ct,270:Et,271:F,272:[1,662],275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:[1,659],295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,344:Ie,424:193,425:Oe,429:De},i(Fi,[2,313]),i(Fi,[2,314]),i(zl,[2,315],{77:Ol}),{77:[1,663]},i([2,4,5,10,53,72,74,76,78,89,93,95,98,99,107,112,115,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],bl,{77:Qa,116:[1,664]}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:665,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:666,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:667,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:668,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:669,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Fi,[2,287]),i([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,244,245,246,247,249,251,253,269,270,271,272,275,276,278,285,286,287,288,289,290,291,292,294,295,296,297,298,299,300,301,302,303,304,305,307,308,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,348,361,373,374,378,379,401,405,406,409,411,413,414,420,422,423,425,429,431,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768,769,770],[2,365]),i(Wn,[2,366]),i(Wn,[2,367]),i(Wn,Gc),i(Wn,[2,369]),i([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,302,305,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,348,361,373,374,378,379,401,405,406,409,411,413,414,422,423,425,429,431,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],[2,370]),{2:p,3:671,4:f,5:v,131:[1,672],306:670},{2:p,3:673,4:f,5:v},i(Wn,[2,376]),i(Wn,[2,377]),{2:p,3:674,4:f,5:v,77:O1,113:676,131:rt,132:Ve,143:Xe,152:He,181:Ge,196:677,201:679,261:678,299:pt,300:_t,301:nt,307:Ke,424:680,429:De},{77:[1,681]},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:682,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,309:683,312:684,313:N1,317:St,322:Dt,424:193,425:Oe,429:De},{77:[1,686]},{77:[1,687]},i(Ds,[2,633]),{2:p,3:702,4:f,5:v,77:jo,111:697,113:695,131:rt,132:Ve,143:Xe,144:692,145:Bn,152:He,156:Le,181:Ge,196:694,200:700,201:699,261:696,262:698,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,305:[1,690],307:Ke,424:193,425:Oe,426:688,427:691,428:693,429:De,432:689},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:703,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:704,4:f,5:v,156:Le,200:705,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe},{77:[2,342]},{77:[2,343]},{77:[2,344]},{77:[2,345]},{77:[2,346]},{77:[2,347]},{77:[2,348]},{77:[2,349]},{77:[2,350]},{77:[2,351]},{2:p,3:711,4:f,5:v,131:n1,132:z1,430:706,431:[1,707],433:708},{2:p,3:248,4:f,5:v,199:712},{294:[1,713]},i(kn,[2,481]),{2:p,3:248,4:f,5:v,199:714},{231:[1,716],459:715},{231:[2,704]},{2:p,3:223,4:f,5:v,77:$o,132:uo,143:Xe,144:216,145:yt,152:He,156:Le,181:Ge,199:217,200:219,201:218,202:221,209:717,213:yl,214:222,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,307:Ke,424:193,425:Oe,429:De},{40:718,79:75,89:V,184:99,189:$},i(s1,[2,1101],{210:719,76:[1,720]}),i(Cn,[2,185],{3:721,2:p,4:f,5:v,76:[1,722],154:[1,723]}),i(Cn,[2,189],{3:724,2:p,4:f,5:v,76:[1,725]}),i(Cn,[2,190],{3:726,2:p,4:f,5:v,76:[1,727]}),i(Cn,[2,193]),i(Cn,[2,194],{3:728,2:p,4:f,5:v,76:[1,729]}),i(Cn,[2,197],{3:730,2:p,4:f,5:v,76:[1,731]}),i([2,4,5,10,72,74,76,78,93,98,118,128,154,162,168,169,183,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,311,315,607,768],$l,{77:Qa,116:Fl}),i([2,4,5,10,72,74,76,78,93,98,118,128,162,168,169,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,311,315,607,768],[2,200]),i($e,[2,783]),{2:p,3:248,4:f,5:v,199:733},i(Io,$1,{81:734,198:Bl}),i(kl,[2,1054]),i(a1,[2,1067],{108:736,190:[1,737]}),i([10,78,183,311,315,607,768],$1,{424:193,81:738,117:739,3:740,114:743,144:765,158:775,160:776,2:p,4:f,5:v,72:Ks,76:ws,77:Ls,112:Qs,115:Xt,116:Wt,118:ea,122:Es,123:Ts,124:ta,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,198:Bl,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,425:Oe,429:De}),{358:[1,789]},{183:[1,790]},i($e,[2,603],{112:[1,791]}),{410:[1,792]},{183:[1,793]},i($e,[2,607],{112:[1,794],183:[1,795]}),{2:p,3:248,4:f,5:v,199:796},{40:797,74:[1,798],79:75,89:V,184:99,189:$},i(o1,[2,70]),{76:[1,799]},i($e,[2,676]),{11:106,311:[1,800],607:ds,768:es},i($e,[2,674]),i($e,[2,675]),{2:p,3:801,4:f,5:v},i($e,[2,596]),{146:[1,802]},i([2,4,5,10,53,72,74,76,77,78,89,95,124,128,143,145,146,148,149,152,154,156,181,183,187,189,230,271,272,294,302,307,311,315,340,343,344,348,349,361,373,374,378,379,401,405,406,407,408,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,510,512,513,519,520,521,522,607,768],$l,{116:Fl}),i($e,[2,624]),i($e,[2,625]),i($e,[2,626]),i($e,Gc,{74:[1,803]}),{77:O1,113:676,131:rt,132:Ve,143:Xe,152:He,181:Ge,196:677,201:679,261:678,299:pt,300:_t,301:nt,307:Ke,424:680,429:De},i(Gr,[2,325]),i(Gr,[2,326]),i(Gr,[2,327]),i(Gr,[2,328]),i(Gr,[2,329]),i(Gr,[2,330]),i(Gr,[2,331]),i(Gr,[2,332],{77:Ol}),i($e,_,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,509:95,184:99,3:100,114:632,332:644,12:804,2:p,4:f,5:v,53:P,72:D,89:V,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:L1,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,146:ie,154:Gi,156:Q,170:tr,171:ir,179:mi,180:oi,189:$,271:F,272:_e,294:ue,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi,340:ze,343:ve,344:Ie,401:Me,405:Ut,406:jt,409:Zt,411:ei,413:xi,414:Ci,422:Mi,423:We,439:Wi,441:Li,442:Ht,444:or,445:vr,446:dn,447:qr,448:hr,452:lr,453:pn,456:Rr,457:Sr,510:sr,512:Br,513:nn,522:Fn}),i($e,[2,684],{74:Ln}),i($e,[2,685]),i(zi,[2,363],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),i($e,[2,686],{74:[1,807]}),i($e,[2,687],{74:[1,808]}),i(va,[2,692]),i(va,[2,694]),i(va,[2,688]),i(va,[2,689]),{114:814,115:Xt,116:Wt,124:[1,809],230:l1,434:810,435:811,438:_c},{2:p,3:815,4:f,5:v},i(kn,[2,665]),i(kn,[2,666]),i($e,[2,623],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{2:p,3:100,4:f,5:v,509:279,511:816},i($e,[2,764],{74:Ko}),i(Xr,[2,766]),i($e,[2,769]),i($e,[2,690],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),i(Vo,r1,{186:818,195:Ll}),i(Vo,r1,{186:819,195:Ll}),i(Vo,r1,{186:820,195:Ll}),i(Cr,[2,1097],{259:148,200:149,260:150,111:151,258:152,196:153,261:154,113:155,262:156,201:157,202:158,263:159,264:160,265:161,144:163,266:164,267:165,56:167,158:170,3:171,424:193,188:821,174:822,257:823,94:824,2:p,4:f,5:v,77:Fe,131:rt,132:Ve,137:Lt,143:Xe,145:yt,149:Tt,152:He,154:Ot,156:Le,179:Mt,180:At,181:Ge,244:Ye,245:ot,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,425:Oe,429:De}),{77:[1,826],131:rt,196:825},{2:p,3:100,4:f,5:v,509:279,511:827},i(Mo,[2,153]),i(Mo,[2,154]),i(Mo,[2,155]),i(Mo,[2,156]),i(Mo,[2,157]),i(Mo,[2,158]),i(Mo,[2,159]),i(pe,[2,3]),i(pe,[2,784]),i(pe,[2,785]),i(pe,[2,786]),i(pe,[2,787]),i(pe,[2,788]),i(pe,[2,789]),i(pe,[2,790]),i(pe,[2,791]),i(pe,[2,792]),i(pe,[2,793]),i(pe,[2,794]),i(pe,[2,795]),i(pe,[2,796]),i(pe,[2,797]),i(pe,[2,798]),i(pe,[2,799]),i(pe,[2,800]),i(pe,[2,801]),i(pe,[2,802]),i(pe,[2,803]),i(pe,[2,804]),i(pe,[2,805]),i(pe,[2,806]),i(pe,[2,807]),i(pe,[2,808]),i(pe,[2,809]),i(pe,[2,810]),i(pe,[2,811]),i(pe,[2,812]),i(pe,[2,813]),i(pe,[2,814]),i(pe,[2,815]),i(pe,[2,816]),i(pe,[2,817]),i(pe,[2,818]),i(pe,[2,819]),i(pe,[2,820]),i(pe,[2,821]),i(pe,[2,822]),i(pe,[2,823]),i(pe,[2,824]),i(pe,[2,825]),i(pe,[2,826]),i(pe,[2,827]),i(pe,[2,828]),i(pe,[2,829]),i(pe,[2,830]),i(pe,[2,831]),i(pe,[2,832]),i(pe,[2,833]),i(pe,[2,834]),i(pe,[2,835]),i(pe,[2,836]),i(pe,[2,837]),i(pe,[2,838]),i(pe,[2,839]),i(pe,[2,840]),i(pe,[2,841]),i(pe,[2,842]),i(pe,[2,843]),i(pe,[2,844]),i(pe,[2,845]),i(pe,[2,846]),i(pe,[2,847]),i(pe,[2,848]),i(pe,[2,849]),i(pe,[2,850]),i(pe,[2,851]),i(pe,[2,852]),i(pe,[2,853]),i(pe,[2,854]),i(pe,[2,855]),i(pe,[2,856]),i(pe,[2,857]),i(pe,[2,858]),i(pe,[2,859]),i(pe,[2,860]),i(pe,[2,861]),i(pe,[2,862]),i(pe,[2,863]),i(pe,[2,864]),i(pe,[2,865]),i(pe,[2,866]),i(pe,[2,867]),i(pe,[2,868]),i(pe,[2,869]),i(pe,[2,870]),i(pe,[2,871]),i(pe,[2,872]),i(pe,[2,873]),i(pe,[2,874]),i(pe,[2,875]),i(pe,[2,876]),i(pe,[2,877]),i(pe,[2,878]),i(pe,[2,879]),i(pe,[2,880]),i(pe,[2,881]),i(pe,[2,882]),i(pe,[2,883]),i(pe,[2,884]),i(pe,[2,885]),i(pe,[2,886]),i(pe,[2,887]),i(pe,[2,888]),i(pe,[2,889]),i(pe,[2,890]),i(pe,[2,891]),i(pe,[2,892]),i(pe,[2,893]),i(pe,[2,894]),i(pe,[2,895]),i(pe,[2,896]),i(pe,[2,897]),i(pe,[2,898]),i(pe,[2,899]),i(pe,[2,900]),i(pe,[2,901]),i(pe,[2,902]),i(pe,[2,903]),i(pe,[2,904]),i(pe,[2,905]),i(pe,[2,906]),i(pe,[2,907]),i(pe,[2,908]),i(pe,[2,909]),i(pe,[2,910]),i(pe,[2,911]),i(pe,[2,912]),i(pe,[2,913]),i(pe,[2,914]),i(pe,[2,915]),i(pe,[2,916]),i(pe,[2,917]),i(pe,[2,918]),i(pe,[2,919]),i(pe,[2,920]),i(pe,[2,921]),i(pe,[2,922]),i(pe,[2,923]),i(pe,[2,924]),i(pe,[2,925]),i(pe,[2,926]),i(pe,[2,927]),i(pe,[2,928]),i(pe,[2,929]),i(pe,[2,930]),i(pe,[2,931]),i(pe,[2,932]),i(pe,[2,933]),i(pe,[2,934]),i(pe,[2,935]),i(pe,[2,936]),i(pe,[2,937]),i(pe,[2,938]),i(pe,[2,939]),i(pe,[2,940]),i(pe,[2,941]),i(pe,[2,942]),i(pe,[2,943]),i(pe,[2,944]),i(pe,[2,945]),i(pe,[2,946]),i(pe,[2,947]),i(pe,[2,948]),i(pe,[2,949]),i(pe,[2,950]),i(pe,[2,951]),i(pe,[2,952]),i(pe,[2,953]),i(pe,[2,954]),i(pe,[2,955]),i(pe,[2,956]),i(pe,[2,957]),i(pe,[2,958]),i(pe,[2,959]),i(pe,[2,960]),i(pe,[2,961]),i(pe,[2,962]),i(pe,[2,963]),i(pe,[2,964]),i(pe,[2,965]),i(pe,[2,966]),i(pe,[2,967]),i(pe,[2,968]),i(pe,[2,969]),i(pe,[2,970]),i(pe,[2,971]),i(pe,[2,972]),i(pe,[2,973]),i(pe,[2,974]),i(pe,[2,975]),i(pe,[2,976]),i(pe,[2,977]),i(pe,[2,978]),i(pe,[2,979]),i(pe,[2,980]),i(pe,[2,981]),i(pe,[2,982]),i(pe,[2,983]),i(pe,[2,984]),i(pe,[2,985]),i(pe,[2,986]),i(pe,[2,987]),i(pe,[2,988]),i(pe,[2,989]),i(pe,[2,990]),i(pe,[2,991]),i(pe,[2,992]),i(pe,[2,993]),i(pe,[2,994]),i(pe,[2,995]),i(pe,[2,996]),i(pe,[2,997]),i(pe,[2,998]),i(pe,[2,999]),i(pe,[2,1e3]),i(pe,[2,1001]),i(pe,[2,1002]),i(pe,[2,1003]),i(pe,[2,1004]),i(pe,[2,1005]),i(pe,[2,1006]),i(pe,[2,1007]),i(pe,[2,1008]),i(pe,[2,1009]),i(pe,[2,1010]),i(pe,[2,1011]),i(pe,[2,1012]),i(pe,[2,1013]),i(pe,[2,1014]),i(pe,[2,1015]),i(pe,[2,1016]),i(pe,[2,1017]),i(pe,[2,1018]),i(pe,[2,1019]),i(pe,[2,1020]),i(pe,[2,1021]),i(pe,[2,1022]),i(pe,[2,1023]),i(pe,[2,1024]),i(pe,[2,1025]),i(pe,[2,1026]),i(pe,[2,1027]),i(pe,[2,1028]),i(pe,[2,1029]),i(pe,[2,1030]),i(pe,[2,1031]),i(pe,[2,1032]),i(pe,[2,1033]),i(pe,[2,1034]),i(pe,[2,1035]),i(pe,[2,1036]),i(pe,[2,1037]),i(pe,[2,1038]),i(pe,[2,1039]),i(pe,[2,1040]),i(pe,[2,1041]),i(pe,[2,1042]),i(pe,[2,1043]),i(pe,[2,1044]),i(pe,[2,1045]),i(pe,[2,1046]),i(pe,[2,1047]),i(pe,[2,1048]),i(pe,[2,1049]),i(pe,[2,1050]),i(ln,[2,7]),i(ln,_,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,509:95,184:99,3:100,12:828,2:p,4:f,5:v,53:P,72:D,89:V,124:ae,146:ie,156:Q,189:$,271:F,272:_e,294:ue,340:ze,343:ve,344:Ie,401:Me,405:Ut,406:jt,409:Zt,411:ei,413:xi,414:Ci,422:Mi,423:We,439:Wi,441:Li,442:Ht,444:or,445:vr,446:dn,447:qr,448:hr,452:lr,453:pn,456:Rr,457:Sr,510:sr,512:Br,513:nn,522:Fn}),{401:[1,832],406:[1,829],407:[1,830],408:[1,831]},{2:p,3:833,4:f,5:v},i(Vo,[2,1121],{293:834,771:836,78:[1,835],164:[1,838],185:[1,837]}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:839,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:840,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{78:[1,841]},{2:p,3:842,4:f,5:v,132:[1,843]},{2:p,3:844,4:f,5:v,132:[1,845]},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:846,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:847,4:f,5:v,99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{2:p,3:848,4:f,5:v},{154:[1,849]},i(F1,R1,{355:850,156:k1}),{230:[1,851]},{2:p,3:852,4:f,5:v},i($e,[2,739],{74:B1}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:854,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Xr,[2,742]),i(yc,[2,1153],{424:193,481:855,144:856,139:j1,141:j1,145:Bn,425:Oe,429:De}),{139:[1,857],141:[1,858]},i(jl,c1,{495:860,498:861,77:[1,859],137:Co}),i(Qo,[2,1177],{499:862,132:[1,863]}),i(po,[2,1181],{501:864,502:865,152:ho}),i(po,[2,757]),i(u1,[2,749]),{2:p,3:866,4:f,5:v,131:[1,867]},{2:p,3:868,4:f,5:v},{2:p,3:869,4:f,5:v},i(kn,R1,{355:870,156:k1}),i(kn,R1,{355:871,156:k1}),i(Nl,[2,500]),i(Nl,[2,501]),{183:[1,872]},{183:[2,1152]},i(bc,[2,1147],{471:873,474:874,137:[1,875]}),i(D1,[2,1146]),i(Vl,Po,{515:876,95:yn,230:[1,877],519:Ul,520:V1,521:vc}),{76:[1,882]},{76:[1,883]},{145:_l,455:884},{4:vl,7:888,76:[1,886],277:885,392:887,394:xl},i($e,[2,465],{128:[1,891]}),i($e,[2,588]),{2:p,3:892,4:f,5:v},{303:[1,893]},i(F1,jr,{403:894,156:eo}),i($e,[2,602]),{2:p,3:248,4:f,5:v,199:896,404:895},{2:p,3:248,4:f,5:v,199:896,404:897},i($e,[2,782]),i(ln,[2,678],{443:898,315:[1,899]}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:900,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:901,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:902,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:903,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:904,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:905,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:906,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:907,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:908,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:909,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:910,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:911,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:912,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:913,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:914,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:915,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:916,4:f,5:v,77:[1,918],131:rt,156:Le,196:917,200:919,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe},{2:p,3:920,4:f,5:v,77:[1,922],131:rt,156:Le,196:921,200:923,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe},i(wl,[2,449],{259:148,200:149,260:150,111:151,258:152,196:153,261:154,113:155,262:156,201:157,202:158,263:159,264:160,265:161,144:163,266:164,267:165,56:167,158:170,3:171,424:193,94:924,2:p,4:f,5:v,77:Fe,131:rt,132:Ve,137:Lt,143:Xe,145:yt,149:Tt,152:He,154:Ot,156:Le,179:Mt,180:At,181:Ge,244:Ye,245:ot,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,425:Oe,429:De}),i(wl,[2,450],{259:148,200:149,260:150,111:151,258:152,196:153,261:154,113:155,262:156,201:157,202:158,263:159,264:160,265:161,144:163,266:164,267:165,56:167,158:170,3:171,424:193,94:925,2:p,4:f,5:v,77:Fe,131:rt,132:Ve,137:Lt,143:Xe,145:yt,149:Tt,152:He,154:Ot,156:Le,179:Mt,180:At,181:Ge,244:Ye,245:ot,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,425:Oe,429:De}),i(wl,[2,451],{259:148,200:149,260:150,111:151,258:152,196:153,261:154,113:155,262:156,201:157,202:158,263:159,264:160,265:161,144:163,266:164,267:165,56:167,158:170,3:171,424:193,94:926,2:p,4:f,5:v,77:Fe,131:rt,132:Ve,137:Lt,143:Xe,145:yt,149:Tt,152:He,154:Ot,156:Le,179:Mt,180:At,181:Ge,244:Ye,245:ot,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,425:Oe,429:De}),i(wl,[2,452],{259:148,200:149,260:150,111:151,258:152,196:153,261:154,113:155,262:156,201:157,202:158,263:159,264:160,265:161,144:163,266:164,267:165,56:167,158:170,3:171,424:193,94:927,2:p,4:f,5:v,77:Fe,131:rt,132:Ve,137:Lt,143:Xe,145:yt,149:Tt,152:He,154:Ot,156:Le,179:Mt,180:At,181:Ge,244:Ye,245:ot,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,425:Oe,429:De}),i(wl,ca,{259:148,200:149,260:150,111:151,258:152,196:153,261:154,113:155,262:156,201:157,202:158,263:159,264:160,265:161,144:163,266:164,267:165,56:167,158:170,3:171,424:193,94:928,2:p,4:f,5:v,77:Fe,131:rt,132:Ve,137:Lt,143:Xe,145:yt,149:Tt,152:He,154:Ot,156:Le,179:Mt,180:At,181:Ge,244:Ye,245:ot,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,425:Oe,429:De}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:929,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:930,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(wl,[2,454],{259:148,200:149,260:150,111:151,258:152,196:153,261:154,113:155,262:156,201:157,202:158,263:159,264:160,265:161,144:163,266:164,267:165,56:167,158:170,3:171,424:193,94:931,2:p,4:f,5:v,77:Fe,131:rt,132:Ve,137:Lt,143:Xe,145:yt,149:Tt,152:He,154:Ot,156:Le,179:Mt,180:At,181:Ge,244:Ye,245:ot,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,425:Oe,429:De}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:932,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:933,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{164:[1,935],166:[1,937],333:934,339:[1,936]},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:938,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:939,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:702,4:f,5:v,77:[1,940],111:943,145:h1,156:Le,200:944,202:942,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,334:941},{99:[1,946],302:[1,947]},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:948,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:949,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:950,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{4:vl,7:888,277:951,392:887,394:xl},i(nr,[2,88]),i(nr,[2,89]),{78:[1,952]},{78:[1,953]},{78:[1,954]},{78:[1,955],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},i(kn,i1,{345:211,77:gc,198:Rl}),{78:[2,1117]},{78:[2,1118]},{134:Or,135:xr},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:956,152:He,154:Ot,156:Le,158:170,164:[1,958],179:Mt,180:At,181:Ge,185:[1,957],196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:959,4:f,5:v,149:pr,180:[1,961]},i([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,118,122,128,129,130,131,132,134,135,137,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,319,335,336,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],[2,425],{114:632,332:644,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,337:Pi}),i(el,[2,426],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,180:oi,317:ri,321:si}),i(el,[2,427],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,180:oi,317:ri,321:si}),i(d1,[2,428],{114:632,332:644,321:si}),i(d1,[2,429],{114:632,332:644,321:si}),i(Wn,[2,374]),i(Wn,[2,1123]),i(Wn,[2,1124]),i(Wn,[2,375]),i([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,231,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],[2,371]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:962,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Ds,[2,629]),i(Ds,[2,630]),i(Ds,[2,631]),i(Ds,[2,632]),i(Ds,[2,634]),{40:963,79:75,89:V,184:99,189:$},{99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,309:964,312:684,313:N1,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{310:965,311:U1,312:966,313:N1,315:Xn},i(p1,[2,381]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:968,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:969,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{4:vl,7:888,277:970,392:887,394:xl},i(Ds,[2,635]),{74:[1,972],305:[1,971]},i(Ds,[2,651]),i(Fa,[2,658]),i(fo,[2,636]),i(fo,[2,637]),i(fo,[2,638]),i(fo,[2,639]),i(fo,[2,640]),i(fo,[2,641]),i(fo,[2,642]),i(fo,[2,643]),i(fo,[2,644]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:973,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i([2,4,5,10,53,72,74,76,78,89,93,95,98,99,107,112,115,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,431,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],bl,{77:Qa,116:tl}),{74:Ln,305:[1,975]},i(zl,[2,319],{77:Qa}),i(Fi,[2,320]),{74:[1,977],431:[1,976]},i(Ds,[2,648]),i(bn,[2,653]),{152:[1,978]},{152:[1,979]},{152:[1,980]},{40:985,77:[1,984],79:75,89:V,143:Xe,144:988,145:Bn,149:fn,152:He,181:Ge,184:99,189:$,201:989,307:Ke,346:981,347:982,348:[1,983],349:Ro,424:193,425:Oe,429:De},i(kn,i1,{345:990,198:Rl}),{77:Ba,143:Xe,144:988,145:Bn,149:fn,152:He,181:Ge,201:989,307:Ke,346:991,347:992,349:Ro,424:193,425:Oe,429:De},{230:[1,995],460:994},{2:p,3:223,4:f,5:v,77:[1,997],132:uo,143:Xe,144:216,145:yt,152:He,156:Le,181:Ge,199:217,200:219,201:218,202:221,209:996,213:yl,214:222,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,307:Ke,424:193,425:Oe,429:De},{231:[2,705]},{78:[1,998]},i(Cn,[2,1103],{211:999,3:1e3,2:p,4:f,5:v}),i(s1,[2,1102]),i(Cn,[2,183]),{2:p,3:1001,4:f,5:v},{212:[1,1002]},i(Cn,[2,187]),{2:p,3:1003,4:f,5:v},i(Cn,[2,191]),{2:p,3:1004,4:f,5:v},i(Cn,[2,195]),{2:p,3:1005,4:f,5:v},i(Cn,[2,198]),{2:p,3:1006,4:f,5:v},{2:p,3:1007,4:f,5:v},{148:[1,1008]},i(il,[2,172],{82:1009,183:[1,1010]}),{2:p,3:223,4:f,5:v,132:[1,1015],143:Xe,145:[1,1016],152:He,156:Le,181:Ge,199:1011,200:1012,201:1013,202:1014,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,307:Ke},{2:p,3:1021,4:f,5:v,109:1017,110:1018,111:1019,112:rl},i(a1,[2,1068]),i(ua,[2,1059],{91:1022,182:1023,183:[1,1024]}),i(dc,[2,1058],{153:1025,179:Vs,180:ls,181:Us}),i([2,4,5,10,72,74,76,78,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,198,244,245,285,286,287,288,289,290,291,292,311,315,425,429,607,768],[2,90],{77:[1,1029]}),{119:[1,1030]},i(h,[2,93]),{2:p,3:1031,4:f,5:v},i(h,[2,95]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1032,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1033,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:740,4:f,5:v,72:Ks,76:ws,77:Ls,112:Qs,114:743,115:Xt,116:Wt,117:1035,118:ea,122:Es,123:Ts,124:ta,125:1034,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,144:765,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,158:775,160:776,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,424:193,425:Oe,429:De},{77:[1,1036]},{77:[1,1037]},{77:[1,1038]},{77:[1,1039]},i(h,[2,104]),i(h,[2,105]),i(h,[2,106]),i(h,[2,107]),i(h,[2,108]),i(h,[2,109]),{2:p,3:1040,4:f,5:v},{2:p,3:1041,4:f,5:v,133:[1,1042]},i(h,[2,113]),i(h,[2,114]),i(h,[2,115]),i(h,[2,116]),i(h,[2,117]),i(h,[2,118]),{2:p,3:1043,4:f,5:v,77:O1,113:676,131:rt,132:Ve,143:Xe,152:He,181:Ge,196:677,201:679,261:678,299:pt,300:_t,301:nt,307:Ke,424:680,429:De},{145:[1,1044]},{77:[1,1045]},{145:[1,1046]},i(h,[2,123]),{77:[1,1047]},{2:p,3:1048,4:f,5:v},{77:[1,1049]},{77:[1,1050]},{77:[1,1051]},{77:[1,1052]},{77:[1,1053],164:[1,1054]},{77:[1,1055]},{77:[1,1056]},{77:[1,1057]},{77:[1,1058]},{77:[1,1059]},{77:[1,1060]},{77:[1,1061]},{77:[1,1062]},{77:[1,1063]},{77:[2,1083]},{77:[2,1084]},{2:p,3:248,4:f,5:v,199:1064},{2:p,3:248,4:f,5:v,199:1065},{113:1066,132:Ve,301:nt},i($e,[2,605],{112:[1,1067]}),{2:p,3:248,4:f,5:v,199:1068},{113:1069,132:Ve,301:nt},{2:p,3:1070,4:f,5:v},i($e,[2,702]),i($e,[2,68]),{2:p,3:240,4:f,5:v,75:1071},{77:[1,1072]},i($e,[2,683]),i($e,[2,595]),{2:p,3:1021,4:f,5:v,111:1075,143:e,145:r,147:1073,341:1074,342:1076},{144:1079,145:Bn,424:193,425:Oe,429:De},i($e,[2,680]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1080,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(wl,ca,{259:148,200:149,260:150,111:151,258:152,196:153,261:154,113:155,262:156,201:157,202:158,263:159,264:160,265:161,144:163,266:164,267:165,56:167,158:170,3:171,424:193,94:1081,2:p,4:f,5:v,77:Fe,131:rt,132:Ve,137:Lt,143:Xe,145:yt,149:Tt,152:He,154:Ot,156:Le,179:Mt,180:At,181:Ge,244:Ye,245:ot,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,425:Oe,429:De}),{113:1082,132:Ve,301:nt},{2:p,3:271,4:f,5:v,451:1083,452:fc},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1085,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,230:l1,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De,434:1084,438:_c},i($e,[2,660]),{114:1087,115:Xt,116:Wt,124:[1,1086]},i($e,[2,672]),i($e,[2,673]),{2:p,3:1089,4:f,5:v,77:o,131:l,437:1088},{114:814,115:Xt,116:Wt,124:[1,1092],435:1093},i($e,[2,763],{74:Ko}),{2:p,3:100,4:f,5:v,509:1094},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:824,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,174:1095,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,257:823,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:824,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,174:1096,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,257:823,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:824,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,174:1097,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,257:823,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Cr,[2,151]),i(Cr,[2,1098],{74:d}),i(b,[2,277]),i(b,[2,284],{114:632,332:644,3:1100,113:1102,2:p,4:f,5:v,76:[1,1099],99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,131:[1,1101],132:Ve,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,301:nt,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),i(Dl,[2,1099],{197:1103,769:[1,1104]}),{131:rt,196:1105},{74:Ko,78:[1,1106]},i(ln,[2,11]),{148:[1,1107],190:[1,1108]},{190:[1,1109]},{190:[1,1110]},{190:[1,1111]},i($e,[2,584],{76:[1,1113],77:[1,1112]}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:1114,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Wn,[2,353]),i(Vo,[2,1122]),i(Vo,[2,1119]),i(Vo,[2,1120]),{74:Ln,78:[1,1115]},{74:Ln,78:[1,1116]},i(Wn,[2,356]),{74:[1,1117]},{74:[1,1118]},{74:[1,1119]},{74:[1,1120]},{74:[1,1121],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},i(Wn,[2,362]),i($e,[2,589]),{303:[1,1122]},{2:p,3:1123,4:f,5:v,113:1124,132:Ve,301:nt},{2:p,3:248,4:f,5:v,199:1125},{230:[1,1126]},{2:p,3:585,4:f,5:v,132:Bo,137:Co,143:$a,145:Ao,152:ho,436:592,479:1127,480:583,483:584,487:589,498:586,502:588},i($e,[2,740],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),i(Xr,[2,1155],{482:1128,488:1129,76:E}),i(yc,[2,1154]),{2:p,3:1133,4:f,5:v,132:Bo,137:Co,144:1132,145:Bn,152:ho,424:193,425:Oe,429:De,480:1131,498:586,502:588},{2:p,3:1133,4:f,5:v,132:Bo,137:Co,143:$a,145:Ao,152:ho,436:592,480:1135,483:1134,487:589,498:586,502:588},{2:p,3:585,4:f,5:v,132:Bo,137:Co,143:$a,145:Ao,152:ho,436:592,478:1136,479:582,480:583,483:584,487:589,498:586,502:588},i(Qo,[2,1173],{496:1137,132:[1,1138]}),i(jl,[2,1172]),i(po,[2,1179],{500:1139,502:1140,152:ho}),i(Qo,[2,1178]),i(po,[2,756]),i(po,[2,1182]),i(jl,[2,759]),i(jl,[2,760]),i(po,[2,758]),i(u1,[2,750]),{2:p,3:248,4:f,5:v,199:1141},{2:p,3:248,4:f,5:v,199:1142},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1143,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(C,[2,1149],{472:1144,113:1145,132:Ve,301:nt}),i(bc,[2,1148]),{2:p,3:1146,4:f,5:v},{340:k,343:O,344:j,516:1147},{2:p,3:248,4:f,5:v,199:1151},i(Vl,[2,775]),i(Vl,[2,776]),i(Vl,[2,777]),{129:[1,1152]},{271:[1,1153]},{271:[1,1154]},i(va,[2,697]),i(va,[2,698],{124:[1,1155]}),{4:vl,7:888,277:1156,392:887,394:xl},i([2,4,10,53,72,74,76,77,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,302,305,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,348,361,373,374,378,379,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],[2,551],{5:[1,1157]}),i([2,5,10,53,72,74,76,78,89,93,95,98,99,107,112,115,116,118,122,123,124,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,230,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,302,305,311,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,348,361,373,374,378,379,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],[2,548],{4:[1,1159],77:[1,1158]}),{77:[1,1160]},i(B,[2,4]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1161,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i($e,[2,597]),i(F1,[2,577]),{2:p,3:1162,4:f,5:v,113:1163,132:Ve,301:nt},i($e,[2,573],{74:H}),i(va,[2,575]),i($e,[2,622],{74:H}),i($e,[2,677]),i($e,_,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,509:95,184:99,3:100,12:1165,2:p,4:f,5:v,53:P,72:D,89:V,124:ae,146:ie,156:Q,189:$,271:F,272:_e,294:ue,340:ze,343:ve,344:Ie,401:Me,405:Ut,406:jt,409:Zt,411:ei,413:xi,414:Ci,422:Mi,423:We,439:Wi,441:Li,442:Ht,444:or,445:vr,446:dn,447:qr,448:hr,452:lr,453:pn,456:Rr,457:Sr,510:sr,512:Br,513:nn,522:Fn}),i(X,[2,385],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,317:ri,321:si,322:gi,323:_i,324:wi}),i(d1,[2,386],{114:632,332:644,321:si}),i(X,[2,387],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,317:ri,321:si,322:gi,323:_i,324:wi}),i(le,[2,388],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,317:ri,319:[1,1166],321:si,322:gi,323:_i,324:wi}),i(le,[2,390],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,317:ri,319:[1,1167],321:si,322:gi,323:_i,324:wi}),i(Fi,[2,392],{114:632,332:644}),i(el,[2,393],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,180:oi,317:ri,321:si}),i(el,[2,394],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,180:oi,317:ri,321:si}),i(oe,[2,395],{114:632,332:644,115:Xt,116:Wt,123:ii,136:ui,317:ri,321:si}),i(oe,[2,396],{114:632,332:644,115:Xt,116:Wt,123:ii,136:ui,317:ri,321:si}),i(oe,[2,397],{114:632,332:644,115:Xt,116:Wt,123:ii,136:ui,317:ri,321:si}),i([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,112,118,122,123,124,128,129,130,131,132,133,134,135,137,138,139,140,141,142,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,179,180,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,316,318,319,320,322,323,324,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],[2,398],{114:632,332:644,115:Xt,116:Wt,136:ui,317:ri,321:si}),i(ce,[2,399],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,179:mi,180:oi,317:ri,321:si,322:gi}),i(ce,[2,400],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,179:mi,180:oi,317:ri,321:si,322:gi}),i(ce,[2,401],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,179:mi,180:oi,317:ri,321:si,322:gi}),i(ce,[2,402],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,179:mi,180:oi,317:ri,321:si,322:gi}),i(zl,[2,403],{77:Qa}),i(Fi,[2,404]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1168,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Fi,[2,406]),i(zl,[2,407],{77:Qa}),i(Fi,[2,408]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1169,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Fi,[2,410]),i(fe,[2,411],{114:632,332:644,112:Ri,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,337:Pi}),i(fe,[2,412],{114:632,332:644,112:Ri,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,337:Pi}),i(fe,[2,413],{114:632,332:644,112:Ri,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,337:Pi}),i(fe,[2,414],{114:632,332:644,112:Ri,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,337:Pi}),i([2,4,5,10,53,72,89,99,124,139,140,146,154,156,170,171,189,271,272,294,311,315,325,326,327,328,329,330,331,335,336,338,340,343,344,401,405,406,409,411,413,414,422,423,439,441,442,444,445,446,447,448,452,453,456,457,510,512,513,522,607,768],xe,{114:632,332:644,112:Ri,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,337:Pi}),i(fe,[2,416],{114:632,332:644,112:Ri,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,337:Pi}),i(fe,[2,417],{114:632,332:644,112:Ri,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,337:Pi}),i(fe,[2,418],{114:632,332:644,112:Ri,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,337:Pi}),i(fe,[2,419],{114:632,332:644,112:Ri,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,337:Pi}),i(fe,[2,420],{114:632,332:644,112:Ri,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,337:Pi}),{77:[1,1170]},{77:[2,455]},{77:[2,456]},{77:[2,457]},i(be,[2,423],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,337:Pi}),i([2,4,5,10,53,72,74,76,77,78,89,93,95,98,107,118,122,128,129,130,131,132,134,135,137,143,145,146,148,149,150,152,156,162,164,166,168,169,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,319,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],[2,424],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi}),{2:p,3:171,4:f,5:v,40:1171,56:167,77:Fe,78:[1,1173],79:75,89:V,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:1172,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,184:99,189:$,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Fi,[2,437]),i(Fi,[2,439]),i(Fi,[2,446]),i(Fi,[2,447]),{2:p,3:674,4:f,5:v,77:[1,1174]},{2:p,3:702,4:f,5:v,77:[1,1175],111:943,145:h1,156:Le,200:944,202:1177,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,334:1176},i(Fi,[2,444]),i(be,[2,441],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,337:Pi}),i(be,[2,442],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,337:Pi}),i([2,4,5,10,53,72,74,76,77,78,89,93,95,98,99,107,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,189,198,206,208,222,223,224,225,226,227,228,229,232,239,244,245,246,247,249,251,271,272,285,286,287,288,289,290,291,292,294,301,305,311,313,314,315,319,325,326,327,328,329,330,331,335,336,337,338,340,343,344,401,405,406,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,469,475,510,512,513,522,607,768],[2,443],{114:632,332:644,112:Ri,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi}),i(Fi,[2,445]),i(Fi,[2,310]),i(Fi,[2,311]),i(Fi,[2,312]),i(Fi,[2,430]),{74:Ln,78:[1,1178]},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1179,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1180,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Fi,Ee),i(Ce,[2,290]),i(Fi,[2,286]),{78:[1,1182],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{78:[1,1183]},{310:1184,311:U1,312:966,313:N1,315:Xn},{311:[1,1185]},i(p1,[2,380]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1186,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,314:[1,1187],316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{76:[1,1188],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{74:[1,1189]},i(Ds,[2,649]),{2:p,3:702,4:f,5:v,77:jo,111:697,113:695,131:rt,132:Ve,143:Xe,144:692,145:Bn,152:He,156:Le,181:Ge,196:694,200:700,201:699,261:696,262:698,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,305:[1,1190],307:Ke,424:193,425:Oe,427:1191,428:693,429:De},{78:[1,1192],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{2:p,3:1193,4:f,5:v,149:pr},i(Fi,[2,373]),i(Ds,[2,646]),{2:p,3:711,4:f,5:v,131:n1,132:z1,431:[1,1194],433:1195},{2:p,3:702,4:f,5:v,77:jo,111:697,113:695,131:rt,132:Ve,143:Xe,144:692,145:Bn,152:He,156:Le,181:Ge,196:694,200:700,201:699,261:696,262:698,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,307:Ke,424:193,425:Oe,427:1196,428:693,429:De},{2:p,3:702,4:f,5:v,77:jo,111:697,113:695,131:rt,132:Ve,143:Xe,144:692,145:Bn,152:He,156:Le,181:Ge,196:694,200:700,201:699,261:696,262:698,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,307:Ke,424:193,425:Oe,427:1197,428:693,429:De},{2:p,3:702,4:f,5:v,77:jo,111:697,113:695,131:rt,132:Ve,143:Xe,144:692,145:Bn,152:He,156:Le,181:Ge,196:694,200:700,201:699,261:696,262:698,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,307:Ke,424:193,425:Oe,427:1198,428:693,429:De},{77:Ba,143:Xe,144:988,145:Bn,152:He,181:Ge,201:989,307:Ke,347:1199,424:193,425:Oe,429:De},i(we,[2,467],{74:Je}),{149:fn,346:1201,349:Ro},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1205,100:1202,111:1204,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,350:1203,424:193,425:Oe,429:De},i(we,[2,475]),i(Bt,[2,478]),i(Bt,[2,479]),i(gt,[2,483]),i(gt,[2,484]),{2:p,3:248,4:f,5:v,199:1206},{77:Ba,143:Xe,144:988,145:Bn,152:He,181:Ge,201:989,307:Ke,347:1207,424:193,425:Oe,429:De},i(we,[2,471],{74:Je}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1205,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,350:1203,424:193,425:Oe,429:De},{313:wt,461:1208,463:1209,464:1210},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1212,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{230:[2,706]},{2:p,3:223,4:f,5:v,40:718,77:$o,79:75,89:V,132:uo,143:Xe,144:216,145:yt,152:He,156:Le,181:Ge,184:99,189:$,199:217,200:219,201:218,202:221,209:1213,213:yl,214:222,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,307:Ke,424:193,425:Oe,429:De},i(Cn,[2,181],{3:1214,2:p,4:f,5:v,76:[1,1215]}),i(Cn,[2,182]),i(Cn,[2,1104]),i(Cn,[2,184]),i(Cn,[2,186]),i(Cn,[2,188]),i(Cn,[2,192]),i(Cn,[2,196]),i(Cn,[2,199]),i([2,4,5,10,53,72,74,76,77,78,89,93,95,98,118,124,128,143,145,146,148,149,152,154,156,162,168,169,181,183,187,189,206,208,222,223,224,225,226,227,228,229,230,231,232,249,251,271,272,294,302,307,311,315,340,343,344,348,349,361,373,374,378,379,401,405,406,407,408,409,411,413,414,422,423,425,429,439,441,442,444,445,446,447,448,452,453,456,457,510,512,513,519,520,521,522,607,768],[2,201]),{2:p,3:1216,4:f,5:v},i(bt,[2,1055],{83:1217,92:1218,93:[1,1219],98:[1,1220]}),{2:p,3:223,4:f,5:v,77:[1,1222],132:uo,143:Xe,144:216,145:yt,152:He,156:Le,181:Ge,199:217,200:219,201:218,202:221,203:1221,209:1223,213:yl,214:222,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,307:Ke,424:193,425:Oe,429:De},i(Io,[2,164]),i(Io,[2,165]),i(Io,[2,166]),i(Io,[2,167]),i(Io,[2,168]),{2:p,3:674,4:f,5:v},i(kl,[2,83],{74:[1,1224]}),i(Ei,[2,85]),i(Ei,[2,86]),{113:1225,132:Ve,301:nt},i([10,72,74,78,93,98,118,124,128,162,168,169,183,198,206,208,222,223,224,225,226,227,228,229,232,249,251,311,315,607,768],bl,{116:tl}),i(ua,[2,73]),i(ua,[2,1060]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1226,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(h,[2,126]),i(h,[2,144]),i(h,[2,145]),i(h,[2,146]),{2:p,3:171,4:f,5:v,56:167,77:Fe,78:[2,1075],94:265,111:151,113:155,127:1227,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:1228,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{77:[1,1229]},i(h,[2,94]),i([2,4,5,10,72,74,76,77,78,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,198,244,245,285,286,287,288,289,290,291,292,311,315,425,429,607,768],[2,96],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),i([2,4,5,10,72,74,76,77,78,112,118,122,124,128,129,130,131,132,134,135,137,139,140,143,145,146,148,149,150,152,154,156,162,164,166,168,169,170,171,172,173,175,181,183,185,187,198,244,245,285,286,287,288,289,290,291,292,311,315,425,429,607,768],[2,97],{114:632,332:644,99:Ui,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{2:p,3:740,4:f,5:v,72:Ks,76:ws,77:Ls,78:[1,1230],112:Qs,114:743,115:Xt,116:Wt,117:1231,118:ea,122:Es,123:Ts,124:ta,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,144:765,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,158:775,160:776,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,424:193,425:Oe,429:De},i(ti,[2,1071],{153:1025,179:Vs,180:ls,181:Us}),{2:p,3:740,4:f,5:v,72:Ks,76:ws,77:Ls,112:Qs,114:743,115:Xt,116:Wt,117:1233,118:ea,122:Es,123:Ts,124:ta,126:1232,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,144:765,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,158:775,160:776,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1234,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1235,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:1236,4:f,5:v},i(h,[2,110]),i(h,[2,111]),i(h,[2,112]),i(h,[2,119]),{2:p,3:1237,4:f,5:v},{2:p,3:1021,4:f,5:v,111:1075,143:e,145:r,147:1238,341:1074,342:1076},{2:p,3:1239,4:f,5:v},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:1240,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(h,[2,125]),i(ti,[2,1077],{155:1241}),i(ti,[2,1079],{157:1242}),i(ti,[2,1081],{159:1243}),i(ti,[2,1085],{161:1244}),i(Jt,Zi,{163:1245,178:1246}),{77:[1,1247]},i(ti,[2,1087],{165:1248}),i(ti,[2,1089],{167:1249}),i(Jt,Zi,{178:1246,163:1250}),i(Jt,Zi,{178:1246,163:1251}),i(Jt,Zi,{178:1246,163:1252}),i(Jt,Zi,{178:1246,163:1253}),{2:p,3:740,4:f,5:v,72:Ks,76:ws,77:Ls,112:Qs,114:743,115:Xt,116:Wt,117:1254,118:ea,122:Es,123:Ts,124:ta,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,144:765,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,158:775,160:776,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:824,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,174:1255,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,257:823,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Ir,[2,1091],{176:1256}),i($e,[2,615],{183:[1,1257]}),i($e,[2,611],{183:[1,1258]}),i($e,[2,604]),{113:1259,132:Ve,301:nt},i($e,[2,613],{183:[1,1260]}),i($e,[2,608]),i($e,[2,609],{112:[1,1261]}),i(o1,[2,69]),{40:1262,79:75,89:V,184:99,189:$},i($e,[2,459],{74:Dr,128:[1,1263]}),i(vn,[2,460]),{124:[1,1265]},{2:p,3:1266,4:f,5:v},i(kn,[2,1125]),i(kn,[2,1126]),i($e,[2,627]),i(zi,[2,364],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),i(fe,xe,{114:632,332:644,112:Ri,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,337:Pi}),i(va,[2,691]),i(va,[2,693]),i($e,[2,659]),i($e,[2,661],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1267,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:1089,4:f,5:v,77:o,131:l,437:1268},i(Qr,[2,668]),i(Qr,[2,669]),i(Qr,[2,670]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1269,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1270,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{114:1087,115:Xt,116:Wt,124:[1,1271]},i(Xr,[2,765]),i(Cr,[2,148],{74:d}),i(Cr,[2,149],{74:d}),i(Cr,[2,150],{74:d}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:824,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,257:1272,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:1273,4:f,5:v,113:1275,131:[1,1274],132:Ve,301:nt},i(b,[2,279]),i(b,[2,281]),i(b,[2,283]),i(Dl,[2,160]),i(Dl,[2,1100]),{78:[1,1276]},i(Fo,[2,768]),{2:p,3:1277,4:f,5:v},{2:p,3:1278,4:f,5:v},{2:p,3:1280,4:f,5:v,389:1279},{2:p,3:1280,4:f,5:v,389:1281},{2:p,3:1282,4:f,5:v},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:1283,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:1284,4:f,5:v},{74:Ln,78:[1,1285]},i(Wn,[2,354]),i(Wn,[2,355]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1286,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1287,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1288,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1289,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1290,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(F1,[2,513]),i($e,En,{412:1291,76:Tn,77:[1,1292]}),i($e,En,{412:1294,76:Tn}),{77:[1,1295]},{2:p,3:248,4:f,5:v,199:1296},i(Xr,[2,741]),i(Xr,[2,743]),i(Xr,[2,1156]),{143:$a,145:Ao,436:1297},i(mn,[2,1157],{424:193,484:1298,144:1299,145:Bn,425:Oe,429:De}),{76:E,139:[2,1161],486:1300,488:1301},i([10,74,76,78,132,139,145,152,311,315,425,429,607,768],c1,{495:860,498:861,137:Co}),i(Xr,[2,746]),i(Xr,j1),{74:B1,78:[1,1302]},i(po,[2,1175],{497:1303,502:1304,152:ho}),i(Qo,[2,1174]),i(po,[2,755]),i(po,[2,1180]),i($e,[2,499],{77:[1,1305]}),{76:[1,1307],77:[1,1306]},{99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,148:[1,1308],154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},i(we,Jr,{79:75,184:99,473:1309,40:1312,89:V,146:cs,189:$,475:gs}),i(C,[2,1150]),i(bc,[2,733]),{230:[1,1313]},i(_s,[2,779]),i(_s,[2,780]),i(_s,[2,781]),i(Vl,Po,{515:1314,95:yn,519:Ul,520:V1,521:vc}),i(Vl,[2,778]),i($e,[2,317]),i($e,[2,318]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1315,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(va,[2,699],{124:[1,1316]}),i(B,[2,550]),{131:[1,1318],393:1317,395:[1,1319]},i(B,[2,5]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1205,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,350:1320,424:193,425:Oe,429:De},i($e,[2,464],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),i($e,[2,598]),i($e,[2,599]),{2:p,3:248,4:f,5:v,199:1321},i($e,[2,679]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1322,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1323,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{78:[1,1324],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{78:[1,1325],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{2:p,3:171,4:f,5:v,40:1326,56:167,77:Fe,79:75,89:V,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:1327,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,184:99,189:$,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{78:[1,1328]},{74:Ln,78:[1,1329]},i(Fi,[2,435]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1330,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,40:1331,56:167,77:Fe,78:[1,1333],79:75,89:V,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:1332,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,184:99,189:$,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Fi,[2,438]),i(Fi,[2,440]),i(Fi,Zr,{280:1334,281:ko}),{78:[1,1336],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{78:[1,1337],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{2:p,3:1338,4:f,5:v,180:[1,1339]},i(Ds,[2,628]),i(Fi,[2,372]),{311:[1,1340]},i(Fi,[2,379]),{99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,311:[2,383],316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1341,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{4:vl,7:888,277:1342,392:887,394:xl},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1343,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Ds,[2,650]),i(Fa,[2,657]),i(fo,[2,645]),i(Ce,Ee),i(Ds,[2,647]),i(bn,[2,652]),i(bn,[2,654]),i(bn,[2,655]),i(bn,[2,656]),i(we,[2,466],{74:Je}),{77:[1,1345],143:Xe,144:1346,145:Bn,152:He,181:Ge,201:1347,307:Ke,424:193,425:Oe,429:De},i(we,[2,472]),{74:ys,78:[1,1348]},{74:Do,78:[1,1350]},i([74,78,99,112,115,116,123,124,133,136,138,139,140,141,142,154,170,171,179,180,316,317,318,320,321,322,323,324,325,326,327,328,329,330,331,335,336,337,338],nl),i(Vn,[2,488],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{40:1354,77:Ba,79:75,89:V,143:Xe,144:988,145:Bn,149:fn,152:He,181:Ge,184:99,189:$,201:989,307:Ke,346:1352,347:1353,349:Ro,424:193,425:Oe,429:De},i(we,[2,470],{74:Je}),i($e,[2,727],{462:1355,463:1356,464:1357,313:wt,469:[1,1358]}),i(Pn,[2,711]),i(Pn,[2,712]),{154:[1,1360],465:[1,1359]},{99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,313:[2,708],316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{78:[1,1361]},i(Cn,[2,179]),{2:p,3:1362,4:f,5:v},i($e,[2,583]),i(sl,[2,239],{84:1363,128:[1,1364]}),i(bt,[2,1056]),{77:[1,1365]},{77:[1,1366]},i(il,[2,169],{204:1367,215:1369,205:1370,216:1371,221:1374,74:Ra,206:mo,208:to,222:go,223:On,224:Nn,225:bs,226:an,227:al,228:ql,229:Gl}),{2:p,3:223,4:f,5:v,40:718,77:$o,79:75,89:V,132:uo,143:Xe,144:216,145:yt,152:He,156:Le,181:Ge,184:99,189:$,199:217,200:219,201:218,202:221,203:1383,209:1223,213:yl,214:222,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,307:Ke,424:193,425:Oe,429:De},i(q1,[2,177]),{2:p,3:1021,4:f,5:v,110:1384,111:1019,112:rl},i(Ei,[2,87]),i(ua,[2,147],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{78:[1,1385]},{74:Ln,78:[2,1076]},{2:p,3:171,4:f,5:v,56:167,77:Fe,78:[2,1069],94:1390,111:151,113:155,120:1386,121:1387,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,241:1388,244:Ye,245:ot,246:[1,1389],258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(h,[2,98]),i(ti,[2,1072],{153:1025,179:Vs,180:ls,181:Us}),{2:p,3:740,4:f,5:v,72:Ks,76:ws,77:Ls,78:[1,1391],112:Qs,114:743,115:Xt,116:Wt,117:1392,118:ea,122:Es,123:Ts,124:ta,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,144:765,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,158:775,160:776,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,424:193,425:Oe,429:De},i(ti,[2,1073],{153:1025,179:Vs,180:ls,181:Us}),{78:[1,1393],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{78:[1,1394],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{78:[1,1395]},i(h,[2,120]),{74:Dr,78:[1,1396]},i(h,[2,122]),{74:Ln,78:[1,1397]},{2:p,3:740,4:f,5:v,72:Ks,76:ws,77:Ls,78:[1,1398],112:Qs,114:743,115:Xt,116:Wt,117:1399,118:ea,122:Es,123:Ts,124:ta,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,144:765,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,158:775,160:776,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,424:193,425:Oe,429:De},{2:p,3:740,4:f,5:v,72:Ks,76:ws,77:Ls,78:[1,1400],112:Qs,114:743,115:Xt,116:Wt,117:1401,118:ea,122:Es,123:Ts,124:ta,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,144:765,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,158:775,160:776,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,424:193,425:Oe,429:De},{2:p,3:740,4:f,5:v,72:Ks,76:ws,77:Ls,78:[1,1402],112:Qs,114:743,115:Xt,116:Wt,117:1403,118:ea,122:Es,123:Ts,124:ta,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,144:765,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,158:775,160:776,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,424:193,425:Oe,429:De},{2:p,3:740,4:f,5:v,72:Ks,76:ws,77:Ls,78:[1,1404],112:Qs,114:743,115:Xt,116:Wt,117:1405,118:ea,122:Es,123:Ts,124:ta,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,144:765,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,158:775,160:776,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,424:193,425:Oe,429:De},{74:ol,78:[1,1406]},i(Vn,[2,143],{424:193,3:740,114:743,144:765,158:775,160:776,117:1408,2:p,4:f,5:v,72:Ks,76:ws,77:Ls,112:Qs,115:Xt,116:Wt,118:ea,122:Es,123:Ts,124:ta,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,425:Oe,429:De}),i(Jt,Zi,{178:1246,163:1409}),{2:p,3:740,4:f,5:v,72:Ks,76:ws,77:Ls,78:[1,1410],112:Qs,114:743,115:Xt,116:Wt,117:1411,118:ea,122:Es,123:Ts,124:ta,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,144:765,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,158:775,160:776,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,424:193,425:Oe,429:De},{2:p,3:740,4:f,5:v,72:Ks,76:ws,77:Ls,78:[1,1412],112:Qs,114:743,115:Xt,116:Wt,117:1413,118:ea,122:Es,123:Ts,124:ta,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,144:765,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,158:775,160:776,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,424:193,425:Oe,429:De},{74:ol,78:[1,1414]},{74:ol,78:[1,1415]},{74:ol,78:[1,1416]},{74:ol,78:[1,1417]},{78:[1,1418],153:1025,179:Vs,180:ls,181:Us},{74:d,78:[1,1419]},{2:p,3:740,4:f,5:v,72:Ks,74:[1,1420],76:ws,77:Ls,112:Qs,114:743,115:Xt,116:Wt,117:1421,118:ea,122:Es,123:Ts,124:ta,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,144:765,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,158:775,160:776,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,424:193,425:Oe,429:De},{2:p,3:1422,4:f,5:v},{2:p,3:1423,4:f,5:v},i($e,[2,606]),{2:p,3:1424,4:f,5:v},{113:1425,132:Ve,301:nt},{78:[1,1426]},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1427,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:1021,4:f,5:v,111:1075,143:e,145:r,341:1428,342:1076},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1429,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{124:[1,1430]},i($e,[2,662],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),i(Qr,[2,667]),{78:[1,1431],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},i($e,[2,663],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1432,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(b,[2,276]),i(b,[2,278]),i(b,[2,280]),i(b,[2,282]),i(Dl,[2,161]),i($e,[2,578]),{148:[1,1433]},i($e,[2,579]),i(Xr,[2,545],{392:887,7:888,277:1434,4:vl,391:[1,1435],394:xl}),i($e,[2,580]),i($e,[2,582]),{74:Ln,78:[1,1436]},i($e,[2,586]),i(Wn,[2,352]),{74:[1,1437],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{74:[1,1438],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{74:[1,1439],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{74:[1,1440],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{74:[1,1441],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},i($e,[2,590]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:1442,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:1443,4:f,5:v},i($e,[2,592]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1390,111:151,113:155,120:1444,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,241:1388,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{77:[1,1445]},{2:p,3:1446,4:f,5:v},{76:E,139:[2,1159],485:1447,488:1448},i(mn,[2,1158]),{139:[1,1449]},{139:[2,1162]},i(Xr,[2,747]),i(po,[2,754]),i(po,[2,1176]),{2:p,3:1280,4:f,5:v,76:[1,1452],356:1450,363:1451,389:1453},{2:p,3:1021,4:f,5:v,100:1454,111:1455},{40:1456,79:75,89:V,184:99,189:$},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1457,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(we,[2,732]),{2:p,3:1021,4:f,5:v,111:1075,143:e,145:r,147:1458,341:1074,342:1076},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:1459,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(we,[2,737]),{2:p,3:248,4:f,5:v,199:1460},{340:k,343:O,344:j,516:1461},i(va,[2,700],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1462,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{74:[1,1463],78:[1,1464]},i(Vn,[2,552]),i(Vn,[2,553]),{74:Do,78:[1,1465]},i(va,[2,574]),i(X,[2,389],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,317:ri,321:si,322:gi,323:_i,324:wi}),i(X,[2,391],{114:632,332:644,115:Xt,116:Wt,123:ii,133:di,136:ui,138:pi,141:Ai,142:Si,179:mi,180:oi,317:ri,321:si,322:gi,323:_i,324:wi}),i(Fi,[2,405]),i(Fi,[2,409]),{78:[1,1466]},{74:Ln,78:[1,1467]},i(Fi,[2,431]),i(Fi,[2,433]),{78:[1,1468],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{78:[1,1469]},{74:Ln,78:[1,1470]},i(Fi,[2,436]),i(Fi,[2,333]),{77:[1,1471]},i(Fi,Zr,{280:1472,281:ko}),i(Fi,Zr,{280:1473,281:ko}),i(Ce,[2,288]),i(Fi,[2,285]),i(Fi,[2,378]),i(p1,[2,382],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{74:[1,1475],78:[1,1474]},{74:[1,1477],78:[1,1476],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{2:p,3:1338,4:f,5:v},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1205,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,350:1478,424:193,425:Oe,429:De},i(gt,[2,486]),i(gt,[2,487]),{40:1481,77:Ba,79:75,89:V,143:Xe,144:988,145:Bn,149:fn,152:He,181:Ge,184:99,189:$,201:989,307:Ke,346:1479,347:1480,349:Ro,424:193,425:Oe,429:De},{2:p,3:1021,4:f,5:v,111:1482},i(gt,[2,482]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1483,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{77:Ba,143:Xe,144:988,145:Bn,152:He,181:Ge,201:989,307:Ke,347:1484,424:193,425:Oe,429:De},i(we,[2,469],{74:Je}),i(we,[2,476]),i($e,[2,703]),i(Pn,[2,709]),i(Pn,[2,710]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:824,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,174:1485,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,257:823,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{170:[1,1487],314:[1,1486]},{465:[1,1488]},{230:[2,707]},i(Cn,[2,180]),i(ll,[2,241],{85:1489,232:[1,1490]}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1491,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1492,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:1493,4:f,5:v},i(il,[2,170],{216:1371,221:1374,215:1494,205:1495,206:mo,208:to,222:go,223:On,224:Nn,225:bs,226:an,227:al,228:ql,229:Gl}),{2:p,3:223,4:f,5:v,77:$o,132:uo,143:Xe,144:216,145:yt,152:He,156:Le,181:Ge,199:217,200:219,201:218,202:221,209:1496,213:yl,214:222,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,307:Ke,424:193,425:Oe,429:De},i(zn,[2,205]),i(zn,[2,206]),{2:p,3:223,4:f,5:v,77:[1,1501],143:Xe,144:1499,145:yt,152:He,156:Le,181:Ge,199:1498,200:1502,201:1500,202:1503,217:1497,270:wn,294:Ue,295:Ze,296:qe,297:et,298:Pe,307:Ke,424:193,425:Oe,429:De},{207:[1,1504],223:_o},{207:[1,1506],223:ja},i(Jn,[2,222]),{206:[1,1510],208:[1,1509],221:1508,223:On,224:Nn,225:bs,226:an,227:al,228:ql,229:Gl},i(Jn,[2,224]),{223:[1,1511]},{208:[1,1513],223:[1,1512]},{208:[1,1515],223:[1,1514]},{208:[1,1516]},{223:[1,1517]},{223:[1,1518]},{74:Ra,204:1519,205:1370,206:mo,208:to,215:1369,216:1371,221:1374,222:go,223:On,224:Nn,225:bs,226:an,227:al,228:ql,229:Gl},i(Ei,[2,84]),i(h,[2,100]),{74:cl,78:[1,1520]},{78:[1,1522]},i(ha,[2,262]),{78:[2,1070]},i(ha,[2,266],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,246:[1,1523],247:[1,1524],316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),i(h,[2,99]),i(ti,[2,1074],{153:1025,179:Vs,180:ls,181:Us}),i(h,[2,101]),i(h,[2,102]),i(h,[2,103]),i(h,[2,121]),i(h,[2,124]),i(h,[2,127]),i(ti,[2,1078],{153:1025,179:Vs,180:ls,181:Us}),i(h,[2,128]),i(ti,[2,1080],{153:1025,179:Vs,180:ls,181:Us}),i(h,[2,129]),i(ti,[2,1082],{153:1025,179:Vs,180:ls,181:Us}),i(h,[2,130]),i(ti,[2,1086],{153:1025,179:Vs,180:ls,181:Us}),i(h,[2,131]),i(Jt,[2,1093],{177:1525}),i(Jt,[2,1096],{153:1025,179:Vs,180:ls,181:Us}),{74:ol,78:[1,1526]},i(h,[2,133]),i(ti,[2,1088],{153:1025,179:Vs,180:ls,181:Us}),i(h,[2,134]),i(ti,[2,1090],{153:1025,179:Vs,180:ls,181:Us}),i(h,[2,135]),i(h,[2,136]),i(h,[2,137]),i(h,[2,138]),i(h,[2,139]),i(h,[2,140]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:265,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,151:1527,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Ir,[2,1092],{153:1025,179:Vs,180:ls,181:Us}),i($e,[2,616]),i($e,[2,612]),i($e,[2,614]),i($e,[2,610]),i(o1,[2,71]),i($e,[2,458],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),i(vn,[2,461]),i(vn,[2,462],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1528,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Qr,[2,671]),i($e,[2,664],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{2:p,3:1529,4:f,5:v},i(Xr,[2,554],{390:1530,396:1531,397:1532,371:1540,154:G1,187:Ru,230:Zc,302:ku,348:Zl,361:Hl,373:Hc,374:uh,378:Wc,379:Du}),i(Xr,[2,544]),i($e,[2,585],{76:[1,1544]}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1545,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1546,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1547,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1548,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1549,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{74:Ln,78:[1,1550]},i($e,[2,594]),{74:cl,78:[1,1551]},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1390,111:151,113:155,120:1552,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,241:1388,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i([10,74,78,139,311,315,607,768],[2,751]),{139:[1,1553]},{139:[2,1160]},{2:p,3:1133,4:f,5:v,132:Bo,137:Co,143:$a,145:Ao,152:ho,436:592,480:1135,483:1554,487:589,498:586,502:588},{78:[1,1555]},{74:[1,1556],78:[2,515]},{40:1557,79:75,89:V,184:99,189:$},i(Vn,[2,541]),{74:ys,78:[1,1558]},i(q1,nl),i($e,[2,1143],{417:1559,418:1560,72:hh}),i(we,Jr,{79:75,184:99,114:632,332:644,40:1312,473:1562,89:V,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,146:cs,154:Gi,170:tr,171:ir,179:mi,180:oi,189:$,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi,475:gs}),i(we,[2,735],{74:Dr}),i(we,[2,736],{74:Ln}),i([10,53,72,89,124,146,156,189,271,272,294,311,315,340,343,344,401,405,406,409,411,413,414,422,423,439,441,442,444,445,446,447,448,452,453,456,457,510,512,513,522,607,768],[2,1191],{517:1563,3:1564,2:p,4:f,5:v,76:[1,1565]}),i(Xc,[2,1193],{518:1566,76:[1,1567]}),i(va,[2,701],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{131:[1,1568]},i(B,[2,547]),i(B,[2,549]),i(Fi,[2,421]),i(Fi,[2,422]),i(Fi,[2,448]),i(Fi,[2,432]),i(Fi,[2,434]),{118:dh,282:1569,283:1570,284:[1,1571]},i(Fi,[2,334]),i(Fi,[2,335]),i(Fi,[2,321]),{131:[1,1573]},i(Fi,[2,323]),{131:[1,1574]},{74:Do,78:[1,1575]},{77:Ba,143:Xe,144:988,145:Bn,152:He,181:Ge,201:989,307:Ke,347:1576,424:193,425:Oe,429:De},i(we,[2,474],{74:Je}),i(we,[2,477]),i(q1,[2,497]),i(Vn,[2,489],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),i(we,[2,468],{74:Je}),i($e,[2,728],{74:d,198:[1,1577]}),{340:xc,343:Lu,466:1578},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1581,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{119:[1,1583],170:[1,1584],314:[1,1582]},i(Jc,[2,260],{86:1585,118:[1,1586]}),{119:[1,1587]},i(sl,[2,240],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{95:[1,1588],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{95:[1,1589]},i(zn,[2,203]),i(zn,[2,204]),i(q1,[2,178]),i(zn,[2,238],{218:1590,230:[1,1591],231:[1,1592]}),i(wa,[2,208],{3:1593,2:p,4:f,5:v,76:[1,1594]}),i(Ou,[2,1105],{219:1595,76:[1,1596]}),{2:p,3:1597,4:f,5:v,76:[1,1598]},{40:1599,79:75,89:V,184:99,189:$},i(wa,[2,216],{3:1600,2:p,4:f,5:v,76:[1,1601]}),i(wa,[2,219],{3:1602,2:p,4:f,5:v,76:[1,1603]}),{77:[1,1604]},i(Jn,[2,234]),{77:[1,1605]},i(Jn,[2,230]),i(Jn,[2,223]),{223:ja},{223:_o},i(Jn,[2,225]),i(Jn,[2,226]),{223:[1,1606]},i(Jn,[2,228]),{223:[1,1607]},{223:[1,1608]},i(Jn,[2,232]),i(Jn,[2,233]),{78:[1,1609],205:1495,206:mo,208:to,215:1494,216:1371,221:1374,222:go,223:On,224:Nn,225:bs,226:an,227:al,228:ql,229:Gl},i(h,[2,91]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1390,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,241:1610,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(h,[2,92]),i(ha,[2,267],{242:1611,243:[1,1612]}),{248:[1,1613]},i(Vn,[2,142],{424:193,3:740,114:743,144:765,158:775,160:776,117:1614,2:p,4:f,5:v,72:Ks,76:ws,77:Ls,112:Qs,115:Xt,116:Wt,118:ea,122:Es,123:Ts,124:ta,128:ps,129:Ur,130:jn,131:_n,132:Os,133:fs,134:Ns,135:Dn,136:zs,137:ms,138:$s,139:ia,140:ra,141:na,142:ts,143:is,145:Kr,146:rs,148:Fs,149:sa,150:aa,152:ns,154:Bs,156:Ss,162:oa,164:ss,166:la,168:sn,169:In,170:as,171:Mn,172:os,173:As,175:xa,185:js,187:Cs,244:Ye,245:ot,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,425:Oe,429:De}),i(h,[2,132]),{74:Ln,78:[1,1615]},i(vn,[2,463],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),i($e,[2,581]),i(Xr,[2,543]),i(Xr,[2,555],{371:1540,397:1616,154:G1,187:Ru,230:Zc,302:ku,348:Zl,361:Hl,373:Hc,374:uh,378:Wc,379:Du}),i(Gr,[2,557]),{375:[1,1617]},{375:[1,1618]},{2:p,3:248,4:f,5:v,199:1619},i(Gr,[2,563],{77:[1,1620]}),{2:p,3:114,4:f,5:v,77:[1,1622],113:255,131:rt,132:Ve,143:Xe,152:He,156:Le,181:Ge,196:254,200:1623,201:258,261:256,262:257,269:P1,270:pc,279:1621,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,307:Ke},i(Gr,[2,567]),{302:[1,1624]},i(Gr,[2,569]),i(Gr,[2,570]),{340:[1,1625]},{77:[1,1626]},{2:p,3:1627,4:f,5:v},{78:[1,1628],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{78:[1,1629],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{78:[1,1630],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{78:[1,1631],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{78:[1,1632],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},i($e,En,{412:1633,76:Tn}),i($e,[2,600]),{74:cl,78:[1,1634]},{2:p,3:1133,4:f,5:v,132:Bo,137:Co,143:$a,145:Ao,152:ho,436:592,480:1135,483:1635,487:589,498:586,502:588},i(Xr,[2,745]),i($e,[2,502],{357:1636,359:1637,360:1638,4:Wl,247:ph,348:Z1,361:wc}),i(f1,Yc,{3:1280,364:1643,389:1644,365:1645,366:1646,2:p,4:f,5:v,372:Kc}),{78:[2,516]},{76:[1,1648]},i($e,[2,618]),i($e,[2,1144]),{373:[1,1650],419:[1,1649]},i(we,[2,738]),i($e,_,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,509:95,184:99,3:100,12:1651,2:p,4:f,5:v,53:P,72:D,89:V,124:ae,146:ie,156:Q,189:$,271:F,272:_e,294:ue,340:ze,343:ve,344:Ie,401:Me,405:Ut,406:jt,409:Zt,411:ei,413:xi,414:Ci,422:Mi,423:We,439:Wi,441:Li,442:Ht,444:or,445:vr,446:dn,447:qr,448:hr,452:lr,453:pn,456:Rr,457:Sr,510:sr,512:Br,513:nn,522:Fn}),i($e,[2,772]),i(Xc,[2,1192]),i($e,_,{17:5,18:7,19:8,20:9,21:10,22:11,23:12,24:13,25:14,26:15,27:16,28:17,29:18,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:36,48:37,49:38,50:39,51:40,52:41,54:43,55:44,56:45,57:46,58:47,59:48,60:49,61:50,62:51,63:52,64:53,65:54,66:55,67:56,68:57,69:58,70:59,71:60,79:75,509:95,184:99,3:100,12:1652,2:p,4:f,5:v,53:P,72:D,89:V,124:ae,146:ie,156:Q,189:$,271:F,272:_e,294:ue,340:ze,343:ve,344:Ie,401:Me,405:Ut,406:jt,409:Zt,411:ei,413:xi,414:Ci,422:Mi,423:We,439:Wi,441:Li,442:Ht,444:or,445:vr,446:dn,447:qr,448:hr,452:lr,453:pn,456:Rr,457:Sr,510:sr,512:Br,513:nn,522:Fn}),i(Xc,[2,1194]),{78:[1,1653]},{78:[1,1654],118:dh,283:1655},{78:[1,1656]},{119:[1,1657]},{119:[1,1658]},{78:[1,1659]},{78:[1,1660]},i(gt,[2,485]),i(we,[2,473],{74:Je}),{2:p,3:248,4:f,5:v,143:$a,145:Ao,199:1662,436:1661},i(Pn,[2,713]),i(Pn,[2,715]),{146:[1,1663]},{99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,314:[1,1664],316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},{344:Ec,467:1665},{422:[1,1668],468:[1,1667]},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1669,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(m1,[2,271],{87:1670,249:[1,1671],251:[1,1672]}),{119:[1,1673]},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1679,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,233:1674,235:1675,236:g1,237:_1,238:y1,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:1680,4:f,5:v},{2:p,3:1681,4:f,5:v},i(zn,[2,207]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1682,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:1021,4:f,5:v,77:[1,1684],100:1683,111:1455},i(wa,[2,209]),{2:p,3:1685,4:f,5:v},i(wa,[2,1107],{220:1686,3:1687,2:p,4:f,5:v}),i(Ou,[2,1106]),i(wa,[2,212]),{2:p,3:1688,4:f,5:v},{78:[1,1689]},i(wa,[2,217]),{2:p,3:1690,4:f,5:v},i(wa,[2,220]),{2:p,3:1691,4:f,5:v},{40:1692,79:75,89:V,184:99,189:$},{40:1693,79:75,89:V,184:99,189:$},i(Jn,[2,227]),i(Jn,[2,229]),i(Jn,[2,231]),i(il,[2,171]),i(ha,[2,263]),i(ha,[2,268]),{244:[1,1694],245:[1,1695]},i(ha,[2,269],{246:[1,1696]}),i(Jt,[2,1094],{153:1025,179:Vs,180:ls,181:Us}),i(h,[2,141]),i(Gr,[2,556]),i(Gr,[2,559]),{379:[1,1697]},i(Gr,[2,1137],{400:1698,398:1699,77:fh}),{131:rt,196:1701},i(Gr,[2,564]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1702,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Gr,[2,566]),i(Gr,[2,568]),{2:p,3:114,4:f,5:v,77:[1,1704],113:255,131:rt,132:Ve,143:Xe,152:He,156:Le,181:Ge,196:254,200:259,201:258,261:256,262:257,269:P1,270:pc,279:1703,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,307:Ke},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1705,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i($e,[2,587]),i(Wn,[2,357]),i(Wn,[2,358]),i(Wn,[2,359]),i(Wn,[2,360]),i(Wn,[2,361]),i($e,[2,591]),i($e,[2,601]),i(Xr,[2,744]),i($e,[2,498]),i($e,[2,503],{360:1706,4:Wl,247:ph,348:Z1,361:wc}),i(Xl,[2,505]),i(Xl,[2,506]),{124:[1,1707]},{124:[1,1708]},{124:[1,1709]},{74:[1,1710],78:[2,514]},i(Vn,[2,542]),i(Vn,[2,517]),{187:[1,1718],193:[1,1719],367:1711,368:1712,369:1713,370:1714,371:1715,373:Hc,374:[1,1716],375:[1,1720],378:[1,1717]},{2:p,3:1721,4:f,5:v},{40:1722,79:75,89:V,184:99,189:$},{420:[1,1723]},{421:[1,1724]},i($e,[2,771]),i($e,[2,773]),i(B,[2,546]),i(Fi,[2,337]),{78:[1,1725]},i(Fi,[2,338]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1679,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,233:1726,235:1675,236:g1,237:_1,238:y1,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1390,111:151,113:155,120:1727,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,241:1388,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(Fi,[2,322]),i(Fi,[2,324]),{2:p,3:1728,4:f,5:v},i($e,[2,730],{77:[1,1729]}),{2:p,3:1021,4:f,5:v,111:1075,143:e,145:r,147:1730,341:1074,342:1076},{340:xc,343:Lu,466:1731},i(Pn,[2,717]),{77:[1,1733],348:[1,1734],349:[1,1732]},{170:[1,1736],314:[1,1735]},{170:[1,1738],314:[1,1737]},{99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,314:[1,1739],316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},i(ua,[2,251],{88:1740,162:[1,1741],168:[1,1743],169:[1,1742]}),{131:rt,196:1744},{131:rt,196:1745},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1390,111:151,113:155,120:1746,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,241:1388,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},i(ll,[2,249],{234:1747,74:H1,239:[1,1749]}),i(Jl,[2,243]),{146:[1,1750]},{77:[1,1751]},{77:[1,1752]},i(Jl,[2,248],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{78:[2,1061],96:1753,99:[1,1755],102:1754},{99:[1,1756]},i(zn,[2,235],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),i(zn,[2,236],{74:ys}),{2:p,3:1021,4:f,5:v,100:1757,111:1455},i(wa,[2,210]),i(wa,[2,211]),i(wa,[2,1108]),i(wa,[2,213]),{2:p,3:1758,4:f,5:v,76:[1,1759]},i(wa,[2,218]),i(wa,[2,221]),{78:[1,1760]},{78:[1,1761]},i(ha,[2,264]),i(ha,[2,265]),i(ha,[2,270]),{2:p,3:248,4:f,5:v,199:1762},i(Gr,[2,561]),i(Gr,[2,1138]),{2:p,3:1763,4:f,5:v},{74:[1,1764]},{78:[1,1765],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},i(Gr,[2,571]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1766,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{78:[1,1767],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},i(Xl,[2,504]),{2:p,3:1768,4:f,5:v},{131:rt,196:1769},{2:p,3:1770,4:f,5:v},i(f1,Yc,{366:1646,365:1771,372:Kc}),i(Xr,[2,519]),i(Xr,[2,520]),i(Xr,[2,521]),i(Xr,[2,522]),i(Xr,[2,523]),{375:[1,1772]},{375:[1,1773]},i(W1,[2,1131],{387:1774,375:[1,1775]}),{2:p,3:1776,4:f,5:v},{2:p,3:1777,4:f,5:v},i(f1,[2,525]),i($e,[2,1141],{416:1778,418:1779,72:hh}),i($e,[2,619]),i($e,[2,620],{372:[1,1780]}),i(Fi,[2,339]),i([78,118],[2,340],{74:H1}),{74:cl,78:[2,341]},i($e,[2,729]),{2:p,3:1021,4:f,5:v,100:1781,111:1455},i(Pn,[2,716],{74:Dr}),i(Pn,[2,714]),{77:Ba,143:Xe,144:988,145:Bn,152:He,181:Ge,201:989,307:Ke,347:1782,424:193,425:Oe,429:De},{2:p,3:1021,4:f,5:v,100:1783,111:1455},{349:[1,1784]},{344:Ec,467:1785},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1786,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{344:Ec,467:1787},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1788,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{344:Ec,467:1789},i(ua,[2,72]),{40:1790,79:75,89:V,164:[1,1791],184:99,189:$,240:[1,1792]},{40:1793,79:75,89:V,184:99,189:$,240:[1,1794]},{40:1795,79:75,89:V,184:99,189:$,240:[1,1796]},i(m1,[2,274],{250:1797,251:[1,1798]}),{252:1799,253:[2,1109],770:[1,1800]},i(Jc,[2,261],{74:cl}),i(ll,[2,242]),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1679,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,235:1801,236:g1,237:_1,238:y1,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1802,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{77:[1,1803]},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1679,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,233:1804,235:1675,236:g1,237:_1,238:y1,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1679,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,233:1805,235:1675,236:g1,237:_1,238:y1,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{78:[1,1806]},{78:[2,1062]},{77:[1,1807]},{77:[1,1808]},{74:ys,78:[1,1809]},i(wa,[2,214]),{2:p,3:1810,4:f,5:v},{2:p,3:1811,4:f,5:v,76:[1,1812]},{2:p,3:1813,4:f,5:v,76:[1,1814]},i(Gr,[2,1135],{399:1815,398:1816,77:fh}),{78:[1,1817]},{131:rt,196:1818},i(Gr,[2,565]),{78:[1,1819],99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},i(Gr,[2,526]),i(Xl,[2,507]),i(Xl,[2,508]),i(Xl,[2,509]),i(Vn,[2,518]),{2:p,3:1821,4:f,5:v,77:[2,1127],376:1820},{77:[1,1822]},{2:p,3:1824,4:f,5:v,77:[2,1133],388:1823},i(W1,[2,1132]),{77:[1,1825]},{77:[1,1826]},i($e,[2,617]),i($e,[2,1142]),i(f1,Yc,{366:1646,365:1827,372:Kc}),{74:ys,78:[1,1828]},i(Pn,[2,723],{74:Je}),{74:ys,78:[1,1829]},i(Pn,[2,725]),i(Pn,[2,718]),{99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,314:[1,1830],316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},i(Pn,[2,721]),{99:Ui,112:Ri,114:632,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,314:[1,1831],316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,332:644,335:Ji,336:ni,337:Pi,338:Qi},i(Pn,[2,719]),i(ua,[2,252]),{40:1832,79:75,89:V,184:99,189:$,240:[1,1833]},{40:1834,79:75,89:V,184:99,189:$},i(ua,[2,254]),{40:1835,79:75,89:V,184:99,189:$},i(ua,[2,255]),{40:1836,79:75,89:V,184:99,189:$},i(m1,[2,272]),{131:rt,196:1837},{253:[1,1838]},{253:[2,1110]},i(Jl,[2,244]),i(ll,[2,250],{114:632,332:644,99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1679,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,233:1839,235:1675,236:g1,237:_1,238:y1,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{74:H1,78:[1,1840]},{74:H1,78:[1,1841]},i(bt,[2,1063],{97:1842,104:1843,3:1845,2:p,4:f,5:v,76:io}),{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1848,103:1846,105:1847,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:1021,4:f,5:v,100:1849,111:1455},i(zn,[2,237]),i(wa,[2,215]),i(zn,[2,173]),{2:p,3:1850,4:f,5:v},i(zn,[2,175]),{2:p,3:1851,4:f,5:v},i(Gr,[2,560]),i(Gr,[2,1136]),i(Gr,[2,558]),{78:[1,1852]},i(Gr,[2,572]),{77:[1,1853]},{77:[2,1128]},{2:p,3:1855,4:f,5:v,132:Qc,377:1854},{77:[1,1857]},{77:[2,1134]},{2:p,3:1021,4:f,5:v,100:1858,111:1455},{2:p,3:1021,4:f,5:v,100:1859,111:1455},i($e,[2,621]),i($e,[2,731]),{348:[1,1861],349:[1,1860]},{344:Ec,467:1862},{340:xc,343:Lu,466:1863},i(ua,[2,253]),{40:1864,79:75,89:V,184:99,189:$},i(ua,[2,256]),i(ua,[2,258]),i(ua,[2,259]),i(m1,[2,275]),{131:[2,1111],254:1865,650:[1,1866]},{74:H1,78:[1,1867]},i(Jl,[2,246]),i(Jl,[2,247]),i(bt,[2,74]),i(bt,[2,1064]),{2:p,3:1868,4:f,5:v},i(bt,[2,78]),{74:[1,1870],78:[1,1869]},i(Vn,[2,80]),i(Vn,[2,81],{114:632,332:644,76:[1,1871],99:Ui,112:Ri,115:Xt,116:Wt,123:ii,124:Yi,133:di,136:ui,138:pi,139:Ki,140:Xi,141:Ai,142:Si,154:Gi,170:tr,171:ir,179:mi,180:oi,316:Ii,317:ri,318:yi,320:ki,321:si,322:gi,323:_i,324:wi,325:Bi,326:$i,327:ji,328:Vi,329:Oi,330:Ni,331:qi,335:Ji,336:ni,337:Pi,338:Qi}),{74:ys,78:[1,1872]},i(zn,[2,174]),i(zn,[2,176]),i(Gr,[2,562]),{2:p,3:1855,4:f,5:v,132:Qc,377:1873},{74:Tc,78:[1,1874]},i(Vn,[2,537]),i(Vn,[2,538]),{2:p,3:1021,4:f,5:v,100:1876,111:1455},{74:ys,78:[1,1877]},{74:ys,78:[1,1878]},{77:Ba,143:Xe,144:988,145:Bn,152:He,181:Ge,201:989,307:Ke,347:1879,424:193,425:Oe,429:De},{349:[1,1880]},i(Pn,[2,720]),i(Pn,[2,722]),i(ua,[2,257]),{131:rt,196:1881},{131:[2,1112]},i(Jl,[2,245]),i(bt,[2,77]),{78:[2,76]},{2:p,3:171,4:f,5:v,56:167,77:Fe,94:1848,105:1882,111:151,113:155,131:rt,132:Ve,137:Lt,143:Xe,144:163,145:yt,149:Tt,152:He,154:Ot,156:Le,158:170,179:Mt,180:At,181:Ge,196:153,200:149,201:157,202:158,244:Ye,245:ot,258:152,259:148,260:150,261:154,262:156,263:159,264:160,265:161,266:164,267:165,269:Ct,270:Et,271:F,275:dt,276:Pt,278:Rt,285:ft,286:mt,287:Qe,288:ut,289:st,290:lt,291:ht,292:it,294:Ue,295:Ze,296:qe,297:et,298:Pe,299:pt,300:_t,301:nt,302:xt,303:zt,304:$t,307:Ke,308:kt,317:St,322:Dt,424:193,425:Oe,429:De},{2:p,3:1883,4:f,5:v},{78:[1,1884]},{74:Tc,78:[1,1885]},{379:[1,1886]},{2:p,3:1887,4:f,5:v,132:[1,1888]},{74:ys,78:[1,1889]},i(Xr,[2,535]),i(Xr,[2,536]),i(Pn,[2,724],{74:Je}),i(Pn,[2,726]),i(mh,[2,1113],{255:1890,770:[1,1891]}),i(Vn,[2,79]),i(Vn,[2,82]),i(bt,[2,1065],{3:1845,101:1892,104:1893,2:p,4:f,5:v,76:io}),i(Xr,[2,527]),{2:p,3:248,4:f,5:v,199:1894},i(Vn,[2,539]),i(Vn,[2,540]),i(Xr,[2,534]),i(m1,[2,1115],{256:1895,420:[1,1896]}),i(mh,[2,1114]),i(bt,[2,75]),i(bt,[2,1066]),i(eu,[2,1129],{380:1897,382:1898,77:[1,1899]}),i(m1,[2,273]),i(m1,[2,1116]),i(Xr,[2,530],{381:1900,383:1901,230:[1,1902]}),i(eu,[2,1130]),{2:p,3:1855,4:f,5:v,132:Qc,377:1903},i(Xr,[2,528]),{230:[1,1905],384:1904},{343:[1,1906]},{74:Tc,78:[1,1907]},i(Xr,[2,531]),{340:[1,1908]},{385:[1,1909]},i(eu,[2,529]),{385:[1,1910]},{386:[1,1911]},{386:[1,1912]},{230:[2,532]},i(Xr,[2,533])],defaultActions:{105:[2,6],197:[2,342],198:[2,343],199:[2,344],200:[2,345],201:[2,346],202:[2,347],203:[2,348],204:[2,349],205:[2,350],206:[2,351],213:[2,704],598:[2,1152],660:[2,1117],661:[2,1118],717:[2,705],787:[2,1083],788:[2,1084],935:[2,455],936:[2,456],937:[2,457],996:[2,706],1301:[2,1162],1361:[2,707],1389:[2,1070],1448:[2,1160],1557:[2,516],1754:[2,1062],1800:[2,1110],1821:[2,1128],1824:[2,1134],1866:[2,1112],1869:[2,76],1911:[2,532]},parseError:function(ro,rr){if(rr.recoverable)this.trace(ro);else{var fr=new Error(ro);throw fr.hash=rr,fr}},parse:function(ro){var rr=this,fr=[0],W=[],tn=[null],A=[],Ea=this.table,I="",El=0,Yn=0,Va=0,yo=2,Lo=1,b1=A.slice.call(arguments,1),Sn=Object.create(this.lexer),Ua={yy:{}};for(var v1 in this.yy)Object.prototype.hasOwnProperty.call(this.yy,v1)&&(Ua.yy[v1]=this.yy[v1]);Sn.setInput(ro,Ua.yy),Ua.yy.lexer=Sn,Ua.yy.parser=this,typeof Sn.yylloc>"u"&&(Sn.yylloc={});var gn=Sn.yylloc;A.push(gn);var X1=Sn.options&&Sn.options.ranges;typeof Ua.yy.parseError=="function"?this.parseError=Ua.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function gh(qa){fr.length=fr.length-2*qa,tn.length=tn.length-qa,A.length=A.length-qa}for(var Sc=function(){var qa;return qa=Sn.lex()||Lo,typeof qa!="number"&&(qa=rr.symbols_[qa]||qa),qa},Kn,ul,bo,no,iu,Ac,Uo={},x1,so,J1,ru;;){if(bo=fr[fr.length-1],this.defaultActions[bo]?no=this.defaultActions[bo]:((Kn===null||typeof Kn>"u")&&(Kn=Sc()),no=Ea[bo]&&Ea[bo][Kn]),typeof no>"u"||!no.length||!no[0]){var Y1,qo="",_h=function(qa){for(var w1=fr.length-1,nu=0;;){if(yo.toString()in Ea[qa])return nu;if(qa===0||w1<2)return!1;w1-=2,qa=fr[w1],++nu}};if(Va)ul!==Lo&&(Y1=_h(bo));else{Y1=_h(bo),ru=[];for(x1 in Ea[bo])this.terminals_[x1]&&x1>yo&&ru.push("'"+this.terminals_[x1]+"'");Sn.showPosition?qo="Parse error on line "+(El+1)+`:
`+Sn.showPosition()+`
Expecting `+ru.join(", ")+", got '"+(this.terminals_[Kn]||Kn)+"'":qo="Parse error on line "+(El+1)+": Unexpected "+(Kn==Lo?"end of input":"'"+(this.terminals_[Kn]||Kn)+"'"),this.parseError(qo,{text:Sn.match,token:this.terminals_[Kn]||Kn,line:Sn.yylineno,loc:gn,expected:ru,recoverable:Y1!==!1})}if(Va==3){if(Kn===Lo||ul===Lo)throw new Error(qo||"Parsing halted while starting to recover from another error.");Yn=Sn.yyleng,I=Sn.yytext,El=Sn.yylineno,gn=Sn.yylloc,Kn=Sc()}if(Y1===!1)throw new Error(qo||"Parsing halted. No suitable error recovery rule available.");gh(Y1),ul=Kn==yo?null:Kn,Kn=yo,bo=fr[fr.length-1],no=Ea[bo]&&Ea[bo][yo],Va=3}if(no[0]instanceof Array&&no.length>1)throw new Error("Parse Error: multiple actions possible at state: "+bo+", token: "+Kn);switch(no[0]){case 1:fr.push(Kn),tn.push(Sn.yytext),A.push(Sn.yylloc),fr.push(no[1]),Kn=null,ul?(Kn=ul,ul=null):(Yn=Sn.yyleng,I=Sn.yytext,El=Sn.yylineno,gn=Sn.yylloc,Va>0&&Va--);break;case 2:if(so=this.productions_[no[1]][1],Uo.$=tn[tn.length-so],Uo._$={first_line:A[A.length-(so||1)].first_line,last_line:A[A.length-1].last_line,first_column:A[A.length-(so||1)].first_column,last_column:A[A.length-1].last_column},X1&&(Uo._$.range=[A[A.length-(so||1)].range[0],A[A.length-1].range[1]]),Ac=this.performAction.apply(Uo,[I,Yn,El,Ua.yy,no[1],tn,A].concat(b1)),typeof Ac<"u")return Ac;so&&(fr=fr.slice(0,-1*so*2),tn=tn.slice(0,-1*so),A=A.slice(0,-1*so)),fr.push(this.productions_[no[1]][0]),tn.push(Uo.$),A.push(Uo._$),J1=Ea[fr[fr.length-2]][fr[fr.length-1]],fr.push(J1);break;case 3:return!0}}return!0}},a2=["A","ABSENT","ABSOLUTE","ACCORDING","ACTION","ADA","ADD","ADMIN","AFTER","ALWAYS","ASC","ASSERTION","ASSIGNMENT","ATTRIBUTE","ATTRIBUTES","BASE64","BEFORE","BERNOULLI","BLOCKED","BOM","BREADTH","C","CASCADE","CATALOG","CATALOG_NAME","CHAIN","CHARACTERISTICS","CHARACTERS","CHARACTER_SET_CATALOG","CHARACTER_SET_NAME","CHARACTER_SET_SCHEMA","CLASS_ORIGIN","COBOL","COLLATION","COLLATION_CATALOG","COLLATION_NAME","COLLATION_SCHEMA","COLUMNS","COLUMN_NAME","COMMAND_FUNCTION","COMMAND_FUNCTION_CODE","COMMITTED","CONDITION_NUMBER","CONNECTION","CONNECTION_NAME","CONSTRAINTS","CONSTRAINT_CATALOG","CONSTRAINT_NAME","CONSTRAINT_SCHEMA","CONSTRUCTOR","CONTENT","CONTINUE","CONTROL","CURSOR_NAME","DATA","DATETIME_INTERVAL_CODE","DATETIME_INTERVAL_PRECISION","DB","DEFAULTS","DEFERRABLE","DEFERRED","DEFINED","DEFINER","DEGREE","DEPTH","DERIVED","DESC","DESCRIPTOR","DIAGNOSTICS","DISPATCH","DOCUMENT","DOMAIN","DYNAMIC_FUNCTION","DYNAMIC_FUNCTION_CODE","EMPTY","ENCODING","ENFORCED","EXCLUDE","EXCLUDING","EXPRESSION","FILE","FINAL","FIRST","FLAG","FOLLOWING","FORTRAN","FOUND","FS","G","GENERAL","GENERATED","GO","GOTO","GRANTED","HEX","HIERARCHY","ID","IGNORE","IMMEDIATE","IMMEDIATELY","IMPLEMENTATION","INCLUDING","INCREMENT","INDENT","INITIALLY","INPUT","INSTANCE","INSTANTIABLE","INSTEAD","INTEGRITY","INVOKER","ISOLATION","K","KEY","KEY_MEMBER","KEY_TYPE","LAST","LENGTH","LEVEL","LIBRARY","LIMIT","LINK","LOCATION","LOCATOR","M","MAP","MAPPING","MATCHED","MAXVALUE","MESSAGE_LENGTH","MESSAGE_OCTET_LENGTH","MESSAGE_TEXT","MINVALUE","MORE","MUMPS","NAME","NAMES","NAMESPACE","NESTING","NEXT","NFC","NFD","NFKC","NFKD","NIL","NORMALIZED","NULLABLE","NULLS","NUMBER","OBJECT","OCTETS","OFF","OPTION","OPTIONS","ORDERING","ORDINALITY","OTHERS","OUTPUT","OVERRIDING","P","PAD","PARAMETER_MODE","PARAMETER_NAME","PARAMETER_ORDINAL_POSITION","PARAMETER_SPECIFIC_CATALOG","PARAMETER_SPECIFIC_NAME","PARAMETER_SPECIFIC_SCHEMA","PARTIAL","PASCAL","PASSING","PASSTHROUGH","PATH","PERMISSION","PLACING","PLI","PRECEDING","PRESERVE","PRIOR","PRIVILEGES","PUBLIC","READ","RECOVERY","RELATIVE","REPEATABLE","REQUIRING","RESPECT","RESTART","RESTORE","RESTRICT","RETURNED_CARDINALITY","RETURNED_LENGTH","RETURNED_OCTET_LENGTH","RETURNED_SQLSTATE","RETURNING","ROLE","ROUTINE","ROUTINE_CATALOG","ROUTINE_NAME","ROUTINE_SCHEMA","ROW_COUNT","SCALE","SCHEMA","SCHEMA_NAME","SCOPE_CATALOG","SCOPE_NAME","SCOPE_SCHEMA","SECTION","SECURITY","SELECTIVE","SELF","SEQUENCE","SERIALIZABLE","SERVER","SERVER_NAME","SESSION","SETS","SIMPLE","SIZE","SOURCE","SPACE","SPECIFIC_NAME","STANDALONE","STATE","STATEMENT","STRIP","STRUCTURE","STYLE","SUBCLASS_ORIGIN","T","TABLE_NAME","TEMPORARY","TIES","TOKEN","TOP_LEVEL_COUNT","TRANSACTION","TRANSACTIONS_COMMITTED","TRANSACTIONS_ROLLED_BACK","TRANSACTION_ACTIVE","TRANSFORM","TRANSFORMS","TRIGGER_CATALOG","TRIGGER_NAME","TRIGGER_SCHEMA","TYPE","UNBOUNDED","UNCOMMITTED","UNDER","UNLINK","UNNAMED","UNTYPED","URI","USAGE","USER_DEFINED_TYPE_CATALOG","USER_DEFINED_TYPE_CODE","USER_DEFINED_TYPE_NAME","USER_DEFINED_TYPE_SCHEMA","VALID","VERSION","VIEW","WHITESPACE","WORK","WRAPPER","WRITE","XMLDECLARATION","XMLSCHEMA","YES","ZONE"];tu.parseError=function(ro,rr){if(!(rr.expected&&rr.expected.indexOf("'LITERAL'")>-1&&/[a-zA-Z_][a-zA-Z_0-9]*/.test(rr.token)&&a2.indexOf(rr.token)>-1))throw new SyntaxError(ro)};var o2=function(){var ro={EOF:1,parseError:function(rr,fr){if(this.yy.parser)this.yy.parser.parseError(rr,fr);else throw new Error(rr)},setInput:function(rr,fr){return this.yy=fr||this.yy||{},this._input=rr,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var rr=this._input[0];this.yytext+=rr,this.yyleng++,this.offset++,this.match+=rr,this.matched+=rr;var fr=rr.match(/(?:\r\n?|\n).*/g);return fr?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),rr},unput:function(rr){var fr=rr.length,W=rr.split(/(?:\r\n?|\n)/g);this._input=rr+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-fr),this.offset-=fr;var tn=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),W.length-1&&(this.yylineno-=W.length-1);var A=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:W?(W.length===tn.length?this.yylloc.first_column:0)+tn[tn.length-W.length].length-W[0].length:this.yylloc.first_column-fr},this.options.ranges&&(this.yylloc.range=[A[0],A[0]+this.yyleng-fr]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(rr){this.unput(this.match.slice(rr))},pastInput:function(){var rr=this.matched.substr(0,this.matched.length-this.match.length);return(rr.length>20?"...":"")+rr.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var rr=this.match;return rr.length<20&&(rr+=this._input.substr(0,20-rr.length)),(rr.substr(0,20)+(rr.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var rr=this.pastInput(),fr=new Array(rr.length+1).join("-");return rr+this.upcomingInput()+`
`+fr+"^"},test_match:function(rr,fr){var W,tn,A;if(this.options.backtrack_lexer&&(A={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(A.yylloc.range=this.yylloc.range.slice(0))),tn=rr[0].match(/(?:\r\n?|\n).*/g),tn&&(this.yylineno+=tn.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:tn?tn[tn.length-1].length-tn[tn.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+rr[0].length},this.yytext+=rr[0],this.match+=rr[0],this.matches=rr,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(rr[0].length),this.matched+=rr[0],W=this.performAction.call(this,this.yy,this,fr,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),W)return W;if(this._backtrack){for(var Ea in A)this[Ea]=A[Ea];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var rr,fr,W,tn;this._more||(this.yytext="",this.match="");for(var A=this._currentRules(),Ea=0;Ea<A.length;Ea++)if(W=this._input.match(this.rules[A[Ea]]),W&&(!fr||W[0].length>fr[0].length)){if(fr=W,tn=Ea,this.options.backtrack_lexer){if(rr=this.test_match(W,A[Ea]),rr!==!1)return rr;if(this._backtrack){fr=!1;continue}else return!1}else if(!this.options.flex)break}return fr?(rr=this.test_match(fr,A[tn]),rr!==!1?rr:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var rr=this.next();return rr||this.lex()},begin:function(rr){this.conditionStack.push(rr)},popState:function(){var rr=this.conditionStack.length-1;return rr>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(rr){return rr=this.conditionStack.length-1-Math.abs(rr||0),rr>=0?this.conditionStack[rr]:"INITIAL"},pushState:function(rr){this.begin(rr)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(rr,fr,W,tn){var A=tn;switch(W){case 0:return 271;case 1:return 307;case 2:return 425;case 3:return 304;case 4:return 5;case 5:return 5;case 6:return 301;case 7:return 301;case 8:return 132;case 9:return 132;case 10:return;case 11:break;case 12:return 321;case 13:return 324;case 14:return fr.yytext="VALUE",89;case 15:return fr.yytext="VALUE",189;case 16:return fr.yytext="ROW",189;case 17:return fr.yytext="COLUMN",189;case 18:return fr.yytext="MATRIX",189;case 19:return fr.yytext="INDEX",189;case 20:return fr.yytext="RECORDSET",189;case 21:return fr.yytext="TEXT",189;case 22:return fr.yytext="SELECT",189;case 23:return 525;case 24:return 386;case 25:return 407;case 26:return 520;case 27:return 291;case 28:return 274;case 29:return 274;case 30:return 164;case 31:return 405;case 32:return 170;case 33:return 229;case 34:return 166;case 35:return 207;case 36:return 292;case 37:return 76;case 38:return 423;case 39:return 246;case 40:return 409;case 41:return 361;case 42:return 290;case 43:return 519;case 44:return 442;case 45:return 335;case 46:return 446;case 47:return 336;case 48:return 320;case 49:return 119;case 50:return 112;case 51:return 320;case 52:return 112;case 53:return 320;case 54:return 112;case 55:return 320;case 56:return 513;case 57:return 308;case 58:return 276;case 59:return 373;case 60:return 130;case 61:return"CLOSE";case 62:return 247;case 63:return 190;case 64:return 190;case 65:return 439;case 66:return 372;case 67:return 475;case 68:return 445;case 69:return 278;case 70:return 240;case 71:return 287;case 72:return 272;case 73:return 206;case 74:return 238;case 75:return 269;case 76:return 270;case 77:return 270;case 78:return"CURSOR";case 79:return 410;case 80:return 295;case 81:return 296;case 82:return 297;case 83:return 453;case 84:return 348;case 85:return 343;case 86:return"DELETED";case 87:return 246;case 88:return 411;case 89:return 185;case 90:return 401;case 91:return 452;case 92:return 135;case 93:return 311;case 94:return 394;case 95:return 315;case 96:return 319;case 97:return 169;case 98:return 513;case 99:return 513;case 100:return 303;case 101:return 14;case 102:return 300;case 103:return 253;case 104:return 244;case 105:return 95;case 106:return 378;case 107:return 183;case 108:return 227;case 109:return 273;case 110:return 318;case 111:return 607;case 112:return 477;case 113:return 232;case 114:return 236;case 115:return 239;case 116:return 156;case 117:return 361;case 118:return 337;case 119:return 99;case 120:return 193;case 121:return 212;case 122:return 224;case 123:return 521;case 124:return 344;case 125:return 213;case 126:return 168;case 127:return 298;case 128:return 198;case 129:return 223;case 130:return 375;case 131:return 245;case 132:return"LET";case 133:return 225;case 134:return 112;case 135:return 249;case 136:return 465;case 137:return 191;case 138:return 289;case 139:return 395;case 140:return 288;case 141:return 457;case 142:return 169;case 143:return 408;case 144:return 222;case 145:return 650;case 146:return 275;case 147:return 248;case 148:return 385;case 149:return 154;case 150:return 302;case 151:return 243;case 152:return 438;case 153:return 230;case 154:return 420;case 155:return 129;case 156:return 251;case 157:return"OPEN";case 158:return 421;case 159:return 171;case 160:return 118;case 161:return 208;case 162:return 281;case 163:return 172;case 164:return 284;case 165:return 769;case 166:return 93;case 167:return 16;case 168:return 374;case 169:return 447;case 170:return 682;case 171:return 15;case 172:return 419;case 173:return 194;case 174:return"REDUCE";case 175:return 379;case 176:return 316;case 177:return 522;case 178:return 686;case 179:return 107;case 180:return 406;case 181:return 175;case 182:return 294;case 183:return 448;case 184:return 691;case 185:return 173;case 186:return 173;case 187:return 226;case 188:return 441;case 189:return 237;case 190:return 150;case 191:return 770;case 192:return 410;case 193:return 89;case 194:return 228;case 195:return 146;case 196:return 146;case 197:return 414;case 198:return 339;case 199:return 422;case 200:return"STRATEGY";case 201:return"STORE";case 202:return 285;case 203:return 286;case 204:return 358;case 205:return 358;case 206:return 468;case 207:return 362;case 208:return 362;case 209:return 192;case 210:return 314;case 211:return"TIMEOUT";case 212:return 148;case 213:return 195;case 214:return 440;case 215:return 440;case 216:return 514;case 217:return 299;case 218:return 456;case 219:return 162;case 220:return 187;case 221:return 98;case 222:return 340;case 223:return 413;case 224:return 231;case 225:return 149;case 226:return 349;case 227:return 134;case 228:return 415;case 229:return 313;case 230:return 128;case 231:return 444;case 232:return 72;case 233:return 440;case 234:return 131;case 235:return 115;case 236:return 137;case 237:return 179;case 238:return 322;case 239:return 180;case 240:return 133;case 241:return 138;case 242:return 331;case 243:return 328;case 244:return 330;case 245:return 327;case 246:return 325;case 247:return 323;case 248:return 324;case 249:return 142;case 250:return 141;case 251:return 139;case 252:return 326;case 253:return 329;case 254:return 140;case 255:return 124;case 256:return 329;case 257:return 77;case 258:return 78;case 259:return 145;case 260:return 429;case 261:return 431;case 262:return 305;case 263:return 510;case 264:return 512;case 265:return 122;case 266:return 116;case 267:return 74;case 268:return 338;case 269:return 152;case 270:return 768;case 271:return 143;case 272:return 181;case 273:return 136;case 274:return 123;case 275:return 317;case 276:return 4;case 277:return 10;case 278:return"INVALID"}},rules:[/^(?:``([^\`])+``)/i,/^(?:\[\?\])/i,/^(?:@\[)/i,/^(?:ARRAY\[)/i,/^(?:\[([^\]'])*?\])/i,/^(?:`([^\`'])*?`)/i,/^(?:N(['](\\.|[^']|\\')*?['])+)/i,/^(?:X(['](\\.|[^']|\\')*?['])+)/i,/^(?:(['](\\.|[^']|\\')*?['])+)/i,/^(?:(["](\\.|[^"]|\\")*?["])+)/i,/^(?:--(.*?)($|\r\n|\r|\n))/i,/^(?:\s+)/i,/^(?:\|\|)/i,/^(?:\|)/i,/^(?:VALUE\s+OF\s+SEARCH\b)/i,/^(?:VALUE\s+OF\s+SELECT\b)/i,/^(?:ROW\s+OF\s+SELECT\b)/i,/^(?:COLUMN\s+OF\s+SELECT\b)/i,/^(?:MATRIX\s+OF\s+SELECT\b)/i,/^(?:INDEX\s+OF\s+SELECT\b)/i,/^(?:RECORDSET\s+OF\s+SELECT\b)/i,/^(?:TEXT\s+OF\s+SELECT\b)/i,/^(?:SELECT\b)/i,/^(?:ABSOLUTE\b)/i,/^(?:ACTION\b)/i,/^(?:ADD\b)/i,/^(?:AFTER\b)/i,/^(?:AGGR\b)/i,/^(?:AGGREGATE\b)/i,/^(?:AGGREGATOR\b)/i,/^(?:ALL\b)/i,/^(?:ALTER\b)/i,/^(?:AND\b)/i,/^(?:ANTI\b)/i,/^(?:ANY\b)/i,/^(?:APPLY\b)/i,/^(?:ARRAY\b)/i,/^(?:AS\b)/i,/^(?:ASSERT\b)/i,/^(?:ASC\b)/i,/^(?:ATTACH\b)/i,/^(?:AUTO(_)?INCREMENT\b)/i,/^(?:AVG\b)/i,/^(?:BEFORE\b)/i,/^(?:BEGIN\b)/i,/^(?:BETWEEN\b)/i,/^(?:BREAK\b)/i,/^(?:NOT\s+BETWEEN\b)/i,/^(?:NOT\s+LIKE\b)/i,/^(?:BY\b)/i,/^(?:~~\*)/i,/^(?:!~~\*)/i,/^(?:~~)/i,/^(?:!~~)/i,/^(?:ILIKE\b)/i,/^(?:NOT\s+ILIKE\b)/i,/^(?:CALL\b)/i,/^(?:CASE\b)/i,/^(?:CAST\b)/i,/^(?:CHECK\b)/i,/^(?:CLASS\b)/i,/^(?:CLOSE\b)/i,/^(?:COLLATE\b)/i,/^(?:COLUMN\b)/i,/^(?:COLUMNS\b)/i,/^(?:COMMIT\b)/i,/^(?:CONSTRAINT\b)/i,/^(?:CONTENT\b)/i,/^(?:CONTINUE\b)/i,/^(?:CONVERT\b)/i,/^(?:CORRESPONDING\b)/i,/^(?:COUNT\b)/i,/^(?:CREATE\b)/i,/^(?:CROSS\b)/i,/^(?:CUBE\b)/i,/^(?:CURRENT_TIMESTAMP\b)/i,/^(?:CURRENT_DATE\b)/i,/^(?:CURDATE\b)/i,/^(?:CURSOR\b)/i,/^(?:DATABASE(S)?)/i,/^(?:DATEADD\b)/i,/^(?:DATEDIFF\b)/i,/^(?:TIMESTAMPDIFF\b)/i,/^(?:DECLARE\b)/i,/^(?:DEFAULT\b)/i,/^(?:DELETE\b)/i,/^(?:DELETED\b)/i,/^(?:DESC\b)/i,/^(?:DETACH\b)/i,/^(?:DISTINCT\b)/i,/^(?:DROP\b)/i,/^(?:ECHO\b)/i,/^(?:EDGE\b)/i,/^(?:END\b)/i,/^(?:ENUM\b)/i,/^(?:ELSE\b)/i,/^(?:ESCAPE\b)/i,/^(?:EXCEPT\b)/i,/^(?:EXEC\b)/i,/^(?:EXECUTE\b)/i,/^(?:EXISTS\b)/i,/^(?:EXPLAIN\b)/i,/^(?:FALSE\b)/i,/^(?:FETCH\b)/i,/^(?:FIRST\b)/i,/^(?:FOR\b)/i,/^(?:FOREIGN\b)/i,/^(?:FROM\b)/i,/^(?:FULL\b)/i,/^(?:FUNCTION\b)/i,/^(?:GLOB\b)/i,/^(?:GO\b)/i,/^(?:GRAPH\b)/i,/^(?:GROUP\b)/i,/^(?:GROUPING\b)/i,/^(?:HAVING\b)/i,/^(?:IF\b)/i,/^(?:IDENTITY\b)/i,/^(?:IS\b)/i,/^(?:IN\b)/i,/^(?:INDEX\b)/i,/^(?:INDEXED\b)/i,/^(?:INNER\b)/i,/^(?:INSTEAD\b)/i,/^(?:INSERT\b)/i,/^(?:INSERTED\b)/i,/^(?:INTERSECT\b)/i,/^(?:INTERVAL\b)/i,/^(?:INTO\b)/i,/^(?:JOIN\b)/i,/^(?:KEY\b)/i,/^(?:LAST\b)/i,/^(?:LET\b)/i,/^(?:LEFT\b)/i,/^(?:LIKE\b)/i,/^(?:LIMIT\b)/i,/^(?:MATCHED\b)/i,/^(?:MATRIX\b)/i,/^(?:MAX\s*(?=\())/i,/^(?:MAX\s*(?=(,|\))))/i,/^(?:MIN\s*(?=\())/i,/^(?:MERGE\b)/i,/^(?:MINUS\b)/i,/^(?:MODIFY\b)/i,/^(?:NATURAL\b)/i,/^(?:NEXT\b)/i,/^(?:NEW\b)/i,/^(?:NOCASE\b)/i,/^(?:NO\b)/i,/^(?:NOT\b)/i,/^(?:NULL\b)/i,/^(?:NULLS\b)/i,/^(?:OFF\b)/i,/^(?:ON\b)/i,/^(?:ONLY\b)/i,/^(?:OF\b)/i,/^(?:OFFSET\b)/i,/^(?:OPEN\b)/i,/^(?:OPTION\b)/i,/^(?:OR\b)/i,/^(?:ORDER\b)/i,/^(?:OUTER\b)/i,/^(?:OVER\b)/i,/^(?:PATH\b)/i,/^(?:PARTITION\b)/i,/^(?:PERCENT\b)/i,/^(?:PIVOT\b)/i,/^(?:PLAN\b)/i,/^(?:PRIMARY\b)/i,/^(?:PRINT\b)/i,/^(?:PRIOR\b)/i,/^(?:QUERY\b)/i,/^(?:READ\b)/i,/^(?:RECORDSET\b)/i,/^(?:REDUCE\b)/i,/^(?:REFERENCES\b)/i,/^(?:REGEXP\b)/i,/^(?:REINDEX\b)/i,/^(?:RELATIVE\b)/i,/^(?:REMOVE\b)/i,/^(?:RENAME\b)/i,/^(?:REPEAT\b)/i,/^(?:REPLACE\b)/i,/^(?:REQUIRE\b)/i,/^(?:RESTORE\b)/i,/^(?:RETURN\b)/i,/^(?:RETURNS\b)/i,/^(?:RIGHT\b)/i,/^(?:ROLLBACK\b)/i,/^(?:ROLLUP\b)/i,/^(?:ROW\b)/i,/^(?:ROWS\b)/i,/^(?:SCHEMA(S)?)/i,/^(?:SEARCH\b)/i,/^(?:SEMI\b)/i,/^(?:SET\b)/i,/^(?:SETS\b)/i,/^(?:SHOW\b)/i,/^(?:SOME\b)/i,/^(?:SOURCE\b)/i,/^(?:STRATEGY\b)/i,/^(?:STORE\b)/i,/^(?:SUM\b)/i,/^(?:TOTAL\b)/i,/^(?:TABLE\b)/i,/^(?:TABLES\b)/i,/^(?:TARGET\b)/i,/^(?:TEMP\b)/i,/^(?:TEMPORARY\b)/i,/^(?:TEXTSTRING\b)/i,/^(?:THEN\b)/i,/^(?:TIMEOUT\b)/i,/^(?:TO\b)/i,/^(?:TOP\b)/i,/^(?:TRAN\b)/i,/^(?:TRANSACTION\b)/i,/^(?:TRIGGER\b)/i,/^(?:TRUE\b)/i,/^(?:TRUNCATE\b)/i,/^(?:UNION\b)/i,/^(?:UNIQUE\b)/i,/^(?:UNPIVOT\b)/i,/^(?:UPDATE\b)/i,/^(?:USE\b)/i,/^(?:USING\b)/i,/^(?:VALUE\b)/i,/^(?:VALUES\b)/i,/^(?:VERTEX\b)/i,/^(?:VIEW\b)/i,/^(?:WHEN\b)/i,/^(?:WHERE\b)/i,/^(?:WHILE\b)/i,/^(?:WITH\b)/i,/^(?:WORK\b)/i,/^(?:(\d+\.?\d*|\.\d+)([eE][+-]?\d+)?)/i,/^(?:->)/i,/^(?:#)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:\*)/i,/^(?:\/)/i,/^(?:%)/i,/^(?:!===)/i,/^(?:===)/i,/^(?:!==)/i,/^(?:==)/i,/^(?:>=)/i,/^(?:&)/i,/^(?:\|)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:<>)/i,/^(?:<)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:\()/i,/^(?:\))/i,/^(?:@)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:\])/i,/^(?::-)/i,/^(?:\?-)/i,/^(?:\.\.)/i,/^(?:\.)/i,/^(?:,)/i,/^(?:::)/i,/^(?::)/i,/^(?:;)/i,/^(?:\$)/i,/^(?:\?)/i,/^(?:!)/i,/^(?:\^)/i,/^(?:~)/i,/^(?:[0-9]*[a-zA-Z_]+[a-zA-Z_0-9]*)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278],inclusive:!0}}};return ro}();tu.lexer=o2;function Nu(){this.yy={}}return Nu.prototype=tu,tu.Parser=Nu,new Nu}();typeof w<"u"&&typeof e1<"u"&&(e1.parser=ee,e1.Parser=ee.Parser,e1.parse=function(){return ee.parse.apply(ee,arguments)},e1.main=function(i){i[1]||(console.log("Usage: "+i[0]+" FILE"),process.exit(1));var _=w("fs").readFileSync(w("path").normalize(i[1]),"utf8");return e1.parser.parse(_)},typeof qc<"u"&&w.main===qc&&e1.main(process.argv.slice(1))),y.prettyflag=!1,y.pretty=function(i,_){var p=y.prettyflag;y.prettyflag=!_;var f=y.parse(i).toString();return y.prettyflag=p,f};var R=y.utils={};function u(i){return"(y="+i+",y===y?y:undefined)"}function tt(i,_){return"(y="+i+',typeof y=="undefined"?undefined:'+_+")"}function Nt(){return!0}function ai(){}var ci=R.escapeq=function(i){return(""+i).replace(/["'\\\n\r\u2028\u2029]/g,function(_){switch(_){case'"':case"'":case"\\":return"\\"+_;case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}})},Vt=R.undoubleq=function(i){return i.replace(/(\')/g,"''")},Ne=R.doubleq=function(i){return i.replace(/(\'\')/g,"\\'")},bi=R.doubleqq=function(i){return i.replace(/'/g,"\\'")},gr=function(i){return i[0]==="\uFEFF"&&(i=i.substr(1)),i};R.global=function(){return typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:Function("return this")()}();var Hr=R.isNativeFunction=function(i){return typeof i=="function"&&!!~i.toString().indexOf("[native code]")};R.isWebWorker=function(){try{var i=R.global.importScripts;return R.isNativeFunction(i)}catch{return!1}}(),R.isNode=function(){try{return!(typeof process>"u"||!process.versions||!process.versions.node)}catch{return!1}}(),R.isBrowser=function(){try{return R.isNativeFunction(R.global.location.reload)}catch{return!1}}(),R.isBrowserify=function(){return R.isBrowser&&typeof process<"u"&&process.browser}(),R.isRequireJS=function(){return R.isBrowser&&typeof w=="function"&&typeof w.specified=="function"}(),R.isMeteor=function(){return typeof Meteor<"u"&&Meteor.release}(),R.isMeteorClient=R.isMeteorClient=function(){return R.isMeteor&&Meteor.isClient}(),R.isMeteorServer=function(){return R.isMeteor&&Meteor.isServer}(),R.isCordova=function(){return typeof cordova=="object"}(),R.isReactNative=function(){var i=!1;return i}(),R.hasIndexedDB=function(){return!!R.global.indexedDB}(),R.isArray=function(i){return Object.prototype.toString.call(i)==="[object Array]"};let Ar=/^[a-z]+:\/\//i,Mr=R.loadFile=function(i,_,p,f){var v,T;if(!(R.isNode||R.isMeteorServer)){if(R.isCordova){R.global.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(ae){ae.root.getFile(i,{create:!1},function(ie){ie.file(function(Q){var $=new FileReader;$.onloadend=function(F){p(gr(this.result))},$.readAsText(Q)})})});return}if(typeof i=="string"){if(i.substr(0,1)==="#"&&typeof document<"u"){v=document.querySelector(i).textContent,p(v);return}Nr(i,ae=>p(gr(ae)),f,_);return}if(i instanceof Event){var P=i.target.files,D=new FileReader,V=P[0].name;D.onload=function(ae){var ie=ae.target.result;p(gr(ie))},D.readAsText(P[0])}Nr(i,ae=>p(gr(ae)),f,_)}},en=typeof fetch<"u"?fetch:null;async function Nr(i,_,p,f){return f?Pr(i,_,p):await Pr(i,_,p)}function Pr(i,_,p){return en(i).then(f=>f.arrayBuffer()).then(f=>{var v=new Uint8Array(f),T=[...v].map(P=>String.fromCharCode(P)).join("");_(T)}).catch(f=>{if(p)return p(f);throw console.error(f),f})}var ur=R.loadBinaryFile=function(i,_,p,f=v=>{throw v}){var v;if(!(R.isNode||R.isMeteorServer))if(typeof i=="string"){var T=new XMLHttpRequest;T.open("GET",i,_),T.responseType="arraybuffer",T.onload=function(){for(var ae=new Uint8Array(T.response),ie=[],Q=0;Q<ae.length;++Q)ie[Q]=String.fromCharCode(ae[Q]);p(ie.join(""))},T.onerror=f,T.send()}else if(i instanceof Event){var P=i.target.files,D=new FileReader,V=P[0].name;D.onload=function(ae){var ie=ae.target.result;p(ie)},D.onerror=f,D.readAsArrayBuffer(P[0])}else i instanceof Blob&&p(i)},zr=R.removeFile=function(i,_){if(!R.isNode)throw new Error("You can remove files only in Node.js and Apache Cordova")},yr=R.deleteFile=function(i,_){};R.autoExtFilename=function(i,_,p){return p=p||{},typeof i!="string"||i.match(/^[A-Z]+:\/\/|\n|\..{2,6}$/i)||p.autoExt===0||p.autoExt===!1?i:i+"."+_};var xn=R.fileExists=function(i,_){if(!R.isNode)throw new Error("You can use exists() only in Node.js or Apach Cordova")},qn=R.saveFile=function(i,_,p,f){var v=1;if(i===void 0)v=_,p&&(v=p(v));else if(!R.isNode){var T={disableAutoBom:!1};y.utils.extend(T,f);var P=new Blob([_],{type:"text/plain;charset=utf-8"});hn(P,i,T.disableAutoBom),p&&(v=p(v))}return v},$r=R.hash=function(i){for(var _=2166136261,p=i.length;p;)_^=i.charCodeAt(--p),_+=(_<<1)+(_<<4)+(_<<7)+(_<<8)+(_<<24);return _},rn=R.arrayUnion=function(i,_){var p=_.slice(0);return i.forEach(function(f){p.indexOf(f)<0&&p.push(f)}),p},cn=R.arrayDiff=function(i,_){return i.filter(function(p){return _.indexOf(p)<0})},un=R.arrayIntersect=function(i,_){var p=[];return i.forEach(function(f){var v=!1;_.forEach(function(T){v=v||f===T}),v&&p.push(f)}),p},Gn=R.arrayUnionDeep=function(i,_){var p=_.slice(0);return i.forEach(function(f){var v=!1;p.forEach(function(T){v=v||An(f,T)}),v||p.push(f)}),p},Ia=R.arrayExceptDeep=function(i,_){var p=[];return i.forEach(function(f){var v=!1;_.forEach(function(T){v=v||An(f,T)}),v||p.push(f)}),p},Na=R.arrayIntersectDeep=function(i,_){var p=[];return i.forEach(function(f){var v=!1;_.forEach(function(T){v=v||An(f,T,!0)}),v&&p.push(f)}),p},Er=R.cloneDeep=function i(_){if(_===null||typeof _!="object")return _;if(_ instanceof Date)return new Date(_);if(_ instanceof String)return _.toString();if(_ instanceof Number)return+_;var p=new _.constructor;for(var f in _)_.hasOwnProperty(f)&&(p[f]=i(_[f]));return p},An=R.deepEqual=function(i,_){if(i===_)return!0;if(typeof i=="object"&&i!==null&&typeof _=="object"&&_!==null){if(Object.keys(i).length!==Object.keys(_).length)return!1;for(var p in i)if(!An(i[p],_[p]))return!1;return!0}return!1},Ps=R.distinctArray=function(i){for(var _={},p=0,f=i.length;p<f;p++){var v;typeof i[p]=="object"?v=Object.keys(i[p]).sort().map(function(D){return D+"`"+i[p][D]}).join("`"):v=i[p],_[v]=i[p]}var T=[];for(var P in _)T.push(_[P]);return T},Fr=R.extend=function(i,_){i=i||{};for(var p in _)_.hasOwnProperty(p)&&(i[p]=_[p]);return i},Ws=R.getValueOf=function(i){return typeof i=="object"&&(i instanceof String||i instanceof Number)?i.valueOf():i},Jo=R.flatArray=function(i){if(!i||i.length===0)return[];if(typeof i=="object"&&i instanceof y.Recordset)return i.data.map(function(p){return Ws(p[i.columns[0].columnid])});var _=Object.keys(i[0])[0];return _===void 0?[]:i.map(function(p){return p[_]})},Xs=R.arrayOfArrays=function(i){return i.map(function(_){var p=[];for(var f in _)p.push(_[f]);return p})};Array.isArray||(Array.isArray=function(i){return Object.prototype.toString.call(i)==="[object Array]"});var Zn=R.xlsnc=function(i){var _="";if(i>701){let f=((i-26)/676|0)-1;_=String.fromCharCode(65+f%26),i=i%(26*26)}var p=String.fromCharCode(65+i%26);return i>=26&&(i=(i/26|0)-1,p=String.fromCharCode(65+i%26)+p,i>26&&(i=(i/26|0)-1,p=String.fromCharCode(65+i%26)+p)),_+p},Ma=R.xlscn=function(i){var _=i.charCodeAt(0)-65;return i.length>1&&(_=(_+1)*26+i.charCodeAt(1)-65,i.length>2&&(_=(_+1)*26+i.charCodeAt(2)-65)),_},Hn=R.domEmptyChildren=function(i){for(var _=i.childNodes.length;_--;)i.removeChild(i.lastChild)},Pa={},oo=R.like=function(i,_,p){if(!Pa[i]){p||(p="");for(var f=0,v="^";f<i.length;){var T=i[f],P="";f<i.length-1&&(P=i[f+1]),T===p?(v+="\\"+P,f++):T==="["&&P==="^"?(v+="[^",f++):T==="["||T==="]"?v+=T:T==="%"?v+="[\\s\\S]*":T==="_"?v+=".":"/.*+?|(){}".indexOf(T)>-1?v+="\\"+T:v+=T,f++}v+="$",Pa[i]=RegExp(v,"i")}return(""+(_??"")).search(Pa[i])>-1};R.glob=function(i,_){for(var p=0,f="^";p<_.length;){var v=_[p],T="";p<_.length-1&&(T=_[p+1]),v==="["&&T==="^"?(f+="[^",p++):v==="["||v==="]"?f+=v:v==="*"?f+=".*":v==="?"?f+=".":"/.*+?|(){}".indexOf(v)>-1?f+="\\"+v:f+=v,p++}return f+="$",(""+(i||"")).toUpperCase().search(RegExp(f.toUpperCase()))>-1},R.findAlaSQLPath=function(){if(R.isWebWorker)return"";if(R.isMeteorClient)return"/packages/dist/";if(R.isMeteorServer)return"assets/packages/dist/";if(R.isNode)return N;if(R.isBrowser)for(var i=document.getElementsByTagName("script"),_=0;_<i.length;_++){if(i[_].src.substr(-16).toLowerCase()==="alasql-worker.js")return i[_].src.substr(0,i[_].src.length-16);if(i[_].src.substr(-20).toLowerCase()==="alasql-worker.min.js")return i[_].src.substr(0,i[_].src.length-20);if(i[_].src.substr(-9).toLowerCase()==="alasql.js")return i[_].src.substr(0,i[_].src.length-9);if(i[_].src.substr(-13).toLowerCase()==="alasql.min.js")return i[_].src.substr(0,i[_].src.length-13)}return""};var Rs=function(){var i=y.private.externalXlsxLib||R.global.XLSX||null;if(i)return i;if(R.isNode||R.isBrowserify||R.isMeteorServer,!i)throw new Error("Please include the xlsx.js library");return i};y.path=y.utils.findAlaSQLPath(),y.utils.uncomment=function(i){i=("__"+i+"__").split("");for(var _=!1,p,f=!1,v=!1,T=0,P=i.length;T<P;T++){var D=i[T-1]!=="\\"||i[T-2]==="\\";_?i[T]===p&&D&&(_=!1):f?i[T]==="*"&&i[T+1]==="/"?(i[T]=i[T+1]="",f=!1,T++):i[T]="":v?((i[T+1]===`
`||i[T+1]==="\r"||i.length-2===T)&&(v=!1),i[T]=""):i[T]==='"'||i[T]==="'"?(_=!0,p=i[T]):i[T]==="["&&i[T-1]!=="@"?(_=!0,p="]"):i[T]==="-"&&i[T+1]==="-"?(i[T]="",v=!0):i[T]==="/"&&i[T+1]==="*"&&(i[T]="",f=!0)}return i=i.join("").slice(2,-2),i},y.parser=ee,y.parser.parseError=function(i,_){throw new Error("Have you used a reserved keyword without `escaping` it?\n"+i)},y.parse=function(i){return ee.parse(y.utils.uncomment(i))},y.engines={},y.databases={},y.databasenum=0,y.options={errorlog:!1,valueof:!0,dropifnotexists:!1,datetimeformat:"sql",casesensitive:!0,logtarget:"output",logprompt:!0,progress:!1,modifier:void 0,columnlookup:10,autovertex:!0,usedbo:!0,autocommit:!0,cache:!0,tsql:!0,mysql:!0,postgres:!0,oracle:!0,sqlite:!0,orientdb:!0,nocount:!1,nan:!1,excel:{cellDates:!0},joinstar:"overwrite",loopbreak:1e5,dateAsString:!0},y.vars={},y.declares={},y.prompthistory=[],y.plugins={},y.from={},y.into={},y.fn={},y.aggr={},y.busy=0,y.MAXSQLCACHESIZE=1e4,y.DEFAULTDATABASEID="alasql",y.lastid=0,y.buffer={},y.private={externalXlsxLib:null},y.setXLSX=function(i){y.private.externalXlsxLib=i},y.use=function(i){if(i||(i=y.DEFAULTDATABASEID),y.useid!==i)if(y.databases[i]!==void 0){y.useid=i;let _=y.databases[y.useid];y.tables=_.tables,_.resetSqlCache(),y.options.usedbo&&(y.databases.dbo=_)}else throw Error("Database does not exist: "+i)},y.autoval=function(i,_,p,f){var v=f?y.databases[f]:y.databases[y.useid];if(!v.tables[i])throw new Error("Tablename not found: "+i);if(!v.tables[i].identities[_])throw new Error("Colname not found: "+_);return p?v.tables[i].identities[_].value||null:v.tables[i].identities[_].value-v.tables[i].identities[_].step||null},y.exec=function(i,_,p,f){if(typeof _=="function"&&(f=p,p=_,_={}),delete y.error,_=_||{},y.options.errorlog)try{return y.dexec(y.useid,i,_,p,f)}catch(v){y.error=v,p&&p(null,y.error)}else return y.dexec(y.useid,i,_,p,f)};function xs(i){i&&y.options.cache&&i&&i.query&&i.query.data&&(i.query.data=[])}y.dexec=function(i,_,p,f,v){var T=y.databases[i],P=$r(_);if(y.options.cache){let ie=T.sqlCache[P];if(ie&&T.dbversion===ie.dbversion){var D=ie(p,f);return xs(ie),D}}let V=T.astCache[P];if(y.options.cache&&!V?(V=y.parse(_),V&&(T.astCache[P]=V)):V=y.parse(_),!!V.statements){if(V.statements.length===0)return 0;if(V.statements.length===1){if(V.statements[0].compile){var ae=V.statements[0].compile(i,p);if(!ae)return;ae.sql=_,ae.dbversion=T.dbversion,y.options.cache&&(T.sqlCacheSize>y.MAXSQLCACHESIZE&&T.resetSqlCache(),T.sqlCacheSize++,T.sqlCache[P]=ae);var D=y.res=ae(p,f,v);return xs(ae),D}y.precompile(V.statements[0],y.useid,p);var D=y.res=V.statements[0].execute(i,p,f,v);return D}if(f){y.adrun(i,V,p,f,v);return}return y.drun(i,V,p,f,v)}},y.drun=function(i,_,p,f,v){var T=y.useid;T!==i&&y.use(i);for(var P=[],D=0,V=_.statements.length;D<V;D++)if(_.statements[D])if(_.statements[D].compile){var ae=_.statements[D].compile(y.useid);P.push(y.res=ae(p,null,v))}else y.precompile(_.statements[D],y.useid,p),P.push(y.res=_.statements[D].execute(y.useid,p));return T!==i&&y.use(T),f&&f(P),y.res=P,P},y.adrun=function(i,_,p,f,v){var T=0,P=_.statements.length;y.options.progress!==!1&&y.options.progress(P,T++);var D=y.useid;D!==i&&y.use(i);var V=[];function ae(ie){ie!==void 0&&V.push(ie);var Q=_.statements.shift();if(!Q){D!==i&&y.use(D),f(V);return}if(Q.compile){var $=Q.compile(y.useid);$(p,ae,v),y.options.progress!==!1&&y.options.progress(P,T++);return}y.precompile(_.statements[0],y.useid,p),Q.execute(y.useid,p,ae),y.options.progress!==!1&&y.options.progress(P,T++)}ae()},y.compile=function(i,_){_=_||y.useid;let p=y.parse(i);if(p.statements.length!==1)throw new Error("Cannot compile, because number of statements in SQL is not equal to 1");var f=p.statements[0].compile(_);return f.promise=function(v){return new Promise(function(T,P){f(v,function(D,V){V?P(V):T(D)})})},f},R.global.Promise||(R.global.Promise=Promise);var Js=function(i,_,p,f){return new R.global.Promise(function(v,T){y(i,_,function(P,D){D?T(D):(p&&f&&y.options.progress!==!1&&y.options.progress(p,f),v(P))})})};let hs=(i,_)=>{var p=_.resolve([]);return i.forEach(f=>{p=p.then(v=>Js(f.sql,f.params,f.i,f.length).then(T=>[...v,T]))}),p};var on=function(i){if(!(i.length<1)){for(var _,p,f,v=[],T=0;T<i.length;T++){if(_=i[T],typeof _=="string"&&(_=[_]),!R.isArray(_)||_.length<1||2<_.length)throw new Error("Error in .promise parameter");p=_[0],f=_[1]||void 0,v.push({sql:p,params:f,i:T,length:i.length})}return hs(v,R.global.Promise)}};y.promise=function(i,_){if(typeof Promise>"u")throw new Error("Please include a Promise/A+ library");if(typeof i=="string")return Js(i,_);if(!R.isArray(i)||i.length<1||typeof _<"u")throw new Error("Error in .promise parameters");return on(i)};var ks=y.Database=function(i){var _=this;if(_===y)if(i){if(_=y.databases[i],y.databases[i]=_,!_)throw new Error(`Database ${i} not found`)}else _=y.databases.alasql,y.options.tsql&&(y.databases.tempdb=y.databases.alasql);return i||(i="db"+y.databasenum++),_.databaseid=i,y.databases[i]=_,_.dbversion=0,_.tables={},_.views={},_.triggers={},_.indices={},_.objects={},_.counter=0,_.resetSqlCache(),_};ks.prototype.resetSqlCache=function(){this.sqlCache={},this.sqlCacheSize=0,this.astCache={}},ks.prototype.exec=function(i,_,p){return y.dexec(this.databaseid,i,_,p)},ks.prototype.autoval=function(i,_,p){return y.autoval(i,_,p,this.databaseid)},ks.prototype.transaction=function(i){var _=new y.Transaction(this.databaseid),p=i(_);return p};class Ha{transactionid=Date.now();committed=!1;bank;constructor(_){this.databaseid=_,this.dbversion=y.databases[_].dbversion,this.bank=JSON.stringify(y.databases[_])}commit(){this.committed=!0,y.databases[this.databaseid].dbversion=Date.now(),delete this.bank}rollback(){if(!this.committed)y.databases[this.databaseid]=JSON.parse(this.bank),delete this.bank;else throw new Error("Transaction already commited")}exec(_,p,f){return y.dexec(this.databaseid,_,p,f)}}Ha.prototype.executeSQL=Ha.prototype.exec,y.Transaction=Ha;var _a=y.Table=function(i){this.data=[],this.columns=[],this.xcolumns={},this.inddefs={},this.indices={},this.uniqs={},this.uniqdefs={},this.identities={},this.checks=[],this.checkfns=[],this.beforeinsert={},this.afterinsert={},this.insteadofinsert={},this.beforedelete={},this.afterdelete={},this.insteadofdelete={},this.beforeupdate={},this.afterupdate={},this.insteadofupdate={},Object.assign(this,i)};_a.prototype.indexColumns=function(){var i=this;i.xcolumns={},i.columns.forEach(function(_){i.xcolumns[_.columnid]=_})};class Yo{constructor(_){this.columns=[],this.xcolumns={},this.query=[],Object.assign(this,_)}}y.View=Yo;class No{constructor(_){this.alasql=y,this.columns=[],this.xcolumns={},this.selectGroup=[],this.groupColumns={},Object.assign(this,_)}}class ya{constructor(_){Object.assign(this,_)}}y.Recordset=ya,y.Query=No;class Wa{constructor(_){Object.assign(this,_)}toString(){}toType(){}toJS(){}exec(){}compile(){}}var de={extend:Object.assign,casesensitive:y.options.casesensitive,Base:Wa};ee.yy=y.yy=de,de.Statements=class{constructor(i){Object.assign(this,i)}toString(){return this.statements.map(i=>i.toString()).join("; ")}compile(i){let _=this.statements.map(p=>p.compile(i));return _.length===1?_[0]:(p,f)=>{let v=_.map(T=>T(p));return f&&f(v),v}}},de.Search=class{constructor(i){Object.assign(this,i)}toString(){let i="SEARCH ";return this.selectors&&(i+=this.selectors.toString()),this.from&&(i+="FROM "+this.from.toString()),i}toJS(i){return`this.queriesfn[${this.queriesidx-1}](this.params,null,${i})`}compile(i){var _=i,p=(f,v)=>{var T;return this.#e(_,f,function(P){T=za(p.query,P),v&&(T=v(T))}),T};return p.query={},p}#e(i,_,p){var f,v={},T,P=Er(this.selectors);function D(F,_e,ue){var ze,ve,pn,Ie=F[_e],Me=y.options.loopbreak||1e5;if(Ie.selid){if(Ie.selid==="PATH"){for(var Ut=[{node:ue,stack:[]}],jt={},Zt=y.databases[y.useid].objects;Ut.length>0;){var ei=Ut.shift(),xi=ei.node,Ci=ei.stack,pn=D(Ie.args,0,xi);if(pn.length>0){if(_e+1+1>F.length)return Ci;var Mi=[];return Ci&&Ci.length>0&&Ci.forEach(function(Br){Mi=Mi.concat(D(F,_e+1,Br))}),Mi}else{if(typeof jt[xi.$id]<"u")continue;jt[xi.$id]=!0,xi.$out&&xi.$out.length>0&&xi.$out.forEach(function(Br){var nn=Zt[Br],Fn=Ci.concat(nn);Fn.push(Zt[nn.$out[0]]),Ut.push({node:Zt[nn.$out[0]],stack:Fn})})}}return[]}if(Ie.selid==="NOT"){var ve=D(Ie.args,0,ue);return ve.length>0?[]:_e+1+1>F.length?[ue]:D(F,_e+1,ue)}else if(Ie.selid==="DISTINCT"){var ve;if(typeof Ie.args>"u"||Ie.args.length===0?ve=Ps(ue):ve=D(Ie.args,0,ue),ve.length===0)return[];var Rr=Ps(ve);return _e+1+1>F.length?Rr:D(F,_e+1,Rr)}else if(Ie.selid==="AND"){var Rr=!0;return Ie.args.forEach(function(Br){Rr=Rr&&D(Br,0,ue).length>0}),Rr?_e+1+1>F.length?[ue]:D(F,_e+1,ue):[]}else if(Ie.selid==="OR"){var Rr=!1;return Ie.args.forEach(function(Br){Rr=Rr||D(Br,0,ue).length>0}),Rr?_e+1+1>F.length?[ue]:D(F,_e+1,ue):[]}else if(Ie.selid==="ALL"){var ve=D(Ie.args[0],0,ue);return ve.length===0?[]:_e+1+1>F.length?ve:D(F,_e+1,ve)}else if(Ie.selid==="ANY"){var ve=D(Ie.args[0],0,ue);return ve.length===0?[]:_e+1+1>F.length?[ve[0]]:D(F,_e+1,[ve[0]])}else if(Ie.selid==="UNIONALL"){var ve=[];return Ie.args.forEach(function(Br){ve=ve.concat(D(Br,0,ue))}),ve.length===0?[]:_e+1+1>F.length?ve:D(F,_e+1,ve)}else if(Ie.selid==="UNION"){var ve=[];Ie.args.forEach(function(Br){ve=ve.concat(D(Br,0,ue))});var ve=Ps(ve);return ve.length===0?[]:_e+1+1>F.length?ve:D(F,_e+1,ve)}else if(Ie.selid==="IF"){var ve=D(Ie.args,0,ue);return ve.length===0?[]:_e+1+1>F.length?[ue]:D(F,_e+1,ue)}else if(Ie.selid==="REPEAT"){var We,Wi,Li=Ie.args[0].value;Ie.args[1]?Wi=Ie.args[1].value:Wi=Li,Ie.args[2]&&(We=Ie.args[2].variable);var Ht=[];if(Li===0&&(_e+1+1>F.length?Ht=[ue]:(We&&(y.vars[We]=0),Ht=Ht.concat(D(F,_e+1,ue)))),Wi>0)for(var or=[{value:ue,lvl:1}],vr=0;or.length>0;){var ve=or[0];if(or.shift(),ve.lvl<=Wi){We&&(y.vars[We]=ve.lvl);var dn=D(Ie.sels,0,ve.value);dn.forEach(function(Br){or.push({value:Br,lvl:ve.lvl+1})}),ve.lvl>=Li&&(_e+1+1>F.length?Ht=Ht.concat(dn):dn.forEach(function(Br){Ht=Ht.concat(D(F,_e+1,Br))}))}if(vr++,vr>Me)throw new Error("Infinite loop brake. Number of iterations = "+vr)}return Ht}else if(Ie.selid==="OF"){if(_e+1+1>F.length)return[ue];var qr=[];return Object.keys(ue).forEach(function(sr){y.vars[Ie.args[0].variable]=sr,qr=qr.concat(D(F,_e+1,ue[sr]))}),qr}else if(Ie.selid==="TO"){var hr=y.vars[Ie.args[0]],lr=[];if(hr!==void 0?lr=hr.slice(0):lr=[],lr.push(ue),_e+1+1>F.length)return[ue];y.vars[Ie.args[0]]=lr;var qr=D(F,_e+1,ue);return y.vars[Ie.args[0]]=hr,qr}else if(Ie.selid==="ARRAY"){var ve=D(Ie.args,0,ue);if(ve.length>0)ze=ve;else return[];return _e+1+1>F.length?[ze]:D(F,_e+1,ze)}else if(Ie.selid==="SUM"){var ve=D(Ie.args,0,ue);if(ve.length>0)var ze=ve.reduce(function(nn,Fn){return nn+Fn},0);else return[];return _e+1+1>F.length?[ze]:D(F,_e+1,ze)}else if(Ie.selid==="AVG"){if(ve=D(Ie.args,0,ue),ve.length>0)ze=ve.reduce(function(sr,Br){return sr+Br},0)/ve.length;else return[];return _e+1+1>F.length?[ze]:D(F,_e+1,ze)}else if(Ie.selid==="COUNT"){if(ve=D(Ie.args,0,ue),ve.length>0)ze=ve.length;else return[];return _e+1+1>F.length?[ze]:D(F,_e+1,ze)}else if(Ie.selid==="FIRST"){if(ve=D(Ie.args,0,ue),ve.length>0)ze=ve[0];else return[];return _e+1+1>F.length?[ze]:D(F,_e+1,ze)}else if(Ie.selid==="LAST"){if(ve=D(Ie.args,0,ue),ve.length>0)ze=ve[ve.length-1];else return[];return _e+1+1>F.length?[ze]:D(F,_e+1,ze)}else if(Ie.selid==="MIN"){if(ve=D(Ie.args,0,ue),ve.length===0)return[];var ze=ve.reduce(function(Br,nn){return Math.min(Br,nn)},1/0);return _e+1+1>F.length?[ze]:D(F,_e+1,ze)}else if(Ie.selid==="MAX"){var ve=D(Ie.args,0,ue);if(ve.length===0)return[];var ze=ve.reduce(function(nn,Fn){return Math.max(nn,Fn)},-1/0);return _e+1+1>F.length?[ze]:D(F,_e+1,ze)}else if(Ie.selid==="PLUS"){var Ht=[],or=D(Ie.args,0,ue).slice();_e+1+1>F.length?Ht=Ht.concat(or):or.forEach(function(nn){Ht=Ht.concat(D(F,_e+1,nn))});for(var vr=0;or.length>0;){var ve=or.shift();if(ve=D(Ie.args,0,ve),or=or.concat(ve),_e+1+1>F.length?Ht=Ht.concat(ve):ve.forEach(function(ds){var es=D(F,_e+1,ds);Ht=Ht.concat(es)}),vr++,vr>Me)throw new Error("Infinite loop brake. Number of iterations = "+vr)}return Ht}else if(Ie.selid==="STAR"){var Ht=[];Ht=D(F,_e+1,ue);var or=D(Ie.args,0,ue).slice();_e+1+1>F.length?Ht=Ht.concat(or):or.forEach(function(nn){Ht=Ht.concat(D(F,_e+1,nn))});for(var vr=0;or.length>0;){var ve=or[0];if(or.shift(),ve=D(Ie.args,0,ve),or=or.concat(ve),_e+1+1<=F.length&&ve.forEach(function(ds){Ht=Ht.concat(D(F,_e+1,ds))}),vr++,vr>Me)throw new Error("Infinite loop brake. Number of iterations = "+vr)}return Ht}else if(Ie.selid==="QUESTION"){var Ht=[];Ht=Ht.concat(D(F,_e+1,ue));var ve=D(Ie.args,0,ue);return _e+1+1<=F.length&&ve.forEach(function(nn){Ht=Ht.concat(D(F,_e+1,nn))}),Ht}else if(Ie.selid==="WITH"){var ve=D(Ie.args,0,ue);if(ve.length===0)return[];var pn={status:1,values:ve}}else{if(Ie.selid==="ROOT")return _e+1+1>F.length?[ue]:D(F,_e+1,T);throw new Error("Wrong selector "+Ie.selid)}}else if(Ie.srchid)var pn=y.srch[Ie.srchid.toUpperCase()](ue,Ie.args,v,_);else throw new Error("Selector not found");typeof pn>"u"&&(pn={status:1,values:[ue]});var Rr=[];if(pn.status===1){var Sr=pn.values;if(_e+1+1>F.length)Rr=Sr;else for(var vr=0;vr<pn.values.length;vr++)Rr=Rr.concat(D(F,_e+1,Sr[vr]))}return Rr}if(P!==void 0&&P.length>0&&(P&&P[0]&&P[0].srchid==="PROP"&&P[0].args&&P[0].args[0]&&(P[0].args[0].toUpperCase()==="XML"?(v.mode="XML",P.shift()):P[0].args[0].toUpperCase()==="HTML"?(v.mode="HTML",P.shift()):P[0].args[0].toUpperCase()==="JSON"&&(v.mode="JSON",P.shift())),P.length>0&&P[0].srchid==="VALUE"&&(v.value=!0,P.shift())),this.from instanceof de.Column){var V=this.from.databaseid||i;T=y.databases[V].tables[this.from.columnid].data}else if(this.from instanceof de.FuncValue&&y.from[this.from.funcid.toUpperCase()]){var ae=this.from.args.map(function(F){var _e=F.toJS(),ue=new Function("params,alasql","var y;return "+_e).bind(this);return ue(_,y)});T=y.from[this.from.funcid.toUpperCase()].apply(this,ae)}else if(typeof this.from>"u")T=y.databases[i].objects;else{var ie=new Function("params,alasql","var y;return "+this.from.toJS());T=ie(_,y),typeof Mongo=="object"&&typeof Mongo.Collection!="object"&&T instanceof Mongo.Collection&&(T=T.find().fetch())}if(P!==void 0&&P.length>0?f=D(P,0,T):f=T,this.into){var Q,$;typeof this.into.args[0]<"u"&&(Q=new Function("params,alasql","var y;return "+this.into.args[0].toJS())(_,y)),typeof this.into.args[1]<"u"&&($=new Function("params,alasql","var y;return "+this.into.args[1].toJS())(_,y)),f=y.into[this.into.funcid.toUpperCase()](Q,$,f,[],p)}else v.value&&f.length>0&&(f=f[0]),p&&(f=p(f));return f}},y.srch={PROP(i,_,p){if(p.mode==="XML"){let f=i.children.filter(v=>v.name.toUpperCase()===_[0].toUpperCase());return{status:f.length?1:-1,values:f}}else return typeof i!="object"||i===null||typeof _!="object"||typeof i[_[0]]>"u"?{status:-1,values:[]}:{status:1,values:[i[_[0]]]}},APROP(i,_){return typeof i!="object"||i===null||typeof _!="object"||typeof i[_[0]]>"u"?{status:1,values:[void 0]}:{status:1,values:[i[_[0]]]}},EQ(i,_,p,f){var v=_[0].toJS("x",""),T=new Function("x,alasql,params","return "+v);return i===T(i,y,f)?{status:1,values:[i]}:{status:-1,values:[]}},LIKE(i,_,p,f){var v=_[0].toJS("x",""),T=new Function("x,alasql,params","return "+v);return i.toUpperCase().match(new RegExp("^"+T(i,y,f).toUpperCase().replace(/%/g,".*").replace(/\?|_/g,".")+"$"),"g")?{status:1,values:[i]}:{status:-1,values:[]}},ATTR(i,_,p){if(p.mode==="XML")return typeof _>"u"?{status:1,values:[i.attributes]}:typeof i=="object"&&typeof i.attributes=="object"&&typeof i.attributes[_[0]]<"u"?{status:1,values:[i.attributes[_[0]]]}:{status:-1,values:[]};throw new Error("ATTR is not using in usual mode")},CONTENT(i,_,p){if(p.mode!=="XML")throw new Error("ATTR is not using in usual mode");return{status:1,values:[i.content]}},SHARP(i,_){let p=y.databases[y.useid].objects[_[0]];return i!==void 0&&i===p?{status:1,values:[i]}:{status:-1,values:[]}},PARENT(){return console.error("PARENT not implemented",arguments),{status:-1,values:[]}},CHILD(i,_,p){return typeof i=="object"?Array.isArray(i)?{status:1,values:i}:p.mode==="XML"?{status:1,values:Object.keys(i.children).map(function(f){return i.children[f]})}:{status:1,values:Object.keys(i).map(function(f){return i[f]})}:{status:1,values:[]}},KEYS(i){return typeof i=="object"&&i!==null?{status:1,values:Object.keys(i)}:{status:1,values:[]}},WHERE(i,_,p,f){var v=_[0].toJS("x",""),T=new Function("x,alasql,params","return "+v);return T(i,y,f)?{status:1,values:[i]}:{status:-1,values:[]}},NAME(i,_){return i.name===_[0]?{status:1,values:[i]}:{status:-1,values:[]}},CLASS(i,_){return i.$class==_?{status:1,values:[i]}:{status:-1,values:[]}},VERTEX(i){return i.$node==="VERTEX"?{status:1,values:[i]}:{status:-1,values:[]}},INSTANCEOF(i,_){return i instanceof y.fn[_[0]]?{status:1,values:[i]}:{status:-1,values:[]}},EDGE(i){return i.$node==="EDGE"?{status:1,values:[i]}:{status:-1,values:[]}},EX(i,_,p,f){var v=_[0].toJS("x",""),T=new Function("x,alasql,params","return "+v);return{status:1,values:[T(i,y,f)]}},RETURN(i,_,p,f){var v={};return _&&_.length>0&&_.forEach(function(T){var P=T.toJS("x",""),D=new Function("x,alasql,params","return "+P);typeof T.as>"u"&&(T.as=T.toString()),v[T.as]=D(i,y,f)}),{status:1,values:[v]}},REF(i){return{status:1,values:[y.databases[y.useid].objects[i]]}},OUT(i){if(i.$out&&i.$out.length>0){var _=i.$out.map(function(p){return y.databases[y.useid].objects[p]});return{status:1,values:_}}else return{status:-1,values:[]}},OUTOUT(i){if(i.$out&&i.$out.length>0){var _=[];return i.$out.forEach(function(p){var f=y.databases[y.useid].objects[p];f&&f.$out&&f.$out.length>0&&f.$out.forEach(function(v){_=_.concat(y.databases[y.useid].objects[v])})}),{status:1,values:_}}else return{status:-1,values:[]}},IN(i){if(i.$in&&i.$in.length>0){var _=i.$in.map(function(p){return y.databases[y.useid].objects[p]});return{status:1,values:_}}else return{status:-1,values:[]}},ININ(i){if(i.$in&&i.$in.length>0){var _=[];return i.$in.forEach(function(p){var f=y.databases[y.useid].objects[p];f&&f.$in&&f.$in.length>0&&f.$in.forEach(function(v){_=_.concat(y.databases[y.useid].objects[v])})}),{status:1,values:_}}else return{status:-1,values:[]}},AS(i,_){return y.vars[_[0]]=i,{status:1,values:[i]}},AT(i,_){var p=y.vars[_[0]];return{status:1,values:[p]}},CLONEDEEP(i){var _=Er(i);return{status:1,values:[_]}},SET(i,_,p,f){var v=_.map(function(P){return P.method==="@"?`alasql.vars[${JSON.stringify(P.variable)}]=`+P.expression.toJS("x",""):P.method==="$"?`params[${JSON.stringify(P.variable)}]=`+P.expression.toJS("x",""):`x[${JSON.stringify(P.column.columnid)}]=`+P.expression.toJS("x","")}).join(";"),T=new Function("x,params,alasql",v);return T(i,f,y),{status:1,values:[i]}},ROW(i,_,p,f){var v="var y;return [";v+=_.map(D=>D.toJS("x","")).join(","),v+="]";var T=new Function("x,params,alasql",v),P=T(i,f,y);return{status:1,values:[P]}},D3(i){return i.$node!=="VERTEX"&&i.$node==="EDGE"&&(i.source=i.$in[0],i.target=i.$out[0]),{status:1,values:[i]}},ORDERBY(i,_){var p=i.sort(Xa(_));return{status:1,values:p}}};var Xa=function(i){if(i){if(typeof i?.[0]?.expression=="function"){var _=i[0].expression;return function(v,T){var P=_(v),D=_(T);return P>D?1:P===D?0:-1}}var p="",f="";return i.forEach(function(v){var T="";if(v.expression instanceof de.NumValue&&(v.expression=self.columns[v.expression.value-1]),v.expression instanceof de.Column){var P=v.expression.columnid;y.options.valueof&&(T=".valueOf()"),v.nocase&&(T+=".toUpperCase()"),P==="_"?(p+="if(a"+T+(v.direction==="ASC"?">":"<")+"b"+T+")return 1;",p+="if(a"+T+"==b"+T+"){"):p+=`if (
							(a[${JSON.stringify(P)}]||'')${T}
							${v.direction==="ASC"?">":"<"}
							(b[${JSON.stringify(P)}]||'')${T}
						) return 1;

						if(
							(a[${JSON.stringify(P)}]||'')${T}
							==
							(b[${JSON.stringify(P)}]||'')${T}
						){
						`}else T=".valueOf()",v.nocase&&(T+=".toUpperCase()"),p+=`
					if (
						(${v.toJS("a","")} || '')${T}
						${v.direction==="ASC"?">":"<"}
						(${v.toJS("b","")} || '')${T}
					) return 1;

					if (
						(${v.toJS("a","")} || '')${T} ==
						(${v.toJS("b","")} || '')${T}
					) {`;f+="}"}),p+="return 0;",p+=f+"return -1",new Function("a,b",p)}};function Ja(i,_,p,f,v){i.sourceslen=i.sources.length;let T=i.sourceslen;i.query=i,i.A=f,i.B=v,i.cb=p,i.oldscope=_,i.queriesfn&&(i.sourceslen+=i.queriesfn.length,T+=i.queriesfn.length,i.queriesdata=[],i.queriesfn.forEach(function(D,V){D.query.params=i.params,So([],-V-1,i)})),i.scope=_?Er(_):{};let P;if(i.sources.forEach(function(D,V){D.query=i;var ae=D.datafn(i,i.params,So,V,y);typeof ae<"u"&&((i.intofn||i.intoallfn)&&Array.isArray(ae)&&(ae=ae.length),P=ae),D.queriesdata=i.queriesdata}),i.sources.length==0||T===0)try{P=lo(i)}catch(D){if(p)return p(null,D);throw D}return P}function So(i,_,p){if(_>=0){let f=p.sources[_];f.data=i,typeof f.data=="function"&&(f.getfn=f.data,f.dontcache=f.getfn.dontcache,["OUTER","RIGHT","ANTI"].includes(f.joinmode)&&(f.dontcache=!1),f.data={})}else p.queriesdata[-_-1]=Jo(i);if(p.sourceslen--,!(p.sourceslen>0))return lo(p)}function lo(i){var _=i.scope,p;Ka(i),i.data=[],i.xgroups={},i.groups=[];var f=0;if(Ys(i,_,f),i.groupfn){if(i.data=[],i.groups.length===0&&i.allgroups.length===0){var v={};i.selectGroup.length>0&&i.selectGroup.forEach(function(Me){Me.aggregatorid=="COUNT"||Me.aggregatorid=="SUM"||Me.aggregatorid=="TOTAL"?v[Me.nick]=0:v[Me.nick]=void 0}),i.groups=[v]}if(i.aggrKeys.length>0){var T="";i.aggrKeys.forEach(function(Me){T+=`
				g[${JSON.stringify(Me.nick)}] = alasql.aggr[${JSON.stringify(Me.funcid)}](undefined,g[${JSON.stringify(Me.nick)}],3); `});var P=new Function("g,params,alasql","var y;"+T)}for(var D=0,V=i.groups.length;D<V;D++){var v=i.groups[D];if(P&&P(v,i.params,y),!i.havingfn||i.havingfn(v,i.params,y)){var ae=i.selectgfn(v,i.params,y);for(let Ut in i.groupColumns)i.groupColumns[Ut]!==Ut&&ae[i.groupColumns[Ut]]&&!i.groupColumns[i.groupColumns[Ut]]&&delete ae[i.groupColumns[Ut]];i.data.push(ae)}}}if(Ya(i),i.unionallfn){var ie,Q;if(i.corresponding)i.unionallfn.query.modifier||(i.unionallfn.query.modifier=void 0),ie=i.unionallfn(i.params);else{i.unionallfn.query.modifier||(i.unionallfn.query.modifier="RECORDSET"),Q=i.unionallfn(i.params),ie=[],V=Q.data.length;for(var D=0;D<V;D++){var $={};if(i.columns.length){p=Math.min(i.columns.length,Q.columns.length);for(var F=0;F<p;F++)$[i.columns[F].columnid]=Q.data[D][Q.columns[F].columnid]}else{p=Q.columns.length;for(var F=0;F<p;F++)$[Q.columns[F].columnid]=Q.data[D][Q.columns[F].columnid]}ie.push($)}}i.data=i.data.concat(ie)}else if(i.unionfn){if(i.corresponding)i.unionfn.query.modifier||(i.unionfn.query.modifier="ARRAY"),ie=i.unionfn(i.params);else{i.unionfn.query.modifier||(i.unionfn.query.modifier="RECORDSET"),Q=i.unionfn(i.params),ie=[],V=Q.data.length;for(var D=0;D<V;D++){if($={},i.columns.length){p=Math.min(i.columns.length,Q.columns.length);for(var F=0;F<p;F++)$[i.columns[F].columnid]=Q.data[D][Q.columns[F].columnid]}else{p=Q.columns.length;for(var F=0;F<p;F++)$[Q.columns[F].columnid]=Q.data[D][Q.columns[F].columnid]}ie.push($)}}i.data=Gn(i.data,ie)}else if(i.exceptfn){if(i.corresponding){i.exceptfn.query.modifier||(i.exceptfn.query.modifier="ARRAY");var ie=i.exceptfn(i.params)}else{i.exceptfn.query.modifier||(i.exceptfn.query.modifier="RECORDSET");for(var Q=i.exceptfn(i.params),ie=[],D=0,V=Q.data.length;D<V;D++){for(var $={},F=Math.min(i.columns.length,Q.columns.length)-1;0<=F;F--)$[i.columns[F].columnid]=Q.data[D][Q.columns[F].columnid];ie.push($)}}i.data=Ia(i.data,ie)}else if(i.intersectfn){if(i.corresponding)i.intersectfn.query.modifier||(i.intersectfn.query.modifier=void 0),ie=i.intersectfn(i.params);else for(i.intersectfn.query.modifier||(i.intersectfn.query.modifier="RECORDSET"),Q=i.intersectfn(i.params),ie=[],V=Q.data.length,D=0;D<V;D++){for($={},p=Math.min(i.columns.length,Q.columns.length),F=0;F<p;F++)$[i.columns[F].columnid]=Q.data[D][Q.columns[F].columnid];ie.push($)}i.data=Na(i.data,ie)}if(i.orderfn){if(i.explain)var _e=Date.now();i.data=i.data.sort(i.orderfn),i.explain&&i.explaination.push({explid:i.explid++,description:"QUERY BY",ms:Date.now()-_e})}if(zo(i),typeof angular<"u"&&i.removeKeys.push("$$hashKey"),i.removeKeys.length>0){var ue=i.removeKeys;if(p=ue.length,p>0)for(V=i.data.length,D=0;D<V;D++)for(F=0;F<p;F++)delete i.data[D][ue[F]];i.columns.length>0&&(i.columns=i.columns.filter(function(Me){var Ut=!1;return ue.forEach(function(jt){Me.columnid==jt&&(Ut=!0)}),!Ut}))}if(typeof i.removeLikeKeys<"u"&&i.removeLikeKeys.length>0){for(var ze=i.removeLikeKeys,D=0,V=i.data.length;D<V;D++){$=i.data[D];for(var ve in $)for(F=0;F<i.removeLikeKeys.length;F++)y.utils.like(i.removeLikeKeys[F],ve)&&delete $[ve]}i.columns.length>0&&(i.columns=i.columns.filter(function(Me){var Ut=!1;return ze.forEach(function(jt){y.utils.like(jt,Me.columnid)&&(Ut=!0)}),!Ut}))}if(i.pivotfn&&i.pivotfn(),i.unpivotfn&&i.unpivotfn(),i.intoallfn){var Ie=i.intoallfn(i.columns,i.cb,i.params,i.alasql);return Ie}if(i.intofn){for(V=i.data.length,D=0;D<V;D++)i.intofn(i.data[D],D,i.params,i.alasql);return i.cb&&i.cb(i.data.length,i.A,i.B),i.data.length}return Ie=i.data,i.cb&&(Ie=i.cb(i.data,i.A,i.B)),Ie}function zo(i){if(i.limit){var _=0;i.offset&&(_=i.offset|0||0,_=_<0?0:_);var p;i.percent?p=(i.data.length*i.limit/100|0)+_:p=(i.limit|0)+_,i.data=i.data.slice(_,p)}}function Ya(i){if(i.distinct){for(var _={},p=Object.keys(i.data[0]||[]),f=0,v=i.data.length;f<v;f++){var T=p.map(function(D){return i.data[f][D]}).join("`");_[T]=i.data[f]}i.data=[];for(var P in _)i.data.push(_[P])}}var Ka=function(i){for(var _=0,p=i.sources.length;_<p;_++){var f=i.sources[_];if(delete f.ix,_>0&&f.optimization=="ix"&&f.onleftfn&&f.onrightfn){if(f.databaseid&&y.databases[f.databaseid].tables[f.tableid]){y.databases[f.databaseid].tables[f.tableid].indices||(i.database.tables[f.tableid].indices={});let D=y.databases[f.databaseid].tables[f.tableid].indices[$r(f.onrightfns+"`"+f.srcwherefns)];!y.databases[f.databaseid].tables[f.tableid].dirty&&D&&(f.ix=D)}if(!f.ix){f.ix={};let D={},V=0,ae=f.data.length,ie;for(;(ie=f.data[V])||f.getfn&&(ie=f.getfn(V))||V<ae;){if(f.getfn&&!f.dontcache&&(f.data[V]=ie),D[f.alias||f.tableid]=ie,f.srcwherefn(D,i.params,y)){var v=f.onrightfn(D,i.params,y),T=f.ix[v];T||(T=f.ix[v]=[]),T.push(ie)}V++}f.databaseid&&y.databases[f.databaseid].tables[f.tableid]&&(y.databases[f.databaseid].tables[f.tableid].indices[$r(f.onrightfns+"`"+f.srcwherefns)]=f.ix)}}else if(f.wxleftfn){if(y.databases[f.databaseid].engineid||(ixx=y.databases[f.databaseid].tables[f.tableid].indices[$r(f.wxleftfns+"`")]),!y.databases[f.databaseid].tables[f.tableid].dirty&&ixx)f.ix=ixx,f.data=f.ix[f.wxrightfn(null,i.params,y)];else{for(f.ix={},P={},ke=0,ilen=f.data.length,dataw;(dataw=f.data[ke])||f.getfn&&(dataw=f.getfn(ke))||ke<ilen;)f.getfn&&!f.dontcache&&(f.data[ke]=dataw),P[f.alias||f.tableid]=f.data[ke],v=f.wxleftfn(P,i.params,y),T=f.ix[v],T||(T=f.ix[v]=[]),T.push(f.data[ke]),ke++;y.databases[f.databaseid].engineid||(y.databases[f.databaseid].tables[f.tableid].indices[$r(f.wxleftfns+"`")]=f.ix)}f.srcwherefns&&(f.data?(P={},f.data=f.data.filter(function(D){return P[f.alias]=D,f.srcwherefn(P,i.params,y)})):f.data=[])}else if(f.srcwherefns&&!f.dontcache)if(f.data){var P={};f.data=f.data.filter(function(V){return P[f.alias]=V,f.srcwherefn(P,i.params,y)}),P={},ke=0,ilen=f.data.length;let D=[];for(;(dataw=f.data[ke])||f.getfn&&(dataw=f.getfn(ke))||ke<ilen;)f.getfn&&!f.dontcache&&(f.data[ke]=dataw),P[f.alias]=dataw,f.srcwherefn(P,i.params,y)&&D.push(dataw),ke++;f.data=D}else f.data=[];f.databaseid&&y.databases[f.databaseid].tables[f.tableid]}};function Ys(i,_,p){if(p>=i.sources.length)i.wherefn(_,i.params,y)&&(i.groupfn?i.groupfn(_,i.params,y):i.data.push(i.selectfn(_,i.params,y)));else if(i.sources[p].applyselect){var f=i.sources[p];f.applyselect(i.params,function(V){if(V.length>0)for(var ae=0;ae<V.length;ae++)_[f.alias]=V[ae],Ys(i,_,p+1);else f.applymode=="OUTER"&&(_[f.alias]={},Ys(i,_,p+1))},_)}else{let V=i.sources[p],ae=i.sources[p+1],ie=V.alias||V.tableid,Q=!1,$=V.data,F=!1;(!V.getfn||V.getfn&&!V.dontcache)&&V.joinmode!="RIGHT"&&V.joinmode!="OUTER"&&V.joinmode!="ANTI"&&V.optimization=="ix"&&($=V.ix[V.onleftfn(_,i.params,y)]||[],F=!0);let _e=0;if(typeof $>"u")throw new Error("Data source number "+p+" in undefined");let ue=$.length,ze;for(;(ze=$[_e])||!F&&V.getfn&&(ze=V.getfn(_e))||_e<ue;){!F&&V.getfn&&!V.dontcache&&($[_e]=ze),_[ie]=ze;var v=!V.onleftfn;if(!v){var T=V.onleftfn(_,i.params,y),P=V.onrightfn(_,i.params,y);(T instanceof String||T instanceof Number)&&(T=T.valueOf()),(P instanceof String||P instanceof Number)&&(P=T.valueOf()),v=T==P}v&&V.onmiddlefn(_,i.params,y)&&(V.joinmode!="SEMI"&&V.joinmode!="ANTI"&&Ys(i,_,p+1),V.joinmode!="LEFT"&&V.joinmode!="INNER"&&(ze._rightjoin=!0),Q=!0),_e++}if((V.joinmode=="LEFT"||V.joinmode=="OUTER"||V.joinmode=="SEMI")&&!Q&&(_[ie]={},Ys(i,_,p+1)),p==0)for(var D=p+1;D<i.sources.length;D++){if(ae.joinmode=="OUTER"||ae.joinmode=="RIGHT"||ae.joinmode=="ANTI"){_[V.alias]={};let ve=0,Ie=ae.data.length,Me;for(;(Me=ae.data[ve])||ae.getfn&&(Me=ae.getfn(ve))||ve<Ie;)ae.getfn&&!ae.dontcache&&(ae.data[ve]=Me),Me._rightjoin?delete Me._rightjoin:(_[ae.alias]=Me,Ys(i,_,D+1)),ve++}V=i.sources[D],ae=i.sources[D+1]}_[ie]=void 0}}function t1(i,_){var p=i.sources[_],f=i.sources[_+1];let v=p.onleftfn,T=p.onleftfns,P=p.onrightfn,D=p.onrightfns,V=p.optimization;p.onleftfn=f.onrightfn,p.onleftfns=f.onrightfns,p.onrightfn=f.onleftfn,p.onrightfns=f.onleftfns,p.optimization=f.optimization,f.onleftfn=v,f.onleftfns=T,f.onrightfn=P,f.onrightfns=D,f.optimization=V,i.sources[_]=f,i.sources[_+1]=p}de.Select=class{constructor(i){Object.assign(this,i)}toString(){var i;return i="",this.explain&&(i+="EXPLAIN "),i+="SELECT ",this.modifier&&(i+=this.modifier+" "),this.distinct&&(i+="DISTINCT "),this.top&&(i+="TOP "+this.top.value+" ",this.percent&&(i+="PERCENT ")),i+=this.columns.map(function(_){var p;return p=_.toString(),typeof _.as<"u"&&(p+=" AS "+_.as),p}).join(", "),this.from&&(i+=" FROM "+this.from.map(function(_){var p;return p=_.toString(),_.as&&(p+=" AS "+_.as),p}).join(",")),this.joins&&(i+=this.joins.map(function(_){var p;if(p=" ",_.joinmode&&(p+=_.joinmode+" "),_.table)p+="JOIN "+_.table.toString();else if(_.select)p+="JOIN ("+_.select.toString()+")";else if(_ instanceof y.yy.Apply)p+=_.toString();else throw new Error("Wrong type in JOIN mode");return _.as&&(p+=" AS "+_.as),_.using&&(p+=" USING "+_.using.toString()),_.on&&(p+=" ON "+_.on.toString()),p}).join("")),this.where&&(i+=" WHERE "+this.where.toString()),this.group&&this.group.length>0&&(i+=" GROUP BY "+this.group.map(function(_){return _.toString()}).join(", ")),this.having&&(i+=" HAVING "+this.having.toString()),this.order&&this.order.length>0&&(i+=" ORDER BY "+this.order.map(function(_){return _.toString()}).join(", ")),this.limit&&(i+=" LIMIT "+this.limit.value),this.offset&&(i+=" OFFSET "+this.offset.value),this.union&&(i+=" UNION "+(this.corresponding?"CORRESPONDING ":"")+this.union.toString()),this.unionall&&(i+=" UNION ALL "+(this.corresponding?"CORRESPONDING ":"")+this.unionall.toString()),this.except&&(i+=" EXCEPT "+(this.corresponding?"CORRESPONDING ":"")+this.except.toString()),this.intersect&&(i+=" INTERSECT "+(this.corresponding?"CORRESPONDING ":"")+this.intersect.toString()),i}toJS(i){var _="alasql.utils.flatArray(this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+i+"))[0]";return _}compile(i,_){var p=y.databases[i],f=new No;if(f.removeKeys=[],f.aggrKeys=[],f.explain=this.explain,f.explaination=[],f.explid=1,f.modifier=this.modifier,f.database=p,this.compileWhereExists(f),this.compileQueries(f),f.defcols=this.compileDefCols(f,i),f.fromfn=this.compileFrom(f),this.joins&&this.compileJoins(f),f.rownums=[],this.compileSelectGroup0(f),this.group||f.selectGroup.length>0?f.selectgfns=this.compileSelectGroup1(f):f.selectfns=this.compileSelect1(f,_),this.compileRemoveColumns(f),this.where&&this.compileWhereJoins(f),f.wherefn=this.compileWhere(f),(this.group||f.selectGroup.length>0)&&(f.groupfn=this.compileGroup(f)),this.having&&(f.havingfn=this.compileHaving(f)),this.order&&(f.orderfn=this.compileOrder(f,_)),this.group||f.selectGroup.length>0?f.selectgfn=this.compileSelectGroup2(f):f.selectfn=this.compileSelect2(f,_),f.distinct=this.distinct,this.pivot&&(f.pivotfn=this.compilePivot(f)),this.unpivot&&(f.pivotfn=this.compileUnpivot(f)),this.top?f.limit=this.top.value:this.limit&&(f.limit=this.limit.value,this.offset&&(f.offset=this.offset.value)),f.percent=this.percent,f.corresponding=this.corresponding,this.union?(f.unionfn=this.union.compile(i),f.orderfn=this.union.order?this.union.compileOrder(f,_):null):this.unionall?(f.unionallfn=this.unionall.compile(i),f.orderfn=this.unionall.order?this.unionall.compileOrder(f,_):null):this.except?(f.exceptfn=this.except.compile(i),f.orderfn=this.except.order?this.except.compileOrder(f,_):null):this.intersect&&(f.intersectfn=this.intersect.compile(i),f.orderfn=this.intersect.order?this.intersect.compileOrder(f,_):null),this.into){if(this.into instanceof de.Table)y.options.autocommit&&y.databases[this.into.databaseid||i].engineid?f.intoallfns=`return alasql
								.engines[${JSON.stringify(y.databases[this.into.databaseid||i].engineid)}]
								.intoTable(
									${JSON.stringify(this.into.databaseid||i)},
									${JSON.stringify(this.into.tableid)},
									this.data,
									columns,
									cb
								);`:f.intofns=`alasql
							.databases[${JSON.stringify(this.into.databaseid||i)}]
							.tables[${JSON.stringify(this.into.tableid)}]
							.data.push(r);
						`;else if(this.into instanceof de.VarValue)f.intoallfns=`
					alasql.vars[${JSON.stringify(this.into.variable)}]=this.data;
					res=this.data.length;
					if(cb) res = cb(res);
					return res;
				`;else if(this.into instanceof de.FuncValue){var v="return alasql.into["+JSON.stringify(this.into.funcid.toUpperCase())+"](";this.into.args&&this.into.args.length>0?(v+=this.into.args[0].toJS()+",",this.into.args.length>1?v+=this.into.args[1].toJS()+",":v+="undefined,"):v+="undefined, undefined,",f.intoallfns=v+"this.data,columns,cb)"}else this.into instanceof de.ParamValue&&(f.intofns=`params[${JSON.stringify(this.into.param)}].push(r)`);f.intofns?f.intofn=new Function("r,i,params,alasql","var y;"+f.intofns):f.intoallfns&&(f.intoallfn=new Function("columns,cb,params,alasql","var y;"+f.intoallfns))}var T=function(P,D,V){f.params=P;var ae=Ja(f,V,function(ie,Q){if(Q){if(D)return D(null,Q);throw Q}if(f.rownums.length>0)for(var $=0,F=ie.length;$<F;$++)for(var _e=0,ue=f.rownums.length;_e<ue;_e++)ie[$][f.rownums[_e]]=$+1;var ze=za(f,ie);return D&&D(ze),ze});return ae};return T.query=f,T}execute(i,_,p){return this.compile(i)(_,p)}compileWhereExists(i){this.exists&&(i.existsfn=this.exists.map(function(_){var p=_.compile(i.database.databaseid);return p.query.modifier="RECORDSET",p}))}compileQueries(i){this.queries&&(i.queriesfn=this.queries.map(function(_){var p=_.compile(i.database.databaseid);return p.query.modifier="RECORDSET",p}))}};function za(i,_){if(typeof _>"u"||typeof _=="number"||typeof _=="string"||typeof _=="boolean")return _;var p=i.modifier||y.options.modifier,f=i.columns;if(typeof f>"u"||f.length==0)if(_.length>0){for(var v={},T=Math.min(_.length,y.options.columnlookup||10)-1;0<=T;T--)for(var P in _[T])v[P]=!0;f=Object.keys(v).map(function(V){return{columnid:V}})}else f=[];switch(p){case"VALUE":if(_.length===0)return;let V=f&&f.length>0?f[0].columnid:Object.keys(_[0])[0];return _[0][V];case"ROW":return _.length===0?void 0:Object.values(_[0]);case"COLUMN":if(_.length===0)return[];let ae;f&&f.length>0?ae=f[0].columnid:ae=Object.keys(_[0])[0];let ie=[];for(var T=0,D=_.length;T<D;T++)ie.push(_[T][ae]);return ie;case"MATRIX":return _.length===0?void 0:_.map(_e=>f.map(ue=>_e[ue.columnid]));case"INDEX":if(_.length===0)return;let Q=f&&f.length>0?f[0].columnid:Object.keys(_[0])[0],$=f&&f.length>1?f[1].columnid:Object.keys(_[0])[1];return _.reduce((_e,ue)=>({..._e,[ue[Q]]:ue[$]}),{});case"RECORDSET":return new y.Recordset({columns:f,data:_});case"TEXTSTRING":if(_.length===0)return;let F=f&&f.length>0?f[0].columnid:Object.keys(_[0])[0];return _.map(_e=>_e[F]).join(`
`)}return _}de.ExistsValue=class{constructor(i){Object.assign(this,i)}toString(){return"EXISTS("+this.value.toString()+")"}toType(){return"boolean"}toJS(i,_,p){return`!!this.existsfn[${this.existsidx}](params, null, ${i}).data.length`}},y.precompile=function(i,_,p){i&&(i.params=p,i.queries&&(i.queriesfn=i.queries.map(function(f){var v=f.compile(_||i.database.databaseid);return v.query.modifier="RECORDSET",v})),i.exists&&(i.existsfn=i.exists.map(function(f){var v=f.compile(_||i.database.databaseid);return v.query.modifier="RECORDSET",v})))},de.Select.prototype.compileFrom=function(i){let _=this;i.sources=[],i.aliases={},_.from&&(_.from.forEach(p=>{let f=p.as||p.tableid;if(p instanceof de.Table)i.aliases[f]={tableid:p.tableid,databaseid:p.databaseid||i.database.databaseid,type:"table"};else if(p instanceof de.Select)i.aliases[f]={type:"subquery"};else if(p instanceof de.Search)i.aliases[f]={type:"subsearch"};else if(p instanceof de.ParamValue)i.aliases[f]={type:"paramvalue"};else if(p instanceof de.FuncValue)i.aliases[f]={type:"funcvalue"};else if(p instanceof de.VarValue)i.aliases[f]={type:"varvalue"};else if(p instanceof de.FromData)i.aliases[f]={type:"fromdata"};else if(p instanceof de.Json)i.aliases[f]={type:"json"};else if(p.inserted)i.aliases[f]={type:"inserted"};else throw new Error("Wrong table at FROM");let v={alias:f,databaseid:p.databaseid||i.database.databaseid,tableid:p.tableid,joinmode:"INNER",onmiddlefn:Nt,srcwherefns:"",srcwherefn:Nt};if(p instanceof de.Table)v.columns=y.databases[v.databaseid].tables[v.tableid].columns,y.options.autocommit&&y.databases[v.databaseid].engineid&&!y.databases[v.databaseid].tables[v.tableid].view?v.datafn=(T,P,D,V,ae)=>ae.engines[ae.databases[v.databaseid].engineid].fromTable(v.databaseid,v.tableid,D,V,T):y.databases[v.databaseid].tables[v.tableid].view?v.datafn=(T,P,D,V,ae)=>{let ie=ae.databases[v.databaseid].tables[v.tableid].select(P);return D&&(ie=D(ie,V,T)),ie}:v.datafn=(T,P,D,V,ae)=>{let ie=ae.databases[v.databaseid].tables[v.tableid].data;return D&&(ie=D(ie,V,T)),ie};else if(p instanceof de.Select)v.subquery=p.compile(i.database.databaseid),typeof v.subquery.query.modifier>"u"&&(v.subquery.query.modifier="RECORDSET"),v.columns=v.subquery.query.columns,v.datafn=(T,P,D,V,ae)=>{let ie;return v.subquery(T.params,Q=>{ie=Q.data,D&&(ie=D(ie,V,T))}),ie};else if(p instanceof de.Search)v.subsearch=p,v.columns=[],v.datafn=(T,P,D,V,ae)=>{let ie;return v.subsearch.execute(T.database.databaseid,T.params,Q=>{ie=Q,D&&(ie=D(ie,V,T))}),ie};else if(p instanceof de.ParamValue){let T=`var res = alasql.prepareFromData(params['${p.param}']`;p.array&&(T+=",true"),T+=");if(cb)res=cb(res,idx,query);return res",v.datafn=new Function("query,params,cb,idx,alasql",T)}else if(p.inserted){let T="var res = alasql.prepareFromData(alasql.inserted";p.array&&(T+=",true"),T+=");if(cb)res=cb(res,idx,query);return res",v.datafn=new Function("query,params,cb,idx,alasql",T)}else if(p instanceof de.Json){let T="var res = alasql.prepareFromData("+p.toJS();p.array&&(T+=",true"),T+=");if(cb)res=cb(res,idx,query);return res",v.datafn=new Function("query,params,cb,idx,alasql",T)}else if(p instanceof de.VarValue){let T=`var res = alasql.prepareFromData(alasql.vars['${p.variable}']`;p.array&&(T+=",true"),T+=");if(cb)res=cb(res,idx,query);return res",v.datafn=new Function("query,params,cb,idx,alasql",T)}else if(p instanceof de.FuncValue){let T="var res=alasql.from["+JSON.stringify(p.funcid.toUpperCase())+"](";p.args&&p.args.length>0?(p.args[0]?T+=p.args[0].toJS("query.oldscope")+",":T+="null,",p.args[1]?T+=p.args[1].toJS("query.oldscope")+",":T+="null,"):T+="null,null,",T+="cb,idx,query); return res",v.datafn=new Function("query,params,cb,idx,alasql",T)}else if(p instanceof de.FromData)v.datafn=(T,P,D,V,ae)=>{let ie=p.data;return D&&(ie=D(ie,V,T)),ie};else throw new Error("Wrong table at FROM");i.sources.push(v)}),i.defaultTableid=i.sources[0].alias)},y.prepareFromData=function(i,_){let p=i;if(typeof i=="string")p=i.split(/\r?\n/),_&&(p=p.map(f=>[f]));else if(_)p=i.map(f=>[f]);else if(typeof i=="object"&&!Array.isArray(i))if(typeof Mongo<"u"&&typeof Mongo.Collection<"u"&&i instanceof Mongo.Collection)p=i.find().fetch();else{p=[];for(let f in i)i.hasOwnProperty(f)&&p.push([f,i[f]])}return p},de.Select.prototype.compileJoins=function(i){let _=this;this.joins.forEach(p=>{let f,v,T;if(p.joinmode==="CROSS"){if(p.using||p.on)throw new Error("CROSS JOIN cannot have USING or ON clauses");p.joinmode="INNER"}if(p instanceof de.Apply){T={alias:p.as,applymode:p.applymode,onmiddlefn:Nt,srcwherefns:"",srcwherefn:Nt,columns:[]},T.applyselect=p.select.compile(i.database.databaseid),T.columns=T.applyselect.query.columns,T.datafn=function(D,V,ae,ie,Q){let $;return ae&&($=ae($,ie,D)),$},i.sources.push(T);return}if(p.table){if(f=p.table,T={alias:p.as||f.tableid,databaseid:f.databaseid||i.database.databaseid,tableid:f.tableid,joinmode:p.joinmode,onmiddlefn:Nt,srcwherefns:"",srcwherefn:Nt,columns:[]},!y.databases[T.databaseid].tables[T.tableid])throw new Error("Table '"+T.tableid+"' is not exists in database '"+T.databaseid+"'");T.columns=y.databases[T.databaseid].tables[T.tableid].columns,y.options.autocommit&&y.databases[T.databaseid].engineid?T.datafn=function(D,V,ae,ie,Q){return Q.engines[Q.databases[T.databaseid].engineid].fromTable(T.databaseid,T.tableid,ae,ie,D)}:y.databases[T.databaseid].tables[T.tableid].view?T.datafn=function(D,V,ae,ie,Q){let $=Q.databases[T.databaseid].tables[T.tableid].select(V);return ae&&($=ae($,ie,D)),$}:T.datafn=function(D,V,ae,ie,Q){let $=Q.databases[T.databaseid].tables[T.tableid].data;return ae&&($=ae($,ie,D)),$},i.aliases[T.alias]={tableid:f.tableid,databaseid:f.databaseid||i.database.databaseid}}else if(p.select)f=p.select,T={alias:p.as,joinmode:p.joinmode,onmiddlefn:Nt,srcwherefns:"",srcwherefn:Nt,columns:[]},T.subquery=f.compile(i.database.databaseid),typeof T.subquery.query.modifier>"u"&&(T.subquery.query.modifier="RECORDSET"),T.columns=T.subquery.query.columns,T.datafn=function(D,V,ae,ie,Q){T.data=T.subquery(D.params,null,ae,ie).data;let $=T.data;return ae&&($=ae($,ie,D)),$},i.aliases[T.alias]={type:"subquery"};else if(p.param)T={alias:p.as,joinmode:p.joinmode,onmiddlefn:Nt,srcwherefns:"",srcwherefn:Nt},v="let res=alasql.prepareFromData(params['"+p.param.param+"']",p.array&&(v+=",true"),v+="); if(cb) res=cb(res, idx, query); return res",T.datafn=new Function("query,params,cb,idx, alasql",v),i.aliases[T.alias]={type:"paramvalue"};else if(p.variable)T={alias:p.as,joinmode:p.joinmode,onmiddlefn:Nt,srcwherefns:"",srcwherefn:Nt},v="let res=alasql.prepareFromData(alasql.vars['"+p.variable+"']",p.array&&(v+=", true"),v+="); if(cb)res=cb(res, idx, query);return res",T.datafn=new Function("query,params,cb,idx, alasql",v),i.aliases[T.alias]={type:"varvalue"};else if(p.func){T={alias:p.as,joinmode:p.joinmode,onmiddlefn:Nt,srcwherefns:"",srcwherefn:Nt};let D="let res=alasql.from["+JSON.stringify(p.func.funcid.toUpperCase())+"](",V=p.func.args;V&&V.length>0?(V[0]?D+=V[0].toJS("query.oldscope")+", ":D+="null, ",V[1]?D+=V[1].toJS("query.oldscope")+", ":D+="null, "):D+="null, null, ",D+="cb, idx, query); return res",T.datafn=new Function("query, params, cb, idx, alasql",D),i.aliases[T.alias]={type:"funcvalue"}}let P=T.alias;if(p.natural){if(p.using||p.on)throw new Error("NATURAL JOIN cannot have USING or ON clauses");if(i.sources.length>0){let D=i.sources[i.sources.length-1],V=y.databases[D.databaseid].tables[D.tableid],ae=y.databases[T.databaseid].tables[T.tableid];if(V&&ae){let ie=V.columns.map($=>$.columnid),Q=ae.columns.map($=>$.columnid);p.using=un(ie,Q).map($=>({columnid:$}))}else throw new Error("In this version of Alasql NATURAL JOIN works for tables with predefined columns only")}}if(p.using){let D=i.sources[i.sources.length-1];T.onleftfns=p.using.map(V=>"p['"+(D.alias||D.tableid)+"']['"+V.columnid+"']").join('+"`"+'),T.onleftfn=new Function("p,params,alasql","let y;return "+T.onleftfns),T.onrightfns=p.using.map(V=>"p['"+(T.alias||T.tableid)+"']['"+V.columnid+"']").join('+"`"+'),T.onrightfn=new Function("p,params,alasql","let y;return "+T.onrightfns),T.optimization="ix"}else if(p.on)if(p.on instanceof de.Op&&p.on.op==="="&&!p.on.allsome){T.optimization="ix";let D="",V="",ae="",ie=!1,Q=p.on.left.toJS("p",i.defaultTableid,i.defcols),$=p.on.right.toJS("p",i.defaultTableid,i.defcols);Q.indexOf("p['"+P+"']")>-1&&!($.indexOf("p['"+P+"']")>-1)?(Q.match(/p\['.*?'\]/g)||[]).every(F=>F==="p['"+P+"']")?V=Q:ie=!0:!(Q.indexOf("p['"+P+"']")>-1)&&$.indexOf("p['"+P+"']")>-1&&($.match(/p\['.*?'\]/g)||[]).every(F=>F==="p['"+P+"']")?D=Q:ie=!0,$.indexOf("p['"+P+"']")>-1&&!(Q.indexOf("p['"+P+"']")>-1)?($.match(/p\['.*?'\]/g)||[]).every(F=>F==="p['"+P+"']")?V=$:ie=!0:!($.indexOf("p['"+P+"']")>-1)&&Q.indexOf("p['"+P+"']")>-1&&(Q.match(/p\['.*?'\]/g)||[]).every(F=>F==="p['"+P+"']")?D=$:ie=!0,ie&&(V="",D="",ae=p.on.toJS("p",i.defaultTableid,i.defcols),T.optimization="no"),T.onleftfns=D,T.onrightfns=V,T.onmiddlefns=ae||"true",T.onleftfn=new Function("p,params,alasql","let y;return "+T.onleftfns),T.onrightfn=new Function("p,params,alasql","let y;return "+T.onrightfns),T.onmiddlefn=new Function("p,params,alasql","let y;return "+T.onmiddlefns)}else T.optimization="no",T.onmiddlefns=p.on.toJS("p",i.defaultTableid,i.defcols),T.onmiddlefn=new Function("p,params,alasql","let y;return "+p.on.toJS("p",i.defaultTableid,i.defcols));i.sources.push(T)})},de.Select.prototype.compileWhere=function(i){if(this.where){if(typeof this.where=="function")return this.where;var _=this.where.toJS("p",i.defaultTableid,i.defcols);return i.wherefns=_,new Function("p,params,alasql","var y;return "+_)}else return function(){return!0}},de.Select.prototype.compileWhereJoins=function(i){};function ba(i,_){if(!_)return!1;if(_ instanceof de.Op&&!(_.op!="="&&_.op!="AND")&&!_.allsome){var p=_.toJS("p",i.defaultTableid,i.defcols),f=[];if(i.sources.forEach(function(D,V){D.tableid&&p.indexOf("p['"+D.alias+"']")>-1&&f.push(D)}),f.length!=0)if(f.length==1){if(!(p.match(/p\[\'.*?\'\]/g)||[]).every(function(D){return D=="p['"+f[0].alias+"']"}))return;var v=f[0];if(v.srcwherefns=v.srcwherefns?v.srcwherefns+"&&"+p:p,_ instanceof de.Op&&_.op=="="&&!_.allsome){if(_.left instanceof de.Column){var T=_.left.toJS("p",i.defaultTableid,i.defcols),P=_.right.toJS("p",i.defaultTableid,i.defcols);P.indexOf("p['"+f[0].alias+"']")==-1&&(f[0].wxleftfns=T,f[0].wxrightfns=P)}if(_.right instanceof de.Column){var T=_.left.toJS("p",i.defaultTableid,i.defcols),P=_.right.toJS("p",i.defaultTableid,i.defcols);T.indexOf("p['"+f[0].alias+"']")==-1&&(f[0].wxleftfns=P,f[0].wxrightfns=T)}}_.reduced=!0;return}else(_.op="AND")&&(ba(i,_.left),ba(i,_.right))}}de.Select.prototype.compileGroup=function(i){if(i.sources.length>0)var _=i.sources[0].alias;else var _="";var p=i.defcols,f=[[]];this.group&&(f=ge(this.group,i));var v=[];f.forEach(function(P){v=rn(v,P)}),i.allgroups=v,i.ingroup=[];var T="";return f.forEach(function(P){T+="var g=this.xgroups[";var D=P.map(function(Q){var $=Q.split("	")[0],F=Q.split("	")[1];return $===""?"1":(i.ingroup.push($),F)});D.length===0&&(D=["''"]),T+=D.join('+"`"+'),T+="];if(!g) {this.groups.push((g=this.xgroups[",T+=D.join('+"`"+'),T+="] = {",T+=P.map(function(Q){var $=Q.split("	")[0],F=Q.split("	")[1];return $===""?"":"'"+$+"':"+F+","}).join("");var V=cn(v,P);T+=V.map(function(Q){var $=Q.split("	")[0];return"'"+$+"':null,"}).join("");var ae="",ie="";typeof i.groupStar<"u"&&(ie+="for(var f in p['"+i.groupStar+"']) {g[f]=p['"+i.groupStar+"'][f];};"),T+=i.selectGroup.map(function(Q){var $=Q.expression.toJS("p",_,p),F=Q.nick;let _e=ue=>ue.args[0].toJS("p",_,p);if(Q instanceof de.AggrValue){if(Q.distinct&&(ae+=",g['$$_VALUES_"+F+"']={},g['$$_VALUES_"+F+"']["+$+"]=true"),Q.aggregatorid==="SUM"){if("funcid"in Q.expression){let ue=_e(Q.expression);return`'${F}':(${ue})|| typeof ${ue} == 'number' ? ${$} : null,`}return`'${F}':(${$})|| typeof ${$} == 'number' ? ${$} : null,`}else if(Q.aggregatorid==="TOTAL"){if("funcid"in Q.expression){let ue=_e(Q.expression);return`'${F}':(${ue}) || typeof ${ue} == 'number' ?
							${ue} : ${ue} == 'string' && typeof Number(${ue}) == 'number' ? Number(${ue}) :
							typeof ${ue} == 'boolean' ?  Number(${ue}) : 0,`}return`'${F}':(${$})|| typeof ${$} == 'number' ?
							${$} : ${$} == 'string' && typeof Number(${$}) == 'number' ? Number(${$}) :
							typeof ${$} === 'boolean' ?  Number(${$}) : 0,`}else{if(Q.aggregatorid==="FIRST"||Q.aggregatorid==="LAST")return"'"+F+"':"+$+",";if(Q.aggregatorid==="MIN"){if("funcid"in Q.expression){let ue=_e(Q.expression);return`'${F}': (typeof ${ue} == 'number' || typeof ${ue} == 'bigint' ? ${$} : typeof ${ue} == 'object' ?
							typeof Number(${ue}) == 'number' && ${ue}!== null? ${$} : null : null),`}return`'${F}': (typeof ${$} == 'number' || typeof ${$} == 'bigint' ? ${$} : typeof ${$} == 'object' ?
							typeof Number(${$}) == 'number' && ${$}!== null? ${$} : null : null),`}else if(Q.aggregatorid==="MAX"){if("funcid"in Q.expression){let ue=_e(Q.expression);return`'${F}' : (typeof ${ue} == 'number' || typeof ${ue} == 'bigint' ? ${$} : typeof ${ue} == 'object' ?
							typeof Number(${ue}) == 'number' ? ${$} : null : null),`}return`'${F}' : (typeof ${$} == 'number' || typeof ${$} == 'bigint' ? ${$} : typeof ${$} == 'object' ?
							typeof Number(${$}) == 'number' ? ${$} : null : null),`}else{if(Q.aggregatorid==="ARRAY")return`'${F}':[${$}],`;if(Q.aggregatorid==="COUNT")return Q.expression.columnid==="*"?`'${F}':1,`:`'${F}':(typeof ${$} == "undefined" || ${$} === null) ? 0 : 1,`;if(Q.aggregatorid==="AVG")return i.removeKeys.push(`_SUM_${F}`),i.removeKeys.push(`_COUNT_${F}`),`'${F}':${$},'_SUM_${F}':(${$})||0,'_COUNT_${F}':(typeof ${$} == "undefined" || ${$} === null) ? 0 : 1,`;if(Q.aggregatorid==="AGGR")return ae+=`,g['${F}']=${Q.expression.toJS("g",-1)}`,"";if(Q.aggregatorid==="REDUCE")return i.aggrKeys.push(Q),`'${F}':alasql.aggr['${Q.funcid}'](${$},undefined,1),`}}return""}return""}).join(""),T+="}"+ae+",g));"+ie+"} else {",T+=i.selectGroup.map(function(Q){var $=Q.nick,F=Q.expression.toJS("p",_,p);let _e=ve=>ve.args[0].toJS("p",_,p);if(Q instanceof de.AggrValue){var ue="",ze="";if(Q.distinct&&(ue=`if(typeof ${F}!="undefined" && (!g['$$_VALUES_${$}'][${F}])) {`,ze=`g['$$_VALUES_${$}'][${F}]=true;}`),Q.aggregatorid==="SUM"){if("funcid"in Q.expression){let ve=_e(Q.expression);return ue+`
								{
									const __g_colas = g['${$}'];
									const __typeof_colexp1 = typeof ${ve};
									const __colexp1 = ${ve};

									if (__g_colas == null && ${ve} == null) {
										g['${$}'] = null;
									} else if (typeof __g_colas === 'bigint' || typeof __colexp1 === 'bigint') {
            					    	g['${$}'] = BigInt(__g_colas) + BigInt(__colexp);
            						} else if ((typeof __g_colas !== 'object' && typeof __g_colas !== 'number' && __typeof_colexp1 !== 'object' && __typeof_colexp1 !== 'number') ||
											   (__g_colas == null || (typeof __g_colas !== 'number' && typeof __g_colas !== 'object')) && (${ve} == null || (__typeof_colexp1 !== 'number' && __typeof_colexp1 !== 'object'))) {
										g['${$}'] = null;
									} else if ((typeof __g_colas !== 'object' && typeof __g_colas !== 'number' && __typeof_colexp1 == 'number') ||
											   (__g_colas == null && __typeof_colexp1 == 'number')) {
										g['${$}'] = ${F};
									} else if (typeof __g_colas == 'number' && ${ve} == null) {
										g['${$}'] = __g_colas;
									} else {
										g['${$}'] += ${F} || 0;
									}
								}
								`+ze}return ue+`
							{
								const __g_colas = g['${$}'];
								const __typeof_colexp = typeof ${F};
								const __colexp = ${F};

								if (__g_colas == null && ${F} == null) {
									g['${$}'] = null;
								} else if (typeof __g_colas === 'bigint' || typeof __colexp === 'bigint') {
            					    g['${$}'] = BigInt(__g_colas) + BigInt(__colexp);
            					} else if ((typeof __g_colas !== 'object' && typeof __g_colas !== 'number' && __typeof_colexp !== 'object' && __typeof_colexp !== 'number') ||
										   (__g_colas == null || (typeof __g_colas !== 'number' && typeof __g_colas !== 'object')) && (${F} == null || (__typeof_colexp !== 'number' && __typeof_colexp !== 'object'))) {
									g['${$}'] = null;
								} else if (typeof __g_colas !== 'object' && typeof __g_colas !== 'number' && __typeof_colexp == 'number') {
									g['${$}'] = ${F};
								} else if (typeof __g_colas == 'number' && ${F} == null) {
									g['${$}'] = __g_colas;
								} else if (__g_colas == null && __typeof_colexp == 'number') {
									g['${$}'] = ${F};
								} else {
									g['${$}'] += ${F} || 0;
								}
							}
							`+ze}else if(Q.aggregatorid==="TOTAL"){if("funcid"in Q.expression){let ve=_e(Q.expression);return ue+`{
									const __g_colas = g['${$}'];
									const __colexp1 = ${ve};
									const __typeof_g_colas = typeof __g_colas;
									const __typeof_colexp1 = typeof __colexp1;

									if (__typeof_g_colas == 'string' && !isNaN(__g_colas) && typeof Number(__g_colas) == 'number' &&
										__typeof_colexp1 == 'string' && !isNaN(__colexp1) && typeof Number(__colexp1) == 'number') {
										g['${$}'] = Number(__g_colas) + Number(__colexp1);
									} else if (__typeof_g_colas === 'bigint' || __typeof_colexp1 === 'bigint') {
       							    	g['${$}'] = BigInt(__g_colas || 0) + BigInt(__colexp1 || 0);
       								} else if (__typeof_g_colas == 'string' && __typeof_colexp1 == 'string') {
										g['${$}'] = 0;
									} else if (__typeof_g_colas == 'string' && __typeof_colexp1 == 'number') {
										g['${$}'] = __colexp1;
									} else if (__typeof_colexp1 == 'string' && __typeof_g_colas == 'number') {
										g['${$}'] = __g_colas;
									} else {
										g['${$}'] += __colexp1 || 0;
									}
								}`+ze}return ue+`{
								const __g_colas = g['${$}'];
								const __colexp = ${F};
								const __typeof_g_colas = typeof __g_colas;
								const __typeof_colexp = typeof __colexp;

								if (__typeof_g_colas === 'string' && !isNaN(__g_colas) && typeof Number(__g_colas) === 'number' &&
									__typeof_colexp === 'string' && !isNaN(__colexp) && typeof Number(__colexp) === 'number') {
									g['${$}'] = Number(__g_colas) + Number(__colexp);
								} else if (__typeof_g_colas === 'bigint' || __typeof_colexp === 'bigint') {
       							    g['${$}'] = BigInt(__g_colas || 0) + BigInt(__colexp || 0);
       							} else if (__typeof_g_colas === 'string' && __typeof_colexp === 'string') {
									g['${$}'] = 0;
								} else if (__typeof_g_colas === 'string' && __typeof_colexp === 'number') {
									g['${$}'] = __colexp;
								} else if (__typeof_colexp === 'string' && __typeof_g_colas === 'number') {
									g['${$}'] = __g_colas;
								} else {
									g['${$}'] += __colexp || 0;
								}
							}

							`+ze}else{if(Q.aggregatorid==="COUNT")return Q.expression.columnid==="*"?`${ue}
								g['${$}']++;
								${ze}`:`${ue}
							if(typeof ${F}!="undefined" && ${F} !== null) g['${$}']++;
							${ze}`;if(Q.aggregatorid==="ARRAY")return ue+"g['"+$+"'].push("+F+");"+ze;if(Q.aggregatorid==="MIN"){if("funcid"in Q.expression){let ve=_e(Q.expression);return ue+`if ((g['${$}'] == null && ${ve} !== null) ? y = ${F} : 
									(g['${$}'] !== null && ${ve} == null) ? y = g['${$}'] : 
									((y = ${F}) < g['${$}'])) {
									if (typeof y == 'number' || typeof y == 'bigint') {
									  g['${$}'] = y;
									} else if (typeof y == 'object' && y instanceof Date) {
									  g['${$}'] = y;
									} else if (typeof y == 'object' && typeof Number(y) == 'number') {
									  g['${$}'] = Number(y);
									}
								} else if (g['${$}'] !== null && typeof g['${$}'] == 'object' && y instanceof Date) {
									g['${$}'] = g['${$}'];
								} else if (g['${$}'] !== null && typeof g['${$}'] == 'object') {
									g['${$}'] = Number(g['${$}']);
								}`+ze}return ue+`if((g['${$}'] == null && ${F}!== null) ? y = ${F} : 
								(g['${$}']!== null && ${F} == null) ? y = g['${$}'] : 
								((y=${F}) < g['${$}'])) { 
								if(typeof y == 'number' || typeof y == 'bigint') {
									g['${$}'] = y;
								} else if(typeof y == 'object' && y instanceof Date) {
									g['${$}'] = y;
								} else if(typeof y == 'object' && typeof Number(y) == 'number') {
									g['${$}'] = Number(y);
								}
							} else if(g['${$}']!== null && typeof g['${$}'] == 'object' && y instanceof Date) {
								g['${$}'] = g['${$}'];
							} else if(g['${$}']!== null && typeof g['${$}'] == 'object') {
								g['${$}'] = Number(g['${$}']);
							}`+ze}else if(Q.aggregatorid==="MAX"){if("funcid"in Q.expression){let ve=_e(Q.expression);return ue+`if ((g['${$}'] == null && ${ve} !== null) ? y = ${F} : 
									(g['${$}'] !== null && ${ve} == null) ? y = g['${$}'] : 
									((y = ${F}) > g['${$}'])) {
									if (typeof y == 'number' || typeof y == 'bigint') {
									  g['${$}'] = y;
									} else if (typeof y == 'object' && y instanceof Date) {
									  g['${$}'] = y;
									} else if (typeof y == 'object' && typeof Number(y) == 'number') {
									  g['${$}'] = Number(y);
									}
								} else if (g['${$}'] !== null && typeof g['${$}'] == 'object' && y instanceof Date) {
									g['${$}'] = g['${$}'];
								} else if (g['${$}'] !== null && typeof g['${$}'] == 'object') {
									g['${$}'] = Number(g['${$}']);
								}`+ze}return ue+`if((g['${$}'] == null && ${F}!== null) ? y = ${F} : 
								(g['${$}']!== null && ${F} == null) ? y = g['${$}'] : 
								((y=${F}) > g['${$}'])) { 
								if(typeof y == 'number' || typeof y == 'bigint') {
									g['${$}'] = y;
								} else if(typeof y == 'object' && y instanceof Date) {
									g['${$}'] = y;
								} else if(typeof y == 'object' && typeof Number(y) == 'number') {
									g['${$}'] = Number(y);
								}
							} else if(g['${$}']!== null && typeof g['${$}'] == 'object' && y instanceof Date) {
								g['${$}'] = g['${$}'];
							} else if(g['${$}']!== null && typeof g['${$}'] == 'object') {
								g['${$}'] = Number(g['${$}']);
							}`+ze}else{if(Q.aggregatorid==="FIRST")return"";if(Q.aggregatorid==="LAST")return`${ue}g['${$}']=${F};${ze}`;if(Q.aggregatorid==="AVG")return`${ue}
							y= (${F});
							g['_COUNT_${$}'] += (typeof y == "undefined" || y === null) ? 0 : 1;
							if (typeof g['_SUM_${$}'] === 'bigint' || typeof y === 'bigint') {
								g['_SUM_${$}'] = BigInt(g['_SUM_${$}']);
								g['_SUM_${$}'] += BigInt(y || 0);
    							g['${$}'] = BigInt(g['_SUM_${$}']) / BigInt(g['_COUNT_${$}']); 
    						} else {
								g['_SUM_${$}'] += (y || 0);
    							g['${$}'] = g['_SUM_${$}'] / g['_COUNT_${$}']; 
    						}
							${ze}`;if(Q.aggregatorid==="AGGR")return`${ue}
							g['${$}']=${Q.expression.toJS("g",-1)};
							${ze}`;if(Q.aggregatorid==="REDUCE")return`${ue}
							g['${$}'] = alasql.aggr.${Q.funcid}(${F},g['${$}'],2);
							${ze}`}}return""}return""}).join(""),T+="}"}),new Function("p,params,alasql","var y;"+T)};function co(i,_,p){var f="",v=[],T={};return _.forEach(function(P){i.ixsources={},i.sources.forEach(function(V){i.ixsources[V.alias]=V});var D;if(i.ixsources[P])var D=i.ixsources[P].columns;p&&y.options.joinstar=="json"&&(f+="r['"+P+"']={};"),D&&D.length>0?D.forEach(function(V){let ae=ci(V.columnid);if(p&&y.options.joinstar=="underscore")v.push("'"+P+"_"+ae+"':p['"+P+"']['"+ae+"']");else if(p&&y.options.joinstar=="json")f+="r['"+P+"']['"+ae+"']=p['"+P+"']['"+ae+"'];";else{var ie="p['"+P+"']['"+ae+"']";if(T[V.columnid]){var Q=ie+" !== undefined ? "+ie+" : "+T[V.columnid].value;v[T[V.columnid].id]=T[V.columnid].key+Q,T[V.columnid].value=Q}else{var $="'"+ae+"':";v.push($+ie),T[V.columnid]={id:v.length-1,value:ie,key:$}}}i.selectColumns[ae]=!0;var F={columnid:V.columnid,dbtypeid:V.dbtypeid,dbsize:V.dbsize,dbprecision:V.dbprecision,dbenum:V.dbenum};i.columns.push(F),i.xcolumns[F.columnid]=F}):(f+='var w=p["'+P+'"];for(var k in w){r[k]=w[k]};',i.dirtyColumns=!0)}),{s:v.join(","),sp:f}}de.Select.prototype.compileSelect1=function(i,_){var p=this;i.columns=[],i.xcolumns={},i.selectColumns={},i.dirtyColumns=!1;var f="var r={",v="",T=[];return this.columns.forEach(function(P){if(P instanceof de.Column)if(P.columnid==="*")if(P.func)v+="r=params['"+P.param+"'](p['"+i.sources[0].alias+"'],p,params,alasql);";else if(P.tableid){var D=co(i,[P.tableid],!1);D.s&&(T=T.concat(D.s)),v+=D.sp}else{var D=co(i,Object.keys(i.aliases),!0);D.s&&(T=T.concat(D.s)),v+=D.sp}else{var V=P.tableid,ae=P.databaseid||i.sources[0].databaseid||i.database.databaseid;if(V||(V=i.defcols[P.columnid]),V||(V=i.defaultTableid),P.columnid!=="_"){var ie=_&&_.length>1&&Array.isArray(_[0])&&_[0].length>=1&&_[0][0].hasOwnProperty("sheetid");ie?v='var r={};var w=p["'+V+'"];var cols=['+p.columns.map(function(ue){return"'"+ue.columnid+"'"}).join(",")+"];var colas=["+p.columns.map(function(ue){return"'"+(ue.as||ue.columnid)+"'"}).join(",")+"];for (var i=0;i<Object.keys(p['"+V+"']).length;i++) for(var k=0;k<cols.length;k++){if (!r.hasOwnProperty(i)) r[i]={}; r[i][colas[k]]=w[i][cols[k]];}":T.push("'"+ci(P.as||P.columnid)+"':p['"+V+"']['"+P.columnid+"']")}else T.push("'"+ci(P.as||P.columnid)+"':p['"+V+"']");if(i.selectColumns[ci(P.as||P.columnid)]=!0,i.aliases[V]&&i.aliases[V].type==="table"){if(!y.databases[ae].tables[i.aliases[V].tableid])throw new Error("Table '"+V+"' does not exist in database");var Q=y.databases[ae].tables[i.aliases[V].tableid].columns,$=y.databases[ae].tables[i.aliases[V].tableid].xcolumns;if($&&Q.length>0){var F=$[P.columnid];if(F===void 0)throw new Error("Column does not exist: "+P.columnid);var _e={columnid:P.as||P.columnid,dbtypeid:F.dbtypeid,dbsize:F.dbsize,dbpecision:F.dbprecision,dbenum:F.dbenum};i.columns.push(_e),i.xcolumns[_e.columnid]=_e}else{var _e={columnid:P.as||P.columnid};i.columns.push(_e),i.xcolumns[_e.columnid]=_e,i.dirtyColumns=!0}}else{var _e={columnid:P.as||P.columnid};i.columns.push(_e),i.xcolumns[_e.columnid]=_e}}else if(P instanceof de.AggrValue){p.group||(p.group=[""]),P.as||(P.as=ci(P.toString())),P.aggregatorid==="SUM"||P.aggregatorid==="MAX"||P.aggregatorid==="MIN"||P.aggregatorid==="FIRST"||P.aggregatorid==="LAST"||P.aggregatorid==="AVG"||P.aggregatorid==="ARRAY"||P.aggregatorid==="REDUCE"||P.aggregatorid==="TOTAL"?T.push("'"+ci(P.as)+"':"+u(P.expression.toJS("p",i.defaultTableid,i.defcols))):P.aggregatorid==="COUNT"&&T.push("'"+ci(P.as)+"':1");var _e={columnid:P.as||P.columnid||P.toString()};i.columns.push(_e),i.xcolumns[_e.columnid]=_e}else{T.push("'"+ci(P.as||P.columnid||P.toString())+"':"+u(P.toJS("p",i.defaultTableid,i.defcols))),i.selectColumns[ci(P.as||P.columnid||P.toString())]=!0;var _e={columnid:P.as||P.columnid||P.toString()};i.columns.push(_e),i.xcolumns[_e.columnid]=_e}}),f+=T.join(",")+"};"+v,f},de.Select.prototype.compileSelect2=function(i,_){var p=i.selectfns;return this.orderColumns&&this.orderColumns.length>0&&this.orderColumns.forEach(function(f,v){var T="$$$"+v;f instanceof de.Column&&i.xcolumns[f.columnid]?p+="r['"+T+"']=r['"+f.columnid+"'];":f instanceof de.ParamValue&&i.xcolumns[_[f.param]]?p+="r['"+T+"']=r['"+_[f.param]+"'];":p+="r['"+T+"']="+f.toJS("p",i.defaultTableid,i.defcols)+";",i.removeKeys.push(T)}),new Function("p,params,alasql","var y;"+p+"return r")},de.Select.prototype.compileSelectGroup0=function(i){var _=this;_.columns.forEach(function(p,f){if(p instanceof de.Column&&p.columnid==="*")i.groupStar=p.tableid||"default";else{var v;p instanceof de.Column?v=ci(p.columnid):v=ci(p.toString(!0));for(var T=0;T<f;T++)if(v===_.columns[T].nick){v=_.columns[T].nick+":"+f;break}if(p.nick=v,_.group){var P=_.group.findIndex(function(D){return D.columnid===p.columnid&&D.tableid===p.tableid});P>-1&&(_.group[P].nick=v)}p.funcid&&(p.funcid.toUpperCase()==="ROWNUM"||p.funcid.toUpperCase()==="ROW_NUMBER")&&i.rownums.push(p.as)}}),this.columns.forEach(function(p){p.findAggregator&&p.findAggregator(i)}),this.having&&this.having.findAggregator&&this.having.findAggregator(i)},de.Select.prototype.compileSelectGroup1=function(i){var _=this,p="var r = {};";return _.columns.forEach(function(f){if(f instanceof de.Column&&f.columnid==="*")return p+="for(var k in g) {r[k]=g[k]};","";var v=f.as;v===void 0&&(f instanceof de.Column?v=ci(f.columnid):v=f.nick),i.groupColumns[v]=f.nick,p+="r['"+v+"']=",p+=u(f.toJS("g",""))+";";for(var T=0;T<i.removeKeys.length;T++)if(i.removeKeys[T]===v){i.removeKeys.splice(T,1);break}}),p},de.Select.prototype.compileSelectGroup2=function(i){var _=this,p=i.selectgfns;return _.columns.forEach(function(f){i.ingroup.indexOf(f.nick)>-1&&(p+="r['"+(f.as||f.nick)+"']=g['"+f.nick+"'];")}),this.orderColumns&&this.orderColumns.length>0&&this.orderColumns.forEach(function(f,v){var T="$$$"+v;f instanceof de.Column&&i.groupColumns[f.columnid]?p+="r['"+T+"']=r['"+f.columnid+"'];":p+="r['"+T+"']="+f.toJS("g","")+";",i.removeKeys.push(T)}),new Function("g,params,alasql","var y;"+p+"return r")},de.Select.prototype.compileRemoveColumns=function(i){var _=this;typeof this.removecolumns<"u"&&(i.removeKeys=i.removeKeys.concat(this.removecolumns.filter(function(p){return typeof p.like>"u"}).map(function(p){return p.columnid})),i.removeLikeKeys=this.removecolumns.filter(function(p){return typeof p.like<"u"}).map(function(p){return p.like.value}))},de.Select.prototype.compileHaving=function(i){if(this.having){var _=this.having.toJS("g",-1);return i.havingfns=_,new Function("g,params,alasql","var y;return "+_)}return function(){return!0}},de.Select.prototype.compileOrder=function(i,_){var p=this;if(p.orderColumns=[],this.order){if(this.order&&this.order.length==1&&this.order[0].expression&&typeof this.order[0].expression=="function"){var f=this.order[0].expression,v=this.order[0].nullsOrder=="FIRST"?-1:this.order[0].nullsOrder=="LAST"?1:0;return function(D,V){var ae=f(D),ie=f(V);if(v){if(ae==null)return ie==null?0:v;if(ie==null)return-v}return ae>ie?1:ae==ie?0:-1}}var T="",P="";return this.order.forEach(function(D,V){if(D.expression instanceof de.NumValue){if(D.expression.value>p.columns.length)throw new Error(`You are trying to order by column number ${D.expression.value} but you have only selected ${p.columns.length} columns.`);var ae=p.columns[D.expression.value-1]}else var ae=D.expression;p.orderColumns.push(ae);var ie="$$$"+V,Q="";if(D.expression instanceof de.Column){var $=D.expression.columnid;if(y.options.valueof)Q=".valueOf()";else if(i.xcolumns[$]){var F=i.xcolumns[$].dbtypeid;(F=="DATE"||F=="DATETIME"||F=="DATETIME2"||F=="STRING"||F=="NUMBER")&&(Q=".valueOf()")}}if(D.expression instanceof de.ParamValue){var $=_[D.expression.param];if(y.options.valueof)Q=".valueOf()";else if(i.xcolumns[$]){var F=i.xcolumns[$].dbtypeid;(F=="DATE"||F=="DATETIME"||F=="DATETIME2"||F=="STRING"||F=="NUMBER")&&(Q=".valueOf()")}}D.nocase&&(Q+=".toUpperCase()"),D.nullsOrder&&(D.nullsOrder=="FIRST"?T+="if((a['"+ie+"'] != null) && (b['"+ie+"'] == null)) return 1;":D.nullsOrder=="LAST"&&(T+="if((a['"+ie+"'] == null) && (b['"+ie+"'] != null)) return 1;"),T+="if((a['"+ie+"'] == null) == (b['"+ie+"'] == null)) {",P+="}"),T+="if((a['"+ie+"']||'')"+Q+(D.direction=="ASC"?">":"<")+"(b['"+ie+"']||'')"+Q+")return 1;",T+="if((a['"+ie+"']||'')"+Q+"==(b['"+ie+"']||'')"+Q+"){",P+="}"}),T+="return 0;",T+=P+"return -1",i.orderfns=T,new Function("a,b","var y;"+T)}},de.Select.prototype.compilePivot=function(i){var _=this,p=_.pivot.columnid,f=_.pivot.expr.aggregatorid,v=_.pivot.inlist,T=null;if(_.pivot.expr.expression.hasOwnProperty("columnid")?T=_.pivot.expr.expression.columnid:T=_.pivot.expr.expression.expression.columnid,T==null)throw"columnid not found";return v&&(v=v.map(function(P){return P.expr.columnid})),function(){var P=this;if(!P.data||P.data.length===0){P.columns=[];return}var D=Object.keys(P.data[0]),V=D.filter(function(Me){return Me!==p&&Me!==T}),ae=[],ie={},Q={},$={},F=[];if(P.data.forEach(function(Me){if(!(v&&v.indexOf(Me[p])===-1)){var Ut=V.map(function(xi){return Me[xi]===void 0||Me[xi]===null?"":Me[xi]}).join("`"),jt=Q[Ut];jt||(jt={},Q[Ut]=jt,F.push(jt),V.forEach(function(xi){jt[xi]=Me[xi]})),$[Ut]||($[Ut]={});var Zt=Me[p],ei=Me[T];if($[Ut][Zt]?ei!==null&&typeof ei<"u"&&$[Ut][Zt]++:$[Ut][Zt]=ei!==null&&typeof ei<"u"?1:0,ie[Zt]||(ie[Zt]=!0,ae.push(Zt)),f=="SUM"||f=="AVG"||f=="TOTAL")ei!==null&&typeof ei<"u"?jt[Zt]=typeof jt[Zt]>"u"||jt[Zt]===null?Number(ei):jt[Zt]+Number(ei):typeof jt[Zt]>"u"&&(jt[Zt]=null);else if(f=="COUNT")T==="*"||ei!==null&&typeof ei<"u"?jt[Zt]=(jt[Zt]||0)+1:typeof jt[Zt]>"u"&&(jt[Zt]=0);else if(f=="MIN")ei!==null&&typeof ei<"u"?(typeof jt[Zt]>"u"||jt[Zt]===null||ei<jt[Zt])&&(jt[Zt]=ei):typeof jt[Zt]>"u"&&(jt[Zt]=null);else if(f=="MAX")ei!==null&&typeof ei<"u"?(typeof jt[Zt]>"u"||jt[Zt]===null||ei>jt[Zt])&&(jt[Zt]=ei):typeof jt[Zt]>"u"&&(jt[Zt]=null);else if(f=="FIRST")typeof jt[Zt]>"u"&&(jt[Zt]=ei);else if(f=="LAST")jt[Zt]=ei;else if(y.aggr[f])typeof jt[Zt]>"u"?jt[Zt]=y.aggr[f](ei,void 0,1):jt[Zt]=y.aggr[f](ei,jt[Zt],2);else throw new Error("Unknown aggregator in PIVOT clause: "+f)}}),f=="AVG")for(var _e in Q){var ue=Q[_e];for(var ze in $[_e])if(ue.hasOwnProperty(ze)&&ue[ze]!==null){var ve=$[_e][ze];ve>0?ue[ze]=ue[ze]/ve:ue[ze]=null}}P.data=F,v?ae=v:ae.sort();let Ie=P.columns.find(Me=>Me.columnid===T);if(!Ie&&P.sources&&P.sources.length>0){let Me=P.sources[0].tableid,Ut=P.sources[0].databaseid;Me&&Ut&&y.databases[Ut]?.tables?.[Me]?.xcolumns&&(Ie=y.databases[Ut].tables[Me].xcolumns[T])}Ie=Ie||{columnid:T,dbtypeid:"OBJECT"},P.columns=P.columns.filter(function(Me){return V.includes(Me.columnid)}),ae.forEach(function(Me){var Ut=Er(Ie);Ut.columnid=Me;let jt=(Ie.dbtypeid||"OBJECT").toUpperCase(),Zt=["INT","INTEGER","SMALLINT","BIGINT","SERIAL","SMALLSERIAL","BIGSERIAL"],ei=[...Zt,"NUMBER","FLOAT","DECIMAL","NUMERIC","MONEY"];f==="COUNT"?Ut.dbtypeid="INT":f==="AVG"?Zt.includes(jt)?Ut.dbtypeid=Ie.dbtypeid:Ut.dbtypeid="FLOAT":f==="SUM"||f==="TOTAL"?ei.includes(jt)?Ut.dbtypeid=Ie.dbtypeid:Ut.dbtypeid="FLOAT":f==="MIN"||f==="MAX"||f==="FIRST"||f==="LAST"?Ut.dbtypeid=Ie.dbtypeid:Ut.dbtypeid||(Ut.dbtypeid="OBJECT"),P.columns.push(Ut)})}},de.Select.prototype.compileUnpivot=function(i){var _=this,p=_.unpivot.tocolumnid,f=_.unpivot.forcolumnid,v=_.unpivot.inlist.map(function(T){return T.columnid});return function(){var T=[],P=i.columns.map(function(D){return D.columnid}).filter(function(D){return v.indexOf(D)==-1&&D!=f&&D!=p});i.data.forEach(function(D){v.forEach(function(V){var ae={};P.forEach(function(ie){ae[ie]=D[ie]}),ae[f]=V,ae[p]=D[V],T.push(ae)})}),i.data=T}};let Be=(i,_)=>{let p=[],f=0,v=i.length;for(let T=0;T<v+1;T++){let P=[];for(let D=0;D<v;D++){let V;i[D]instanceof de.Column?(i[D].nick=ci(i[D].columnid),_.groupColumns[ci(i[D].columnid)]=i[D].nick,V=`${i[D].nick}	${i[D].toJS("p",_.sources[0].alias,_.defcols)}`):(_.groupColumns[ci(i[D].toString())]=ci(i[D].toString()),V=`${ci(i[D].toString())}	${i[D].toJS("p",_.sources[0].alias,_.defcols)}`),f&1<<D&&P.push(V)}p.push(P),f=(f<<1)+1}return p},Y=(i,_)=>{let p=[],f=i.length,v=1<<f;for(let T=0;T<v;T++){let P=[];for(let D=0;D<f;D++)T&1<<D&&(P=P.concat(ge(i[D],_)));p.push(P)}return p},K=(i,_)=>i.reduce((p,f)=>(p=p.concat(ge(f,_)),p),[]),se=(i,_)=>{let p=[];for(let f=0;f<i.length;f++)for(let v=0;v<_.length;v++)p.push(i[f].concat(_[v]));return p};function ge(i,_){if(Array.isArray(i)){let p=[[]];for(let f=0;f<i.length;f++)if(i[f]instanceof de.Column)i[f].nick=i[f].nick?ci(i[f].nick):ci(i[f].columnid),_.groupColumns[i[f].nick]=i[f].nick,p=p.map(v=>v.concat(`${i[f].nick}	${i[f].toJS("p",_.sources[0].alias,_.defcols)}`));else if(i[f]instanceof de.FuncValue)_.groupColumns[ci(i[f].toString())]=ci(i[f].toString()),p=p.map(v=>v.concat(`${ci(i[f].toString())}	${i[f].toJS("p",_.sources[0].alias,_.defcols)}`));else if(i[f]instanceof de.GroupExpression)if(i[f].type=="ROLLUP")p=se(p,Be(i[f].group,_));else if(i[f].type=="CUBE")p=se(p,Y(i[f].group,_));else if(i[f].type=="GROUPING SETS")p=se(p,K(i[f].group,_));else throw new Error("Unknown grouping function");else i[f]===""?p=[["1	1"]]:p=p.map(v=>v.concat(`${ci(i[f].toString())}	${i[f].toJS("p",_.sources[0].alias,_.defcols)}`));return p}return i instanceof de.FuncValue?(_.groupColumns[ci(i.toString())]=ci(i.toString()),[`${i.toString()}	${i.toJS("p",_.sources[0].alias,_.defcols)}`]):i instanceof de.Column?(i.nick=ci(i.columnid),_.groupColumns[i.nick]=i.nick,[`${i.nick}	${i.toJS("p",_.sources[0].alias,_.defcols)}`]):(_.groupColumns[ci(i.toString())]=ci(i.toString()),[`${ci(i.toString())}	${i.toJS("p",_.sources[0].alias,_.defcols)}`])}de.Select.prototype.compileDefCols=function(i,_){var p={".":{}};return this.from&&this.from.forEach(function(f){if(p["."][f.as||f.tableid]=!0,f instanceof de.Table){var v=f.as||f.tableid,T=y.databases[f.databaseid||_].tables[f.tableid];if(T===void 0)throw new Error("Table does not exist: "+f.tableid);T.columns&&T.columns.forEach(function(P){p[P.columnid]?p[P.columnid]="-":p[P.columnid]=v})}else if(!(f instanceof de.Select)&&!(f instanceof de.Search)&&!(f instanceof de.ParamValue)&&!(f instanceof de.VarValue)&&!(f instanceof de.FuncValue)&&!(f instanceof de.FromData)&&!(f instanceof de.Json)&&!f.inserted)throw new Error("Unknown type of FROM clause")}),this.joins&&this.joins.forEach(function(f){if(p["."][f.as||f.table.tableid]=!0,f.table){var v=f.as||f.table.tableid,T=f.table.databaseid||_,P=y.databases[T];if(P===void 0)throw new Error("Database does not exist: "+T);var D=P.tables[f.table.tableid];if(D===void 0)throw new Error("Table does not exist: "+f.table.tableid);D.columns&&D.columns.forEach(function(V){p[V.columnid]?p[V.columnid]="-":p[V.columnid]=v})}else if(!f.select&&!f.param&&!f.func)throw new Error("Unknown type of FROM clause")}),p},de.Union=class{constructor(i){Object.assign(this,i)}toString(){return"UNION"}compile(i){return null}},de.Apply=class{constructor(i){Object.assign(this,i)}toString(){let i=`${this.applymode} APPLY (${this.select.toString()})`;return this.as&&(i+=` AS ${this.as}`),i}},de.Over=class{constructor(i){Object.assign(this,i)}toString(){let i="OVER (";return this.partition&&(i+=`PARTITION BY ${this.partition.toString()}`,this.order&&(i+=" ")),this.order&&(i+=`ORDER BY ${this.order.toString()}`),i+=")",i}};{let i=Object.assign;class _{constructor(We){i(this,We)}toString(){return this.expression.toString()}execute(We,Wi,Li){if(this.expression){y.precompile(this,We,Wi);var Ht=new Function("params,alasql,p","var y;return "+this.expression.toJS("({})","",null)).bind(this),or=Ht(Wi,y);return Li&&(or=Li(or)),or}}}class p{constructor(We){i(this,We)}toString(){var We=this.expression.toString();return this.order&&(We+=" "+this.order.toString()),this.nocase&&(We+=" COLLATE NOCASE"),this.direction&&(We+=" "+this.direction),We}findAggregator(We){this.expression.findAggregator&&this.expression.findAggregator(We)}toJS(We,Wi,Li){return this.expression.reduced?"true":this.expression.toJS(We,Wi,Li)}compile(We,Wi,Li){return this.reduced?Nt():new Function("p","var y;return "+this.toJS(We,Wi,Li))}}class f{constructor(We){i(this,We)}toString(){var We="``"+this.value+"``";return We}toJS(){return"("+this.value+")"}execute(We,Wi,Li){var Ht=1,or=new Function("params,alasql,p",this.value);return or(Wi,y),Li&&(Ht=Li(Ht)),Ht}}class v{constructor(We){i(this,We)}toString(){var We=this.value;return this.value1&&(We=this.value1+"."+We),We}}class T{constructor(We){i(this,We)}toString(){var We=" ";return this.joinmode&&(We+=this.joinmode+" "),We+="JOIN "+this.table.toString(),We}}class P{constructor(We){i(this,We)}toString(){var We=this.tableid;return this.databaseid&&(We=this.databaseid+"."+We),We}}class D{constructor(We){i(this,We)}toString(){var We=this.viewid;return this.databaseid&&(We=this.databaseid+"."+We),We}}let V=new Set(["-","*","/","%","^"]),ae=new Set(["||"]),ie=new Set(["AND","OR","NOT","=","==","===","!=","!==","!===",">",">=","<","<=","IN","NOT IN","LIKE","NOT LIKE","REGEXP","GLOB","BETWEEN","NOT BETWEEN","IS NULL","IS NOT NULL"]);class Q{constructor(We){i(this,We)}toString(){let We=this.left.toString(),Wi;return this.op==="IN"||this.op==="NOT IN"?`${We} ${this.op} (${this.right.toString()})`:this.allsome?`${We} ${this.op} ${this.allsome} (${this.right.toString()})`:this.op==="->"||this.op==="!"?(Wi=`${We}${this.op}`,typeof this.right!="string"&&typeof this.right!="number"?Wi+`(${this.right.toString()})`:Wi+this.right.toString()):this.op==="BETWEEN"||this.op==="NOT BETWEEN"?`${We} ${this.op} ${this.right1.toString()} AND ${this.right2.toString()}`:`${We} ${this.op} ${this.allsome?this.allsome+" ":""}${this.right.toString()}`}findAggregator(We){this.left&&this.left.findAggregator&&this.left.findAggregator(We),this.right&&this.right.findAggregator&&!this.allsome&&this.right.findAggregator(We)}toType(We){if(V.has(this.op))return"number";if(ae.has(this.op))return"string";if(this.op==="+"){let Wi=this.left.toType(We),Li=this.right.toType(We);if(Wi==="string"||Li==="string")return"string";if(Wi==="number"||Li==="number")return"number"}return ie.has(this.op)||this.allsome?"boolean":this.op?"unknown":this.left.toType(We)}toJS(We,Wi,Li){var Ht;let or=[],vr=this.op,dn=this,qr=function(Sr){return Sr.toJS&&(Sr=Sr.toJS(We,Wi,Li)),"y["+(or.push(Sr)-1)+"]"};var hr=function(){return qr(dn.left)},lr=function(){return qr(dn.right)};if(this.op==="=")vr="===";else if(this.op==="<>")vr="!=";else if(this.op==="OR")vr="||";else if(this.op==="->"){let Sr=`(${hr()} || {})`;if(typeof this.right=="string")Ht=`${Sr}["${ci(this.right)}"]`;else if(typeof this.right=="number")Ht=`${Sr}[${this.right}]`;else if(this.right instanceof de.FuncValue){let sr=[];this.right.args&&this.right.args.length>0&&(sr=this.right.args.map(qr)),Ht=`${Sr}[${JSON.stringify(this.right.funcid)}](${sr.join(",")})`}else Ht=`${Sr}[${lr()}]`}else if(this.op==="!")typeof this.right=="string"&&(Ht=`alasql.databases[alasql.useid].objects[${hr()}]["${this.right}"]`);else if(this.op==="IS"){let Sr=hr(),sr=lr();this.right instanceof de.NullValue||this.right.op==="NOT"&&this.right.right instanceof de.NullValue?Ht=`((${Sr} == null) === (${sr} == null))`:Ht=`((${Sr} == ${sr}) || (${Sr} < 0 && true == ${sr}))`}else if(this.op==="==")Ht=`alasql.utils.deepEqual(${hr()}, ${lr()})`;else if(this.op==="==="||this.op==="!===")Ht=`(${this.op==="!==="?"!":""}((${hr()}).valueOf() === (${lr()}).valueOf()))`;else if(this.op==="!==")Ht=`(!alasql.utils.deepEqual(${hr()}, ${lr()}))`;else if(this.op==="||")Ht=`(''+(${hr()} || '') + (${lr()} || ''))`;else if(this.op==="LIKE"||this.op==="NOT LIKE")Ht=`(${this.op==="NOT LIKE"?"!":""}alasql.utils.like(${lr()}, ${hr()}${this.escape?`, ${qr(this.escape)}`:""}))`;else if(this.op==="REGEXP")Ht=`alasql.stdfn.REGEXP_LIKE(${hr()}, ${lr()})`;else if(this.op==="GLOB")Ht=`alasql.utils.glob(${hr()}, ${lr()})`;else if(this.op==="BETWEEN"||this.op==="NOT BETWEEN"){let Sr=hr();Ht=`(${this.op==="NOT BETWEEN"?"!":""}((${qr(this.right1)} <= ${Sr}) && (${Sr} <= ${qr(this.right2)})))`}else if(this.op==="IN")if(this.right instanceof de.Select)Ht=`alasql.utils.flatArray(this.queriesfn[${this.queriesidx}](params, null, ${We})).indexOf(alasql.utils.getValueOf(${hr()})) > -1`;else if(Array.isArray(this.right))if(!y.options.cache||this.right.some(Sr=>Sr instanceof de.ParamValue))Ht=`(new Set([${this.right.map(qr).join(",")}]).has(alasql.utils.getValueOf(${hr()})))`;else{y.sets=y.sets||{};let Sr=this.right.map(Br=>Br.value),sr=Sr.join(",");y.sets[sr]=y.sets[sr]||new Set(Sr),Ht=`alasql.sets["${sr}"].has(alasql.utils.getValueOf(${hr()}))`}else Ht=`(${lr()}.indexOf(${hr()}) > -1)`;else if(this.op==="NOT IN")if(this.right instanceof de.Select)Ht=`alasql.utils.flatArray(this.queriesfn[${this.queriesidx}](params, null, p)).indexOf(alasql.utils.getValueOf(${hr()})) < 0`;else if(Array.isArray(this.right))if(!y.options.cache||this.right.some(Sr=>Sr instanceof de.ParamValue))Ht=`(!(new Set([${this.right.map(qr).join(",")}]).has(alasql.utils.getValueOf(${hr()}))))`;else{y.sets=y.sets||{};let Sr=this.right.map(Br=>Br.value),sr=Sr.join(",");y.sets[sr]=y.sets[sr]||new Set(Sr),Ht=`!alasql.sets["${sr}"].has(alasql.utils.getValueOf(${hr()}))`}else Ht=`(${lr()}.indexOf(${hr()}) === -1)`;if(this.allsome==="ALL"){var Ht;if(this.right instanceof de.Select)Ht="alasql.utils.flatArray(this.query.queriesfn["+this.queriesidx+"](params,null,p))",Ht+=".every(function(b){return (",Ht+=hr()+")"+vr+"b})";else if(Array.isArray(this.right))Ht=""+(this.right.length==1?qr(this.right[0]):"["+this.right.map(qr).join(",")+"]"),Ht+=".every(function(b){return (",Ht+=hr()+")"+vr+"b})";else throw new Error("NOT IN operator without SELECT")}if(this.allsome==="SOME"||this.allsome==="ANY"){var Ht;if(this.right instanceof de.Select)Ht="alasql.utils.flatArray(this.query.queriesfn["+this.queriesidx+"](params,null,p))",Ht+=".some(function(b){return (",Ht+=hr()+")"+vr+"b})";else if(Array.isArray(this.right))Ht=""+(this.right.length==1?qr(this.right[0]):"["+this.right.map(qr).join(",")+"]"),Ht+=".some(function(b){return (",Ht+=hr()+")"+vr+"b})";else throw new Error("SOME/ANY operator without SELECT")}if(this.op==="AND"){if(this.left.reduced){if(this.right.reduced)return"true";Ht=lr()}else this.right.reduced&&(Ht=hr());vr="&&"}var pn=Ht||"("+hr()+vr+lr()+")",Rr="y=[("+or.join("), (")+")]";return vr==="&&"||vr==="||"||vr==="IS"||vr==="IS NULL"||vr==="IS NOT NULL"?"("+Rr+", "+pn+")":`(${Rr}, y.some(e => e == null) ? void 0 : ${pn})`}}class ${constructor(We){i(this,We)}toString(){return"@"+this.variable}toType(){return"unknown"}toJS(){return"alasql.vars['"+ci(this.variable)+"']"}}class F{constructor(We){i(this,We)}toString(){return this.value.toString()}toType(){return"number"}toJS(){return""+this.value}}class _e{constructor(We){i(this,We)}toString(){return"'"+this.value.toString()+"'"}toType(){return"string"}toJS(){return"'"+ci(this.value)+"'"}}class ue{constructor(We){i(this,We)}toString(){return"VALUE"}toType(){return"object"}toJS(We,Wi,Li){return We}}class ze{constructor(We){i(this,We)}toString(){return"ARRAY[]"}toType(){return"object"}toJS(We,Wi,Li){return"[("+this.value.map(function(Ht){return Ht.toJS(We,Wi,Li)}).join("), (")+")]"}}class ve{constructor(We){i(this,We)}toString(){return this.value?"TRUE":"FALSE"}toType(){return"boolean"}toJS(){return this.value?"true":"false"}}class Ie{constructor(We){i(this,We)}toString(){return"NULL"}toJS(){return"undefined"}}class Me{constructor(We){i(this,We)}toString(){return"$"+this.param}toJS(){return typeof this.param=="string"?"params['"+this.param+"']":"params["+this.param+"]"}}let Ut={"~":"~","-":"-","+":"+",NOT:"!"};class jt{constructor(We){i(this,We)}toString(){let{op:We,right:Wi}=this,Li=Wi.toString();switch(We){case"~":case"-":case"+":case"#":return We+Li;case"NOT":return We+"("+Li+")";default:return"("+Li+")"}}findAggregator(We){this.right.findAggregator&&this.right.findAggregator(We)}toType(){switch(this.op){case"-":case"+":return"number";case"NOT":return"boolean";default:return"string"}}toJS(We,Wi,Li){if(this.right instanceof Zt&&this.op==="#")return`(alasql.databases[alasql.useid].objects['${this.right.columnid}'])`;let Ht=this.right.toJS(We,Wi,Li);if(Ut.hasOwnProperty(this.op))return`(${Ut[this.op]}(${Ht}))`;if(this.op==null)return`(${Ht})`;throw new Error(`Unsupported operator: ${this.op}`)}}class Zt{constructor(We){i(this,We)}toString(){let We=this.columnid;return this.columnid==+this.columnid&&(We="["+this.columnid+"]"),this.tableid&&(We=this.tableid+(this.columnid===+this.columnid?"":".")+We,this.databaseid&&(We=this.databaseid+"."+We)),We}toJS(We,Wi,Li){if(!this.tableid&&Wi===""&&!Li)return this.columnid!=="_"?`${We}['${this.columnid}']`:We==="g"?"g['_']":We;if(We==="g")return`g['${this.nick}']`;if(this.tableid)return this.columnid!=="_"?`${We}['${this.tableid}']['${this.columnid}']`:We==="g"?"g['_']":`${We}['${this.tableid}']`;if(Li){let Ht=Li[this.columnid];if(Ht==="-")throw new Error(`Cannot resolve column "${this.columnid}" because it exists in two source tables`);return Ht?this.columnid!=="_"?`${We}['${Ht}']['${this.columnid}']`:`${We}['${Ht}']`:this.columnid!=="_"?`${We}['${this.tableid||Wi}']['${this.columnid}']`:`${We}['${this.tableid||Wi}']`}return Wi===-1?`${We}['${this.columnid}']`:this.columnid!=="_"?`${We}['${this.tableid||Wi}']['${this.columnid}']`:`${We}['${this.tableid||Wi}']`}}class ei{constructor(We){i(this,We)}toString(){let We=this.aggregatorid==="REDUCE"?this.funcid.replace(Se,""):this.aggregatorid,Wi=this.distinct?"DISTINCT ":"",Li=this.expression?this.expression.toString():"",Ht=this.over?` ${this.over.toString()}`:"";return`${We}(${Wi}${Li})${Ht}`}findAggregator(We){let Wi=ci(this.toString())+":"+We.selectGroup.length;this.nick||(this.nick=Wi,We.removeKeys.includes(Wi)||We.removeKeys.push(Wi)),We.selectGroup.push(this)}toType(){return["SUM","COUNT","AVG","MIN","MAX","AGGR","VAR","STDDEV","TOTAL"].includes(this.aggregatorid)?"number":this.aggregatorid==="ARRAY"?"array":this.expression.toType()}toJS(){var We=this.nick;return We===void 0&&(We=ci(this.toString())),"g['"+We+"']"}}class xi{constructor(We){i(this,We)}}xi.prototype.toString=p.prototype.toString;class Ci{constructor(We){i(this,We)}toString(){return this.type+"("+this.group.toString()+")"}}i(de,{AggrValue:ei,ArrayValue:ze,Column:Zt,DomainValueValue:ue,Expression:p,ExpressionStatement:_,GroupExpression:Ci,JavaScript:f,Join:T,Literal:v,LogicValue:ve,NullValue:Ie,NumValue:F,Op:Q,OrderExpression:xi,ParamValue:Me,StringValue:_e,Table:P,UniOp:jt,VarValue:$,View:D})}de.FromData=function(i){return de.extend(this,i)},de.FromData.prototype.toString=function(){return this.data?"DATA("+(Math.random()*1e16|0)+")":"?"},de.FromData.prototype.toJS=function(){},de.Select.prototype.exec=function(i,_){this.preparams&&(i=this.preparams.concat(i));var p=y.useid,f=y.databases[p],v=this.toString(),T=$r(v),P=this.compile(p);if(P){P.sql=v,P.dbversion=f.dbversion,f.sqlCacheSize>y.MAXSQLCACHESIZE&&f.resetSqlCache(),f.sqlCacheSize++,f.sqlCache[T]=P;var D=y.res=P(i,_);return D}},de.Select.prototype.Select=function(){var i=this,_=[];if(arguments.length>1)_=Array.prototype.slice.call(arguments);else if(arguments.length==1)Array.isArray(arguments[0])?_=arguments[0]:_=[arguments[0]];else throw new Error("Wrong number of arguments of Select() function");return i.columns=[],_.forEach(function(p){if(typeof p=="string")i.columns.push(new de.Column({columnid:p}));else if(typeof p=="function"){var f=0;i.preparams?f=i.preparams.length:i.preparams=[],i.preparams.push(p),i.columns.push(new de.Column({columnid:"*",func:p,param:f}))}}),i},de.Select.prototype.From=function(i){var _=this;if(_.from||(_.from=[]),Array.isArray(i)){var p=0;_.preparams?p=_.preparams.length:_.preparams=[],_.preparams.push(i),_.from.push(new de.ParamValue({param:p}))}else if(typeof i=="string")_.from.push(new de.Table({tableid:i}));else throw new Error("Unknown arguments in From() function");return _},de.Select.prototype.OrderBy=function(){var i=this,_=[];if(i.order=[],arguments.length==0)_=["_"];else if(arguments.length>1)_=Array.prototype.slice.call(arguments);else if(arguments.length==1)Array.isArray(arguments[0])?_=arguments[0]:_=[arguments[0]];else throw new Error("Wrong number of arguments of Select() function");return _.length>0&&_.forEach(function(p){var f=new de.Column({columnid:p});typeof p=="function"&&(f=p),i.order.push(new de.OrderExpression({expression:f,direction:"ASC"}))}),i},de.Select.prototype.Top=function(i){var _=this;return _.top=new de.NumValue({value:i}),_},de.Select.prototype.GroupBy=function(){var i=this,_=[];if(arguments.length>1)_=Array.prototype.slice.call(arguments);else if(arguments.length==1)Array.isArray(arguments[0])?_=arguments[0]:_=[arguments[0]];else throw new Error("Wrong number of arguments of Select() function");return i.group=[],_.forEach(function(p){var f=new de.Column({columnid:p});i.group.push(f)}),i},de.Select.prototype.Where=function(i){var _=this;return typeof i=="function"&&(_.where=i),_},de.FuncValue=function(i){return Object.assign(this,i)};let Se=/[^0-9A-Z_$]+/i;de.FuncValue.prototype.toString=function(){let i="";return y.fn[this.funcid]?i+=this.funcid:y.aggr[this.funcid]?i+=this.funcid:(y.stdlib[this.funcid.toUpperCase()]||y.stdfn[this.funcid.toUpperCase()])&&(i+=this.funcid.toUpperCase().replace(Se,"")),this.funcid!=="CURRENT_TIMESTAMP"&&(i+="(",this.args&&this.args.length>0&&(i+=this.args.map(function(_){return _.toString()}).join(",")),i+=")"),i},de.FuncValue.prototype.execute=function(i,_,p){let f=1;return y.precompile(this,i,_),new Function("params,alasql","var y;return "+this.toJS("","",null))(_,y),p&&(f=p(f)),f},de.FuncValue.prototype.findAggregator=function(i){this.args&&this.args.length>0&&this.args.forEach(function(_){_.findAggregator&&_.findAggregator(i)})},de.FuncValue.prototype.toJS=function(i,_,p){var f="",v=this.funcid;return!y.fn[v]&&y.stdlib[v.toUpperCase()]?this.args&&this.args.length>0?f+=y.stdlib[v.toUpperCase()].apply(this,this.args.map(function(T){return T.toJS(i,_)})):f+=y.stdlib[v.toUpperCase()]():!y.fn[v]&&y.stdfn[v.toUpperCase()]?(this.newid&&(f+="new "),f+="alasql.stdfn["+JSON.stringify(this.funcid.toUpperCase())+"](",this.args&&this.args.length>0&&(f+=this.args.map(function(T){return T.toJS(i,_,p)}).join(",")),f+=")"):(this.newid&&(f+="new "),f+="alasql.fn["+JSON.stringify(this.funcid)+"](",this.args&&this.args.length>0&&(f+=this.args.map(function(T){return T.toJS(i,_,p)}).join(",")),f+=")"),f};var te=y.stdlib={},Re=y.stdfn={};te.ABS=function(i){return"Math.abs("+i+")"},te.CLONEDEEP=function(i){return"alasql.utils.cloneDeep("+i+")"},Re.CONCAT=function(){return Array.prototype.slice.call(arguments).join("")},te.EXP=function(i){return"Math.pow(Math.E,"+i+")"},te.IIF=function(i,_,p){if(arguments.length===3)return`((${i}) ? (${_}) : (${p}))`;throw new Error("Number of arguments of IFF is not equals to 3")},te.IFNULL=function(i,_){return`((typeof ${i} === "undefined" || ${i} === null) ? ${_} : ${i})`},te.INSTR=function(i,_){return`((${i}).indexOf(${_}) + 1)`},te.LEN=te.LENGTH=function(i){return tt(i,"y.length")},te.LOWER=te.LCASE=function(i){return tt(i,"String(y).toLowerCase()")},te.LTRIM=function(i){return tt(i,'y.replace(/^[ ]+/,"")')},te.RTRIM=function(i){return tt(i,'y.replace(/[ ]+$/,"")')},te.MAX=te.GREATEST=function(){return"["+Array.prototype.join.call(arguments,",")+"].reduce(function (a, b) { return a > b ? a : b; })"},te.MIN=te.LEAST=function(){return"["+Array.prototype.join.call(arguments,",")+"].reduce(function (a, b) { return a < b ? a : b; })"},te.SUBSTRING=te.SUBSTR=te.MID=function(i,_,p){if(arguments.length==2)return tt(i,"y.substr("+_+"-1)");if(arguments.length==3)return tt(i,"y.substr("+_+"-1,"+p+")")},Re.REGEXP_LIKE=function(i,_,p){return(i||"").search(RegExp(_,p))>-1},te.ISNULL=te.NULLIF=function(i,_){return"("+i+"=="+_+"?undefined:"+i+")"},te.POWER=function(i,_){return"Math.pow("+i+","+_+")"},te.RANDOM=function(i){return arguments.length==0?"Math.random()":"(Math.random()*("+i+")|0)"},te.ROUND=function(i,_){return arguments.length==2?"Math.round(("+i+")*Math.pow(10,("+_+")))/Math.pow(10,("+_+"))":"Math.round("+i+")"},te.CEIL=te.CEILING=function(i){return"Math.ceil("+i+")"},te.FLOOR=function(i){return"Math.floor("+i+")"},te.ROWNUM=function(){return"1"},te.ROW_NUMBER=function(){return"1"},te.SQRT=function(i){return"Math.sqrt("+i+")"},te.TRIM=function(i){return tt(i,"y.trim()")},te.UPPER=te.UCASE=function(i){return tt(i,"String(y).toUpperCase()")},Re.CONCAT_WS=function(){var i=Array.prototype.slice.call(arguments);return i=i.filter(_=>!(_===null||typeof _>"u")),i.slice(1,i.length).join(i[0]||"")},y.aggr.group_concat=y.aggr.GROUP_CONCAT=function(i,_,p){return p===1?""+i:(p===2&&(_+=","+i),_)},y.aggr.median=y.aggr.MEDIAN=function(i,_,p){if(p===2)return i!==null&&_.push(i),_;if(p===1)return i===null?[]:[i];if(!_.length)return null;let f=_.sort((D,V)=>D>V?1:D<V?-1:0),v=(f.length+1)/2,T=v|0,P=f[T-1];return v===T||typeof P!="number"&&!(P instanceof Number)?P:(P+f[T])/2},y.aggr.QUART=function(i,_,p,f){if(p===2)return i!==null&&_.push(i),_;if(p===1)return i===null?[]:[i];if(!_.length)return _;f=f||1;var v=_.sort(function(P,D){return P===D?0:P>D?1:-1});let T=f*(v.length+1)/4;return Number.isInteger(T)?v[T-1]:v[Math.floor(T)]},y.aggr.QUART2=function(i,_,p){return y.aggr.QUART(i,_,p,2)},y.aggr.QUART3=function(i,_,p){return y.aggr.QUART(i,_,p,3)},y.aggr.VAR=function(i,_,p){return p===1?i===null?{sum:0,sumSq:0,count:0}:{sum:i,sumSq:i*i,count:1}:p===2?(i!==null&&(_.sum+=i,_.sumSq+=i*i,_.count++),_):_.count>1?(_.sumSq-_.sum*_.sum/_.count)/(_.count-1):0},y.aggr.STDEV=function(i,_,p){return p===1||p===2?y.aggr.VAR(i,_,p):Math.sqrt(y.aggr.VAR(i,_,p))},y.aggr.STDEV=function(i,_,p){return p===1||p===2?y.aggr.VAR(i,_,p):Math.sqrt(y.aggr.VAR(i,_,p))},y.aggr.VARP=function(i,_,p){if(p===1)return{count:1,sum:i,sumSq:i*i};if(p===2)return _.count++,_.sum+=i,_.sumSq+=i*i,_;if(_.count>0){let f=_.sum/_.count;return _.sumSq/_.count-f*f}else return 0},y.aggr.STD=y.aggr.STDDEV=y.aggr.STDEVP=function(i,_,p){return p==1||p==2?y.aggr.VARP(i,_,p):Math.sqrt(y.aggr.VARP(i,_,p))},y._aggrOriginal=y.aggr,y.aggr={},Object.keys(y._aggrOriginal).forEach(function(i){y.aggr[i]=function(_,p,f){if(!(f===3&&typeof p>"u"))return y._aggrOriginal[i].apply(null,arguments)}}),Re.REPLACE=function(i,_,p){return(i||"").split(_).join(p)};for(var Ae=[],ke=0;ke<256;ke++)Ae[ke]=(ke<16?"0":"")+ke.toString(16);Re.NEWID=Re.UUID=Re.GEN_RANDOM_UUID=function(){var i=Math.random()*4294967295|0,_=Math.random()*4294967295|0,p=Math.random()*4294967295|0,f=Math.random()*4294967295|0;return Ae[i&255]+Ae[i>>8&255]+Ae[i>>16&255]+Ae[i>>24&255]+"-"+Ae[_&255]+Ae[_>>8&255]+"-"+Ae[_>>16&15|64]+Ae[_>>24&255]+"-"+Ae[p&63|128]+Ae[p>>8&255]+"-"+Ae[p>>16&255]+Ae[p>>24&255]+Ae[f&255]+Ae[f>>8&255]+Ae[f>>16&255]+Ae[f>>24&255]},de.CaseValue=function(i){return Object.assign(this,i)},de.CaseValue.prototype.toString=function(){var i="CASE ";return this.expression&&(i+=this.expression.toString()),this.whens&&(i+=this.whens.map(function(_){return" WHEN "+_.when.toString()+" THEN "+_.then.toString()}).join()),i+=" END",i},de.CaseValue.prototype.findAggregator=function(i){this.expression&&this.expression.findAggregator&&this.expression.findAggregator(i),this.whens&&this.whens.length>0&&this.whens.forEach(function(_){_.when.findAggregator&&_.when.findAggregator(i),_.then.findAggregator&&_.then.findAggregator(i)}),this.elses&&this.elses.findAggregator&&this.elses.findAggregator(i)},de.CaseValue.prototype.toJS=function(i,_,p){let f=`(((${i}, params, alasql) => {
        let y, r;`;return this.expression?(f+=`let v = ${this.expression.toJS(i,_,p)};`,this.whens.forEach((v,T)=>{let P=`v === ${v.when.toJS(i,_,p)}`,D=`r = ${v.then.toJS(i,_,p)}`;f+=`${T===0?"if":" else if"} (${P}) { ${D}; }`})):this.whens.forEach((v,T)=>{let P=v.when.toJS(i,_,p),D=`r = ${v.then.toJS(i,_,p)}`;f+=`${T===0?"if":" else if"} (${P}) { ${D}; }`}),this.elses&&(f+=` else { r = ${this.elses.toJS(i,_,p)}; }`),f+="; return r; }))("+i+", params, alasql)",f},de.Json=function(i){return Object.assign(this,i)},de.Json.prototype.toString=function(){var i="";return i+=at(this.value),i+="",i};let at=y.utils.JSONtoString=function(i){if(typeof i=="string")return`"${i}"`;if(typeof i=="number"||typeof i=="boolean")return String(i);if(typeof i=="bigint")return`${i.toString()}n`;if(Array.isArray(i))return`[${i.map(_=>at(_)).join(",")}]`;if(typeof i=="object")if(!i.toJS||i instanceof de.Json){let _=[];for(let p in i){let f=typeof p=="string"?`"${p}"`:String(p),v=at(i[p]);_.push(`${f}:${v}`)}return`{${_.join(",")}}`}else{if(i.toString)return i.toString();throw new Error(`1: Cannot show JSON object ${JSON.stringify(i)}`)}else throw new Error(`2: Cannot show JSON object ${JSON.stringify(i)}`)};function je(i,_,p,f){var v="";if(typeof i=="string")v='"'+i+'"';else if(typeof i=="number")v="("+i+")";else if(typeof i=="boolean")v=i;else if(typeof i=="bigint")v=i.toString()+"n";else if(typeof i=="object")if(Array.isArray(i))v+=`[${i.map(T=>je(T,_,p,f)).join(",")}]`;else if(!i.toJS||i instanceof de.Json){let T=[];for(let P in i){let D=typeof P=="string"?`"${P}"`:P.toString(),V=je(i[P],_,p,f);T.push(`${D}:${V}`)}v=`{${T.join(",")}}`}else if(i.toJS)v=i.toJS(_,p,f);else throw new Error(`Cannot parse JSON object ${JSON.stringify(i)}`);else throw new Error("2Can not parse JSON object "+JSON.stringify(i));return v}de.Json.prototype.toJS=function(i,_,p){return je(this.value,i,_,p)},de.Convert=function(i){return Object.assign(this,i)},de.Convert.prototype.toString=function(){var i="CONVERT(";return i+=this.dbtypeid,typeof this.dbsize<"u"&&(i+="("+this.dbsize,this.dbprecision&&(i+=","+this.dbprecision),i+=")"),i+=","+this.expression.toString(),this.style&&(i+=","+this.style),i+=")",i},de.Convert.prototype.toJS=function(i,_,p){return`alasql.stdfn.CONVERT(${this.expression.toJS(i,_,p)}, {
        dbtypeid: "${this.dbtypeid}",
        dbsize: ${this.dbsize},
        dbprecision: ${this.dbprecision},
        style: ${this.style}
    })`};function Yt(i){var _=i.getMonth()+1,p=i.getYear(),f=i.getFullYear(),v=i.getDate(),T=i.toString().substr(4,3),P=("0"+v).substr(-2),D=("0"+_).substr(-2),V=("0"+p).substr(-2),ae=("0"+i.getHours()).substr(-2),ie=("0"+i.getMinutes()).substr(-2),Q=("0"+i.getSeconds()).substr(-2),$=("00"+i.getMilliseconds()).substr(-3);return{month:_,year:p,fullYear:f,date:v,day:T,formattedDate:P,formattedMonth:D,formattedYear:V,formattedHour:ae,formattedMinutes:ie,formattedSeconds:Q,formattedMilliseconds:$}}y.stdfn.CONVERT=function(i,_){var p=i,f=_.dbtypeid?.toUpperCase(),v,T;if((_.style||_.dbtypeid=="Date"||["DATE","DATETIME","DATETIME2"].indexOf(f)>-1)&&(/\d{8}/.test(p)?v=new Date(+p.substr(0,4),+p.substr(4,2)-1,+p.substr(6,2)):v=Hi(p),T=Yt(v)),_.style)switch(_.style){case 1:p=T.formattedMonth+"/"+T.formattedDate+"/"+T.formattedYear;break;case 2:p=T.formattedYear+"."+T.formattedMonth+"."+T.formattedDate;break;case 3:p=T.formattedDate+"/"+T.formattedMonth+"/"+T.formattedYear;break;case 4:p=T.formattedDate+"."+T.formattedMonth+"."+T.formattedYear;break;case 5:p=T.formattedDate+"-"+T.formattedMonth+"-"+T.formattedYear;break;case 6:p=T.formattedDate+" "+T.day.toLowerCase()+" "+T.formattedYear;break;case 7:p=T.day+" "+T.formattedDate+","+T.formattedYear;break;case 8:case 108:p=T.formattedHour+":"+T.formattedMinutes+":"+T.formattedSeconds;break;case 10:p=T.formattedMonth+"-"+T.formattedDate+"-"+T.formattedYear;break;case 11:p=T.formattedYear+"/"+T.formattedMonth+"/"+T.formattedDate;break;case 12:p=T.formattedYear+T.formattedMonth+T.formattedDate;break;case 101:p=T.formattedMonth+"/"+T.formattedDate+"/"+T.fullYear;break;case 102:p=T.fullYear+"."+T.formattedMonth+"."+T.formattedDate;break;case 103:p=T.formattedDate+"/"+T.formattedMonth+"/"+T.fullYear;break;case 104:p=T.formattedDate+"."+T.formattedMonth+"."+T.fullYear;break;case 105:p=T.formattedDate+"-"+T.formattedMonth+"-"+T.fullYear;break;case 106:p=T.formattedDate+" "+T.day.toLowerCase()+" "+T.fullYear;break;case 107:p=T.day+" "+T.formattedDate+","+T.fullYear;break;case 110:p=T.formattedMonth+"-"+T.formattedDate+"-"+T.fullYear;break;case 111:p=T.fullYear+"/"+T.formattedMonth+"/"+T.formattedDate;break;case 112:p=T.fullYear+T.formattedMonth+T.formattedDate;break;default:throw new Error("The CONVERT style "+_.style+" is not realized yet.")}switch(f){case"DATE":return`${T.formattedYear}.${T.formattedMonth}.${T.formattedDate}`;case"DATETIME":case"DATETIME2":return`${T.fullYear}.${T.formattedMonth}.${T.formattedDate} ${T.formattedHour}:${T.formattedMinutes}:${T.formattedSeconds}.${T.formattedMilliseconds}`;case"MONEY":var P=+p;return(P|0)+P*100%100/100;case"BOOLEAN":return!!p;case"INT":case"INTEGER":case"SMALLINT":case"BIGINT":case"SERIAL":case"SMALLSERIAL":case"BIGSERIAL":return p|0;case"STRING":case"VARCHAR":case"NVARCHAR":case"CHARACTER VARIABLE":return _.dbsize?String(p).substr(0,_.dbsize):String(p);case"CHAR":case"CHARACTER":case"NCHAR":return(p+" ".repeat(_.dbsize)).substr(0,_.dbsize);case"NUMBER":case"FLOAT":case"DECIMAL":case"NUMERIC":var P=+p;return _.dbsize!==void 0&&(P=parseFloat(P.toPrecision(_.dbsize))),_.dbprecision!==void 0&&(P=parseFloat(P.toFixed(_.dbprecision))),P;case"JSON":if(typeof p=="object")return p;try{return JSON.parse(p)}catch{throw new Error("Cannot convert string to JSON")}case"Date":return p;default:return p}},de.ColumnDef=function(i){return Object.assign(this,i)},de.ColumnDef.prototype.toString=function(){let i=this.columnid;return this.dbtypeid&&(i+=" "+this.dbtypeid),this.dbsize&&(i+="("+this.dbsize,this.dbprecision&&(i+=","+this.dbprecision),i+=")"),this.primarykey&&(i+=" PRIMARY KEY"),this.notnull&&(i+=" NOT NULL"),i},de.CreateTable=function(i){return Object.assign(this,i)},de.CreateTable.prototype.toString=function(){let i=`CREATE${this.temporary?" TEMPORARY":""}${this.view?" VIEW":` ${this.class?"CLASS":"TABLE"}`}${this.ifnotexists?" IF NOT EXISTS":""} ${this.table.toString()}`;return this.viewcolumns&&(i+=`(${this.viewcolumns.map(_=>_.toString()).join(",")})`),this.as?i+=` AS ${this.as}`:i+=` (${this.columns.map(_=>_.toString()).join(",")})`,this.view&&this.select&&(i+=` AS ${this.select.toString()}`),i},de.CreateTable.prototype.execute=function(i,_,p){var f=y.databases[this.table.databaseid||i],v=this.table.tableid;if(!v)throw new Error("Table name is not defined");var T=this.columns,P=this.constraints||[];if(this.ifnotexists&&f.tables[v])return p?p(0):0;if(f.tables[v])throw new Error("Can not create table '"+v+"', because it already exists in the database '"+f.databaseid+"'");var D=f.tables[v]=new y.Table;this.class&&(D.isclass=!0);var V=[],ae=[];if(T&&T.forEach(function($){var F=$.dbtypeid;y.fn[F]||(F=F.toUpperCase()),["SERIAL","SMALLSERIAL","BIGSERIAL"].indexOf(F)>-1&&($.identity={value:1,step:1});var _e={columnid:$.columnid,dbtypeid:F,dbsize:$.dbsize,dbprecision:$.dbprecision,notnull:$.notnull,identity:$.identity};if($.identity&&(D.identities[$.columnid]={value:+$.identity.value,step:+$.identity.step}),$.check&&D.checks.push({id:$.check.constrantid,fn:new Function("r","var y;return "+$.check.expression.toJS("r",""))}),$.default&&V.push(JSON.stringify(""+$.columnid)+":"+$.default.toJS("r","")),$.primarykey){var ue=D.pk={};ue.columns=[$.columnid],ue.onrightfns=`r[${JSON.stringify($.columnid)}]`,ue.onrightfn=new Function("r","var y;return "+ue.onrightfns),ue.hh=$r(ue.onrightfns),D.uniqs[ue.hh]={}}if($.unique){var ze={};D.uk=D.uk||[],D.uk.push(ze),ze.columns=[$.columnid],ze.onrightfns=`r[${JSON.stringify($.columnid)}]`,ze.onrightfn=new Function("r","var y;return "+ze.onrightfns),ze.hh=$r(ze.onrightfns),D.uniqs[ze.hh]={}}if($.foreignkey){var ve=$.foreignkey.table,Ie=y.databases[ve.databaseid||i].tables[ve.tableid];if(typeof ve.columnid>"u")if(Ie.pk.columns&&Ie.pk.columns.length>0)ve.columnid=Ie.pk.columns[0];else throw new Error("FOREIGN KEY allowed only to tables with PRIMARY KEYs");var Me=function(Ut){var jt={};if(typeof Ut[$.columnid]>"u")return!0;jt[ve.columnid]=Ut[$.columnid];var Zt=Ie.pk.onrightfn(jt);if(!Ie.uniqs[Ie.pk.hh][Zt])throw new Error("Foreign key violation");return!0};D.checks.push({fn:Me})}$.onupdate&&ae.push(`r[${JSON.stringify($.columnid)}]=`+$.onupdate.toJS("r","")),D.columns.push(_e),D.xcolumns[_e.columnid]=_e}),D.defaultfns=V.join(","),D.onupdatefns=ae.join(";"),P.forEach(function($){var F;if($.type==="PRIMARY KEY"){if(D.pk)throw new Error("Primary key already exists");var _e=D.pk={};_e.columns=$.columns,_e.onrightfns=_e.columns.map(function(Ie){return`r[${JSON.stringify(Ie)}]`}).join("+'`'+"),_e.onrightfn=new Function("r","var y;return "+_e.onrightfns),_e.hh=$r(_e.onrightfns),D.uniqs[_e.hh]={}}else if($.type==="CHECK")F=new Function("r","var y;return "+$.expression.toJS("r",""));else if($.type==="UNIQUE"){var ue={};D.uk=D.uk||[],D.uk.push(ue),ue.columns=$.columns,ue.onrightfns=ue.columns.map(function(Ie){return`r[${JSON.stringify(Ie)}]`}).join("+'`'+"),ue.onrightfn=new Function("r","var y;return "+ue.onrightfns),ue.hh=$r(ue.onrightfns),D.uniqs[ue.hh]={}}else if($.type==="FOREIGN KEY"){var ze=$.fktable;$.fkcolumns&&$.fkcolumns.length>0&&(ze.fkcolumns=$.fkcolumns);var ve=y.databases[ze.databaseid||i].tables[ze.tableid];if(typeof ze.fkcolumns>"u"&&(ze.fkcolumns=ve.pk.columns),ze.columns=$.columns,ze.fkcolumns.length>ze.columns.length)throw new Error("Invalid foreign key on table "+D.tableid);F=function(Ie){var Me={};if(ze.fkcolumns.forEach(function(Zt,ei){Ie[ze.columns[ei]]!=null&&(Me[Zt]=Ie[ze.columns[ei]])}),Object.keys(Me).length===0)return!0;if(Object.keys(Me).length!==ze.columns.length)throw new Error("Invalid foreign key on table "+D.tableid);var Ut=y.databases[ze.databaseid||i].tables[ze.tableid],jt=Ut.pk.onrightfn(Me);if(!Ut.uniqs[Ut.pk.hh][jt])throw new Error("Foreign key violation");return!0}}F&&D.checks.push({fn:F,id:$.constraintid,fk:$.type==="FOREIGN KEY"})}),this.view&&this.viewcolumns){var ie=this;this.viewcolumns.forEach(function($,F){ie.select.columns[F].as=$.columnid})}if(this.view&&this.select&&(D.view=!0,D.select=this.select.compile(this.table.databaseid||i)),f.engineid)return y.engines[f.engineid].createTable(this.table.databaseid||i,v,this.ifnotexists,p);D.insert=function($,F){var _e=y.inserted;y.inserted=[$];var ue=this,ze=!1,ve=!1;for(var Ie in ue.beforeinsert){var Me=ue.beforeinsert[Ie];Me&&(Me.funcid?y.fn[Me.funcid]($)===!1&&(ve=ve||!0):Me.statement&&Me.statement.execute(i)===!1&&(ve=ve||!0))}if(!ve){var Ut=!1;for(Ie in ue.insteadofinsert)Ut=!0,Me=ue.insteadofinsert[Ie],Me&&(Me.funcid?y.fn[Me.funcid]($):Me.statement&&Me.statement.execute(i));if(!Ut){for(var jt in ue.identities){var Zt=ue.identities[jt];$[jt]=Zt.value}if(ue.checks&&ue.checks.length>0&&ue.checks.forEach(function(Ci){if(!Ci.fn($))throw new Error("Violation of CHECK constraint "+(Ci.id||""))}),ue.columns.forEach(function(Ci){if(Ci.notnull&&typeof $[Ci.columnid]>"u")throw new Error("Wrong NULL value in NOT NULL column "+Ci.columnid)}),ue.pk){var ei=ue.pk,xi=ei.onrightfn($);if(typeof ue.uniqs[ei.hh][xi]<"u")if(F)ze=ue.uniqs[ei.hh][xi];else throw new Error("Cannot insert record, because it already exists in primary key index")}if(ue.uk&&ue.uk.length&&ue.uk.forEach(function(Ci){var Mi=Ci.onrightfn($);if(typeof ue.uniqs[Ci.hh][Mi]<"u")if(F)ze=ue.uniqs[Ci.hh][Mi];else throw new Error("Cannot insert record, because it already exists in unique index")}),ze)ue.update(function(Ci){for(var Mi in $)Ci[Mi]=$[Mi]},ue.data.indexOf(ze),_);else{ue.data.push($);for(var jt in ue.identities){var Zt=ue.identities[jt];Zt.value+=Zt.step}if(ue.pk){var ei=ue.pk,xi=ei.onrightfn($);ue.uniqs[ei.hh][xi]=$}ue.uk&&ue.uk.length&&ue.uk.forEach(function(Ci){var Mi=Ci.onrightfn($);ue.uniqs[Ci.hh][Mi]=$})}for(var Ie in ue.afterinsert){var Me=ue.afterinsert[Ie];Me&&(Me.funcid?y.fn[Me.funcid]($):Me.statement&&Me.statement.execute(i))}y.inserted=_e}}},D.delete=function($){var F=this,_e=F.data[$],ue=!1;for(var ze in F.beforedelete){var ve=F.beforedelete[ze];ve&&(ve.funcid?y.fn[ve.funcid](_e)===!1&&(ue=ue||!0):ve.statement&&ve.statement.execute(i)===!1&&(ue=ue||!0))}if(ue)return!1;var Ie=!1;for(var ze in F.insteadofdelete){Ie=!0;var ve=F.insteadofdelete[ze];ve&&(ve.funcid?y.fn[ve.funcid](_e):ve.statement&&ve.statement.execute(i))}if(!Ie){if(this.pk){var Me=this.pk,Ut=Me.onrightfn(_e);if(typeof this.uniqs[Me.hh][Ut]>"u")throw new Error("Something wrong with primary key index on table");this.uniqs[Me.hh][Ut]=void 0}F.uk&&F.uk.length&&F.uk.forEach(function(jt){var Zt=jt.onrightfn(_e);if(typeof F.uniqs[jt.hh][Zt]>"u")throw new Error("Something wrong with unique index on table");F.uniqs[jt.hh][Zt]=void 0})}},D.deleteall=function(){this.data.length=0,this.pk&&(this.uniqs[this.pk.hh]={}),D.uk&&D.uk.length&&D.uk.forEach(function($){D.uniqs[$.hh]={}})},D.update=function($,F,_e){var ue=Er(this.data[F]),ze;if(this.pk&&(ze=this.pk,ze.pkaddr=ze.onrightfn(ue,_e),typeof this.uniqs[ze.hh][ze.pkaddr]>"u"))throw new Error("Something wrong with index on table");D.uk&&D.uk.length&&D.uk.forEach(function(jt){if(jt.ukaddr=jt.onrightfn(ue),typeof D.uniqs[jt.hh][jt.ukaddr]>"u")throw new Error("Something wrong with unique index on table")}),$(ue,_e,y);var ve=!1;for(var Ie in D.beforeupdate){var Me=D.beforeupdate[Ie];Me&&(Me.funcid?y.fn[Me.funcid](this.data[F],ue)===!1&&(ve=ve||!0):Me.statement&&Me.statement.execute(i)===!1&&(ve=ve||!0))}if(ve)return!1;var Ut=!1;for(var Ie in D.insteadofupdate){Ut=!0;var Me=D.insteadofupdate[Ie];Me&&(Me.funcid?y.fn[Me.funcid](this.data[F],ue):Me.statement&&Me.statement.execute(i))}if(!Ut){if(D.checks&&D.checks.length>0&&D.checks.forEach(function(jt){if(!jt.fn(ue))throw new Error("Violation of CHECK constraint "+(jt.id||""))}),D.columns.forEach(function(jt){if(jt.notnull&&typeof ue[jt.columnid]>"u")throw new Error("Wrong NULL value in NOT NULL column "+jt.columnid)}),this.pk&&(ze.newpkaddr=ze.onrightfn(ue),typeof this.uniqs[ze.hh][ze.newpkaddr]<"u"&&ze.newpkaddr!==ze.pkaddr))throw new Error("Record already exists");D.uk&&D.uk.length&&D.uk.forEach(function(jt){if(jt.newukaddr=jt.onrightfn(ue),typeof D.uniqs[jt.hh][jt.newukaddr]<"u"&&jt.newukaddr!==jt.ukaddr)throw new Error("Record already exists")}),this.pk&&(this.uniqs[ze.hh][ze.pkaddr]=void 0,this.uniqs[ze.hh][ze.newpkaddr]=ue),D.uk&&D.uk.length&&D.uk.forEach(function(jt){D.uniqs[jt.hh][jt.ukaddr]=void 0,D.uniqs[jt.hh][jt.newukaddr]=ue}),this.data[F]=ue;for(var Ie in D.afterupdate){var Me=D.afterupdate[Ie];Me&&(Me.funcid?y.fn[Me.funcid](this.data[F],ue):Me.statement&&Me.statement.execute(i))}}};var Q;return y.options.nocount||(Q=1),p&&(Q=p(Q)),Q},y.fn.Date=Object,y.fn.Date=Date,y.fn.Number=Number,y.fn.String=String,y.fn.Boolean=Boolean,Re.EXTEND=y.utils.extend,Re.CHAR=String.fromCharCode.bind(String),Re.ASCII=function(i){return i.charCodeAt(0)},Re.COALESCE=function(){for(var i=0;i<arguments.length;i++)if(arguments[i]!==null&&!(typeof arguments[i]>"u")&&!(typeof arguments[i]=="number"&&isNaN(arguments[i])))return arguments[i]},Re.USER=function(){return"alasql"},Re.OBJECT_ID=function(i){return!!y.tables[i]},Re.DATE=function(i){return!isNaN(i)&&i.length===8?new Date(+i.substr(0,4),+i.substr(4,2)-1,+i.substr(6,2)):Hi(i)},Re.NOW=function(){if(y.options.dateAsString){var i=new Date,_=i.getFullYear()+"-"+("0"+(i.getMonth()+1)).substr(-2)+"-"+("0"+i.getDate()).substr(-2);return _+=" "+("0"+i.getHours()).substr(-2)+":"+("0"+i.getMinutes()).substr(-2)+":"+("0"+i.getSeconds()).substr(-2),_+="."+("00"+i.getMilliseconds()).substr(-3),_}return new Date},Re.GETDATE=Re.NOW,Re.CURRENT_TIMESTAMP=Re.NOW,Re.CURDATE=Re.CURRENT_DATE=function(){var i=new Date;if(i.setHours(0,0,0,0),y.options.dateAsString){var _=i.getFullYear()+"-"+("0"+(i.getMonth()+1)).substr(-2)+"-"+("0"+i.getDate()).substr(-2);return _}return i},Re.SECOND=function(_){var _=Hi(_);return _.getSeconds()},Re.MINUTE=function(_){var _=Hi(_);return _.getMinutes()},Re.HOUR=function(_){var _=Hi(_);return _.getHours()},Re.DAYOFWEEK=Re.WEEKDAY=function(_){var _=Hi(_);return _.getDay()},Re.DAY=Re.DAYOFMONTH=function(_){var _=Hi(_);return _.getDate()},Re.MONTH=function(_){var _=Hi(_);return _.getMonth()+1},Re.YEAR=function(_){var _=Hi(_);return _.getFullYear()};var Ti={year:1e3*3600*24*365,quarter:1e3*3600*24*365/4,month:1e3*3600*24*30,week:1e3*3600*24*7,day:1e3*3600*24,dayofyear:1e3*3600*24,weekday:1e3*3600*24,hour:1e3*3600,minute:1e3*60,second:1e3,millisecond:1,microsecond:.001};y.stdfn.DATEDIFF=function(i,_,p){var f=Hi(p).getTime()-Hi(_).getTime();return f/Ti[i.toLowerCase()]|0},y.stdfn.DATEADD=function(v,_,p){var f=Hi(p),v=v.toLowerCase();switch(v){case"year":f.setFullYear(f.getFullYear()+_);break;case"quarter":f.setMonth(f.getMonth()+_*3);break;case"month":f.setMonth(f.getMonth()+_);break;default:f=new Date(f.getTime()+_*Ti[v]);break}return f},y.stdfn.INTERVAL=function(i,_){return i*Ti[_.toLowerCase()]},y.stdfn.DATE_ADD=y.stdfn.ADDDATE=function(i,_){var p=Hi(i).getTime()+_;return new Date(p)},y.stdfn.DATE_SUB=y.stdfn.SUBDATE=function(i,_){var p=Hi(i).getTime()-_;return new Date(p)};var Di=/^\d{4}\.\d{2}\.\d{2} \d{2}:\d{2}:\d{2}/;function Hi(i){return typeof i=="string"&&Di.test(i)&&(i=i.replace(".","-").replace(".","-")),new Date(i)}de.DropTable=function(i){return Object.assign(this,i)},de.DropTable.prototype.toString=function(){var i="DROP ";return this.view?i+="VIEW":i+="TABLE",this.ifexists&&(i+=" IF EXISTS"),i+=" "+this.tables.toString(),i},de.DropTable.prototype.execute=function(i,_,p){var f=this.ifexists,v=0,T=0,P=this.tables.length;return this.tables.forEach(function(D){var V=y.databases[D.databaseid||i],ae=D.tableid;if(!f||f&&V.tables[ae]){if(V.tables[ae])V.engineid?y.engines[V.engineid].dropTable(D.databaseid||i,ae,f,function(ie){delete V.tables[ae],v+=ie,T++,T==P&&p&&p(v)}):(delete V.tables[ae],v++,T++,T==P&&p&&p(v));else if(!y.options.dropifnotexists)throw new Error(`Can not drop table ${JSON.stringify(D.tableid)} because it does not exist in the database.`)}else T++,T==P&&p&&p(v)}),v},de.TruncateTable=function(i){return Object.assign(this,i)},de.TruncateTable.prototype.toString=function(){var i="TRUNCATE TABLE";return i+=" "+this.table.toString(),i},de.TruncateTable.prototype.execute=function(i,_,p){var f=y.databases[this.table.databaseid||i],v=this.table.tableid;if(f.engineid)return y.engines[f.engineid].truncateTable(this.table.databaseid||i,v,this.ifexists,p);if(f.tables[v])f.tables[v].data=[];else throw new Error("Cannot truncate table becaues it does not exist");return p?p(0):0},de.CreateVertex=function(i){return Object.assign(this,i)},de.CreateVertex.prototype.toString=function(){var i="CREATE VERTEX ";return this.class&&(i+=this.class+" "),this.sharp&&(i+="#"+this.sharp+" "),this.sets?i+=this.sets.toString():this.content?i+=this.content.toString():this.select&&(i+=this.select.toString()),i},de.CreateVertex.prototype.toJS=function(i){var _="this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+i+")";return _},de.CreateVertex.prototype.compile=function(i){var _=i,p=this.sharp;if(typeof this.name<"u")var v="x.name="+this.name.toJS(),f=new Function("x",v);if(this.sets&&this.sets.length>0)var v=this.sets.map(function(D){return`x[${JSON.stringify(D.column.columnid)}]=`+D.expression.toJS("x","")}).join(";"),T=new Function("x,params,alasql",v);var P=function(D,V){var ae,ie=y.databases[_],Q;typeof p<"u"?Q=p:Q=ie.counter++;var $={$id:Q,$node:"VERTEX"};return ie.objects[$.$id]=$,ae=$,f&&f($),T&&T($,D,y),V&&(ae=V(ae)),ae};return P},de.CreateEdge=function(i){return Object.assign(this,i)},de.CreateEdge.prototype.toString=function(){var i="CREATE EDGE ";return this.class&&(i+=this.class+" "),i},de.CreateEdge.prototype.toJS=function(i){var _="this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+i+")";return _},de.CreateEdge.prototype.compile=function(i){var _=i,p=new Function("params,alasql","var y;return "+this.from.toJS()),f=new Function("params,alasql","var y;return "+this.to.toJS());if(typeof this.name<"u")var T="x.name="+this.name.toJS(),v=new Function("x",T);if(this.sets&&this.sets.length>0)var T=this.sets.map(function(D){return`x[${JSON.stringify(D.column.columnid)}]=`+D.expression.toJS("x","")}).join(";"),P=new Function("x,params,alasql","var y;"+T);return(D,V)=>{let ae=0,ie=y.databases[_],Q={$id:ie.counter++,$node:"EDGE"},$=p(D,y),F=f(D,y);return Q.$in=[$.$id],Q.$out=[F.$id],$.$out=$.$out||[],$.$out.push(Q.$id),F.$in=F.$in||[],F.$in.push(Q.$id),ie.objects[Q.$id]=Q,ae=Q,v?.(Q),P?.(Q,D,y),V?V(ae):ae}},de.CreateGraph=function(i){return Object.assign(this,i)},de.CreateGraph.prototype.toString=function(){var i="CREATE GRAPH ";return this.class&&(i+=this.class+" "),i},de.CreateGraph.prototype.execute=function(i,_,p){var f=[];return this.from&&y.from[this.from.funcid]&&(this.graph=y.from[this.from.funcid.toUpperCase()]),this.graph.forEach(P=>{if(!P.source)T(P);else{let D={};P.as!==void 0&&(y.vars[P.as]=D),P.prop!==void 0&&(D.name=P.prop),P.sharp!==void 0&&(D.$id=P.sharp),P.name!==void 0&&(D.name=P.name),P.class!==void 0&&(D.$class=P.class);let V=y.databases[i];D.$id=D.$id!==void 0?D.$id:V.counter++,D.$node="EDGE",P.json!==void 0&&Object.assign(D,new Function("params, alasql",`return ${P.json.toJS()}`)(_,y));let ae=($,F)=>{let _e,ue;if($.vars)ue=y.vars[$.vars],_e=typeof ue=="object"?ue:V.objects[ue];else{let ze=$.sharp||$.prop;_e=V.objects[ze],_e===void 0&&y.options.autovertex&&($.prop||$.name)&&(_e=v($.prop||$.name)||T($))}return F&&_e&&typeof _e.$out>"u"&&(_e.$out=[]),!F&&_e&&typeof _e.$in>"u"&&(_e.$in=[]),_e},ie=ae(P.source,!0),Q=ae(P.target,!1);if(D.$in=[ie.$id],D.$out=[Q.$id],ie.$out.push(D.$id),Q.$in.push(D.$id),V.objects[D.$id]=D,D.$class!==void 0){let $=y.databases[i].tables[D.$class];if($===void 0)throw new Error("No such class. Please use CREATE CLASS");$.data.push(D)}f.push(D.$id)}}),p&&(f=p(f)),f;function v(P){var D=y.databases[y.useid].objects;for(var V in D)if(D[V].name===P)return D[V]}function T(P){var D={};typeof P.as<"u"&&(y.vars[P.as]=D),typeof P.prop<"u"&&(D.$id=P.prop,D.name=P.prop),typeof P.sharp<"u"&&(D.$id=P.sharp),typeof P.name<"u"&&(D.name=P.name),typeof P.class<"u"&&(D.$class=P.class);var V=y.databases[i];if(typeof D.$id>"u"&&(D.$id=V.counter++),D.$node="VERTEX",typeof P.json<"u"&&Fr(D,new Function("params,alasql","var y;return "+P.json.toJS())(_,y)),V.objects[D.$id]=D,typeof D.$class<"u"){if(typeof y.databases[i].tables[D.$class]>"u")throw new Error("No such class. Pleace use CREATE CLASS");y.databases[i].tables[D.$class].data.push(D)}return f.push(D.$id),D}},de.CreateGraph.prototype.compile1=function(i){let _=i,p=new Function("params, alasql",`return ${this.from.toJS()}`),f=new Function("params, alasql",`return ${this.to.toJS()}`),v,T;if(this.name!==void 0){let P=`x.name = ${this.name.toJS()}`;v=new Function("x",P)}if(this.sets&&this.sets.length>0){let P=this.sets.map(D=>`x[${JSON.stringify(D.column.columnid)}] = ${D.expression.toJS("x","")}`).join(";");T=new Function("x, params, alasql",`var y; ${P}`)}return(P,D)=>{let V=0,ae=y.databases[_],ie={$id:ae.counter++,$node:"EDGE"},Q=p(P,y),$=f(P,y);return ie.$in=[Q.$id],ie.$out=[$.$id],Q.$out=Q.$out||[],Q.$out.push(ie.$id),$.$in=$.$in||[],$.$in.push(ie.$id),ae.objects[ie.$id]=ie,V=ie,v&&v(ie),T&&T(ie,P,y),D&&(V=D(V)),V}},de.AlterTable=function(i){return Object.assign(this,i)},de.AlterTable.prototype.toString=function(){let i="ALTER TABLE "+this.table.toString();return this.renameto&&(i+=" RENAME TO "+this.renameto),i},de.AlterTable.prototype.execute=function(i,_,p){let f=y.databases[i];if(f.dbversion=Date.now(),this.renameto){var v=this.table.tableid,T=this.renameto,P=1;if(f.tables[T])throw new Error(`Can not rename a table "${v}" to "${T}" because the table with this name already exists`);if(T===v)throw new Error(`Can not rename a table "${v}" to itself`);return f.tables[T]=f.tables[v],delete f.tables[v],P=1,p&&p(P),P}if(this.addcolumn){f=y.databases[this.table.databaseid||i],f.dbversion++;var D=this.table.tableid,V=f.tables[D],ae=this.addcolumn.columnid;if(V.xcolumns[ae])throw new Error(`Cannot add column "${ae}" because it already exists in table "${D}"`);var ie={columnid:ae,dbtypeid:this.addcolumn.dbtypeid,dbsize:this.dbsize,dbprecision:this.dbprecision,dbenum:this.dbenum,defaultfns:null},Q=function(){};V.columns.push(ie),V.xcolumns[ae]=ie;for(let ve=0,Ie=V.data.length;ve<Ie;ve++)V.data[ve][ae]=Q();return p?p(1):1}if(this.modifycolumn){let ve=y.databases[this.table.databaseid||i];ve.dbversion++;var D=this.table.tableid,V=ve.tables[D],ae=this.modifycolumn.columnid;if(!V.xcolumns[ae])throw new Error(`Cannot modify column "${ae}" because it was not found in table "${D}"`);return ie=V.xcolumns[ae],ie.dbtypeid=this.dbtypeid,ie.dbsize=this.dbsize,ie.dbprecision=this.dbprecision,ie.dbenum=this.dbenum,p?p(1):1}if(this.renamecolumn){let ve=y.databases[this.table.databaseid||i];ve.dbversion++;var D=this.table.tableid,V=ve.tables[D],ae=this.renamecolumn,$=this.to,ie;if(!V.xcolumns[ae])throw new Error('Column "'+ae+'" is not found in the table "'+D+'"');if(V.xcolumns[$])throw new Error('Column "'+$+'" already exists in the table "'+D+'"');if(ae!=$){for(var F=0;F<V.columns.length;F++)V.columns[F].columnid==ae&&(V.columns[F].columnid=$);V.xcolumns[$]=V.xcolumns[ae],delete V.xcolumns[ae];for(var _e=0,ue=V.data.length;_e<ue;_e++)V.data[_e][$]=V.data[_e][ae],delete V.data[_e][ae];return V.data.length}return p?p(0):0}if(this.dropcolumn){let ve=y.databases[this.table.databaseid||i];ve.dbversion++;for(var D=this.table.tableid,V=ve.tables[D],ae=this.dropcolumn,ze=!1,F=0;F<V.columns.length;F++)if(V.columns[F].columnid==ae){ze=!0,V.columns.splice(F,1);break}if(!ze)throw new Error(`Cannot drop column "${ae}" because it was not found in the table ${D}"`);for(delete V.xcolumns[ae],_e=0,ue=V.data.length;_e<ue;_e++)delete V.data[_e][ae];return p?p(V.data.length):V.data.length}throw Error("Unknown ALTER TABLE method")},de.CreateIndex=function(i){return Object.assign(this,i)},de.CreateIndex.prototype.toString=function(){var i="CREATE";return this.unique&&(i+=" UNIQUE"),i+=" INDEX "+this.indexid+" ON "+this.table.toString(),i+="("+this.columns.toString()+")",i},de.CreateIndex.prototype.execute=function(i,_,p){var f=y.databases[i],v=this.table.tableid,T=f.tables[v],P=this.indexid;f.indices[P]=v;var D=this.columns.map(function(ze){return ze.expression.toJS("r","")}).join("+'`'+"),V=new Function("r,params,alasql","return "+D);if(this.unique){T.uniqdefs[P]={rightfns:D};var ae=T.uniqs[P]={};if(T.data.length>0)for(var ie=0,Q=T.data.length;ie<Q;ie++){var $=D(T.data[ie]);ae[$]||(ae[$]={num:0}),ae[$].num++}}else{var F=$r(D);T.inddefs[P]={rightfns:D,hh:F},T.indices[F]={};var _e=T.indices[F]={};if(T.data.length>0)for(var ie=0,Q=T.data.length;ie<Q;ie++){var $=V(T.data[ie],_,y);_e[$]||(_e[$]=[]),_e[$].push(T.data[ie])}}var ue=1;return p&&(ue=p(ue)),ue},de.Reindex=function(i){return Object.assign(this,i)},de.Reindex.prototype.toString=function(){var i="REINDEX "+this.indexid;return i},de.Reindex.prototype.execute=function(i,_,p){var f=y.databases[i],v=this.indexid,T=f.indices[v],P=f.tables[T];P.indexColumns();var D=1;return p&&(D=p(D)),D},de.DropIndex=function(i){return Object.assign(this,i)},de.DropIndex.prototype.toString=function(){return"DROP INDEX"+this.indexid},de.DropIndex.prototype.compile=function(i){var _=this.indexid;return function(){return 1}},de.WithSelect=function(i){return Object.assign(this,i)},de.WithSelect.prototype.toString=function(){var i="WITH ";return i+=this.withs.map(function(_){return _.name+" AS ("+_.select.toString()+")"}).join(",")+" ",i+=this.select.toString(),i},de.WithSelect.prototype.execute=function(i,_,p){var f=this,v=[];f.withs.forEach(function(P){v.push(y.databases[i].tables[P.name]);var D=y.databases[i].tables[P.name]=new _a({tableid:P.name});D.data=P.select.execute(i,_)});var T=1;return T=this.select.execute(i,_,function(P){return f.withs.forEach(function(D,V){v[V]?y.databases[i].tables[D.name]=v[V]:delete y.databases[i].tables[D.name]}),p&&(P=p(P)),P}),T},de.If=function(i){return Object.assign(this,i)},de.If.prototype.toString=function(){var i="IF ";return i+=this.expression.toString(),i+=" "+this.thenstat.toString(),this.elsestat&&(i+=" ELSE "+this.thenstat.toString()),i},de.If.prototype.execute=function(i,_,p){var f,v=new Function("params,alasql,p","var y;return "+this.expression.toJS("({})","",null)).bind(this);return v(_,y)?f=this.thenstat.execute(i,_,p):this.elsestat?f=this.elsestat.execute(i,_,p):p&&(f=p(f)),f},de.While=function(i){return Object.assign(this,i)},de.While.prototype.toString=function(){var i="WHILE ";return i+=this.expression.toString(),i+=" "+this.loopstat.toString(),i},de.While.prototype.execute=function(i,_,p){var f=this,v=[],T=new Function("params,alasql,p","var y;return "+this.expression.toJS());if(p){var P=!1,D=function(ae){P?v.push(ae):P=!0,setTimeout(function(){T(_,y)?f.loopstat.execute(i,_,D):v=p(v)},0)};D()}else for(;T(_,y);){var V=f.loopstat.execute(i,_);v.push(V)}return v},de.Break=function(i){return Object.assign(this,i)},de.Break.prototype.toString=function(){var i="BREAK";return i},de.Break.prototype.execute=function(i,_,p,f){var v=1;return p&&(v=p(v)),v},de.Continue=function(i){return Object.assign(this,i)},de.Continue.prototype.toString=function(){var i="CONTINUE";return i},de.Continue.prototype.execute=function(i,_,p,f){var v=1;return p&&(v=p(v)),v},de.BeginEnd=function(i){return Object.assign(this,i)},de.BeginEnd.prototype.toString=function(){var i="BEGIN "+this.statements.toString()+" END";return i},de.BeginEnd.prototype.execute=function(i,_,p,f){var v=this,T=[],P=0;D();function D(){v.statements[P].execute(i,_,function(V){if(T.push(V),P++,P<v.statements.length)return D();p&&(T=p(T))})}return T},de.Insert=function(i){return Object.assign(this,i)},de.Insert.prototype.toString=function(){var i="INSERT ";if(this.orreplace&&(i+="OR REPLACE "),this.replaceonly&&(i="REPLACE "),i+="INTO "+this.into.toString(),this.columns&&(i+="("+this.columns.toString()+")"),this.values){var _=this.values.map(function(p){return"("+p.toString()+")"});i+=" VALUES "+_.join(",")}return this.select&&(i+=" "+this.select.toString()),i},de.Insert.prototype.toJS=function(i,_,p){var f="this.queriesfn["+(this.queriesidx-1)+"](this.params,null,"+i+")";return f},de.Insert.prototype.compile=function(i){var _=this;i=_.into.databaseid||i;var p=y.databases[i],f=_.into.tableid,v=p.tables[f];if(!v)throw"Table '"+f+"' could not be found";var P="",T="",P="db.tables['"+f+"'].dirty=true;",D="var a,aa=[],x;",V;if(this.values){this.exists&&(this.existsfn=this.exists.map(function(ze){var ve=ze.compile(i);return ve.query.modifier="RECORDSET",ve})),this.queries&&(this.queriesfn=this.queries.map(function(ze){var ve=ze.compile(i);return ve.query.modifier="RECORDSET",ve})),_.values.forEach(function(ze){var ve=[];_.columns?_.columns.forEach(function(Ie,Me){var Ut="'"+Ie.columnid+"':";v.xcolumns&&v.xcolumns[Ie.columnid]?["INT","FLOAT","NUMBER","MONEY"].indexOf(v.xcolumns[Ie.columnid].dbtypeid)>=0?Ut+="(x="+ze[Me].toJS()+",x==undefined?undefined:+x)":y.fn[v.xcolumns[Ie.columnid].dbtypeid]?(Ut+="(new "+v.xcolumns[Ie.columnid].dbtypeid+"(",Ut+=ze[Me].toJS(),Ut+="))"):Ut+=ze[Me].toJS():Ut+=ze[Me].toJS(),ve.push(Ut)}):Array.isArray(ze)&&v.columns&&v.columns.length>0?v.columns.forEach(function(Ie,Me){var Ut="'"+Ie.columnid+"':";["INT","FLOAT","NUMBER","MONEY"].indexOf(Ie.dbtypeid)>=0?Ut+="+"+ze[Me].toJS():y.fn[Ie.dbtypeid]?(Ut+="(new "+Ie.dbtypeid+"(",Ut+=ze[Me].toJS(),Ut+="))"):Ut+=ze[Me].toJS(),ve.push(Ut)}):T=je(ze),p.tables[f].defaultfns&&ve.unshift(p.tables[f].defaultfns),T?P+="a="+T+";":P+="a={"+ve.join(",")+"};",p.tables[f].isclass&&(P+="var db=alasql.databases['"+i+"'];",P+='a.$class="'+f+'";',P+="a.$id=db.counter++;",P+="db.objects[a.$id]=a;"),p.tables[f].insert?(P+="var db=alasql.databases['"+i+"'];",P+="db.tables['"+f+"'].insert(a,"+(_.orreplace?"true":"false")+");"):P+="aa.push(a);"}),V=D+P,p.tables[f].insert||(P+="alasql.databases['"+i+"'].tables['"+f+"'].data=alasql.databases['"+i+"'].tables['"+f+"'].data.concat(aa);"),p.tables[f].insert&&p.tables[f].isclass?P+="return a.$id;":P+="return "+_.values.length;var F=new Function("db, params, alasql","var y;"+D+P).bind(this)}else if(this.select){this.select.modifier="RECORDSET",this.queries&&(this.select.queries=this.queries);var ae=this.select.compile(i);if(p.engineid&&y.engines[p.engineid].intoTable){var _e=function(ve,Ie){var Me=ae(ve),Ut=y.engines[p.engineid].intoTable(p.databaseid,f,Me.data,null,Ie);return Ut};return _e}else var ie="return alasql.utils.extend(r,{"+v.defaultfns+"})",Q=new Function("r,db,params,alasql",ie),F=function(ze,ve,Ie){var Me=ae(ve).data;if(ze.tables[f].insert)for(var Ut=0,jt=Me.length;Ut<jt;Ut++){var Zt=Er(Me[Ut]);Q(Zt,ze,ve,Ie),ze.tables[f].insert(Zt,_.orreplace)}else ze.tables[f].data=ze.tables[f].data.concat(Me);if(!Ie.options.nocount)return Me.length}}else if(this.default)var $="db.tables['"+f+"'].data.push({"+v.defaultfns+"});return 1;",F=new Function("db,params,alasql",$);else throw new Error("Wrong INSERT parameters");if(p.engineid&&y.engines[p.engineid].intoTable&&y.options.autocommit)var _e=function(ue,ze){var ve=new Function("db,params","var y;"+V+"return aa;")(p,ue),Ie=y.engines[p.engineid].intoTable(p.databaseid,f,ve,null,ze);return Ie};else var _e=function(ue,ze){var ve=y.databases[i];y.options.autocommit&&ve.engineid&&y.engines[ve.engineid].loadTableData(i,f);var Ie=F(ve,ue,y);return y.options.autocommit&&ve.engineid&&y.engines[ve.engineid].saveTableData(i,f),y.options.nocount&&(Ie=void 0),ze&&ze(Ie),Ie};return _e},de.Insert.prototype.execute=function(i,_,p){return this.compile(i)(_,p)},de.CreateTrigger=function(i){return Object.assign(this,i)},de.CreateTrigger.prototype.toString=function(){var i="CREATE TRIGGER "+this.trigger+" ";return this.when&&(i+=this.when+" "),i+=this.action+" ON ",this.table.databaseid&&(i+=this.table.databaseid+"."),i+=this.table.tableid+" ",i+=this.statement.toString(),i};let Tr=["beforeinsert","afterinsert","insteadofinsert","beforedelete","afterdelete","insteadofdelete","beforeupdate","afterupdate","insteadofupdate"];de.CreateTrigger.prototype.execute=function(i,_,p){let f=1,v=this.trigger;i=this.table.databaseid||i;let T=y.databases[i],{tableid:P}=this.table,D={action:this.action,when:this.when,statement:this.statement,funcid:this.funcid,tableid:P};T.triggers[v]=D;let V=`${this.when}${this.action}`.toLowerCase();return Tr.includes(V)&&(T.tables[P]=T.tables[P]||{},T.tables[P][V]=T.tables[P][V]||{},T.tables[P][V][v]=D),p&&(f=p(f)),f},de.DropTrigger=function(i){return Object.assign(this,i)},de.DropTrigger.prototype.toString=function(){var i="DROP TRIGGER "+this.trigger;return i},de.DropTrigger.prototype.execute=function(i,_,p){let f=0,v=y.databases[i],T=this.trigger,P=v.triggers[T];if(P){let{tableid:D}=P;if(D)f=1,Tr.forEach(V=>{delete v.tables[D][V][T]}),delete v.triggers[T];else throw new Error("Trigger Table not found")}else throw new Error("Trigger not found");return p&&(f=p(f)),f},de.Delete=function(i){return Object.assign(this,i)},de.Delete.prototype.toString=function(){var i="DELETE FROM "+this.table.toString();return this.where&&(i+=" WHERE "+this.where.toString()),i},de.Delete.prototype.compile=function(i){i=this.table.databaseid||i;var _=this.table.tableid,p,f=y.databases[i];if(this.where){this.exists&&(this.existsfn=this.exists.map(function(T){var P=T.compile(i);return P.query.modifier="RECORDSET",P})),this.queries&&(this.queriesfn=this.queries.map(function(T){var P=T.compile(i);return P.query.modifier="RECORDSET",P}));var v=new Function("r,params,alasql","var y;return ("+this.where.toJS("r","")+")").bind(this);p=function(T,P){if(f.engineid&&y.engines[f.engineid].deleteFromTable)return y.engines[f.engineid].deleteFromTable(i,_,v,T,P);y.options.autocommit&&f.engineid&&(f.engineid=="LOCALSTORAGE"||f.engineid=="FILESTORAGE")&&y.engines[f.engineid].loadTableData(i,_);for(var D=f.tables[_],V=D.data.length,ae=[],ie=0,Q=D.data.length;ie<Q;ie++)v(D.data[ie],T,y)?D.delete&&D.delete(ie,T,y):ae.push(D.data[ie]);D.data=ae;for(var $ in D.afterdelete){var F=D.afterdelete[$];F&&(F.funcid?y.fn[F.funcid]():F.statement&&F.statement.execute(i))}var _e=V-D.data.length;return y.options.autocommit&&f.engineid&&(f.engineid=="LOCALSTORAGE"||f.engineid=="FILESTORAGE")&&y.engines[f.engineid].saveTableData(i,_),P&&(_e=P(_e)),_e}}else p=function(T,P){y.options.autocommit&&f.engineid&&y.engines[f.engineid].loadTableData(i,_);var D=f.tables[_];D.dirty=!0;var V=f.tables[_].data.length;f.tables[_].data.length=0;for(var ae in f.tables[_].uniqs)f.tables[_].uniqs[ae]={};for(var ae in f.tables[_].indices)f.tables[_].indices[ae]={};return y.options.autocommit&&f.engineid&&y.engines[f.engineid].saveTableData(i,_),P&&P(V),V};return p},de.Delete.prototype.execute=function(i,_,p){return this.compile(i)(_,p)},de.Update=function(i){return Object.assign(this,i)},de.Update.prototype.toString=function(){var i="UPDATE "+this.table.toString();return this.columns&&(i+=" SET "+this.columns.toString()),this.where&&(i+=" WHERE "+this.where.toString()),i},de.SetColumn=function(i){return Object.assign(this,i)},de.SetColumn.prototype.toString=function(){return this.column.toString()+"="+this.expression.toString()},de.Update.prototype.compile=function(i){i=this.table.databaseid||i;var _=this.table.tableid;if(this.where){this.exists&&(this.existsfn=this.exists.map(function(P){var D=P.compile(i);return D.query.modifier="RECORDSET",D})),this.queries&&(this.queriesfn=this.queries.map(function(P){var D=P.compile(i);return D.query.modifier="RECORDSET",D}));var p=new Function("r,params,alasql","var y;return "+this.where.toJS("r","")).bind(this)}var f=y.databases[i].tables[_].onupdatefns||"";f+=";",this.columns.forEach(function(P){f+="r['"+P.column.columnid+"']="+P.expression.toJS("r","")+";"});var v=new Function("r,params,alasql","var y;"+f),T=function(P,D){var V=y.databases[i];if(V.engineid&&y.engines[V.engineid].updateTable)return y.engines[V.engineid].updateTable(i,_,v,p,P,D);y.options.autocommit&&V.engineid&&y.engines[V.engineid].loadTableData(i,_);var ae=V.tables[_];if(!ae)throw new Error("Table '"+_+"' not exists");for(var ie=0,Q=0,$=ae.data.length;Q<$;Q++)(!p||p(ae.data[Q],P,y))&&(ae.update?ae.update(v,Q,P):v(ae.data[Q],P,y),ie++);return y.options.autocommit&&V.engineid&&y.engines[V.engineid].saveTableData(i,_),D&&D(ie),ie};return T},de.Update.prototype.execute=function(i,_,p){return this.compile(i)(_,p)},de.Merge=function(i){return Object.assign(this,i)},de.Merge.prototype.toString=function(){let i=`MERGE ${this.into.tableid} `;return this.into.as&&(i+=`AS ${this.into.as} `),i+=`USING ${this.using.tableid} `,this.using.as&&(i+=`AS ${this.using.as} `),i+=`ON ${this.on.toString()} `,this.matches.forEach(_=>{i+="WHEN ",_.matched||(i+="NOT "),i+="MATCHED ",_.bytarget&&(i+="BY TARGET "),_.bysource&&(i+="BY SOURCE "),_.expr&&(i+=`AND ${_.expr.toString()} `),i+="THEN ",_.action.delete&&(i+="DELETE "),_.action.insert&&(i+="INSERT ",_.action.columns&&(i+=`(${_.action.columns.toString()}) `),_.action.values&&(i+=`VALUES (${_.action.values.toString()}) `),_.action.defaultvalues&&(i+="DEFAULT VALUES ")),_.action.update&&(i+="UPDATE ",i+=_.action.update.map(p=>p.toString()).join(", ")+" ")}),i},de.Merge.prototype.execute=function(i,_,p){var f=1;return p&&(f=p(f)),f},de.CreateDatabase=function(i){return Object.assign(this,i)},de.CreateDatabase.prototype.toString=function(){let i="CREATE ";return this.engineid&&(i+=`${this.engineid} `),i+="DATABASE ",this.ifnotexists&&(i+="IF NOT EXISTS "),i+=`${this.databaseid} `,this.args&&this.args.length>0&&(i+=`(${this.args.map(_=>_.toString()).join(", ")}) `),this.as&&(i+=`AS ${this.as}`),i},de.CreateDatabase.prototype.execute=function(i,_,p){var f;if(this.args&&this.args.length>0&&(f=this.args.map(function(D){return new Function("params,alasql","var y;return "+D.toJS())(_,y)})),this.engineid){var v=y.engines[this.engineid].createDatabase(this.databaseid,this.args,this.ifnotexists,this.as,p);return v}else{var T=this.databaseid;if(y.databases[T])throw new Error("Database '"+T+"' already exists");var P=new y.Database(T),v=1;return p?p(v):v}},de.AttachDatabase=function(i){return Object.assign(this,i)},de.AttachDatabase.prototype.toString=function(i){let _="ATTACH";return this.engineid&&(_+=` ${this.engineid}`),_+=` DATABASE ${this.databaseid}`,i&&(_+="(",i.length>0&&(_+=i.map(p=>p.toString()).join(", ")),_+=")"),this.as&&(_+=` AS ${this.as}`),_},de.AttachDatabase.prototype.execute=function(i,_,p){if(!y.engines[this.engineid])throw new Error('Engine "'+this.engineid+'" is not defined.');var f=y.engines[this.engineid].attachDatabase(this.databaseid,this.as,this.args,_,p);return f},de.DetachDatabase=function(i){return Object.assign(this,i)},de.DetachDatabase.prototype.toString=function(){var i="DETACH";return i+=" DATABASE "+this.databaseid,i},de.DetachDatabase.prototype.execute=function(i,_,p){if(!y.databases[this.databaseid].engineid)throw new Error('Cannot detach database "'+this.engineid+'", because it was not attached.');var f,v=this.databaseid;if(v===y.DEFAULTDATABASEID)throw new Error("Drop of default database is prohibited");if(y.databases[v]){var T=y.databases[v].engineid&&y.databases[v].engineid=="FILESTORAGE",P=y.databases[v].filename||"";delete y.databases[v],T&&(y.databases[v]={},y.databases[v].isDetached=!0,y.databases[v].filename=P),v===y.useid&&y.use(),f=1}else if(this.ifexists)f=0;else throw new Error("Database '"+v+"' does not exist");return p&&p(f),f},de.UseDatabase=function(i){return Object.assign(this,i)},de.UseDatabase.prototype.toString=function(){return"USE DATABASE "+this.databaseid},de.UseDatabase.prototype.execute=function(i,_,p){var f=this.databaseid;if(!y.databases[f])throw new Error("Database '"+f+"' does not exist");y.use(f);var v=1;return p&&p(v),v},de.DropDatabase=function(i){return Object.assign(this,i)},de.DropDatabase.prototype.toString=function(){var i="DROP";return this.ifexists&&(i+=" IF EXISTS"),i+=" DATABASE "+this.databaseid,i},de.DropDatabase.prototype.execute=function(i,_,p){if(this.engineid)return y.engines[this.engineid].dropDatabase(this.databaseid,this.ifexists,p);let f,v=this.databaseid;if(v===y.DEFAULTDATABASEID)throw new Error("Drop of default database is prohibited");if(y.databases[v]){if(y.databases[v].engineid)throw new Error(`Cannot drop database '${v}', because it is attached. Detach it.`);delete y.databases[v],v===y.useid&&y.use(),f=1}else if(this.ifexists)f=0;else throw new Error(`Database '${v}' does not exist`);return p&&p(f),f},de.Declare=function(i){return Object.assign(this,i)},de.Declare.prototype.toString=function(){let i="DECLARE ";return this.declares&&this.declares.length>0&&(i+=this.declares.map(_=>{let p=`@${_.variable} ${_.dbtypeid}`;return _.dbsize&&(p+=`(${_.dbsize}`,_.dbprecision&&(p+=`,${_.dbprecision}`),p+=")"),_.expression&&(p+=` = ${_.expression.toString()}`),p}).join(",")),i},de.Declare.prototype.execute=function(i,_,p){var f=1,v=this;return v.declares&&v.declares.length>0&&v.declares.forEach(function(T){var P=T.dbtypeid;y.fn[P]||(P=P.toUpperCase()),y.declares[T.variable]={dbtypeid:P,dbsize:T.dbsize,dbprecision:T.dbprecision},T.expression&&(y.vars[T.variable]=new Function("params,alasql","return "+T.expression.toJS("({})","",null)).bind(v)(_,y),y.declares[T.variable]&&(y.vars[T.variable]=y.stdfn.CONVERT(y.vars[T.variable],y.declares[T.variable])))}),p&&(f=p(f)),f},de.ShowDatabases=function(i){return Object.assign(this,i)},de.ShowDatabases.prototype.toString=function(){var i="SHOW DATABASES";return this.like&&(i+="LIKE "+this.like.toString()),i},de.ShowDatabases.prototype.execute=function(i,_,p){if(this.engineid)return y.engines[this.engineid].showDatabases(this.like,p);var f=this,v=[];for(var T in y.databases)v.push({databaseid:T});return f.like&&v&&v.length>0&&(v=v.filter(function(P){return y.utils.like(f.like.value,P.databaseid)})),p&&p(v),v},de.ShowTables=function(i){return Object.assign(this,i)},de.ShowTables.prototype.toString=function(){var i="SHOW TABLES";return this.databaseid&&(i+=" FROM "+this.databaseid),this.like&&(i+=" LIKE "+this.like.toString()),i},de.ShowTables.prototype.execute=function(i,_,p){var f=y.databases[this.databaseid||i],v=this,T=[];for(var P in f.tables)T.push({tableid:P});return v.like&&T&&T.length>0&&(T=T.filter(function(D){return y.utils.like(v.like.value,D.tableid)})),p&&p(T),T},de.ShowColumns=function(i){return Object.assign(this,i)},de.ShowColumns.prototype.toString=function(){var i="SHOW COLUMNS";return this.table.tableid&&(i+=" FROM "+this.table.tableid),this.databaseid&&(i+=" FROM "+this.databaseid),i},de.ShowColumns.prototype.execute=function(i,_,p){var f=y.databases[this.databaseid||i],v=f.tables[this.table.tableid];if(v&&v.columns){var T=v.columns.map(function(P){return{columnid:P.columnid,dbtypeid:P.dbtypeid,dbsize:P.dbsize}});return p&&p(T),T}else return p&&p([]),[]},de.ShowIndex=function(i){return Object.assign(this,i)},de.ShowIndex.prototype.toString=function(){var i="SHOW INDEX";return this.table.tableid&&(i+=" FROM "+this.table.tableid),this.databaseid&&(i+=" FROM "+this.databaseid),i},de.ShowIndex.prototype.execute=function(i,_,p){var f=y.databases[this.databaseid||i],v=f.tables[this.table.tableid],T=[];if(v&&v.indices)for(var P in v.indices)T.push({hh:P,len:Object.keys(v.indices[P]).length});return p&&p(T),T},de.ShowCreateTable=function(i){return Object.assign(this,i)},de.ShowCreateTable.prototype.toString=function(){var i="SHOW CREATE TABLE "+this.table.tableid;return this.databaseid&&(i+=" FROM "+this.databaseid),i},de.ShowCreateTable.prototype.execute=function(i){var _=y.databases[this.databaseid||i],p=_.tables[this.table.tableid];if(p){var f="CREATE TABLE "+this.table.tableid+" (",v=[];return p.columns&&(p.columns.forEach(function(T){var P=T.columnid+" "+T.dbtypeid;T.dbsize&&(P+="("+T.dbsize+")"),T.primarykey&&(P+=" PRIMARY KEY"),v.push(P)}),f+=v.join(", ")),f+=")",f}else throw new Error('There is no such table "'+this.table.tableid+'"')},de.SetVariable=function(i){return Object.assign(this,i)},de.SetVariable.prototype.toString=function(){var i="SET ";return typeof this.value<"u"&&(i+=this.variable.toUpperCase()+" "+(this.value?"ON":"OFF")),this.expression&&(i+=this.method+this.variable+" = "+this.expression.toString()),i},de.SetVariable.prototype.execute=function(i,_,p){if(typeof this.value<"u"){let v=this.value;v==="ON"?v=!0:v==="OFF"&&(v=!1),y.options[this.variable]=v}else if(this.expression){this.exists&&(this.existsfn=this.exists.map(T=>{let P=T.compile(i);return P.query&&!P.query.modifier&&(P.query.modifier="RECORDSET"),P})),this.queries&&(this.queriesfn=this.queries.map(T=>{let P=T.compile(i);return P.query&&!P.query.modifier&&(P.query.modifier="RECORDSET"),P}));let v=new Function("params, alasql","return "+this.expression.toJS("({})","",null)).bind(this)(_,y);if(y.declares[this.variable]&&(v=y.stdfn.CONVERT(v,y.declares[this.variable])),this.props&&this.props.length>0){let T;this.method==="@"?T=`alasql.vars['${this.variable}']`:T=`params['${this.variable}']`,this.props.forEach(P=>{typeof P=="string"?T+=`['${P}']`:typeof P=="number"?T+=`[${P}]`:T+=`[${P.toJS()}]`}),new Function("value, params, alasql",`${T} = value`)(v,_,y)}else this.method==="@"?y.vars[this.variable]=v:_[this.variable]=v}let f=1;return p&&(f=p(f)),f},y.test=function(i,_,p){if(arguments.length===0){y.log(y.con.results);return}var f=Date.now();if(arguments.length===1){p(),y.con.log(Date.now()-f);return}arguments.length===2&&(p=_,_=1);for(var v=0;v<_;v++)p();y.con.results[i]=Date.now()-f},y.log=function(i,_){var p=y.useid,f=y.options.logtarget;R.isNode&&(f="console");var v;if(typeof i=="string"?v=y(i,_):v=i,f==="console"||R.isNode)typeof i=="string"&&y.options.logprompt&&console.log(p+">",i),Array.isArray(v)&&console.table?console.table(v):console.log(at(v));else{var T;f==="output"?T=document.getElementsByTagName("output")[0]:typeof f=="string"?T=document.getElementById(f):T=f;var P="";if(typeof i=="string"&&y.options.logprompt&&(P+="<pre><code>"+y.pretty(i)+"</code></pre>"),Array.isArray(v))if(v.length===0)P+="<p>[ ]</p>";else if(typeof v[0]!="object"||Array.isArray(v[0]))for(var D=0,V=v.length;D<V;D++)P+="<p>"+_r(v[D])+"</p>";else P+=_r(v);else P+=_r(v);T.innerHTML+=P}},y.clear=function(){var i=y.options.logtarget;if(R.isNode||R.isMeteorServer)console.clear&&console.clear();else{var _;i==="output"?_=document.getElementsByTagName("output")[0]:typeof i=="string"?_=document.getElementById(i):_=i,_.innerHTML=""}},y.write=function(i){var _=y.options.logtarget;if(R.isNode||R.isMeteorServer)console.log&&console.log(i);else{var p;_==="output"?p=document.getElementsByTagName("output")[0]:typeof _=="string"?p=document.getElementById(_):p=_,p.innerHTML+=i}};function _r(i){var _="";if(i===void 0)_+="undefined";else if(Array.isArray(i)){_+="<style>",_+="table {border:1px black solid; border-collapse: collapse; border-spacing: 0px;}",_+="td,th {border:1px black solid; padding-left:5px; padding-right:5px}",_+="th {background-color: #EEE}",_+="</style>",_+="<table>";var p=[];for(var f in i[0])p.push(f);_+="<tr><th>#",p.forEach(function(P){_+="<th>"+P});for(var v=0,T=i.length;v<T;v++)_+="<tr><th>"+(v+1),p.forEach(function(P){_+="<td> ",i[v][P]==+i[v][P]?(_+='<div style="text-align:right">',typeof i[v][P]>"u"?_+="NULL":_+=i[v][P],_+="</div>"):typeof i[v][P]>"u"?_+="NULL":typeof i[v][P]=="string"?_+=i[v][P]:_+=at(i[v][P])});_+="</table>"}else _+="<p>"+at(i)+"</p>";return _}function It(i,_,p){if(!(p<=0)){var f=_-i.scrollTop,v=f/p*10;setTimeout(function(){i.scrollTop!==_&&(i.scrollTop=i.scrollTop+v,It(i,_,p-10))},10)}}y.prompt=function(i,_,p){if(R.isNode)throw new Error("The prompt not realized for Node.js");var f=0;if(typeof i=="string"&&(i=document.getElementById(i)),typeof _=="string"&&(_=document.getElementById(_)),_.textContent=y.useid,p){y.prompthistory.push(p),f=y.prompthistory.length;try{var v=Date.now();y.log(p),y.write('<p style="color:blue">'+(Date.now()-v)+" ms</p>")}catch(P){y.write("<p>"+y.useid+"&gt;&nbsp;<b>"+p+"</b></p>"),y.write('<p style="color:red">'+P+"<p>")}}var T=i.getBoundingClientRect().top+document.getElementsByTagName("body")[0].scrollTop;It(document.getElementsByTagName("body")[0],T,500),i.onkeydown=function(P){if(P.which===13){var D=i.value,V=y.useid;i.value="",y.prompthistory.push(D),f=y.prompthistory.length;try{var ae=Date.now();y.log(D),y.write('<p style="color:blue">'+(Date.now()-ae)+" ms</p>")}catch(Q){y.write("<p>"+V+"&gt;&nbsp;"+y.pretty(D,!1)+"</p>"),y.write('<p style="color:red">'+Q+"<p>")}i.focus(),_.textContent=y.useid;var ie=i.getBoundingClientRect().top+document.getElementsByTagName("body")[0].scrollTop;It(document.getElementsByTagName("body")[0],ie,500)}else P.which===38?(f--,f<0&&(f=0),y.prompthistory[f]&&(i.value=y.prompthistory[f],P.preventDefault())):P.which===40&&(f++,f>=y.prompthistory.length?(f=y.prompthistory.length,i.value=""):y.prompthistory[f]&&(i.value=y.prompthistory[f],P.preventDefault()))}},de.BeginTransaction=function(i){return Object.assign(this,i)},de.BeginTransaction.prototype.toString=function(){return"BEGIN TRANSACTION"},de.BeginTransaction.prototype.execute=function(i,_,p){var f=1;return y.databases[i].engineid?y.engines[y.databases[y.useid].engineid].begin(i,p):(p&&(f=p(f)),f)},de.CommitTransaction=function(i){return Object.assign(this,i)},de.CommitTransaction.prototype.toString=function(){return"COMMIT TRANSACTION"},de.CommitTransaction.prototype.execute=function(i,_,p){var f=1;return y.databases[i].engineid?y.engines[y.databases[y.useid].engineid].commit(i,p):(p&&(f=p(f)),f)},de.RollbackTransaction=function(i){return Object.assign(this,i)},de.RollbackTransaction.prototype.toString=function(){return"ROLLBACK TRANSACTION"},de.RollbackTransaction.prototype.execute=function(i,_,p){var f=1;return y.databases[i].engineid?y.engines[y.databases[i].engineid].rollback(i,p):(p&&(f=p(f)),f)},y.options.tsql&&(y.stdfn.OBJECT_ID=function(i,_){typeof _>"u"&&(_="T"),_=_.toUpperCase();var p=i.split("."),f=y.useid,v=p[0];p.length==2&&(f=p[0],v=p[1]);var T=y.databases[f].tables;f=y.databases[f].databaseid;for(var P in T)if(P==v)return T[P].view&&_=="V"||!T[P].view&&_=="T"?f+"."+P:void 0}),y.options.mysql&&(y.fn.TIMESTAMPDIFF=function(i,_,p){return y.stdfn.DATEDIFF(i,_,p)}),(y.options.mysql||y.options.sqlite)&&(y.from.INFORMATION_SCHEMA=function(i,_,p,f,v){if(i=="VIEWS"||i=="TABLES"){var T=[];for(var P in y.databases){var D=y.databases[P].tables;for(var V in D)(D[V].view&&i=="VIEWS"||!D[V].view&&i=="TABLES")&&T.push({TABLE_CATALOG:P,TABLE_NAME:V})}return p&&(T=p(T,f,v)),T}throw new Error("Unknown INFORMATION_SCHEMA table")}),y.options.postgres,y.options.oracle,y.options.sqlite,y.into.SQL=function(i,_,p,f,v){var T;typeof i=="object"&&(_=i,i=void 0);var P={};if(y.utils.extend(P,_),typeof P.tableid>"u")throw new Error("Table for INSERT TO is not defined.");var D="";f.length===0&&typeof p[0]=="object"&&(f=Object.keys(p[0]).map(function(ie){return{columnid:ie}}));for(var V=0,ae=p.length;V<ae;V++)D+="INSERT INTO "+_.tableid+"(",D+=f.map(function(ie){return ie.columnid}).join(","),D+=") VALUES (",D+=f.map(function(ie){var Q=p[V][ie.columnid];return ie.typeid?(ie.typeid==="STRING"||ie.typeid==="VARCHAR"||ie.typeid==="NVARCHAR"||ie.typeid==="CHAR"||ie.typeid==="NCHAR")&&(Q="'"+Vt(Q)+"'"):typeof Q=="string"&&(Q="'"+Vt(Q)+"'"),Q}),D+=`);
`;return i=y.utils.autoExtFilename(i,"sql",_),T=y.utils.saveFile(i,D),v&&(T=v(T)),T},y.into.HTML=function(i,_,p,f,v){var T=1;if(typeof document!="object"){var P={headers:!0};y.utils.extend(P,_);var D=document.querySelector(i);if(!D)throw new Error("Selected HTML element is not found");f.length===0&&typeof p[0]=="object"&&(f=Object.keys(p[0]).map(function(ue){return{columnid:ue}}));var V=document.createElement("table"),ae=document.createElement("thead");if(V.appendChild(ae),P.headers){for(var ie=document.createElement("tr"),Q=0;Q<f.length;Q++){var $=document.createElement("th");$.textContent=f[Q].columnid,ie.appendChild($)}ae.appendChild(ie)}var F=document.createElement("tbody");V.appendChild(F);for(var _e=0;_e<p.length;_e++){for(var ie=document.createElement("tr"),Q=0;Q<f.length;Q++){var $=document.createElement("td");$.textContent=p[_e][f[Q].columnid],ie.appendChild($)}F.appendChild(ie)}y.utils.domEmptyChildren(D),D.appendChild(V)}return v&&(T=v(T)),T},y.into.JSON=function(i,_,p,f,v){var T=1;typeof i=="object"&&(_=i,i=void 0);var P=JSON.stringify(p);return i=y.utils.autoExtFilename(i,"json",_),T=y.utils.saveFile(i,P),v&&(T=v(T)),T},y.into.TXT=function(i,_,p,f,v){f.length===0&&p.length>0&&(f=Object.keys(p[0]).map(function(V){return{columnid:V}})),typeof i=="object"&&(_=i,i=void 0);var T=p.length,P="";if(p.length>0){var D=f[0].columnid;P+=p.map(function(V){return V[D]}).join(`
`)}return i=y.utils.autoExtFilename(i,"txt",_),T=y.utils.saveFile(i,P),v&&(T=v(T)),T},y.into.TAB=y.into.TSV=function(i,_,p,f,v){var T={};return y.utils.extend(T,_),T.separator="	",i=y.utils.autoExtFilename(i,"tab",_),T.autoExt=!1,y.into.CSV(i,T,p,f,v)},y.into.CSV=function(i,_,p,f,v){f.length===0&&p.length>0&&(f=Object.keys(p[0]).map(function(V){return{columnid:V}})),typeof i=="object"&&(_=i,i=void 0);var T={headers:!0};T.separator=";",T.quote='"',T.utf8Bom=!0,_&&!_.headers&&typeof _.headers<"u"&&(T.utf8Bom=!1),y.utils.extend(T,_);var P=p.length,D=T.utf8Bom?"\uFEFF":"";return T.headers&&(D+=T.quote+f.map(function(V){return V.columnid.trim()}).join(T.quote+T.separator+T.quote)+T.quote+`\r
`),p.forEach(function(V){D+=f.map(function(ae){var ie=V[ae.columnid];return T.quote!==""&&(ie=(ie+"").replace(new RegExp("\\"+T.quote,"g"),T.quote+T.quote)),+ie!=ie&&(ie=T.quote+ie+T.quote),ie}).join(T.separator)+`\r
`}),i=y.utils.autoExtFilename(i,"csv",_),P=y.utils.saveFile(i,D,null,{disableAutoBom:!0}),v&&(P=v(P)),P},y.into.XLS=function(i,_,p,f,v){typeof i=="object"&&(_=i,i=void 0);var T={};_&&_.sheets&&(T=_.sheets);var P={headers:!0};typeof T.Sheet1<"u"?P=T[0]:typeof _<"u"&&(P=_),typeof P.sheetid>"u"&&(P.sheetid="Sheet1");var D=ae();i=y.utils.autoExtFilename(i,"xls",_);var V=y.utils.saveFile(i,D);return v&&(V=v(V)),V;function ae(){var Q='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" 		xmlns="http://www.w3.org/TR/REC-html40"><head> 		<meta charset="utf-8" /> 		<!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets> ';if(Q+=" <x:ExcelWorksheet><x:Name>"+P.sheetid+"</x:Name><x:WorksheetOptions><x:DisplayGridlines/>     </x:WorksheetOptions> 		</x:ExcelWorksheet>",Q+="</x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head>",Q+="<body",typeof P.style<"u"&&(Q+=' style="',typeof P.style=="function"?Q+=P.style(P):Q+=P.style,Q+='"'),Q+=">",Q+="<table>",typeof P.caption<"u"){var $=P.caption;typeof $=="string"&&($={title:$}),Q+="<caption",typeof $.style<"u"&&(Q+=' style="',typeof $.style=="function"?Q+=$.style(P,$):Q+=$.style,Q+='" '),Q+=">",Q+=$.title,Q+="</caption>"}return typeof P.columns<"u"?f=P.columns:f.length==0&&p.length>0&&typeof p[0]=="object"&&(Array.isArray(p[0])?f=p[0].map(function(F,_e){return{columnid:_e}}):f=Object.keys(p[0]).map(function(F){return{columnid:F}})),f.forEach(function(F,_e){typeof P.column<"u"&&Fr(F,P.column),typeof F.width>"u"&&(P.column&&P.column.width!="undefined"?F.width=P.column.width:F.width="120px"),typeof F.width=="number"&&(F.width=F.width+"px"),typeof F.columnid>"u"&&(F.columnid=_e),typeof F.title>"u"&&(F.title=""+F.columnid.trim()),P.headers&&Array.isArray(P.headers)&&(F.title=P.headers[_e])}),Q+="<colgroups>",f.forEach(function(F){Q+='<col style="width: '+F.width+'"></col>'}),Q+="</colgroups>",P.headers&&(Q+="<thead>",Q+="<tr>",f.forEach(function(F,_e){Q+="<th ",typeof F.style<"u"&&(Q+=' style="',typeof F.style=="function"?Q+=F.style(P,F,_e):Q+=F.style,Q+='" '),Q+=">",typeof F.title<"u"&&(typeof F.title=="function"?Q+=F.title(P,F,_e):Q+=F.title),Q+="</th>"}),Q+="</tr>",Q+="</thead>"),Q+="<tbody>",p&&p.length>0&&p.forEach(function(F,_e){if(!(_e>P.limit)){Q+="<tr";var ue={};Fr(ue,P.row),P.rows&&P.rows[_e]&&Fr(ue,P.rows[_e]),typeof ue<"u"&&typeof ue.style<"u"&&(Q+=' style="',typeof ue.style=="function"?Q+=ue.style(P,F,_e):Q+=ue.style,Q+='" '),Q+=">",f.forEach(function(ze,ve){var Ie={};Fr(Ie,P.cell),Fr(Ie,ue.cell),typeof P.column<"u"&&Fr(Ie,P.column.cell),Fr(Ie,ze.cell),P.cells&&P.cells[_e]&&P.cells[_e][ve]&&Fr(Ie,P.cells[_e][ve]);var Me=F[ze.columnid];typeof Ie.value=="function"&&(Me=Ie.value(Me,P,F,ze,Ie,_e,ve));var Ut=Ie.typeid;typeof Ut=="function"&&(Ut=Ut(Me,P,F,ze,Ie,_e,ve)),typeof Ut>"u"&&(typeof Me=="number"?Ut="number":typeof Me=="string"?Ut="string":typeof Me=="boolean"?Ut="boolean":typeof Me=="object"&&Me instanceof Date&&(Ut="date"));var jt="";Ut=="money"?jt='mso-number-format:"\\#\\,\\#\\#0\\\\ _\u0440_\\.";white-space:normal;':Ut=="number"?jt=" ":Ut=="date"?jt='mso-number-format:"Short Date";':_.types&&_.types[Ut]&&_.types[Ut].typestyle&&(jt=_.types[Ut].typestyle),jt=jt||'mso-number-format:"\\@";',Q+="<td style='"+jt+"' ",typeof Ie.style<"u"&&(Q+=' style="',typeof Ie.style=="function"?Q+=Ie.style(Me,P,F,ze,_e,ve):Q+=Ie.style,Q+='" '),Q+=">";var Zt=Ie.format;if(typeof Me>"u")Q+="";else if(typeof Zt<"u")if(typeof Zt=="function")Q+=Zt(Me);else if(typeof Zt=="string")Q+=Me;else throw new Error("Unknown format type. Should be function or string");else Ut=="number"||Ut=="date"?Q+=Me.toString():Ut=="money"?Q+=(+Me).toFixed(2):Q+=Me;Q+="</td>"}),Q+="</tr>"}}),Q+="</tbody>",Q+="</table>",Q+="</body>",Q+="</html>",Q}function ie(Q){var $=' style="';return Q&&typeof Q.style<"u"&&($+=Q.style+";"),$+='" ',$}},y.into.XLSXML=function(i,_,p,f,v){_=_||{},typeof i=="object"&&(_=i,i=void 0);var T={},P,D;_&&_.sheets?(T=_.sheets,P=p,D=f):(T.Sheet1=_,P=[p],D=[f]),i=y.utils.autoExtFilename(i,"xls",_);var V=y.utils.saveFile(i,ae());return v&&(V=v(V)),V;function ae(){var ie='<?xml version="1.0"?> 		<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" 		 xmlns:o="urn:schemas-microsoft-com:office:office" 		 xmlns:x="urn:schemas-microsoft-com:office:excel" 		 xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" 		 xmlns:html="http://www.w3.org/TR/REC-html40"> 		 <DocumentProperties xmlns="urn:schemas-microsoft-com:office:office"> 		 </DocumentProperties> 		 <OfficeDocumentSettings xmlns="urn:schemas-microsoft-com:office:office"> 		  <AllowPNG/> 		 </OfficeDocumentSettings> 		 <ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"> 		  <ActiveSheet>0</ActiveSheet> 		 </ExcelWorkbook> 		 <Styles> 		  <Style ss:ID="Default" ss:Name="Normal"> 		   <Alignment ss:Vertical="Bottom"/> 		   <Borders/> 		   <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="12" ss:Color="#000000"/> 		   <Interior/> 		   <NumberFormat/> 		   <Protection/> 		  </Style>',Q="",$=" </Styles>",F={},_e=62;function ue(ei){var xi="";for(var Ci in ei){xi+="<"+Ci;for(var Mi in ei[Ci])xi+=" ",Mi.substr(0,2)=="x:"?xi+=Mi:xi+="ss:",xi+=Mi+"="+JSON.stringify(ei[Ci][Mi]);xi+="/>"}var We=$r(xi);return F[We]||(F[We]={styleid:_e},Q+=`<Style ss:ID=${JSON.stringify("s"+_e)}>`,Q+=xi.replace(/<\s*\/\s*Style /gi,"<"),Q+="</Style>",_e++),"s"+F[We].styleid}function ze(ei){try{return Object.values(ei)}catch{return Object.keys(ei).map(function(xi){return ei[xi]})}}var ve=0;for(var Ie in T){var Me=T[Ie],Ut=typeof Me.dataidx<"u"?Me.dataidx:ve++,jt=ze(P[Ut]),Zt=void 0;typeof Me.columns<"u"?Zt=Me.columns:(Zt=D[Ut],(Zt===void 0||Zt.length==0&&jt.length>0)&&typeof jt[0]=="object"&&(Array.isArray(jt[0])?Zt=jt[0].map(function(ei,xi){return{columnid:xi}}):Zt=Object.keys(jt[0]).map(function(ei){return{columnid:ei}}))),Zt.forEach(function(ei,xi){typeof Me.column<"u"&&Fr(ei,Me.column),typeof ei.width>"u"&&(Me.column&&typeof Me.column.width<"u"?ei.width=Me.column.width:ei.width=120),typeof ei.width=="number"&&(ei.width=ei.width),typeof ei.columnid>"u"&&(ei.columnid=xi),typeof ei.title>"u"&&(ei.title=""+ei.columnid.trim()),Me.headers&&Array.isArray(Me.headers)&&(ei.title=Me.headers[xi])}),$+="<Worksheet ss:Name="+JSON.stringify(Ie)+'> 	  			<Table ss:ExpandedColumnCount="'+Zt.length+'" ss:ExpandedRowCount="'+((Me.headers?1:0)+Math.min(jt.length,Me.limit||jt.length))+'" x:FullColumns="1" 	   			x:FullRows="1" ss:DefaultColumnWidth="65" ss:DefaultRowHeight="15">',Zt.forEach(function(ei,xi){$+=`
					<Column 
						ss:Index="${xi+1}" 
						ss:AutoFitWidth="0" 
						ss:Width=${JSON.stringify(""+ei.width)}
					/>`}),Me.headers&&($+='<Row ss:AutoFitHeight="0">',Zt.forEach(function(ei,xi){if($+="<Cell ",typeof ei.style<"u"){var Ci={};typeof ei.style=="function"?Fr(Ci,ei.style(Me,ei,xi)):Fr(Ci,ei.style),$+="ss:StyleID="+JSON.stringify(ue(Ci))}$+='><Data ss:Type="String">',typeof ei.title<"u"&&(typeof ei.title=="function"?$+=ei.title(Me,ei,xi):$+=ei.title),$+="</Data></Cell>"}),$+="</Row>"),jt&&jt.length>0&&jt.forEach(function(ei,xi){if(!(xi>Me.limit)){var Ci={};if(Fr(Ci,Me.row),Me.rows&&Me.rows[xi]&&Fr(Ci,Me.rows[xi]),$+="<Row ",typeof Ci<"u"){var Mi={};typeof Ci.style<"u"&&(typeof Ci.style=="function"?Fr(Mi,Ci.style(Me,ei,xi)):Fr(Mi,Ci.style),$+="ss:StyleID="+JSON.stringify(ue(Mi)))}$+=">",Zt.forEach(function(We,Wi){var Li={};Fr(Li,Me.cell),Fr(Li,Ci.cell),typeof Me.column<"u"&&Fr(Li,Me.column.cell),Fr(Li,We.cell),Me.cells&&Me.cells[xi]&&Me.cells[xi][Wi]&&Fr(Li,Me.cells[xi][Wi]);var Ht=ei[We.columnid];typeof Li.value=="function"&&(Ht=Li.value(Ht,Me,ei,We,Li,xi,Wi));var or=Li.typeid;typeof or=="function"&&(or=or(Ht,Me,ei,We,Li,xi,Wi)),typeof or>"u"&&(typeof Ht=="number"?or="number":typeof Ht=="string"?or="string":typeof Ht=="boolean"?or="boolean":typeof Ht=="object"&&Ht instanceof Date&&(or="date"));var vr="String";or=="number"?vr="Number":or=="date"&&(vr="Date");var dn="";or=="money"?dn='mso-number-format:"\\#\\,\\#\\#0\\\\ _\u0440_\\.";white-space:normal;':or=="number"?dn=" ":or=="date"?dn='mso-number-format:"Short Date";':_.types&&_.types[or]&&_.types[or].typestyle&&(dn=_.types[or].typestyle),dn=dn||'mso-number-format:"\\@";',$+="<Cell ";var qr={};typeof Li.style<"u"&&(typeof Li.style=="function"?Fr(qr,Li.style(Ht,Me,ei,We,xi,Wi)):Fr(qr,Li.style),$+="ss:StyleID="+JSON.stringify(ue(qr))),$+=">",$+="<Data ss:Type="+JSON.stringify(vr)+">";var hr=Li.format;if(typeof Ht>"u")$+="";else if(typeof hr<"u")if(typeof hr=="function")$+=hr(Ht);else if(typeof hr=="string")$+=Ht;else throw new Error("Unknown format type. Should be function or string");else or=="number"||or=="date"?$+=Ht.toString():or=="money"?$+=(+Ht).toFixed(2):$+=Ht;$+="</Data></Cell>"}),$+="</Row>"}}),$+="</Table></Worksheet>"}return $+="</Workbook>",ie+Q+$}},y.into.XLSX=function(i,_,p,f,v){var T=1;_=_||{},An(f,[{columnid:"_"}])&&(p=p.map(function(Q){return Q._}),f=void 0),i=y.utils.autoExtFilename(i,"xlsx",_);var P=Rs();typeof i=="object"&&(_=i,i=void 0);var D={SheetNames:[],Sheets:{}};return _.sourcefilename?y.utils.loadBinaryFile(_.sourcefilename,!!v,function(Q){D=P.read(Q,{type:"binary",...y.options.excel,..._}),V()}):V(),v&&(T=v(T)),T;function V(){typeof _=="object"&&Array.isArray(_)?p&&p.length>0&&p.forEach(function(Q,$){ae(_[$],Q,void 0,$+1)}):ae(_,p,f,1),ie(v)}function ae(Q,$,F,_e){var ue={sheetid:"Sheet "+_e,headers:!0};y.utils.extend(ue,Q);var ze=Object.keys($).length;(!F||F.length==0)&&(ze>0?F=Object.keys($[0]).map(function(Li){return{columnid:Li}}):F=[]);var ve={};D.SheetNames.indexOf(ue.sheetid)>-1||(D.SheetNames.push(ue.sheetid),D.Sheets[ue.sheetid]={}),ve=D.Sheets[ue.sheetid];var Ie="A1";ue.range&&(Ie=ue.range);var Me=y.utils.xlscn(Ie.match(/[A-Z]+/)[0]),Ut=+Ie.match(/[0-9]+/)[0]-1;if(D.Sheets[ue.sheetid]["!ref"])var jt=D.Sheets[ue.sheetid]["!ref"],Zt=y.utils.xlscn(jt.match(/[A-Z]+/)[0]),ei=+jt.match(/[0-9]+/)[0]-1;else var Zt=1,ei=1;var xi=F.length?0:1,Ci=Math.max(Me+F.length-1+xi,Zt),Mi=Math.max(Ut+ze+2,ei),We=Ut+1;D.Sheets[ue.sheetid]["!ref"]="A1:"+y.utils.xlsnc(Ci)+Mi,ue.headers&&(F.forEach(function(Li,Ht){ve[y.utils.xlsnc(Me+Ht)+""+We]={v:Li.columnid.trim()}}),We++);for(var Wi=0;Wi<ze;Wi++)F.forEach(function(Li,Ht){var or={v:$[Wi][Li.columnid]};typeof $[Wi][Li.columnid]=="number"?or.t="n":typeof $[Wi][Li.columnid]=="string"?or.t="s":typeof $[Wi][Li.columnid]=="boolean"?or.t="b":typeof $[Wi][Li.columnid]=="object"&&$[Wi][Li.columnid]instanceof Date&&(or.t="d"),ve[y.utils.xlsnc(Me+Ht)+""+We]=or}),We++}function ie(Q){var $;if(typeof i>"u")T=D;else if($=Rs(),R.isNode||R.isMeteorServer)$.writeFile(D,i);else{var F={bookType:"xlsx",bookSST:!1,type:"binary"},_e=$.write(D,F),ue=function(ze){for(var ve=new ArrayBuffer(ze.length),Ie=new Uint8Array(ve),Me=0;Me!=ze.length;++Me)Ie[Me]=ze.charCodeAt(Me)&255;return ve};hn(new Blob([ue(_e)],{type:"application/octet-stream"}),i)}}},y.from.METEOR=function(i,_,p,f,v){var T=i.find(_).fetch();return p&&(T=p(T,f,v)),T},y.from.TABLETOP=function(i,_,p,f,v){var T=[],P={headers:!0,simpleSheet:!0,key:i};return y.utils.extend(P,_),P.callback=function(D){T=D,p&&(T=p(T,f,v))},Tabletop.init(P),null},y.from.HTML=function(i,_,p,f,v){var T={};y.utils.extend(T,_);var P=document.querySelector(i);if(!P&&P.tagName!=="TABLE")throw new Error("Selected HTML element is not a TABLE");var D=[],V=T.headers;if(V&&!Array.isArray(V)){V=[];for(var ae=P.querySelector("thead tr").children,ie=0;ie<ae.length;ie++)ae.item(ie).style&&ae.item(ie).style.display==="none"&&T.skipdisplaynone?V.push(void 0):V.push(ae.item(ie).textContent)}for(var Q=P.querySelectorAll("tbody tr"),$=0;$<Q.length;$++){var F=Q.item($).children,_e={};for(ie=0;ie<F.length;ie++)F.item(ie).style&&F.item(ie).style.display==="none"&&T.skipdisplaynone||(V?_e[V[ie]]=F.item(ie).textContent:_e[ie]=F.item(ie).textContent);D.push(_e)}return p&&(D=p(D,f,v)),D},y.from.RANGE=function(i,_,p,f,v){for(var T=[],P=i;P<=_;P++)T.push(P);return p&&(T=p(T,f,v)),T},y.from.FILE=function(i,_,p,f,v){var T;if(typeof i=="string")T=i;else if(i instanceof Event)T=i.target.files[0].name;else throw new Error("Wrong usage of FILE() function");var P=T.split("."),D=P[P.length-1].toUpperCase();if(y.from[D])return y.from[D](i,_,p,f,v);throw new Error("Cannot recognize file type for loading")},y.from.JSON=function(i,_,p,f,v){var T;return i=y.utils.autoExtFilename(i,"json",_),y.utils.loadFile(i,!!p,function(P){T=JSON.parse(P),p&&(T=p(T,f,v))}),T};let Yr=i=>function(_,p,f,v,T){let P=[];return _=y.utils.autoExtFilename(_,i,p),y.utils.loadFile(_,!!f,function(D){D.split(/\r?\n/).forEach((V,ae)=>{let ie=V.trim();if(ie!=="")try{P.push(JSON.parse(ie))}catch(Q){throw new Error(`Could not parse JSON at line ${ae}: ${Q.toString()}`)}}),f&&(P=f(P,v,T))},D=>{let V=D instanceof Error?D:new Error(D);if(T&&T.cb){T.cb(null,V);return}throw V}),P};y.from.JSONL=Yr("jsonl"),y.from.NDJSON=Yr("ndjson"),y.from.TXT=function(i,_,p,f,v){var T;return i=y.utils.autoExtFilename(i,"txt",_),y.utils.loadFile(i,!!p,function(P){T=P.split(/\r?\n/),T[T.length-1]===""&&T.pop();for(var D=0,V=T.length;D<V;D++)T[D]==+T[D]&&(T[D]=+T[D]),T[D]=[T[D]];p&&(T=p(T,f,v))}),T},y.from.TAB=y.from.TSV=function(i,_,p,f,v){return _=_||{},_.separator="	",i=y.utils.autoExtFilename(i,"tab",_),_.autoext=!1,y.from.CSV(i,_,p,f,v)},y.from.CSV=function(i,_,p,f,v){i=""+i;var T={separator:",",quote:'"',headers:!0,raw:!1};y.utils.extend(T,_);var P,D=[];function V(ae){var ie=T.separator.charCodeAt(0),Q=T.quote.charCodeAt(0),$={},F={},_e=[],ue=ae.length,ze=0,ve=0,Ie,Me;function Ut(){if(ze>=ue)return F;if(Me)return Me=!1,$;var xi=ze;if(ae.charCodeAt(xi)===Q){for(var Ci=xi;Ci++<ue;)if(ae.charCodeAt(Ci)===Q){if(ae.charCodeAt(Ci+1)!==Q)break;++Ci}ze=Ci+2;var Mi=ae.charCodeAt(Ci+1);return Mi===13?(Me=!0,ae.charCodeAt(Ci+2)===10&&++ze):Mi===10&&(Me=!0),ae.substring(xi+1,Ci).replace(/""/g,'"')}for(;ze<ue;){var Mi=ae.charCodeAt(ze++),We=1;if(Mi===10)Me=!0;else if(Mi===13)Me=!0,ae.charCodeAt(ze)===10&&(++ze,++We);else if(Mi!==ie)continue;return ae.substring(xi,ze-We)}return ae.substring(xi)}for(;(Ie=Ut())!==F;){for(var jt=[];Ie!==$&&Ie!==F;)jt.push(Ie.trim()),Ie=Ut();if(T.headers){if(ve===0){if(typeof T.headers=="boolean")D=jt;else if(Array.isArray(T.headers)){D=T.headers;var Zt={};D.forEach(function(xi,Ci){Zt[xi]=jt[Ci],!T.raw&&typeof Zt[xi]<"u"&&Zt[xi].length!==0&&Zt[xi].trim()==+Zt[xi]&&(Zt[xi]=+Zt[xi])}),_e.push(Zt)}}else{var Zt={};D.forEach(function(Ci,Mi){Zt[Ci]=jt[Mi],!T.raw&&typeof Zt[Ci]<"u"&&Zt[Ci].length!==0&&Zt[Ci].trim()==+Zt[Ci]&&(Zt[Ci]=+Zt[Ci])}),_e.push(Zt)}ve++}else{var Zt={};jt.forEach(function(Ci,Mi){Zt[Mi]=jt[Mi],!T.raw&&typeof Zt[Mi]<"u"&&Zt[Mi].length!==0&&Zt[Mi].trim()==+Zt[Mi]&&(Zt[Mi]=+Zt[Mi])}),_e.push(Zt)}}if(P=_e,T.headers&&v&&v.sources&&v.sources[f]){var ei=v.sources[f].columns=[];D.forEach(function(xi){ei.push({columnid:xi})})}p&&(P=p(P,f,v))}return new RegExp(`
`).test(i)?V(i):(i=y.utils.autoExtFilename(i,"csv",_),y.utils.loadFile(i,!!p,V,ae=>v.cb(null,ae))),P};function Lr(i,_,p,f,v,T){var P={};p=p||{},y.utils.extend(P,p),typeof P.headers>"u"&&(P.headers=!0);var D;function V(ie){for(var Q="",$=0,F=10240;$<ie.byteLength/F;++$)Q+=String.fromCharCode.apply(null,new Uint8Array(ie.slice($*F,$*F+F)));return Q+=String.fromCharCode.apply(null,new Uint8Array(ie.slice($*F))),Q}function ae(ie){return ie&&y.options.casesensitive===!1?ie.toLowerCase():ie}return _=y.utils.autoExtFilename(_,"xls",p),y.utils.loadBinaryFile(_,!!f,function(ie){if(ie instanceof ArrayBuffer)var Q=V(ie),$=i.read(btoa(Q),{type:"base64",...y.options.excel,...p});else var $=i.read(ie,{type:"binary",...y.options.excel,...p});var F;typeof P.sheetid>"u"?F=$.SheetNames[0]:typeof P.sheetid=="number"?F=$.SheetNames[P.sheetid]:F=P.sheetid;var _e,ue=[];if(typeof P.range>"u"?_e=$.Sheets[F]["!ref"]:(_e=P.range,$.Sheets[F][_e]&&(_e=$.Sheets[F][_e])),_e){for(var ze=_e.split(":"),ve=ze[0].match(/[A-Z]+/)[0],Ie=+ze[0].match(/[0-9]+/)[0],Me=ze[1].match(/[A-Z]+/)[0],Ut=+ze[1].match(/[0-9]+/)[0],jt={},Zt=y.utils.xlscn(ve),ei=y.utils.xlscn(Me),xi=Zt;xi<=ei;xi++){var Ci=y.utils.xlsnc(xi);P.headers?$.Sheets[F][Ci+""+Ie]?jt[Ci]=ae($.Sheets[F][Ci+""+Ie].v):jt[Ci]=ae(Ci):jt[Ci]=Ci}P.headers&&Ie++;for(var Mi=Ie;Mi<=Ut;Mi++){for(var We={},xi=Zt;xi<=ei;xi++){var Ci=y.utils.xlsnc(xi);$.Sheets[F][Ci+""+Mi]&&(We[jt[Ci]]=$.Sheets[F][Ci+""+Mi].v)}ue.push(We)}}else ue.push([]);ue.length>0&&ue[ue.length-1]&&Object.keys(ue[ue.length-1]).length==0&&ue.pop(),f&&(ue=f(ue,v,T))},function(ie){if(T&&T.cb){T.cb(null,ie);return}throw ie}),D}y.from.XLS=function(i,_,p,f,v){return _=_||{},i=y.utils.autoExtFilename(i,"xls",_),_.autoExt=!1,Lr(Rs(),i,_,p,f,v)},y.from.XLSX=function(i,_,p,f,v){return _=_||{},i=y.utils.autoExtFilename(i,"xlsx",_),_.autoExt=!1,Lr(Rs(),i,_,p,f,v)},y.from.ODS=function(i,_,p,f,v){return _=_||{},i=y.utils.autoExtFilename(i,"ods",_),_.autoExt=!1,Lr(Rs(),i,_,p,f,v)},y.from.XML=function(i,_,p,f,v){var T;return y.utils.loadFile(i,!!p,function(P){T=Wr(P).root,p&&(T=p(T,f,v))}),T};function Wr(i){return i=i.trim(),i=i.replace(/<!--[\s\S]*?-->/g,""),_();function _(){return{declaration:p(),root:f()}}function p(){var ie=D(/^<\?xml\s*/);if(ie){for(var Q={attributes:{}};!(V()||ae("?>"));){var $=T();if(!$)return Q;Q.attributes[$.name]=$.value}return D(/\?>\s*/),Q}}function f(){var ie=D(/^<([\w-:.]+)\s*/);if(ie){for(var Q={name:ie[1],attributes:{},children:[]};!(V()||ae(">")||ae("?>")||ae("/>"));){var $=T();if(!$)return Q;Q.attributes[$.name]=$.value}if(D(/^\s*\/>\s*/))return Q;D(/\??>\s*/),Q.content=v();for(var F;F=f();)Q.children.push(F);return D(/^<\/[\w-:.]+>\s*/),Q}}function v(){var ie=D(/^([^<]*)/);return ie?ie[1]:""}function T(){var ie=D(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(ie)return{name:ie[1],value:P(ie[2])}}function P(ie){return ie.replace(/^['"]|['"]$/g,"")}function D(ie){var Q=i.match(ie);if(Q)return i=i.slice(Q[0].length),Q}function V(){return i.length==0}function ae(ie){return i.indexOf(ie)==0}}y.from.GEXF=function(i,_,p,f,v){var T;return y("SEARCH FROM XML("+i+")",[],function(P){T=P,p&&(T=p(T))}),T},de.Print=function(i){return Object.assign(this,i)},de.Print.prototype.toString=function(){var i="PRINT";return this.statement&&(i+=" "+this.statement.toString()),i},de.Print.prototype.execute=function(i,_,p){var f=this,v=1;if(y.precompile(this,i,_),this.exprs&&this.exprs.length>0){var T=this.exprs.map(function(D){var V=new Function("params,alasql,p","var y;return "+D.toJS("({})","",null)).bind(f),ae=V(_,y);return at(ae)});console.log.apply(console,T)}else if(this.select){var P=this.select.execute(i,_);console.log(at(P))}else console.log();return p&&(v=p(v)),v},de.Source=function(i){return Object.assign(this,i)},de.Source.prototype.toString=function(){var i="SOURCE";return this.url&&(i+=" '"+this.url+" '"),i},de.Source.prototype.execute=function(i,_,p){var f;return Mr(this.url,!!p,function(v){return f=y(v),p&&(f=p(f)),f},function(v){throw v}),f},de.Require=function(i){return Object.assign(this,i)},de.Require.prototype.toString=function(){var i="REQUIRE";return this.paths&&this.paths.length>0&&(i+=this.paths.map(function(_){return _.toString()}).join(",")),this.plugins&&this.plugins.length>0&&(i+=this.plugins.map(function(_){return _.toUpperCase()}).join(",")),i},de.Require.prototype.execute=function(i,_,p){var f=this,v=0,T="";return this.paths&&this.paths.length>0?this.paths.forEach(function(P){Mr(P.value,!!p,function(D){v++,T+=D,!(v<f.paths.length)&&(new Function("params,alasql",T)(_,y),p&&(v=p(v)))})}):this.plugins&&this.plugins.length>0?this.plugins.forEach(function(P){y.plugins[P]||Mr(y.path+"/alasql-"+P.toLowerCase()+".js",!!p,function(D){v++,T+=D,!(v<f.plugins.length)&&(new Function("params,alasql",T)(_,y),y.plugins[P]=!0,p&&(v=p(v)))})}):p&&(v=p(v)),v},de.Assert=function(i){return Object.assign(this,i)},de.Source.prototype.toString=function(){var i="ASSERT";return this.value&&(i+=" "+JSON.stringify(this.value)),i},de.Assert.prototype.execute=function(i){if(!An(y.res,this.value))throw new Error((this.message||"Assert wrong")+": "+JSON.stringify(y.res)+" == "+JSON.stringify(this.value));return 1};var cr=y.engines.INDEXEDDB=function(){""};async function Gt(i){let _=globalThis.indexedDB;if(!_)throw new Error("IndexedDB is not supported in this browser");if(_.databases)return(await _.databases()).find(f=>f.name===i)||0;let p=_.open(i);return new Promise(function(f,v){p.onsuccess=()=>{p.result.close(),f({name:i,version:p.result.version})},p.onupgradeneeded=T=>{T.target.transaction.abort(),f(0)},p.onerror=()=>{v(new Error("IndexedDB error"))},p.onblocked=()=>{f({name:i,version:p.result.version})}})}cr.showDatabases=function(i,_){if(!indexedDB.databases){_(null,new Error("SHOW DATABASE is not supported in this browser"));return}indexedDB.databases().then(p=>{let f=[],v=i&&new RegExp(i.value.replace(/\%/g,".*"),"g");for(var T=0;T<p.length;T++)(!i||p[T].name.match(v))&&f.push({databaseid:p[T].name});_(f)})},cr.createDatabase=async function(i,_,p,f,v){if(await Gt(i).catch(T=>{throw v&&v(null,T),T}))if(p)v&&v(0);else{let T=new Error(`IndexedDB: Cannot create new database "${i}" because it already exists`);v&&v(null,T)}else{let T=indexedDB.open(i,1);T.onsuccess=()=>{T.result.close(),v(1)}}},cr.dropDatabase=async function(i,_,p){if(await Gt(i).catch(f=>{throw p&&p(null,f),f})){let f=indexedDB.deleteDatabase(i);f.onsuccess=()=>{p&&p(1)}}else _?p&&p(0):p&&p(null,new Error(`IndexedDB: Cannot drop new database "${i}" because it does not exist'`))},cr.attachDatabase=async function(i,_,p,f,v){if(!await Gt(i).catch(V=>{throw v&&v(null,V),V})){let V=new Error(`IndexedDB: Cannot attach database "${i}" because it does not exist`);throw v&&v(null,V),V}let T=await new Promise((V,ae)=>{let ie=indexedDB.open(i);ie.onsuccess=()=>{V(ie.result.objectStoreNames),ie.result.close()}}),P=new y.Database(_||i);P.engineid="INDEXEDDB",P.ixdbid=i,P.tables=[];for(var D=0;D<T.length;D++)P.tables[T[D]]={};v&&v(1)},cr.createTable=async function(i,_,p,f){let v=y.databases[i].ixdbid,T=await Gt(v).catch(D=>{throw f&&f(null,D),D});if(!T){let D=new Error('IndexedDB: Cannot create table in database "'+v+'" because it does not exist');throw f&&f(null,D),D}let P=indexedDB.open(v,T.version+1);P.onupgradeneeded=function(D){P.result.createObjectStore(_,{autoIncrement:!0})},P.onsuccess=function(D){P.result.close(),f&&f(1)},P.onerror=D=>{f(null,D)},P.onblocked=function(D){f(null,new Error(`Cannot create table "${_}" because database "${i}"  is blocked`))}},cr.dropTable=async function(i,_,p,f){let v=y.databases[i].ixdbid,T=await Gt(v).catch(V=>{throw f&&f(null,V),V});if(!T){let V=new Error('IndexedDB: Cannot drop table in database "'+v+'" because it does not exist');throw f&&f(null,V),V}let P=indexedDB.open(v,T.version+1),D;P.onupgradeneeded=function(V){var ae=P.result;ae.objectStoreNames.contains(_)?(ae.deleteObjectStore(_),delete y.databases[i].tables[_]):p||(D=new Error(`IndexedDB: Cannot drop table "${_}" because it does not exist`),V.target.transaction.abort())},P.onsuccess=function(V){P.result.close(),f&&f(1)},P.onerror=function(V){f&&f(null,D||V)},P.onblocked=function(V){f(null,new Error(`Cannot drop table "${_}" because database "${i}" is blocked`))}},cr.intoTable=function(i,_,p,f,v){let T=y.databases[i].ixdbid,P=indexedDB.open(T);var D=y.databases[i],V=D.tables[_];P.onupgradeneeded=ae=>{ae.target.transaction.abort();let ie=new Error(`Cannot insert into table "${_}" because database "${i}" does not exist`);v&&v(null,ie)},P.onsuccess=()=>{for(var ae=P.result,ie=ae.transaction([_],"readwrite"),Q=ie.objectStore(_),$=0,F=p.length;$<F;$++)Q.add(p[$]);ie.oncomplete=function(){ae.close();for(var _e in V.afterinsert)if(V.afterinsert[_e]){var ue=V.afterinsert[_e];ue.funcid?y.fn[ue.funcid](p):ue.statement&&ue.statement.execute(i)}v&&v(F)}}},cr.fromTable=function(i,_,p,f,v){let T=y.databases[i].ixdbid,P=indexedDB.open(T);P.onupgradeneeded=D=>{D.target.transaction.abort();let V=new Error(`Cannot select from table "${_}" because database "${i}" does not exist`);p&&p(null,V)},P.onsuccess=()=>{let D=[],V=P.result,ae=V.transaction([_]).objectStore(_).openCursor();ae.onsuccess=()=>{let ie=ae.result;if(ie){let Q=typeof ie=="object"?ie.value:{[ie.key]:ie.value};D.push(Q),ie.continue()}else V.close(),p&&p(D,f,v)}}},cr.deleteFromTable=function(i,_,p,f,v){let T=y.databases[i].ixdbid,P=indexedDB.open(T);P.onsuccess=()=>{let D=P.result,V=D.transaction([_],"readwrite").objectStore(_).openCursor(),ae=0;V.onsuccess=()=>{var ie=V.result;ie?((!p||p(ie.value,f,y))&&(ie.delete(),ae++),ie.continue()):(D.close(),v&&v(ae))}}},cr.updateTable=function(i,_,p,f,v,T){let P=y.databases[i].ixdbid,D=indexedDB.open(P);D.onsuccess=function(){let V=D.result,ae=V.transaction([_],"readwrite").objectStore(_).openCursor(),ie=0;ae.onsuccess=()=>{var Q=ae.result;if(Q){if(!f||f(Q.value,v)){var $=Q.value;p($,v),Q.update($),ie++}Q.continue()}else V.close(),T&&T(ie)}}};var li=y.engines.LOCALSTORAGE=function(){};li.get=function(i){var _=localStorage.getItem(i);if(!(typeof _>"u")){var p;try{p=JSON.parse(_)}catch{throw new Error("Cannot parse JSON object from localStorage"+_)}return p}},li.set=function(i,_){typeof _>"u"?localStorage.removeItem(i):localStorage.setItem(i,JSON.stringify(_))},li.storeTable=function(i,_){var p=y.databases[i],f=p.tables[_],v={};v.columns=f.columns,v.data=f.data,v.identities=f.identities,li.set(p.lsdbid+"."+_,v)},li.restoreTable=function(i,_){var p=y.databases[i],f=li.get(p.lsdbid+"."+_),v=new y.Table;for(var T in f)v[T]=f[T];return p.tables[_]=v,v.indexColumns(),v},li.removeTable=function(i,_){var p=y.databases[i];localStorage.removeItem(p.lsdbid+"."+_)},li.createDatabase=function(i,_,p,f,v){var T=1,P=li.get("alasql");if(p&&P&&P.databases&&P.databases[i])T=0;else{if(P||(P={databases:{}}),P.databases&&P.databases[i])throw new Error('localStorage: Cannot create new database "'+i+'" because it already exists');P.databases[i]=!0,li.set("alasql",P),li.set(i,{databaseid:i,tables:{}})}return v&&(T=v(T)),T},li.dropDatabase=function(i,_,p){var f=1,v=li.get("alasql");if(_&&v&&v.databases&&!v.databases[i])f=0;else{if(!v){if(_)return p?p(0):0;throw new Error("There is no any AlaSQL databases in localStorage")}if(v.databases&&!v.databases[i])throw new Error('localStorage: Cannot drop database "'+i+'" because there is no such database');delete v.databases[i],li.set("alasql",v);var T=li.get(i);for(var P in T.tables)localStorage.removeItem(i+"."+P);localStorage.removeItem(i)}return p&&(f=p(f)),f},li.attachDatabase=function(i,_,p,f,v){var T=1;if(y.databases[_])throw new Error('Unable to attach database as "'+_+'" because it already exists');_||(_=i);var P=new y.Database(_);if(P.engineid="LOCALSTORAGE",P.lsdbid=i,P.tables=li.get(i).tables,!y.options.autocommit&&P.tables)for(var D in P.tables)li.restoreTable(_,D);return v&&(T=v(T)),T},li.showDatabases=function(i,_){var p=[],f=li.get("alasql");if(i)var v=new RegExp(i.value.replace(/%/g,".*"),"g");if(f&&f.databases){for(var T in f.databases)p.push({databaseid:T});i&&p&&p.length>0&&(p=p.filter(function(P){return P.databaseid.match(v)}))}return _&&(p=_(p)),p},li.createTable=function(i,_,p,f){var v=1,T=y.databases[i].lsdbid,P=li.get(T+"."+_);if(P&&!p)throw new Error('Table "'+_+'" alsready exists in localStorage database "'+T+'"');var D=li.get(T),V=y.databases[i].tables[_];return D.tables[_]=!0,li.set(T,D),li.storeTable(i,_),f&&(v=f(v)),v},li.truncateTable=function(i,_,p,f){var v=1,T=y.databases[i].lsdbid,P;if(y.options.autocommit?P=li.get(T):P=y.databases[i],!p&&!P.tables[_])throw new Error('Cannot truncate table "'+_+'" in localStorage, because it does not exist');var D=li.restoreTable(i,_);return D.data=[],li.storeTable(i,_),f&&(v=f(v)),v},li.dropTable=function(i,_,p,f){var v=1,T=y.databases[i].lsdbid,P;if(y.options.autocommit?P=li.get(T):P=y.databases[i],!p&&!P.tables[_])throw new Error('Cannot drop table "'+_+'" in localStorage, because it does not exist');return delete P.tables[_],li.set(T,P),li.removeTable(i,_),f&&(v=f(v)),v},li.fromTable=function(i,_,p,f,v){var T=y.databases[i].lsdbid,P=li.restoreTable(i,_).data;return p&&(P=p(P,f,v)),P},li.intoTable=function(i,_,p,f,v){var T=y.databases[i].lsdbid,P=p.length,D=li.restoreTable(i,_);for(var V in D.identities){var ae=D.identities[V];for(var ie in p)p[ie][V]=ae.value,ae.value+=ae.step}return D.data||(D.data=[]),D.data=D.data.concat(p),li.storeTable(i,_),v&&(P=v(P)),P},li.loadTableData=function(i,_){var p=y.databases[i],f=y.databases[i].lsdbid;li.restoreTable(i,_)},li.saveTableData=function(i,_){var p=y.databases[i],f=y.databases[i].lsdbid;li.storeTable(f,_),p.tables[_].data=void 0},li.commit=function(i,_){var p=y.databases[i],f=y.databases[i].lsdbid,v={databaseid:f,tables:{}};if(p.tables)for(var T in p.tables)v.tables[T]=!0,li.storeTable(i,T);return li.set(f,v),_?_(1):1},li.begin=li.commit,li.rollback=function(i,_){return;var p,f,v;if(v.tables)for(var T in v.tables)li.restoreTable(i,T)};var br=y.engines.SQLITE=function(){};br.createDatabase=function(i,_,p,f,v){throw new Error("Connot create SQLITE database in memory. Attach it.")},br.dropDatabase=function(i){throw new Error("This is impossible to drop SQLite database. Detach it.")},br.attachDatabase=function(i,_,p,f,v){var T=1;if(y.databases[_])throw new Error('Unable to attach database as "'+_+'" because it already exists');if(p[0]&&p[0]instanceof de.StringValue||p[0]instanceof de.ParamValue){if(p[0]instanceof de.StringValue)var P=p[0].value;else if(p[0]instanceof de.ParamValue)var P=f[p[0].param];return y.utils.loadBinaryFile(P,!0,function(D){var V=new y.Database(_||i);V.engineid="SQLITE",V.sqldbid=i;var ae=V.sqldb=new SQL.Database(D);V.tables=[];var ie=ae.exec("SELECT * FROM sqlite_master WHERE type='table'")[0].values;ie.forEach(function(Q){V.tables[Q[1]]={};var $=V.tables[Q[1]].columns=[],F=y.parse(Q[4]),_e=F.statements[0].columns;_e&&_e.length>0&&_e.forEach(function(ue){$.push(ue)})}),v(1)},function(D){throw new Error('Cannot open SQLite database file "'+p[0].value+'"')}),T}else throw new Error("Cannot attach SQLite database without a file");return T},br.fromTable=function(i,_,p,f,v){var T=y.databases[i].sqldb.exec("SELECT * FROM "+_),P=v.sources[f].columns=[];T[0].columns.length>0&&T[0].columns.forEach(function(V){P.push({columnid:V})});var D=[];T[0].values.length>0&&T[0].values.forEach(function(V){var ae={};P.forEach(function(ie,Q){ae[ie.columnid]=V[Q]}),D.push(ae)}),p&&p(D,f,v)},br.intoTable=function(i,_,p,f,v){for(var T=y.databases[i].sqldb,P=0,D=p.length;P<D;P++){var V="INSERT INTO "+_+" (",ae=p[P],ie=Object.keys(ae);V+=ie.join(","),V+=") VALUES (",V+=ie.map(function($){var F=ae[$];return typeof F=="string"&&(F="'"+F+"'"),F}).join(","),V+=")",T.exec(V)}var Q=D;return v&&v(Q),Q};var kr=y.engines.FILESTORAGE=y.engines.FILE=function(){};if(kr.createDatabase=function(i,_,p,f,v){var T=1,P=_[0].value;return y.utils.fileExists(P,function(D){if(D){if(p)return T=0,v&&(T=v(T)),T;throw new Error("Cannot create new database file, because it already exists")}else{var V={tables:{}};y.utils.saveFile(P,JSON.stringify(V),function(ae){v&&(T=v(T))})}}),T},kr.dropDatabase=function(i,_,p){var f,v="";if(typeof i=="object"&&i.value)v=i.value;else{var T=y.databases[i]||{};v=T.filename||"",delete y.databases[i]}return y.utils.fileExists(v,function(P){if(P)f=1,y.utils.deleteFile(v,function(){f=1,p&&(f=p(f))});else{if(!_)throw new Error("Cannot drop database file, because it does not exist");f=0,p&&(f=p(f))}}),f},kr.attachDatabase=function(i,_,p,f,v){var T=1;if(y.databases[_])throw new Error('Unable to attach database as "'+_+'" because it already exists');var P=new y.Database(_||i);return P.engineid="FILESTORAGE",P.filename=p[0].value,Mr(P.filename,!!v,function(D){try{P.data=JSON.parse(D)}catch{throw new Error("Data in FileStorage database are corrupted")}if(P.tables=P.data.tables,!y.options.autocommit&&P.tables)for(var V in P.tables)P.tables[V].data=P.data[V];v&&(T=v(T))}),T},kr.createTable=function(i,_,p,f){var v=y.databases[i],T=v.data[_],P=1;if(T&&!p)throw new Error('Table "'+_+'" alsready exists in the database "'+fsdbid+'"');var D=y.databases[i].tables[_];return v.data.tables[_]={columns:D.columns},v.data[_]=[],kr.updateFile(i),f&&f(P),P},kr.updateFile=function(i){var _=y.databases[i];if(_.issaving){_.postsave=!0;return}_.issaving=!0,_.postsave=!1,y.utils.saveFile(_.filename,JSON.stringify(_.data),function(){_.issaving=!1,_.postsave&&setTimeout(function(){kr.updateFile(i)},50)})},kr.dropTable=function(i,_,p,f){var v=1,T=y.databases[i];if(!p&&!T.tables[_])throw new Error('Cannot drop table "'+_+'" in fileStorage, because it does not exist');return delete T.tables[_],delete T.data.tables[_],delete T.data[_],kr.updateFile(i),f&&f(v),v},kr.fromTable=function(i,_,p,f,v){var T=y.databases[i],P=T.data[_];return p&&(P=p(P,f,v)),P},kr.intoTable=function(i,_,p,f,v){var T=y.databases[i],P=p.length,D=T.data[_];return D||(D=[]),T.data[_]=D.concat(p),kr.updateFile(i),v&&v(P),P},kr.loadTableData=function(i,_){var p=y.databases[i];p.tables[_].data=p.data[_]},kr.saveTableData=function(i,_){var p=y.databases[i];p.data[_]=p.tables[_].data,p.tables[_].data=null,kr.updateFile(i)},kr.commit=function(i,_){var p=y.databases[i],f={tables:{}};if(p.tables)for(var v in p.tables)p.data.tables[v]={columns:p.tables[v].columns},p.data[v]=p.tables[v].data;return kr.updateFile(i),_?_(1):1},kr.begin=kr.commit,kr.rollback=function(i,_){var p=1,f=y.databases[i];f.dbversion++,v();function v(){setTimeout(function(){if(f.issaving)return v();y.loadFile(f.filename,!!_,function(T){f.data=T,f.tables={};for(var P in f.data.tables){var D=new y.Table({columns:f.data.tables[P].columns});Fr(D,f.data.tables[P]),f.tables[P]=D,y.options.autocommit||(f.tables[P].data=f.data[P]),f.tables[P].indexColumns()}delete y.databases[i],y.databases[i]=new y.Database(i),Fr(y.databases[i],f),y.databases[i].engineid="FILESTORAGE",y.databases[i].filename=f.filename,_&&(p=_(p))})},100)}},R.isBrowser&&!R.isWebWorker){if(y=y||!1,!y)throw new Error("alasql was not found");y.worker=function(){throw new Error("Can find webworker in this enviroment")},typeof Worker<"u"&&(y.worker=function(i,_,p){if(i===!0&&(i=void 0),typeof i>"u"){for(var f=document.getElementsByTagName("script"),v=0;v<f.length;v++)if(f[v].src.substr(-16).toLowerCase()==="alasql-worker.js"){i=f[v].src.substr(0,f[v].src.length-16)+"alasql.js";break}else if(f[v].src.substr(-20).toLowerCase()==="alasql-worker.min.js"){i=f[v].src.substr(0,f[v].src.length-20)+"alasql.min.js";break}else if(f[v].src.substr(-9).toLowerCase()==="alasql.js"){i=f[v].src;break}else if(f[v].src.substr(-13).toLowerCase()==="alasql.min.js"){i=f[v].src.substr(0,f[v].src.length-13)+"alasql.min.js";break}}if(typeof i>"u")throw new Error("Path to alasql.js is not specified");if(i!==!1){var T="importScripts('";T+=i,T+="');self.onmessage = function(event) {alasql(event.data.sql,event.data.params, function(data){postMessage({id:event.data.id, data:data});});}";var P=new Blob([T],{type:"text/plain"});if(y.webworker=new Worker(URL.createObjectURL(P)),y.webworker.onmessage=function(V){var ae=V.data.id;y.buffer[ae](V.data.data),delete y.buffer[ae]},y.webworker.onerror=function(V){throw V},arguments.length>1){var D="REQUIRE "+_.map(function(V){return'"'+V+'"'}).join(",");y(D,[],p)}}else if(i===!1){delete y.webworker;return}});var hn=hn||function(i){"use strict";if(!(typeof i>"u"||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent))){var _=i.document,p=function(){return i.URL||i.webkitURL||i},f=_.createElementNS("http://www.w3.org/1999/xhtml","a"),v="download"in f,T=function(ve){var Ie=new MouseEvent("click");ve.dispatchEvent(Ie)},P=/constructor/i.test(i.HTMLElement)||i.safari,D=/CriOS\/[\d]+/.test(navigator.userAgent),V=function(ve){(i.setImmediate||i.setTimeout)(function(){throw ve},0)},ae="application/octet-stream",ie=1e3*40,Q=function(ve){var Ie=function(){typeof ve=="string"?p().revokeObjectURL(ve):ve.remove()};setTimeout(Ie,ie)},$=function(ve,Ie,Me){Ie=[].concat(Ie);for(var Ut=Ie.length;Ut--;){var jt=ve["on"+Ie[Ut]];if(typeof jt=="function")try{jt.call(ve,Me||ve)}catch(Zt){V(Zt)}}},F=function(ve){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(ve.type)?new Blob(["\uFEFF",ve],{type:ve.type}):ve},_e=function(ve,Ie,Me){Me||(ve=F(ve));var Ut=this,jt=ve.type,Zt=jt===ae,ei,xi=function(){$(Ut,"writestart progress write writeend".split(" "))},Ci=function(){if((D||Zt&&P)&&i.FileReader){var Mi=new FileReader;Mi.onloadend=function(){var Wi=D?Mi.result:Mi.result.replace(/^data:[^;]*;/,"data:attachment/file;"),Li=i.open(Wi,"_blank");Li||(i.location.href=Wi),Wi=void 0,Ut.readyState=Ut.DONE,xi()},Mi.readAsDataURL(ve),Ut.readyState=Ut.INIT;return}if(ei||(ei=p().createObjectURL(ve)),Zt)i.location.href=ei;else{var We=i.open(ei,"_blank");We||(i.location.href=ei)}Ut.readyState=Ut.DONE,xi(),Q(ei)};if(Ut.readyState=Ut.INIT,v){ei=p().createObjectURL(ve),setTimeout(function(){f.href=ei,f.download=Ie,T(f),xi(),Q(ei),Ut.readyState=Ut.DONE});return}Ci()},ue=_e.prototype,ze=function(ve,Ie,Me){return new _e(ve,Ie||ve.name||"download",Me)};return typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(ve,Ie,Me){return Ie=Ie||ve.name||"download",Me||(ve=F(ve)),navigator.msSaveOrOpenBlob(ve,Ie)}:(ue.abort=function(){},ue.readyState=ue.INIT=0,ue.WRITING=1,ue.DONE=2,ue.error=ue.onwritestart=ue.onprogress=ue.onwrite=ue.onabort=ue.onerror=ue.onwriteend=null,ze)}}(typeof self<"u"&&self||typeof window<"u"&&window||this.content);typeof qc<"u"&&qc.exports?qc.exports.saveAs=hn:typeof define<"u"&&define!==null&&define.amd!==null&&define("FileSaver.js",function(){return hn}),(R.isCordova||R.isMeteorServer||R.isNode)&&console.log("It looks like you are using the browser version of AlaSQL. Please use the alasql.fs.js file instead."),y.utils.saveAs=hn}return new ks("alasql"),y.use("alasql"),y})});var _0=Wp((Id,Md)=>{(function(y,w){typeof Id=="object"&&typeof Md<"u"?Md.exports=w():typeof define=="function"&&define.amd?define(w):(y=typeof globalThis<"u"?globalThis:y||self,y.maplibregl=w())})(Id,function(){"use strict";var y={},w={};function N(R,u,tt){if(w[R]=tt,R==="index"){var Nt="var sharedModule = {}; ("+w.shared+")(sharedModule); ("+w.worker+")(sharedModule);",ai={};return w.shared(ai),w.index(y,ai),typeof window<"u"&&y.setWorkerUrl(window.URL.createObjectURL(new Blob([Nt],{type:"text/javascript"}))),y}}N("shared",["exports"],function(R){"use strict";function u(s,t,n,a){return new(n||(n=Promise))(function(c,m){function g(M){try{S(a.next(M))}catch(L){m(L)}}function x(M){try{S(a.throw(M))}catch(L){m(L)}}function S(M){var L;M.done?c(M.value):(L=M.value,L instanceof n?L:new n(function(z){z(L)})).then(g,x)}S((a=a.apply(s,t||[])).next())})}function tt(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Nt,ai;function ci(){if(ai)return Nt;function s(t,n){this.x=t,this.y=n}return ai=1,Nt=s,s.prototype={clone:function(){return new s(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,n){return this.clone()._rotateAround(t,n)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var n=t.x-this.x,a=t.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,n){return Math.atan2(this.x*n-this.y*t,this.x*t+this.y*n)},_matMult:function(t){var n=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var n=Math.cos(t),a=Math.sin(t),c=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=c,this},_rotateAround:function(t,n){var a=Math.cos(t),c=Math.sin(t),m=n.y+c*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-c*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(t){return t instanceof s?t:Array.isArray(t)?new s(t[0],t[1]):t},Nt}typeof SuppressedError=="function"&&SuppressedError;var Vt,Ne,bi=tt(ci()),gr=function(){if(Ne)return Vt;function s(t,n,a,c){this.cx=3*t,this.bx=3*(a-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(c-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=a,this.p2y=c}return Ne=1,Vt=s,s.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,n){if(n===void 0&&(n=1e-6),t<0)return 0;if(t>1)return 1;for(var a=t,c=0;c<8;c++){var m=this.sampleCurveX(a)-t;if(Math.abs(m)<n)return a;var g=this.sampleCurveDerivativeX(a);if(Math.abs(g)<1e-6)break;a-=m/g}var x=0,S=1;for(a=t,c=0;c<20&&(m=this.sampleCurveX(a),!(Math.abs(m-t)<n));c++)t>m?x=a:S=a,a=.5*(S-x)+x;return a},solve:function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))}},Vt}(),Hr=tt(gr);let Ar,Mr;function en(){return Ar==null&&(Ar=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Ar}function Nr(){if(Mr==null&&(Mr=!1,en())){let t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let a=0;a<5*5;a++){let c=4*a;t.fillStyle=`rgb(${c},${c+1},${c+2})`,t.fillRect(a%5,Math.floor(a/5),1,1)}let n=t.getImageData(0,0,5,5).data;for(let a=0;a<5*5*4;a++)if(a%4!=3&&n[a]!==a){Mr=!0;break}}}return Mr||!1}var Pr=1e-6,ur=typeof Float32Array<"u"?Float32Array:Array;function zr(){var s=new ur(9);return ur!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function yr(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function xn(){var s=new ur(3);return ur!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function qn(s){return Math.hypot(s[0],s[1],s[2])}function $r(s,t,n){var a=new ur(3);return a[0]=s,a[1]=t,a[2]=n,a}Math.hypot||(Math.hypot=function(){for(var s=0,t=arguments.length;t--;)s+=arguments[t]*arguments[t];return Math.sqrt(s)});var rn,cn=qn;function un(s,t,n){var a=t[0],c=t[1],m=t[2],g=t[3];return s[0]=n[0]*a+n[4]*c+n[8]*m+n[12]*g,s[1]=n[1]*a+n[5]*c+n[9]*m+n[13]*g,s[2]=n[2]*a+n[6]*c+n[10]*m+n[14]*g,s[3]=n[3]*a+n[7]*c+n[11]*m+n[15]*g,s}function Gn(){var s=new ur(4);return ur!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function Ia(){var s=new ur(2);return ur!=Float32Array&&(s[0]=0,s[1]=0),s}function Na(s,t){var n=new ur(2);return n[0]=s,n[1]=t,n}xn(),rn=new ur(4),ur!=Float32Array&&(rn[0]=0,rn[1]=0,rn[2]=0,rn[3]=0),xn(),$r(1,0,0),$r(0,1,0),Gn(),Gn(),zr(),Ia();let Er=8192;function An(s,t,n){return t*(Er/(s.tileSize*Math.pow(2,n-s.tileID.overscaledZ)))}function Ps(s,t){return(s%t+t)%t}function Fr(s,t,n){return s*(1-n)+t*n}function Ws(s){if(s<=0)return 0;if(s>=1)return 1;let t=s*s,n=t*s;return 4*(s<.5?n:3*(s-t)+n-.75)}function Jo(s,t,n,a){let c=new Hr(s,t,n,a);return m=>c.solve(m)}let Xs=Jo(.25,.1,.25,1);function Zn(s,t,n){return Math.min(n,Math.max(t,s))}function Ma(s,t,n){let a=n-t,c=((s-t)%a+a)%a+t;return c===t?n:c}function Hn(s,...t){for(let n of t)for(let a in n)s[a]=n[a];return s}let Pa=1;function oo(s,t,n){let a={};for(let c in s)a[c]=t.call(this,s[c],c,s);return a}function Rs(s,t,n){let a={};for(let c in s)t.call(this,s[c],c,s)&&(a[c]=s[c]);return a}function xs(s){return Array.isArray(s)?s.map(xs):typeof s=="object"&&s?oo(s,xs):s}let Js={};function hs(s){Js[s]||(typeof console<"u"&&console.warn(s),Js[s]=!0)}function on(s,t,n){return(n.y-s.y)*(t.x-s.x)>(t.y-s.y)*(n.x-s.x)}function ks(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let Ha=null;function _a(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}let Yo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function No(s,t,n,a,c){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");let m=new VideoFrame(s,{timestamp:0});try{let g=m?.format;if(!g||!g.startsWith("BGR")&&!g.startsWith("RGB"))throw new Error(`Unrecognized format ${g}`);let x=g.startsWith("BGR"),S=new Uint8ClampedArray(a*c*4);if(yield m.copyTo(S,function(M,L,z,U,G){let Z=4*Math.max(1,0),J=(Math.max(0,z)-z)*U*4+Z,ne=4*U,he=Math.max(0,L),Te=Math.max(0,z);return{rect:{x:he,y:Te,width:Math.min(M.width,L+U)-he,height:Math.min(M.height,z+G)-Te},layout:[{offset:J,stride:ne}]}}(s,t,n,a,c)),x)for(let M=0;M<S.length;M+=4){let L=S[M];S[M]=S[M+2],S[M+2]=L}return S}finally{m.close()}})}let ya,Wa;function de(s,t,n,a){return s.addEventListener(t,n,a),{unsubscribe:()=>{s.removeEventListener(t,n,a)}}}function Xa(s){return s*Math.PI/180}function Ja(s){return s/Math.PI*180}let So={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},lo={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},zo="AbortError";function Ya(){return new Error(zo)}let Ka={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ys(s){return Ka.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}let t1="global-dispatcher";class za extends Error{constructor(t,n,a,c){super(`AJAXError: ${n} (${t}): ${a}`),this.status=t,this.statusText=n,this.url=a,this.body=c}}let ba=()=>ks(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,co=function(s,t){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){let a=Ys(s.url);if(a)return a(s,t);if(ks(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:t1},t)}if(!(/^file:/.test(n=s.url)||/^file:/.test(ba())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(a,c){return u(this,void 0,void 0,function*(){let m=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,cache:a.cache,referrer:ba(),signal:c.signal}),g,x;a.type!=="json"||m.headers.has("Accept")||m.headers.set("Accept","application/json");try{g=yield fetch(m)}catch(M){throw new za(0,M.message,a.url,new Blob)}if(!g.ok){let M=yield g.blob();throw new za(g.status,g.statusText,a.url,M)}x=a.type==="arrayBuffer"||a.type==="image"?g.arrayBuffer():a.type==="json"?g.json():g.text();let S=yield x;if(c.signal.aborted)throw Ya();return{data:S,cacheControl:g.headers.get("Cache-Control"),expires:g.headers.get("Expires")}})}(s,t);if(ks(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:t1},t)}var n;return function(a,c){return new Promise((m,g)=>{var x;let S=new XMLHttpRequest;S.open(a.method||"GET",a.url,!0),a.type!=="arrayBuffer"&&a.type!=="image"||(S.responseType="arraybuffer");for(let M in a.headers)S.setRequestHeader(M,a.headers[M]);a.type==="json"&&(S.responseType="text",!((x=a.headers)===null||x===void 0)&&x.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=a.credentials==="include",S.onerror=()=>{g(new Error(S.statusText))},S.onload=()=>{if(!c.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let M=S.response;if(a.type==="json")try{M=JSON.parse(S.response)}catch(L){return void g(L)}m({data:M,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{let M=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});g(new za(S.status,S.statusText,a.url,M))}},c.signal.addEventListener("abort",()=>{S.abort(),g(Ya())}),S.send(a.body)})}(s,t)};function Be(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;let t=new URL(s),n=window.location;return t.protocol===n.protocol&&t.host===n.host}function Y(s,t,n){n[s]&&n[s].indexOf(t)!==-1||(n[s]=n[s]||[],n[s].push(t))}function K(s,t,n){if(n&&n[s]){let a=n[s].indexOf(t);a!==-1&&n[s].splice(a,1)}}class se{constructor(t,n={}){Hn(this,n),this.type=t}}class ge extends se{constructor(t,n={}){super("error",Hn({error:t},n))}}class Se{on(t,n){return this._listeners=this._listeners||{},Y(t,n,this._listeners),{unsubscribe:()=>{this.off(t,n)}}}off(t,n){return K(t,n,this._listeners),K(t,n,this._oneTimeListeners),this}once(t,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},Y(t,n,this._oneTimeListeners),this):new Promise(a=>this.once(t,a))}fire(t,n){typeof t=="string"&&(t=new se(t,n||{}));let a=t.type;if(this.listens(a)){t.target=this;let c=this._listeners&&this._listeners[a]?this._listeners[a].slice():[];for(let x of c)x.call(this,t);let m=this._oneTimeListeners&&this._oneTimeListeners[a]?this._oneTimeListeners[a].slice():[];for(let x of m)K(a,x,this._oneTimeListeners),x.call(this,t);let g=this._eventedParent;g&&(Hn(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),g.fire(t))}else t instanceof ge&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,n){return this._eventedParent=t,this._eventedParentData=n,this}}var te={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Re=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ae(s,t){let n={};for(let a in s)a!=="ref"&&(n[a]=s[a]);return Re.forEach(a=>{a in t&&(n[a]=t[a])}),n}function ke(s,t){if(Array.isArray(s)){if(!Array.isArray(t)||s.length!==t.length)return!1;for(let n=0;n<s.length;n++)if(!ke(s[n],t[n]))return!1;return!0}if(typeof s=="object"&&s!==null&&t!==null){if(typeof t!="object"||Object.keys(s).length!==Object.keys(t).length)return!1;for(let n in s)if(!ke(s[n],t[n]))return!1;return!0}return s===t}function at(s,t){s.push(t)}function je(s,t,n){at(n,{command:"addSource",args:[s,t[s]]})}function Yt(s,t,n){at(t,{command:"removeSource",args:[s]}),n[s]=!0}function Ti(s,t,n,a){Yt(s,n,a),je(s,t,n)}function Di(s,t,n){let a;for(a in s[n])if(Object.prototype.hasOwnProperty.call(s[n],a)&&a!=="data"&&!ke(s[n][a],t[n][a]))return!1;for(a in t[n])if(Object.prototype.hasOwnProperty.call(t[n],a)&&a!=="data"&&!ke(s[n][a],t[n][a]))return!1;return!0}function Hi(s,t,n,a,c,m){s=s||{},t=t||{};for(let g in s)Object.prototype.hasOwnProperty.call(s,g)&&(ke(s[g],t[g])||n.push({command:m,args:[a,g,t[g],c]}));for(let g in t)Object.prototype.hasOwnProperty.call(t,g)&&!Object.prototype.hasOwnProperty.call(s,g)&&(ke(s[g],t[g])||n.push({command:m,args:[a,g,t[g],c]}))}function Tr(s){return s.id}function _r(s,t){return s[t.id]=t,s}class It{constructor(t,n,a,c){this.message=(t?`${t}: `:"")+a,c&&(this.identifier=c),n!=null&&n.__line__&&(this.line=n.__line__)}}function Yr(s,...t){for(let n of t)for(let a in n)s[a]=n[a];return s}class Lr extends Error{constructor(t,n){super(n),this.message=n,this.key=t}}class Wr{constructor(t,n=[]){this.parent=t,this.bindings={};for(let[a,c]of n)this.bindings[a]=c}concat(t){return new Wr(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}let cr={kind:"null"},Gt={kind:"number"},li={kind:"string"},br={kind:"boolean"},kr={kind:"color"},hn={kind:"projectionDefinition"},i={kind:"object"},_={kind:"value"},p={kind:"collator"},f={kind:"formatted"},v={kind:"padding"},T={kind:"colorArray"},P={kind:"numberArray"},D={kind:"resolvedImage"},V={kind:"variableAnchorOffsetCollection"};function ae(s,t){return{kind:"array",itemType:s,N:t}}function ie(s){if(s.kind==="array"){let t=ie(s.itemType);return typeof s.N=="number"?`array<${t}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${t}>`}return s.kind}let Q=[cr,Gt,li,br,kr,hn,f,i,ae(_),v,P,T,D,V];function $(s,t){if(t.kind==="error")return null;if(s.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!$(s.itemType,t.itemType))&&(typeof s.N!="number"||s.N===t.N))return null}else{if(s.kind===t.kind)return null;if(s.kind==="value"){for(let n of Q)if(!$(n,t))return null}}return`Expected ${ie(s)} but found ${ie(t)} instead.`}function F(s,t){return t.some(n=>n.kind===s.kind)}function _e(s,t){return t.some(n=>n==="null"?s===null:n==="array"?Array.isArray(s):n==="object"?s&&!Array.isArray(s)&&typeof s=="object":n===typeof s)}function ue(s,t){return s.kind==="array"&&t.kind==="array"?s.itemType.kind===t.itemType.kind&&typeof s.N=="number":s.kind===t.kind}let ze=.96422,ve=.82521,Ie=4/29,Me=6/29,Ut=3*Me*Me,jt=Me*Me*Me,Zt=Math.PI/180,ei=180/Math.PI;function xi(s){return(s%=360)<0&&(s+=360),s}function Ci([s,t,n,a]){let c,m,g=We((.2225045*(s=Mi(s))+.7168786*(t=Mi(t))+.0606169*(n=Mi(n)))/1);s===t&&t===n?c=m=g:(c=We((.4360747*s+.3850649*t+.1430804*n)/ze),m=We((.0139322*s+.0971045*t+.7141733*n)/ve));let x=116*g-16;return[x<0?0:x,500*(c-g),200*(g-m),a]}function Mi(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function We(s){return s>jt?Math.pow(s,1/3):s/Ut+Ie}function Wi([s,t,n,a]){let c=(s+16)/116,m=isNaN(t)?c:c+t/500,g=isNaN(n)?c:c-n/200;return c=1*Ht(c),m=ze*Ht(m),g=ve*Ht(g),[Li(3.1338561*m-1.6168667*c-.4906146*g),Li(-.9787684*m+1.9161415*c+.033454*g),Li(.0719453*m-.2289914*c+1.4052427*g),a]}function Li(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Ht(s){return s>Me?s*s*s:Ut*(s-Ie)}let or=Object.hasOwn||function(s,t){return Object.prototype.hasOwnProperty.call(s,t)};function vr(s,t){return or(s,t)?s[t]:void 0}function dn(s){return parseInt(s.padEnd(2,s),16)/255}function qr(s,t){return hr(t?s/100:s,0,1)}function hr(s,t,n){return Math.min(Math.max(t,s),n)}function lr(s){return!s.some(Number.isNaN)}let pn={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Rr(s,t,n){return s+n*(t-s)}function Sr(s,t,n){return s.map((a,c)=>Rr(a,t[c],n))}class sr{constructor(t,n,a,c=1,m=!0){this.r=t,this.g=n,this.b=a,this.a=c,m||(this.r*=c,this.g*=c,this.b*=c,c||this.overwriteGetter("rgb",[t,n,a,c]))}static parse(t){if(t instanceof sr)return t;if(typeof t!="string")return;let n=function(a){if((a=a.toLowerCase().trim())==="transparent")return[0,0,0,0];let c=vr(pn,a);if(c){let[g,x,S]=c;return[g/255,x/255,S/255,1]}if(a.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(a)){let g=a.length<6?1:2,x=1;return[dn(a.slice(x,x+=g)),dn(a.slice(x,x+=g)),dn(a.slice(x,x+=g)),dn(a.slice(x,x+g)||"ff")]}if(a.startsWith("rgb")){let g=a.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(g){let[x,S,M,L,z,U,G,Z,J,ne,he,Te]=g,me=[L||" ",G||" ",ne].join("");if(me==="  "||me==="  /"||me===",,"||me===",,,"){let q=[M,U,J].join(""),re=q==="%%%"?100:q===""?255:0;if(re){let ye=[hr(+S/re,0,1),hr(+z/re,0,1),hr(+Z/re,0,1),he?qr(+he,Te):1];if(lr(ye))return ye}}return}}let m=a.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(m){let[g,x,S,M,L,z,U,G,Z]=m,J=[S||" ",L||" ",U].join("");if(J==="  "||J==="  /"||J===",,"||J===",,,"){let ne=[+x,hr(+M,0,100),hr(+z,0,100),G?qr(+G,Z):1];if(lr(ne))return function([he,Te,me,q]){function re(ye){let ct=(ye+he/30)%12,Kt=Te*Math.min(me,1-me);return me-Kt*Math.max(-1,Math.min(ct-3,9-ct,1))}return he=xi(he),Te/=100,me/=100,[re(0),re(8),re(4),q]}(ne)}}}(t);return n?new sr(...n,!1):void 0}get rgb(){let{r:t,g:n,b:a,a:c}=this,m=c||1/0;return this.overwriteGetter("rgb",[t/m,n/m,a/m,c])}get hcl(){return this.overwriteGetter("hcl",function(t){let[n,a,c,m]=Ci(t),g=Math.sqrt(a*a+c*c);return[Math.round(1e4*g)?xi(Math.atan2(c,a)*ei):NaN,g,n,m]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ci(this.rgb))}overwriteGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}toString(){let[t,n,a,c]=this.rgb;return`rgba(${[t,n,a].map(m=>Math.round(255*m)).join(",")},${c})`}static interpolate(t,n,a,c="rgb"){switch(c){case"rgb":{let[m,g,x,S]=Sr(t.rgb,n.rgb,a);return new sr(m,g,x,S,!1)}case"hcl":{let[m,g,x,S]=t.hcl,[M,L,z,U]=n.hcl,G,Z;if(isNaN(m)||isNaN(M))isNaN(m)?isNaN(M)?G=NaN:(G=M,x!==1&&x!==0||(Z=L)):(G=m,z!==1&&z!==0||(Z=g));else{let me=M-m;M>m&&me>180?me-=360:M<m&&m-M>180&&(me+=360),G=m+a*me}let[J,ne,he,Te]=function([me,q,re,ye]){return me=isNaN(me)?0:me*Zt,Wi([re,Math.cos(me)*q,Math.sin(me)*q,ye])}([G,Z??Rr(g,L,a),Rr(x,z,a),Rr(S,U,a)]);return new sr(J,ne,he,Te,!1)}case"lab":{let[m,g,x,S]=Wi(Sr(t.lab,n.lab,a));return new sr(m,g,x,S,!1)}}}}sr.black=new sr(0,0,0,1),sr.white=new sr(1,1,1,1),sr.transparent=new sr(0,0,0,0),sr.red=new sr(1,0,0,1);class Br{constructor(t,n,a){this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=a,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,n){return this.collator.compare(t,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let nn=["bottom","center","top"];class Fn{constructor(t,n,a,c,m,g){this.text=t,this.image=n,this.scale=a,this.fontStack=c,this.textColor=m,this.verticalAlign=g}}class ds{constructor(t){this.sections=t}static fromString(t){return new ds([new Fn(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof ds?t:ds.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class es{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof es)return t;if(typeof t=="number")return new es([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(let n of t)if(typeof n!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new es(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,a){return new es(Sr(t.values,n.values,a))}}class ln{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ln)return t;if(typeof t=="number")return new ln([t]);if(Array.isArray(t)){for(let n of t)if(typeof n!="number")return;return new ln(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,a){return new ln(Sr(t.values,n.values,a))}}class $e{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof $e)return t;if(typeof t=="string"){let a=sr.parse(t);return a?new $e([a]):void 0}if(!Array.isArray(t))return;let n=[];for(let a of t){if(typeof a!="string")return;let c=sr.parse(a);if(!c)return;n.push(c)}return new $e(n)}toString(){return JSON.stringify(this.values)}static interpolate(t,n,a,c="rgb"){let m=[];if(t.values.length!=n.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${n.values.length}), cannot interpolate.`);for(let g=0;g<t.values.length;g++)m.push(sr.interpolate(t.values[g],n.values[g],a,c));return new $e(m)}}class Le extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}let wn=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ue{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Ue)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let n=0;n<t.length;n+=2){let a=t[n],c=t[n+1];if(typeof a!="string"||!wn.has(a)||!Array.isArray(c)||c.length!==2||typeof c[0]!="number"||typeof c[1]!="number")return}return new Ue(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,n,a){let c=t.values,m=n.values;if(c.length!==m.length)throw new Le(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${n.toString()}`);let g=[];for(let x=0;x<c.length;x+=2){if(c[x]!==m[x])throw new Le(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${c[x]}, to[${x}]: ${m[x]}`);g.push(c[x]);let[S,M]=c[x+1],[L,z]=m[x+1];g.push([Rr(S,L,a),Rr(M,z,a)])}return new Ue(g)}}class Ze{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Ze({name:t,available:!1}):null}}class qe{constructor(t,n,a){this.from=t,this.to=n,this.transition=a}static interpolate(t,n,a){return new qe(t,n,a)}static parse(t){return t instanceof qe?t:Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"?new qe(t[0],t[1],t[2]):typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number"?new qe(t.from,t.to,t.transition):typeof t=="string"?new qe(t,t,1):void 0}}function et(s,t,n,a){return typeof s=="number"&&s>=0&&s<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?a===void 0||typeof a=="number"&&a>=0&&a<=1?null:`Invalid rgba value [${[s,t,n,a].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof a=="number"?[s,t,n,a]:[s,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Pe(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof qe||s instanceof sr||s instanceof Br||s instanceof ds||s instanceof es||s instanceof ln||s instanceof $e||s instanceof Ue||s instanceof Ze)return!0;if(Array.isArray(s)){for(let t of s)if(!Pe(t))return!1;return!0}if(typeof s=="object"){for(let t in s)if(!Pe(s[t]))return!1;return!0}return!1}function Rn(s){if(s===null)return cr;if(typeof s=="string")return li;if(typeof s=="boolean")return br;if(typeof s=="number")return Gt;if(s instanceof sr)return kr;if(s instanceof qe)return hn;if(s instanceof Br)return p;if(s instanceof ds)return f;if(s instanceof es)return v;if(s instanceof ln)return P;if(s instanceof $e)return T;if(s instanceof Ue)return V;if(s instanceof Ze)return D;if(Array.isArray(s)){let t=s.length,n;for(let a of s){let c=Rn(a);if(n){if(n===c)continue;n=_;break}n=c}return ae(n||_,t)}return i}function Or(s){let t=typeof s;return s===null?"":t==="string"||t==="number"||t==="boolean"?String(s):s instanceof sr||s instanceof qe||s instanceof ds||s instanceof es||s instanceof ln||s instanceof $e||s instanceof Ue||s instanceof Ze?s.toString():JSON.stringify(s)}class xr{constructor(t,n){this.type=t,this.value=n}static parse(t,n){if(t.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Pe(t[1]))return n.error("invalid value");let a=t[1],c=Rn(a),m=n.expectedType;return c.kind!=="array"||c.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(c=m),new xr(c,a)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let _l={string:li,number:Gt,boolean:br,object:i};class Fe{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let a,c=1,m=t[0];if(m==="array"){let x,S;if(t.length>2){let M=t[1];if(typeof M!="string"||!(M in _l)||M==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);x=_l[M],c++}else x=_;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);S=t[2],c++}a=ae(x,S)}else{if(!_l[m])throw new Error(`Types doesn't contain name = ${m}`);a=_l[m]}let g=[];for(;c<t.length;c++){let x=n.parse(t[c],c,_);if(!x)return null;g.push(x)}return new Fe(a,g)}evaluate(t){for(let n=0;n<this.args.length;n++){let a=this.args[n].evaluate(t);if(!$(this.type,Rn(a)))return a;if(n===this.args.length-1)throw new Le(`Expected value to be of type ${ie(this.type)}, but found ${ie(Rn(a))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}let rt={"to-boolean":br,"to-color":kr,"to-number":Gt,"to-string":li};class Ve{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let a=t[0];if(!rt[a])throw new Error(`Can't parse ${a} as it is not part of the known types`);if((a==="to-boolean"||a==="to-string")&&t.length!==2)return n.error("Expected one argument.");let c=rt[a],m=[];for(let g=1;g<t.length;g++){let x=n.parse(t[g],g,_);if(!x)return null;m.push(x)}return new Ve(c,m)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let n,a;for(let c of this.args){if(n=c.evaluate(t),a=null,n instanceof sr)return n;if(typeof n=="string"){let m=t.parseColor(n);if(m)return m}else if(Array.isArray(n)&&(a=n.length<3||n.length>4?`Invalid rgba value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:et(n[0],n[1],n[2],n[3]),!a))return new sr(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new Le(a||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(let a of this.args){n=a.evaluate(t);let c=es.parse(n);if(c)return c}throw new Le(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"numberArray":{let n;for(let a of this.args){n=a.evaluate(t);let c=ln.parse(n);if(c)return c}throw new Le(`Could not parse numberArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"colorArray":{let n;for(let a of this.args){n=a.evaluate(t);let c=$e.parse(n);if(c)return c}throw new Le(`Could not parse colorArray from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(let a of this.args){n=a.evaluate(t);let c=Ue.parse(n);if(c)return c}throw new Le(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(let a of this.args){if(n=a.evaluate(t),n===null)return 0;let c=Number(n);if(!isNaN(c))return c}throw new Le(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return ds.fromString(Or(this.args[0].evaluate(t)));case"resolvedImage":return Ze.fromString(Or(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return Or(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}let Lt=["Unknown","Point","LineString","Polygon"];class Xe{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Lt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let n=this._parseColorCache.get(t);return n||(n=sr.parse(t),this._parseColorCache.set(t,n)),n}}class yt{constructor(t,n,a=[],c,m=new Wr,g=[]){this.registry=t,this.path=a,this.key=a.map(x=>`[${x}]`).join(""),this.scope=m,this.errors=g,this.expectedType=c,this._isConstant=n}parse(t,n,a,c,m={}){return n?this.concat(n,a,c)._parse(t,m):this._parse(t,m)}_parse(t,n){function a(c,m,g){return g==="assert"?new Fe(m,[c]):g==="coerce"?new Ve(m,[c]):c}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');let c=t[0];if(typeof c!="string")return this.error(`Expression name must be a string, but found ${typeof c} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let m=this.registry[c];if(m){let g=m.parse(t,this);if(!g)return null;if(this.expectedType){let x=this.expectedType,S=g.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value"){if(x.kind==="projectionDefinition"&&["string","array"].includes(S.kind)||["color","formatted","resolvedImage"].includes(x.kind)&&["value","string"].includes(S.kind)||["padding","numberArray"].includes(x.kind)&&["value","number","array"].includes(S.kind)||x.kind==="colorArray"&&["value","string","array"].includes(S.kind)||x.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(S.kind))g=a(g,x,n.typeAnnotation||"coerce");else if(this.checkSubtype(x,S))return null}else g=a(g,x,n.typeAnnotation||"assert")}if(!(g instanceof xr)&&g.type.kind!=="resolvedImage"&&this._isConstant(g)){let x=new Xe;try{g=new xr(g.type,g.evaluate(x))}catch(S){return this.error(S.message),null}}return g}return this.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,n,a){let c=typeof t=="number"?this.path.concat(t):this.path,m=a?this.scope.concat(a):this.scope;return new yt(this.registry,this._isConstant,c,n||null,m,this.errors)}error(t,...n){let a=`${this.key}${n.map(c=>`[${c}]`).join("")}`;this.errors.push(new Lr(a,t))}checkSubtype(t,n){let a=$(t,n);return a&&this.error(a),a}}class Tt{constructor(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(let n of this.bindings)t(n[1]);t(this.result)}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);let a=[];for(let m=1;m<t.length-1;m+=2){let g=t[m];if(typeof g!="string")return n.error(`Expected string, but found ${typeof g} instead.`,m);if(/[^a-zA-Z0-9_]/.test(g))return n.error("Variable names must contain only alphanumeric characters or '_'.",m);let x=n.parse(t[m+1],m+1);if(!x)return null;a.push([g,x])}let c=n.parse(t[t.length-1],t.length-1,n.expectedType,a);return c?new Tt(a,c):null}outputDefined(){return this.result.outputDefined()}}class He{constructor(t,n){this.type=n.type,this.name=t,this.boundExpression=n}static parse(t,n){if(t.length!==2||typeof t[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");let a=t[1];return n.scope.has(a)?new He(a,n.scope.get(a)):n.error(`Unknown variable "${a}". Make sure "${a}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class Ot{constructor(t,n,a){this.type=t,this.index=n,this.input=a}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);let a=n.parse(t[1],1,Gt),c=n.parse(t[2],2,ae(n.expectedType||_));return a&&c?new Ot(c.type.itemType,a,c):null}evaluate(t){let n=this.index.evaluate(t),a=this.input.evaluate(t);if(n<0)throw new Le(`Array index out of bounds: ${n} < 0.`);if(n>=a.length)throw new Le(`Array index out of bounds: ${n} > ${a.length-1}.`);if(n!==Math.floor(n))throw new Le(`Array index must be an integer, but found ${n} instead.`);return a[n]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Mt{constructor(t,n){this.type=br,this.needle=t,this.haystack=n}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);let a=n.parse(t[1],1,_),c=n.parse(t[2],2,_);return a&&c?F(a.type,[br,li,Gt,cr,_])?new Mt(a,c):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(a.type)} instead`):null}evaluate(t){let n=this.needle.evaluate(t),a=this.haystack.evaluate(t);if(!a)return!1;if(!_e(n,["boolean","string","number","null"]))throw new Le(`Expected first argument to be of type boolean, string, number or null, but found ${ie(Rn(n))} instead.`);if(!_e(a,["string","array"]))throw new Le(`Expected second argument to be of type array or string, but found ${ie(Rn(a))} instead.`);return a.indexOf(n)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class At{constructor(t,n,a){this.type=Gt,this.needle=t,this.haystack=n,this.fromIndex=a}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);let a=n.parse(t[1],1,_),c=n.parse(t[2],2,_);if(!a||!c)return null;if(!F(a.type,[br,li,Gt,cr,_]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(a.type)} instead`);if(t.length===4){let m=n.parse(t[3],3,Gt);return m?new At(a,c,m):null}return new At(a,c)}evaluate(t){let n=this.needle.evaluate(t),a=this.haystack.evaluate(t);if(!_e(n,["boolean","string","number","null"]))throw new Le(`Expected first argument to be of type boolean, string, number or null, but found ${ie(Rn(n))} instead.`);let c;if(this.fromIndex&&(c=this.fromIndex.evaluate(t)),_e(a,["string"])){let m=a.indexOf(n,c);return m===-1?-1:[...a.slice(0,m)].length}if(_e(a,["array"]))return a.indexOf(n,c);throw new Le(`Expected second argument to be of type array or string, but found ${ie(Rn(a))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class Ge{constructor(t,n,a,c,m,g){this.inputType=t,this.type=n,this.input=a,this.cases=c,this.outputs=m,this.otherwise=g}static parse(t,n){if(t.length<5)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return n.error("Expected an even number of arguments.");let a,c;n.expectedType&&n.expectedType.kind!=="value"&&(c=n.expectedType);let m={},g=[];for(let M=2;M<t.length-1;M+=2){let L=t[M],z=t[M+1];Array.isArray(L)||(L=[L]);let U=n.concat(M);if(L.length===0)return U.error("Expected at least one branch label.");for(let Z of L){if(typeof Z!="number"&&typeof Z!="string")return U.error("Branch labels must be numbers or strings.");if(typeof Z=="number"&&Math.abs(Z)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Z=="number"&&Math.floor(Z)!==Z)return U.error("Numeric branch labels must be integer values.");if(a){if(U.checkSubtype(a,Rn(Z)))return null}else a=Rn(Z);if(m[String(Z)]!==void 0)return U.error("Branch labels must be unique.");m[String(Z)]=g.length}let G=n.parse(z,M,c);if(!G)return null;c=c||G.type,g.push(G)}let x=n.parse(t[1],1,_);if(!x)return null;let S=n.parse(t[t.length-1],t.length-1,c);return S?x.type.kind!=="value"&&n.concat(1).checkSubtype(a,x.type)?null:new Ge(a,c,x,m,g,S):null}evaluate(t){let n=this.input.evaluate(t);return(Rn(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class Ye{constructor(t,n,a){this.type=t,this.branches=n,this.otherwise=a}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return n.error("Expected an odd number of arguments.");let a;n.expectedType&&n.expectedType.kind!=="value"&&(a=n.expectedType);let c=[];for(let g=1;g<t.length-1;g+=2){let x=n.parse(t[g],g,br);if(!x)return null;let S=n.parse(t[g+1],g+1,a);if(!S)return null;c.push([x,S]),a=a||S.type}let m=n.parse(t[t.length-1],t.length-1,a);if(!m)return null;if(!a)throw new Error("Can't infer output type");return new Ye(a,c,m)}evaluate(t){for(let[n,a]of this.branches)if(n.evaluate(t))return a.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(let[n,a]of this.branches)t(n),t(a);t(this.otherwise)}outputDefined(){return this.branches.every(([t,n])=>n.outputDefined())&&this.otherwise.outputDefined()}}class ot{constructor(t,n,a,c){this.type=t,this.input=n,this.beginIndex=a,this.endIndex=c}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);let a=n.parse(t[1],1,_),c=n.parse(t[2],2,Gt);if(!a||!c)return null;if(!F(a.type,[ae(_),li,_]))return n.error(`Expected first argument to be of type array or string, but found ${ie(a.type)} instead`);if(t.length===4){let m=n.parse(t[3],3,Gt);return m?new ot(a.type,a,c,m):null}return new ot(a.type,a,c)}evaluate(t){let n=this.input.evaluate(t),a=this.beginIndex.evaluate(t),c;if(this.endIndex&&(c=this.endIndex.evaluate(t)),_e(n,["string"]))return[...n].slice(a,c).join("");if(_e(n,["array"]))return n.slice(a,c);throw new Le(`Expected first argument to be of type array or string, but found ${ie(Rn(n))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Ct(s,t){let n=s.length-1,a,c,m=0,g=n,x=0;for(;m<=g;)if(x=Math.floor((m+g)/2),a=s[x],c=s[x+1],a<=t){if(x===n||t<c)return x;m=x+1}else{if(!(a>t))throw new Le("Input is not a number.");g=x-1}return 0}class Et{constructor(t,n,a){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(let[c,m]of a)this.labels.push(c),this.outputs.push(m)}static parse(t,n){if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");let a=n.parse(t[1],1,Gt);if(!a)return null;let c=[],m=null;n.expectedType&&n.expectedType.kind!=="value"&&(m=n.expectedType);for(let g=1;g<t.length;g+=2){let x=g===1?-1/0:t[g],S=t[g+1],M=g,L=g+1;if(typeof x!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(c.length&&c[c.length-1][0]>=x)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);let z=n.parse(S,L,m);if(!z)return null;m=m||z.type,c.push([x,z])}return new Et(m,a,c)}evaluate(t){let n=this.labels,a=this.outputs;if(n.length===1)return a[0].evaluate(t);let c=this.input.evaluate(t);if(c<=n[0])return a[0].evaluate(t);let m=n.length;return c>=n[m-1]?a[m-1].evaluate(t):a[Ct(n,c)].evaluate(t)}eachChild(t){t(this.input);for(let n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function dt(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Pt,Rt,ft=function(){if(Rt)return Pt;function s(t,n,a,c){this.cx=3*t,this.bx=3*(a-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(c-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=a,this.p2y=c}return Rt=1,Pt=s,s.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,n){if(n===void 0&&(n=1e-6),t<0)return 0;if(t>1)return 1;for(var a=t,c=0;c<8;c++){var m=this.sampleCurveX(a)-t;if(Math.abs(m)<n)return a;var g=this.sampleCurveDerivativeX(a);if(Math.abs(g)<1e-6)break;a-=m/g}var x=0,S=1;for(a=t,c=0;c<20&&(m=this.sampleCurveX(a),!(Math.abs(m-t)<n));c++)t>m?x=a:S=a,a=.5*(S-x)+x;return a},solve:function(t,n){return this.sampleCurveY(this.solveCurveX(t,n))}},Pt}(),mt=dt(ft);class Qe{constructor(t,n,a,c,m){this.type=t,this.operator=n,this.interpolation=a,this.input=c,this.labels=[],this.outputs=[];for(let[g,x]of m)this.labels.push(g),this.outputs.push(x)}static interpolationFactor(t,n,a,c){let m=0;if(t.name==="exponential")m=ut(n,t.base,a,c);else if(t.name==="linear")m=ut(n,1,a,c);else if(t.name==="cubic-bezier"){let g=t.controlPoints;m=new mt(g[0],g[1],g[2],g[3]).solve(ut(n,1,a,c))}return m}static parse(t,n){let[a,c,m,...g]=t;if(!Array.isArray(c)||c.length===0)return n.error("Expected an interpolation type expression.",1);if(c[0]==="linear")c={name:"linear"};else if(c[0]==="exponential"){let M=c[1];if(typeof M!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);c={name:"exponential",base:M}}else{if(c[0]!=="cubic-bezier")return n.error(`Unknown interpolation type ${String(c[0])}`,1,0);{let M=c.slice(1);if(M.length!==4||M.some(L=>typeof L!="number"||L<0||L>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);c={name:"cubic-bezier",controlPoints:M}}}if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(m=n.parse(m,2,Gt),!m)return null;let x=[],S=null;a!=="interpolate-hcl"&&a!=="interpolate-lab"||n.expectedType==T?n.expectedType&&n.expectedType.kind!=="value"&&(S=n.expectedType):S=kr;for(let M=0;M<g.length;M+=2){let L=g[M],z=g[M+1],U=M+3,G=M+4;if(typeof L!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(x.length&&x[x.length-1][0]>=L)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);let Z=n.parse(z,G,S);if(!Z)return null;S=S||Z.type,x.push([L,Z])}return ue(S,Gt)||ue(S,hn)||ue(S,kr)||ue(S,v)||ue(S,P)||ue(S,T)||ue(S,V)||ue(S,ae(Gt))?new Qe(S,a,c,m,x):n.error(`Type ${ie(S)} is not interpolatable.`)}evaluate(t){let n=this.labels,a=this.outputs;if(n.length===1)return a[0].evaluate(t);let c=this.input.evaluate(t);if(c<=n[0])return a[0].evaluate(t);let m=n.length;if(c>=n[m-1])return a[m-1].evaluate(t);let g=Ct(n,c),x=Qe.interpolationFactor(this.interpolation,c,n[g],n[g+1]),S=a[g].evaluate(t),M=a[g+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Rr(S,M,x);case"color":return sr.interpolate(S,M,x);case"padding":return es.interpolate(S,M,x);case"colorArray":return $e.interpolate(S,M,x);case"numberArray":return ln.interpolate(S,M,x);case"variableAnchorOffsetCollection":return Ue.interpolate(S,M,x);case"array":return Sr(S,M,x);case"projectionDefinition":return qe.interpolate(S,M,x)}case"interpolate-hcl":switch(this.type.kind){case"color":return sr.interpolate(S,M,x,"hcl");case"colorArray":return $e.interpolate(S,M,x,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return sr.interpolate(S,M,x,"lab");case"colorArray":return $e.interpolate(S,M,x,"lab")}}}eachChild(t){t(this.input);for(let n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function ut(s,t,n,a){let c=a-n,m=s-n;return c===0?0:t===1?m/c:(Math.pow(t,m)-1)/(Math.pow(t,c)-1)}let st={color:sr.interpolate,number:Rr,padding:es.interpolate,numberArray:ln.interpolate,colorArray:$e.interpolate,variableAnchorOffsetCollection:Ue.interpolate,array:Sr};class lt{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let a=null,c=n.expectedType;c&&c.kind!=="value"&&(a=c);let m=[];for(let x of t.slice(1)){let S=n.parse(x,1+m.length,a,void 0,{typeAnnotation:"omit"});if(!S)return null;a=a||S.type,m.push(S)}if(!a)throw new Error("No output type");let g=c&&m.some(x=>$(c,x.type));return new lt(g?_:a,m)}evaluate(t){let n,a=null,c=0;for(let m of this.args)if(c++,a=m.evaluate(t),a&&a instanceof Ze&&!a.available&&(n||(n=a.name),a=null,c===this.args.length&&(a=n)),a!==null)break;return a}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function ht(s,t){return s==="=="||s==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function it(s,t,n,a){return a.compare(t,n)===0}function pt(s,t,n){let a=s!=="=="&&s!=="!=";return class g0{constructor(m,g,x){this.type=br,this.lhs=m,this.rhs=g,this.collator=x,this.hasUntypedArgument=m.type.kind==="value"||g.type.kind==="value"}static parse(m,g){if(m.length!==3&&m.length!==4)return g.error("Expected two or three arguments.");let x=m[0],S=g.parse(m[1],1,_);if(!S)return null;if(!ht(x,S.type))return g.concat(1).error(`"${x}" comparisons are not supported for type '${ie(S.type)}'.`);let M=g.parse(m[2],2,_);if(!M)return null;if(!ht(x,M.type))return g.concat(2).error(`"${x}" comparisons are not supported for type '${ie(M.type)}'.`);if(S.type.kind!==M.type.kind&&S.type.kind!=="value"&&M.type.kind!=="value")return g.error(`Cannot compare types '${ie(S.type)}' and '${ie(M.type)}'.`);a&&(S.type.kind==="value"&&M.type.kind!=="value"?S=new Fe(M.type,[S]):S.type.kind!=="value"&&M.type.kind==="value"&&(M=new Fe(S.type,[M])));let L=null;if(m.length===4){if(S.type.kind!=="string"&&M.type.kind!=="string"&&S.type.kind!=="value"&&M.type.kind!=="value")return g.error("Cannot use collator to compare non-string types.");if(L=g.parse(m[3],3,p),!L)return null}return new g0(S,M,L)}evaluate(m){let g=this.lhs.evaluate(m),x=this.rhs.evaluate(m);if(a&&this.hasUntypedArgument){let S=Rn(g),M=Rn(x);if(S.kind!==M.kind||S.kind!=="string"&&S.kind!=="number")throw new Le(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${S.kind}, ${M.kind}) instead.`)}if(this.collator&&!a&&this.hasUntypedArgument){let S=Rn(g),M=Rn(x);if(S.kind!=="string"||M.kind!=="string")return t(m,g,x)}return this.collator?n(m,g,x,this.collator.evaluate(m)):t(m,g,x)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}}}let _t=pt("==",function(s,t,n){return t===n},it),nt=pt("!=",function(s,t,n){return t!==n},function(s,t,n,a){return!it(0,t,n,a)}),xt=pt("<",function(s,t,n){return t<n},function(s,t,n,a){return a.compare(t,n)<0}),zt=pt(">",function(s,t,n){return t>n},function(s,t,n,a){return a.compare(t,n)>0}),$t=pt("<=",function(s,t,n){return t<=n},function(s,t,n,a){return a.compare(t,n)<=0}),Ke=pt(">=",function(s,t,n){return t>=n},function(s,t,n,a){return a.compare(t,n)>=0});class kt{constructor(t,n,a){this.type=p,this.locale=a,this.caseSensitive=t,this.diacriticSensitive=n}static parse(t,n){if(t.length!==2)return n.error("Expected one argument.");let a=t[1];if(typeof a!="object"||Array.isArray(a))return n.error("Collator options argument must be an object.");let c=n.parse(a["case-sensitive"]!==void 0&&a["case-sensitive"],1,br);if(!c)return null;let m=n.parse(a["diacritic-sensitive"]!==void 0&&a["diacritic-sensitive"],1,br);if(!m)return null;let g=null;return a.locale&&(g=n.parse(a.locale,1,li),!g)?null:new kt(c,m,g)}evaluate(t){return new Br(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class St{constructor(t,n,a,c,m){this.type=li,this.number=t,this.locale=n,this.currency=a,this.minFractionDigits=c,this.maxFractionDigits=m}static parse(t,n){if(t.length!==3)return n.error("Expected two arguments.");let a=n.parse(t[1],1,Gt);if(!a)return null;let c=t[2];if(typeof c!="object"||Array.isArray(c))return n.error("NumberFormat options argument must be an object.");let m=null;if(c.locale&&(m=n.parse(c.locale,1,li),!m))return null;let g=null;if(c.currency&&(g=n.parse(c.currency,1,li),!g))return null;let x=null;if(c["min-fraction-digits"]&&(x=n.parse(c["min-fraction-digits"],1,Gt),!x))return null;let S=null;return c["max-fraction-digits"]&&(S=n.parse(c["max-fraction-digits"],1,Gt),!S)?null:new St(a,m,g,x,S)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class Dt{constructor(t){this.type=f,this.sections=t}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let a=t[1];if(!Array.isArray(a)&&typeof a=="object")return n.error("First argument must be an image or text section.");let c=[],m=!1;for(let g=1;g<=t.length-1;++g){let x=t[g];if(m&&typeof x=="object"&&!Array.isArray(x)){m=!1;let S=null;if(x["font-scale"]&&(S=n.parse(x["font-scale"],1,Gt),!S))return null;let M=null;if(x["text-font"]&&(M=n.parse(x["text-font"],1,ae(li)),!M))return null;let L=null;if(x["text-color"]&&(L=n.parse(x["text-color"],1,kr),!L))return null;let z=null;if(x["vertical-align"]){if(typeof x["vertical-align"]=="string"&&!nn.includes(x["vertical-align"]))return n.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${x["vertical-align"]}' instead.`);if(z=n.parse(x["vertical-align"],1,li),!z)return null}let U=c[c.length-1];U.scale=S,U.font=M,U.textColor=L,U.verticalAlign=z}else{let S=n.parse(t[g],1,_);if(!S)return null;let M=S.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,c.push({content:S,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Dt(c)}evaluate(t){return new ds(this.sections.map(n=>{let a=n.content.evaluate(t);return Rn(a)===D?new Fn("",a,null,null,null,n.verticalAlign?n.verticalAlign.evaluate(t):null):new Fn(Or(a),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null,n.verticalAlign?n.verticalAlign.evaluate(t):null)}))}eachChild(t){for(let n of this.sections)t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor),n.verticalAlign&&t(n.verticalAlign)}outputDefined(){return!1}}class Oe{constructor(t){this.type=D,this.input=t}static parse(t,n){if(t.length!==2)return n.error("Expected two arguments.");let a=n.parse(t[1],1,li);return a?new Oe(a):n.error("No image name provided.")}evaluate(t){let n=this.input.evaluate(t),a=Ze.fromString(n);return a&&t.availableImages&&(a.available=t.availableImages.indexOf(n)>-1),a}eachChild(t){t(this.input)}outputDefined(){return!1}}class De{constructor(t){this.type=Gt,this.input=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);let a=n.parse(t[1],1);return a?a.type.kind!=="array"&&a.type.kind!=="string"&&a.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${ie(a.type)} instead.`):new De(a):null}evaluate(t){let n=this.input.evaluate(t);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new Le(`Expected value to be of type string or array, but found ${ie(Rn(n))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}let kn=8192;function i1(s,t){let n=(180+s[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,c=Math.pow(2,t.z);return[Math.round(n*c*kn),Math.round(a*c*kn)]}function Rl(s,t){let n=Math.pow(2,t.z);return[(c=(s[0]/kn+t.x)/n,360*c-180),(a=(s[1]/kn+t.y)/n,360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90)];var a,c}function $o(s,t){s[0]=Math.min(s[0],t[0]),s[1]=Math.min(s[1],t[1]),s[2]=Math.max(s[2],t[0]),s[3]=Math.max(s[3],t[1])}function uo(s,t){return!(s[0]<=t[0]||s[2]>=t[2]||s[1]<=t[1]||s[3]>=t[3])}function yl(s,t,n){let a=s[0]-t[0],c=s[1]-t[1],m=s[0]-n[0],g=s[1]-n[1];return a*g-m*c==0&&a*m<=0&&c*g<=0}function kl(s,t,n,a){return(c=[a[0]-n[0],a[1]-n[1]])[0]*(m=[t[0]-s[0],t[1]-s[1]])[1]-c[1]*m[0]!=0&&!(!fc(s,t,n,a)||!fc(n,a,s,t));var c,m}function dc(s,t,n){for(let a of n)for(let c=0;c<a.length-1;++c)if(kl(s,t,a[c],a[c+1]))return!0;return!1}function Fi(s,t,n=!1){let a=!1;for(let x of t)for(let S=0;S<x.length-1;S++){if(yl(s,x[S],x[S+1]))return n;(m=x[S])[1]>(c=s)[1]!=(g=x[S+1])[1]>c[1]&&c[0]<(g[0]-m[0])*(c[1]-m[1])/(g[1]-m[1])+m[0]&&(a=!a)}var c,m,g;return a}function Bn(s,t){for(let n of t)if(Fi(s,n))return!0;return!1}function P1(s,t){for(let n of s)if(!Fi(n,t))return!1;for(let n=0;n<s.length-1;++n)if(dc(s[n],s[n+1],t))return!1;return!0}function pc(s,t){for(let n of t)if(P1(s,n))return!0;return!1}function fc(s,t,n,a){let c=a[0]-n[0],m=a[1]-n[1],g=(s[0]-n[0])*m-c*(s[1]-n[1]),x=(t[0]-n[0])*m-c*(t[1]-n[1]);return g>0&&x<0||g<0&&x>0}function $a(s,t,n){let a=[];for(let c=0;c<s.length;c++){let m=[];for(let g=0;g<s[c].length;g++){let x=i1(s[c][g],n);$o(t,x),m.push(x)}a.push(m)}return a}function Ao(s,t,n){let a=[];for(let c=0;c<s.length;c++){let m=$a(s[c],t,n);a.push(m)}return a}function Dl(s,t,n,a){if(s[0]<n[0]||s[0]>n[2]){let c=.5*a,m=s[0]-n[0]>c?-a:n[0]-s[0]>c?a:0;m===0&&(m=s[0]-n[2]>c?-a:n[2]-s[0]>c?a:0),s[0]+=m}$o(t,s)}function r1(s,t,n,a){let c=Math.pow(2,a.z)*kn,m=[a.x*kn,a.y*kn],g=[];for(let x of s)for(let S of x){let M=[S.x+m[0],S.y+m[1]];Dl(M,t,n,c),g.push(M)}return g}function Ll(s,t,n,a){let c=Math.pow(2,a.z)*kn,m=[a.x*kn,a.y*kn],g=[];for(let S of s){let M=[];for(let L of S){let z=[L.x+m[0],L.y+m[1]];$o(t,z),M.push(z)}g.push(M)}if(t[2]-t[0]<=c/2){(x=t)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(let S of g)for(let M of S)Dl(M,t,n,c)}var x;return g}class Fo{constructor(t,n){this.type=br,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Pe(t[1])){let a=t[1];if(a.type==="FeatureCollection"){let c=[];for(let m of a.features){let{type:g,coordinates:x}=m.geometry;g==="Polygon"&&c.push(x),g==="MultiPolygon"&&c.push(...x)}if(c.length)return new Fo(a,{type:"MultiPolygon",coordinates:c})}else if(a.type==="Feature"){let c=a.geometry.type;if(c==="Polygon"||c==="MultiPolygon")return new Fo(a,a.geometry)}else if(a.type==="Polygon"||a.type==="MultiPolygon")return new Fo(a,a)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(n,a){let c=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],g=n.canonicalID();if(a.type==="Polygon"){let x=$a(a.coordinates,m,g),S=r1(n.geometry(),c,m,g);if(!uo(c,m))return!1;for(let M of S)if(!Fi(M,x))return!1}if(a.type==="MultiPolygon"){let x=Ao(a.coordinates,m,g),S=r1(n.geometry(),c,m,g);if(!uo(c,m))return!1;for(let M of S)if(!Bn(M,x))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(n,a){let c=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],g=n.canonicalID();if(a.type==="Polygon"){let x=$a(a.coordinates,m,g),S=Ll(n.geometry(),c,m,g);if(!uo(c,m))return!1;for(let M of S)if(!P1(M,x))return!1}if(a.type==="MultiPolygon"){let x=Ao(a.coordinates,m,g),S=Ll(n.geometry(),c,m,g);if(!uo(c,m))return!1;for(let M of S)if(!pc(M,x))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let pe=class{constructor(s=[],t=(n,a)=>n<a?-1:n>a?1:0){if(this.data=s,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;let s=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),s}peek(){return this.data[0]}_up(s){let{data:t,compare:n}=this,a=t[s];for(;s>0;){let c=s-1>>1,m=t[c];if(n(a,m)>=0)break;t[s]=m,s=c}t[s]=a}_down(s){let{data:t,compare:n}=this,a=this.length>>1,c=t[s];for(;s<a;){let m=1+(s<<1),g=m+1;if(g<this.length&&n(t[g],t[m])<0&&(m=g),n(t[m],c)>=0)break;t[s]=t[m],s=m}t[s]=c}};function mc(s,t,n=0,a=s.length-1,c=gc){for(;a>n;){if(a-n>600){let S=a-n+1,M=t-n+1,L=Math.log(S),z=.5*Math.exp(2*L/3),U=.5*Math.sqrt(L*z*(S-z)/S)*(M-S/2<0?-1:1);mc(s,t,Math.max(n,Math.floor(t-M*z/S+U)),Math.min(a,Math.floor(t+(S-M)*z/S+U)),c)}let m=s[t],g=n,x=a;for(Qa(s,n,t),c(s[a],m)>0&&Qa(s,n,a);g<x;){for(Qa(s,g,x),g++,x--;c(s[g],m)<0;)g++;for(;c(s[x],m)>0;)x--}c(s[n],m)===0?Qa(s,n,x):(x++,Qa(s,x,a)),x<=t&&(n=x+1),t<=x&&(a=x-1)}}function Qa(s,t,n){let a=s[t];s[t]=s[n],s[n]=a}function gc(s,t){return s<t?-1:s>t?1:0}function Ol(s,t){if(s.length<=1)return[s];let n=[],a,c;for(let m of s){let g=k1(m);g!==0&&(m.area=Math.abs(g),c===void 0&&(c=g<0),c===g<0?(a&&n.push(a),a=[m]):a.push(m))}if(a&&n.push(a),t>1)for(let m=0;m<n.length;m++)n[m].length<=t||(mc(n[m],t,1,n[m].length-1,R1),n[m]=n[m].slice(0,t));return n}function R1(s,t){return t.area-s.area}function k1(s){let t=0;for(let n,a,c=0,m=s.length,g=m-1;c<m;g=c++)n=s[c],a=s[g],t+=(a.x-n.x)*(n.y+a.y);return t}let Bo=1/298.257223563,Co=Bo*(2-Bo),ho=Math.PI/180;class D1{constructor(t){let n=6378.137*ho*1e3,a=Math.cos(t*ho),c=1/(1-Co*(1-a*a)),m=Math.sqrt(c);this.kx=n*m*a,this.ky=n*m*c*(1-Co)}distance(t,n){let a=this.wrap(t[0]-n[0])*this.kx,c=(t[1]-n[1])*this.ky;return Math.sqrt(a*a+c*c)}pointOnLine(t,n){let a,c,m,g,x=1/0;for(let S=0;S<t.length-1;S++){let M=t[S][0],L=t[S][1],z=this.wrap(t[S+1][0]-M)*this.kx,U=(t[S+1][1]-L)*this.ky,G=0;z===0&&U===0||(G=(this.wrap(n[0]-M)*this.kx*z+(n[1]-L)*this.ky*U)/(z*z+U*U),G>1?(M=t[S+1][0],L=t[S+1][1]):G>0&&(M+=z/this.kx*G,L+=U/this.ky*G)),z=this.wrap(n[0]-M)*this.kx,U=(n[1]-L)*this.ky;let Z=z*z+U*U;Z<x&&(x=Z,a=M,c=L,m=S,g=G)}return{point:[a,c],index:m,t:Math.max(0,Math.min(1,g))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function va(s,t){return t[0]-s[0]}function jr(s){return s[1]-s[0]+1}function eo(s,t){return s[1]>=s[0]&&s[1]<t}function Nl(s,t){if(s[0]>s[1])return[null,null];let n=jr(s);if(t){if(n===2)return[s,null];let c=Math.floor(n/2);return[[s[0],s[0]+c],[s[0]+c,s[1]]]}if(n===1)return[s,null];let a=Math.floor(n/2)-1;return[[s[0],s[0]+a],[s[0]+a+1,s[1]]]}function Ui(s,t){if(!eo(t,s.length))return[1/0,1/0,-1/0,-1/0];let n=[1/0,1/0,-1/0,-1/0];for(let a=t[0];a<=t[1];++a)$o(n,s[a]);return n}function Ri(s){let t=[1/0,1/0,-1/0,-1/0];for(let n of s)for(let a of n)$o(t,a);return t}function Xt(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function Wt(s,t,n){if(!Xt(s)||!Xt(t))return NaN;let a=0,c=0;return s[2]<t[0]&&(a=t[0]-s[2]),s[0]>t[2]&&(a=s[0]-t[2]),s[1]>t[3]&&(c=s[1]-t[3]),s[3]<t[1]&&(c=t[1]-s[3]),n.distance([0,0],[a,c])}function ii(s,t,n){let a=n.pointOnLine(t,s);return n.distance(s,a.point)}function L1(s,t,n,a,c){let m=Math.min(ii(s,[n,a],c),ii(t,[n,a],c)),g=Math.min(ii(n,[s,t],c),ii(a,[s,t],c));return Math.min(m,g)}function di(s,t,n,a,c){if(!eo(t,s.length)||!eo(a,n.length))return 1/0;let m=1/0;for(let g=t[0];g<t[1];++g){let x=s[g],S=s[g+1];for(let M=a[0];M<a[1];++M){let L=n[M],z=n[M+1];if(kl(x,S,L,z))return 0;m=Math.min(m,L1(x,S,L,z,c))}}return m}function ui(s,t,n,a,c){if(!eo(t,s.length)||!eo(a,n.length))return NaN;let m=1/0;for(let g=t[0];g<=t[1];++g)for(let x=a[0];x<=a[1];++x)if(m=Math.min(m,c.distance(s[g],n[x])),m===0)return m;return m}function pi(s,t,n){if(Fi(s,t,!0))return 0;let a=1/0;for(let c of t){let m=c[0],g=c[c.length-1];if(m!==g&&(a=Math.min(a,ii(s,[g,m],n)),a===0))return a;let x=n.pointOnLine(c,s);if(a=Math.min(a,n.distance(s,x.point)),a===0)return a}return a}function Ki(s,t,n,a){if(!eo(t,s.length))return NaN;for(let m=t[0];m<=t[1];++m)if(Fi(s[m],n,!0))return 0;let c=1/0;for(let m=t[0];m<t[1];++m){let g=s[m],x=s[m+1];for(let S of n)for(let M=0,L=S.length,z=L-1;M<L;z=M++){let U=S[z],G=S[M];if(kl(g,x,U,G))return 0;c=Math.min(c,L1(g,x,U,G,a))}}return c}function Xi(s,t){for(let n of s)for(let a of n)if(Fi(a,t,!0))return!0;return!1}function Ai(s,t,n,a=1/0){let c=Ri(s),m=Ri(t);if(a!==1/0&&Wt(c,m,n)>=a)return a;if(uo(c,m)){if(Xi(s,t))return 0}else if(Xi(t,s))return 0;let g=1/0;for(let x of s)for(let S=0,M=x.length,L=M-1;S<M;L=S++){let z=x[L],U=x[S];for(let G of t)for(let Z=0,J=G.length,ne=J-1;Z<J;ne=Z++){let he=G[ne],Te=G[Z];if(kl(z,U,he,Te))return 0;g=Math.min(g,L1(z,U,he,Te,n))}}return g}function Si(s,t,n,a,c,m){if(!m)return;let g=Wt(Ui(a,m),c,n);g<t&&s.push([g,m,[0,0]])}function Gi(s,t,n,a,c,m,g){if(!m||!g)return;let x=Wt(Ui(a,m),Ui(c,g),n);x<t&&s.push([x,m,g])}function tr(s,t,n,a,c=1/0){let m=Math.min(a.distance(s[0],n[0][0]),c);if(m===0)return m;let g=new pe([[0,[0,s.length-1],[0,0]]],va),x=Ri(n);for(;g.length>0;){let S=g.pop();if(S[0]>=m)continue;let M=S[1],L=t?50:100;if(jr(M)<=L){if(!eo(M,s.length))return NaN;if(t){let z=Ki(s,M,n,a);if(isNaN(z)||z===0)return z;m=Math.min(m,z)}else for(let z=M[0];z<=M[1];++z){let U=pi(s[z],n,a);if(m=Math.min(m,U),m===0)return 0}}else{let z=Nl(M,t);Si(g,m,a,s,x,z[0]),Si(g,m,a,s,x,z[1])}}return m}function ir(s,t,n,a,c,m=1/0){let g=Math.min(m,c.distance(s[0],n[0]));if(g===0)return g;let x=new pe([[0,[0,s.length-1],[0,n.length-1]]],va);for(;x.length>0;){let S=x.pop();if(S[0]>=g)continue;let M=S[1],L=S[2],z=t?50:100,U=a?50:100;if(jr(M)<=z&&jr(L)<=U){if(!eo(M,s.length)&&eo(L,n.length))return NaN;let G;if(t&&a)G=di(s,M,n,L,c),g=Math.min(g,G);else if(t&&!a){let Z=s.slice(M[0],M[1]+1);for(let J=L[0];J<=L[1];++J)if(G=ii(n[J],Z,c),g=Math.min(g,G),g===0)return g}else if(!t&&a){let Z=n.slice(L[0],L[1]+1);for(let J=M[0];J<=M[1];++J)if(G=ii(s[J],Z,c),g=Math.min(g,G),g===0)return g}else G=ui(s,M,n,L,c),g=Math.min(g,G)}else{let G=Nl(M,t),Z=Nl(L,a);Gi(x,g,c,s,n,G[0],Z[0]),Gi(x,g,c,s,n,G[0],Z[1]),Gi(x,g,c,s,n,G[1],Z[0]),Gi(x,g,c,s,n,G[1],Z[1])}}return g}function mi(s){return s.type==="MultiPolygon"?s.coordinates.map(t=>({type:"Polygon",coordinates:t})):s.type==="MultiLineString"?s.coordinates.map(t=>({type:"LineString",coordinates:t})):s.type==="MultiPoint"?s.coordinates.map(t=>({type:"Point",coordinates:t})):[s]}class oi{constructor(t,n){this.type=Gt,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Pe(t[1])){let a=t[1];if(a.type==="FeatureCollection")return new oi(a,a.features.map(c=>mi(c.geometry)).flat());if(a.type==="Feature")return new oi(a,mi(a.geometry));if("type"in a&&"coordinates"in a)return new oi(a,mi(a))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(n,a){let c=n.geometry(),m=c.flat().map(S=>Rl([S.x,S.y],n.canonical));if(c.length===0)return NaN;let g=new D1(m[0][1]),x=1/0;for(let S of a){switch(S.type){case"Point":x=Math.min(x,ir(m,!1,[S.coordinates],!1,g,x));break;case"LineString":x=Math.min(x,ir(m,!1,S.coordinates,!0,g,x));break;case"Polygon":x=Math.min(x,tr(m,!1,S.coordinates,g,x))}if(x===0)return x}return x}(t,this.geometries);if(t.geometryType()==="LineString")return function(n,a){let c=n.geometry(),m=c.flat().map(S=>Rl([S.x,S.y],n.canonical));if(c.length===0)return NaN;let g=new D1(m[0][1]),x=1/0;for(let S of a){switch(S.type){case"Point":x=Math.min(x,ir(m,!0,[S.coordinates],!1,g,x));break;case"LineString":x=Math.min(x,ir(m,!0,S.coordinates,!0,g,x));break;case"Polygon":x=Math.min(x,tr(m,!0,S.coordinates,g,x))}if(x===0)return x}return x}(t,this.geometries);if(t.geometryType()==="Polygon")return function(n,a){let c=n.geometry();if(c.length===0||c[0].length===0)return NaN;let m=Ol(c,0).map(S=>S.map(M=>M.map(L=>Rl([L.x,L.y],n.canonical)))),g=new D1(m[0][0][0][1]),x=1/0;for(let S of a)for(let M of m){switch(S.type){case"Point":x=Math.min(x,tr([S.coordinates],!1,M,g,x));break;case"LineString":x=Math.min(x,tr(S.coordinates,!0,M,g,x));break;case"Polygon":x=Math.min(x,Ai(M,S.coordinates,g,x))}if(x===0)return x}return x}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Ii{constructor(t){this.type=_,this.key=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);let a=t[1];return a==null?n.error("Global state property must be defined."):typeof a!="string"?n.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new Ii(a)}evaluate(t){var n;let a=(n=t.globals)===null||n===void 0?void 0:n.globalState;return a&&Object.keys(a).length!==0?vr(a,this.key):null}eachChild(){}outputDefined(){return!1}}let ri={"==":_t,"!=":nt,">":zt,"<":xt,">=":Ke,"<=":$t,array:Fe,at:Ot,boolean:Fe,case:Ye,coalesce:lt,collator:kt,format:Dt,image:Oe,in:Mt,"index-of":At,interpolate:Qe,"interpolate-hcl":Qe,"interpolate-lab":Qe,length:De,let:Tt,literal:xr,match:Ge,number:Fe,"number-format":St,object:Fe,slice:ot,step:Et,string:Fe,"to-boolean":Ve,"to-color":Ve,"to-number":Ve,"to-string":Ve,var:He,within:Fo,distance:oi,"global-state":Ii};class yi{constructor(t,n,a,c){this.name=t,this.type=n,this._evaluate=a,this.args=c}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,n){let a=t[0],c=yi.definitions[a];if(!c)return n.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0);let m=Array.isArray(c)?c[0]:c.type,g=Array.isArray(c)?[[c[1],c[2]]]:c.overloads,x=g.filter(([M])=>!Array.isArray(M)||M.length===t.length-1),S=null;for(let[M,L]of x){S=new yt(n.registry,wi,n.path,null,n.scope);let z=[],U=!1;for(let G=1;G<t.length;G++){let Z=t[G],J=Array.isArray(M)?M[G-1]:M.type,ne=S.parse(Z,1+z.length,J);if(!ne){U=!0;break}z.push(ne)}if(!U)if(Array.isArray(M)&&M.length!==z.length)S.error(`Expected ${M.length} arguments, but found ${z.length} instead.`);else{for(let G=0;G<z.length;G++){let Z=Array.isArray(M)?M[G]:M.type,J=z[G];S.concat(G+1).checkSubtype(Z,J.type)}if(S.errors.length===0)return new yi(a,m,L,z)}}if(x.length===1)n.errors.push(...S.errors);else{let M=(x.length?x:g).map(([z])=>{return U=z,Array.isArray(U)?`(${U.map(ie).join(", ")})`:`(${ie(U.type)}...)`;var U}).join(" | "),L=[];for(let z=1;z<t.length;z++){let U=n.parse(t[z],1+L.length);if(!U)return null;L.push(ie(U.type))}n.error(`Expected arguments of type ${M}, but found (${L.join(", ")}) instead.`)}return null}static register(t,n){yi.definitions=n;for(let a in n)t[a]=yi}}function ki(s,[t,n,a,c]){t=t.evaluate(s),n=n.evaluate(s),a=a.evaluate(s);let m=c?c.evaluate(s):1,g=et(t,n,a,m);if(g)throw new Le(g);return new sr(t/255,n/255,a/255,m,!1)}function si(s,t){return s in t}function gi(s,t){let n=t[s];return n===void 0?null:n}function _i(s){return{type:s}}function wi(s){if(s instanceof He)return wi(s.boundExpression);if(s instanceof yi&&s.name==="error"||s instanceof kt||s instanceof Fo||s instanceof oi||s instanceof Ii)return!1;let t=s instanceof Ve||s instanceof Fe,n=!0;return s.eachChild(a=>{n=t?n&&wi(a):n&&a instanceof xr}),!!n&&Bi(s)&&ji(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Bi(s){if(s instanceof yi&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Fo||s instanceof oi)return!1;let t=!0;return s.eachChild(n=>{t&&!Bi(n)&&(t=!1)}),t}function $i(s){if(s instanceof yi&&s.name==="feature-state")return!1;let t=!0;return s.eachChild(n=>{t&&!$i(n)&&(t=!1)}),t}function ji(s,t){if(s instanceof yi&&t.indexOf(s.name)>=0)return!1;let n=!0;return s.eachChild(a=>{n&&!ji(a,t)&&(n=!1)}),n}function Vi(s){return{result:"success",value:s}}function Oi(s){return{result:"error",value:s}}function Ni(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function qi(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Ji(s){return!!s.expression&&s.expression.interpolated}function ni(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Pi(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&Rn(s)===i}function Qi(s){return s}function zl(s,t){let n=s.stops&&typeof s.stops[0][0]=="object",a=n||!(n||s.property!==void 0),c=s.type||(Ji(t)?"exponential":"interval"),m=function(L){switch(L.type){case"color":return sr.parse;case"padding":return es.parse;case"numberArray":return ln.parse;case"colorArray":return $e.parse;default:return null}}(t);if(m&&((s=Yr({},s)).stops&&(s.stops=s.stops.map(L=>[L[0],m(L[1])])),s.default=m(s.default?s.default:t.default)),s.colorSpace&&(g=s.colorSpace)!=="rgb"&&g!=="hcl"&&g!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var g;let x=function(L){switch(L){case"exponential":return O1;case"interval":return Gc;case"categorical":return Wn;case"identity":return N1;default:throw new Error(`Unknown function type "${L}"`)}}(c),S,M;if(c==="categorical"){S=Object.create(null);for(let L of s.stops)S[L[0]]=L[1];M=typeof s.stops[0][0]}if(n){let L={},z=[];for(let Z=0;Z<s.stops.length;Z++){let J=s.stops[Z],ne=J[0].zoom;L[ne]===void 0&&(L[ne]={zoom:ne,type:s.type,property:s.property,default:s.default,stops:[]},z.push(ne)),L[ne].stops.push([J[0].value,J[1]])}let U=[];for(let Z of z)U.push([L[Z].zoom,zl(L[Z],t)]);let G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:Qe.interpolationFactor.bind(void 0,G),zoomStops:U.map(Z=>Z[0]),evaluate:({zoom:Z},J)=>O1({stops:U,base:s.base},t,Z).evaluate(Z,J)}}if(a){let L=c==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:Qe.interpolationFactor.bind(void 0,L),zoomStops:s.stops.map(z=>z[0]),evaluate:({zoom:z})=>x(s,t,z,S,M)}}return{kind:"source",evaluate(L,z){let U=z&&z.properties?z.properties[s.property]:void 0;return U===void 0?bl(s.default,t.default):x(s,t,U,S,M)}}}function bl(s,t,n){return s!==void 0?s:t!==void 0?t:n!==void 0?n:void 0}function Wn(s,t,n,a,c){return bl(typeof n===c?a[n]:void 0,s.default,t.default)}function Gc(s,t,n){if(ni(n)!=="number")return bl(s.default,t.default);let a=s.stops.length;if(a===1||n<=s.stops[0][0])return s.stops[0][1];if(n>=s.stops[a-1][0])return s.stops[a-1][1];let c=Ct(s.stops.map(m=>m[0]),n);return s.stops[c][1]}function O1(s,t,n){let a=s.base!==void 0?s.base:1;if(ni(n)!=="number")return bl(s.default,t.default);let c=s.stops.length;if(c===1||n<=s.stops[0][0])return s.stops[0][1];if(n>=s.stops[c-1][0])return s.stops[c-1][1];let m=Ct(s.stops.map(L=>L[0]),n),g=function(L,z,U,G){let Z=G-U,J=L-U;return Z===0?0:z===1?J/Z:(Math.pow(z,J)-1)/(Math.pow(z,Z)-1)}(n,a,s.stops[m][0],s.stops[m+1][0]),x=s.stops[m][1],S=s.stops[m+1][1],M=st[t.type]||Qi;return typeof x.evaluate=="function"?{evaluate(...L){let z=x.evaluate.apply(void 0,L),U=S.evaluate.apply(void 0,L);if(z!==void 0&&U!==void 0)return M(z,U,g,s.colorSpace)}}:M(x,S,g,s.colorSpace)}function N1(s,t,n){switch(t.type){case"color":n=sr.parse(n);break;case"formatted":n=ds.fromString(n.toString());break;case"resolvedImage":n=Ze.fromString(n.toString());break;case"padding":n=es.parse(n);break;case"colorArray":n=$e.parse(n);break;case"numberArray":n=ln.parse(n);break;default:ni(n)===t.type||t.type==="enum"&&t.values[n]||(n=void 0)}return bl(n,s.default,t.default)}yi.register(ri,{error:[{kind:"error"},[li],(s,[t])=>{throw new Le(t.evaluate(s))}],typeof:[li,[_],(s,[t])=>ie(Rn(t.evaluate(s)))],"to-rgba":[ae(Gt,4),[kr],(s,[t])=>{let[n,a,c,m]=t.evaluate(s).rgb;return[255*n,255*a,255*c,m]}],rgb:[kr,[Gt,Gt,Gt],ki],rgba:[kr,[Gt,Gt,Gt,Gt],ki],has:{type:br,overloads:[[[li],(s,[t])=>si(t.evaluate(s),s.properties())],[[li,i],(s,[t,n])=>si(t.evaluate(s),n.evaluate(s))]]},get:{type:_,overloads:[[[li],(s,[t])=>gi(t.evaluate(s),s.properties())],[[li,i],(s,[t,n])=>gi(t.evaluate(s),n.evaluate(s))]]},"feature-state":[_,[li],(s,[t])=>gi(t.evaluate(s),s.featureState||{})],properties:[i,[],s=>s.properties()],"geometry-type":[li,[],s=>s.geometryType()],id:[_,[],s=>s.id()],zoom:[Gt,[],s=>s.globals.zoom],"heatmap-density":[Gt,[],s=>s.globals.heatmapDensity||0],"line-progress":[Gt,[],s=>s.globals.lineProgress||0],accumulated:[_,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Gt,_i(Gt),(s,t)=>{let n=0;for(let a of t)n+=a.evaluate(s);return n}],"*":[Gt,_i(Gt),(s,t)=>{let n=1;for(let a of t)n*=a.evaluate(s);return n}],"-":{type:Gt,overloads:[[[Gt,Gt],(s,[t,n])=>t.evaluate(s)-n.evaluate(s)],[[Gt],(s,[t])=>-t.evaluate(s)]]},"/":[Gt,[Gt,Gt],(s,[t,n])=>t.evaluate(s)/n.evaluate(s)],"%":[Gt,[Gt,Gt],(s,[t,n])=>t.evaluate(s)%n.evaluate(s)],ln2:[Gt,[],()=>Math.LN2],pi:[Gt,[],()=>Math.PI],e:[Gt,[],()=>Math.E],"^":[Gt,[Gt,Gt],(s,[t,n])=>Math.pow(t.evaluate(s),n.evaluate(s))],sqrt:[Gt,[Gt],(s,[t])=>Math.sqrt(t.evaluate(s))],log10:[Gt,[Gt],(s,[t])=>Math.log(t.evaluate(s))/Math.LN10],ln:[Gt,[Gt],(s,[t])=>Math.log(t.evaluate(s))],log2:[Gt,[Gt],(s,[t])=>Math.log(t.evaluate(s))/Math.LN2],sin:[Gt,[Gt],(s,[t])=>Math.sin(t.evaluate(s))],cos:[Gt,[Gt],(s,[t])=>Math.cos(t.evaluate(s))],tan:[Gt,[Gt],(s,[t])=>Math.tan(t.evaluate(s))],asin:[Gt,[Gt],(s,[t])=>Math.asin(t.evaluate(s))],acos:[Gt,[Gt],(s,[t])=>Math.acos(t.evaluate(s))],atan:[Gt,[Gt],(s,[t])=>Math.atan(t.evaluate(s))],min:[Gt,_i(Gt),(s,t)=>Math.min(...t.map(n=>n.evaluate(s)))],max:[Gt,_i(Gt),(s,t)=>Math.max(...t.map(n=>n.evaluate(s)))],abs:[Gt,[Gt],(s,[t])=>Math.abs(t.evaluate(s))],round:[Gt,[Gt],(s,[t])=>{let n=t.evaluate(s);return n<0?-Math.round(-n):Math.round(n)}],floor:[Gt,[Gt],(s,[t])=>Math.floor(t.evaluate(s))],ceil:[Gt,[Gt],(s,[t])=>Math.ceil(t.evaluate(s))],"filter-==":[br,[li,_],(s,[t,n])=>s.properties()[t.value]===n.value],"filter-id-==":[br,[_],(s,[t])=>s.id()===t.value],"filter-type-==":[br,[li],(s,[t])=>s.geometryType()===t.value],"filter-<":[br,[li,_],(s,[t,n])=>{let a=s.properties()[t.value],c=n.value;return typeof a==typeof c&&a<c}],"filter-id-<":[br,[_],(s,[t])=>{let n=s.id(),a=t.value;return typeof n==typeof a&&n<a}],"filter->":[br,[li,_],(s,[t,n])=>{let a=s.properties()[t.value],c=n.value;return typeof a==typeof c&&a>c}],"filter-id->":[br,[_],(s,[t])=>{let n=s.id(),a=t.value;return typeof n==typeof a&&n>a}],"filter-<=":[br,[li,_],(s,[t,n])=>{let a=s.properties()[t.value],c=n.value;return typeof a==typeof c&&a<=c}],"filter-id-<=":[br,[_],(s,[t])=>{let n=s.id(),a=t.value;return typeof n==typeof a&&n<=a}],"filter->=":[br,[li,_],(s,[t,n])=>{let a=s.properties()[t.value],c=n.value;return typeof a==typeof c&&a>=c}],"filter-id->=":[br,[_],(s,[t])=>{let n=s.id(),a=t.value;return typeof n==typeof a&&n>=a}],"filter-has":[br,[_],(s,[t])=>t.value in s.properties()],"filter-has-id":[br,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[br,[ae(li)],(s,[t])=>t.value.indexOf(s.geometryType())>=0],"filter-id-in":[br,[ae(_)],(s,[t])=>t.value.indexOf(s.id())>=0],"filter-in-small":[br,[li,ae(_)],(s,[t,n])=>n.value.indexOf(s.properties()[t.value])>=0],"filter-in-large":[br,[li,ae(_)],(s,[t,n])=>function(a,c,m,g){for(;m<=g;){let x=m+g>>1;if(c[x]===a)return!0;c[x]>a?g=x-1:m=x+1}return!1}(s.properties()[t.value],n.value,0,n.value.length-1)],all:{type:br,overloads:[[[br,br],(s,[t,n])=>t.evaluate(s)&&n.evaluate(s)],[_i(br),(s,t)=>{for(let n of t)if(!n.evaluate(s))return!1;return!0}]]},any:{type:br,overloads:[[[br,br],(s,[t,n])=>t.evaluate(s)||n.evaluate(s)],[_i(br),(s,t)=>{for(let n of t)if(n.evaluate(s))return!0;return!1}]]},"!":[br,[br],(s,[t])=>!t.evaluate(s)],"is-supported-script":[br,[li],(s,[t])=>{let n=s.globals&&s.globals.isSupportedScript;return!n||n(t.evaluate(s))}],upcase:[li,[li],(s,[t])=>t.evaluate(s).toUpperCase()],downcase:[li,[li],(s,[t])=>t.evaluate(s).toLowerCase()],concat:[li,_i(_),(s,t)=>t.map(n=>Or(n.evaluate(s))).join("")],"resolved-locale":[li,[p],(s,[t])=>t.evaluate(s).resolvedLocale()]});class Ds{constructor(t,n){this.expression=t,this._warningHistory={},this._evaluator=new Xe,this._defaultValue=n?function(a){if(a.type==="color"&&Pi(a.default))return new sr(0,0,0,0);switch(a.type){case"color":return sr.parse(a.default)||null;case"padding":return es.parse(a.default)||null;case"numberArray":return ln.parse(a.default)||null;case"colorArray":return $e.parse(a.default)||null;case"variableAnchorOffsetCollection":return Ue.parse(a.default)||null;case"projectionDefinition":return qe.parse(a.default)||null;default:return a.default===void 0?null:a.default}}(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(t,n,a,c,m,g){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=a,this._evaluator.canonical=c,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=g,this.expression.evaluate(this._evaluator)}evaluate(t,n,a,c,m,g){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=a||null,this._evaluator.canonical=c,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=g||null;try{let x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new Le(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console<"u"&&console.warn(x.message)),this._defaultValue}}}function jo(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in ri}function n1(s,t){let n=new yt(ri,wi,[],t?function(c){let m={color:kr,string:li,number:Gt,enum:li,boolean:br,formatted:f,padding:v,numberArray:P,colorArray:T,projectionDefinition:hn,resolvedImage:D,variableAnchorOffsetCollection:V};return c.type==="array"?ae(m[c.value]||_,c.length):m[c.type]}(t):void 0),a=n.parse(s,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return a?Vi(new Ds(a,t)):Oi(n.errors)}class z1{constructor(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent=t!=="constant"&&!$i(n.expression)}evaluateWithoutErrorHandling(t,n,a,c,m,g){return this._styleExpression.evaluateWithoutErrorHandling(t,n,a,c,m,g)}evaluate(t,n,a,c,m,g){return this._styleExpression.evaluate(t,n,a,c,m,g)}}class s1{constructor(t,n,a,c){this.kind=t,this.zoomStops=a,this._styleExpression=n,this.isStateDependent=t!=="camera"&&!$i(n.expression),this.interpolationType=c}evaluateWithoutErrorHandling(t,n,a,c,m,g){return this._styleExpression.evaluateWithoutErrorHandling(t,n,a,c,m,g)}evaluate(t,n,a,c,m,g){return this._styleExpression.evaluate(t,n,a,c,m,g)}interpolationFactor(t,n,a){return this.interpolationType?Qe.interpolationFactor(this.interpolationType,t,n,a):0}}function Cn(s,t){let n=n1(s,t);if(n.result==="error")return n;let a=n.value.expression,c=Bi(a);if(!c&&!Ni(t))return Oi([new Lr("","data expressions not supported")]);let m=ji(a,["zoom"]);if(!m&&!qi(t))return Oi([new Lr("","zoom expressions not supported")]);let g=Fl(a);return g||m?g instanceof Lr?Oi([g]):g instanceof Qe&&!Ji(t)?Oi([new Lr("",'"interpolate" expressions cannot be used with this property')]):Vi(g?new s1(c?"camera":"composite",n.value,g.labels,g instanceof Qe?g.interpolation:void 0):new z1(c?"constant":"source",n.value)):Oi([new Lr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class $l{constructor(t,n){this._parameters=t,this._specification=n,Yr(this,zl(this._parameters,this._specification))}static deserialize(t){return new $l(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Fl(s){let t=null;if(s instanceof Tt)t=Fl(s.result);else if(s instanceof lt){for(let n of s.args)if(t=Fl(n),t)break}else(s instanceof Et||s instanceof Qe)&&s.input instanceof yi&&s.input.name==="zoom"&&(t=s);return t instanceof Lr||s.eachChild(n=>{let a=Fl(n);a instanceof Lr?t=a:!t&&a?t=new Lr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&a&&t!==a&&(t=new Lr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function Io(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(let t of s.slice(1))if(!Io(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}let $1={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Bl(s){if(s==null)return{filter:()=>!0,needGeometry:!1};Io(s)||(s=ws(s));let t=n1(s,$1);if(t.result==="error")throw new Error(t.value.map(n=>`${n.key}: ${n.message}`).join(", "));return{filter:(n,a,c)=>t.value.evaluate(n,a,{},c),needGeometry:Ks(s)}}function a1(s,t){return s<t?-1:s>t?1:0}function Ks(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let t=1;t<s.length;t++)if(Ks(s[t]))return!0;return!1}function ws(s){if(!s)return!0;let t=s[0];return s.length<=1?t!=="any":t==="=="?Ls(s[1],s[2],"=="):t==="!="?Es(Ls(s[1],s[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Ls(s[1],s[2],t):t==="any"?(n=s.slice(1),["any"].concat(n.map(ws))):t==="all"?["all"].concat(s.slice(1).map(ws)):t==="none"?["all"].concat(s.slice(1).map(ws).map(Es)):t==="in"?Qs(s[1],s.slice(2)):t==="!in"?Es(Qs(s[1],s.slice(2))):t==="has"?ea(s[1]):t!=="!has"||Es(ea(s[1]));var n}function Ls(s,t,n){switch(s){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,s,t]}}function Qs(s,t){if(t.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(n=>typeof n!=typeof t[0])?["filter-in-large",s,["literal",t.sort(a1)]]:["filter-in-small",s,["literal",t]]}}function ea(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Es(s){return["!",s]}function Ts(s){let t=typeof s;if(t==="number"||t==="boolean"||t==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let c="[";for(let m of s)c+=`${Ts(m)},`;return`${c}]`}let n=Object.keys(s).sort(),a="{";for(let c=0;c<n.length;c++)a+=`${JSON.stringify(n[c])}:${Ts(s[n[c]])},`;return`${a}}`}function ta(s){let t="";for(let n of Re)t+=`/${Ts(s[n])}`;return t}function ps(s){let t=s.value;return t?[new It(s.key,t,"constants have been deprecated as of v8")]:[]}function Ur(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function jn(s){if(Array.isArray(s))return s.map(jn);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){let t={};for(let n in s)t[n]=jn(s[n]);return t}return Ur(s)}function _n(s){let t=s.key,n=s.value,a=s.valueSpec||{},c=s.objectElementValidators||{},m=s.style,g=s.styleSpec,x=s.validateSpec,S=[],M=ni(n);if(M!=="object")return[new It(t,n,`object expected, ${M} found`)];for(let L in n){let z=L.split(".")[0],U=vr(a,z)||a["*"],G;if(vr(c,z))G=c[z];else if(vr(a,z))G=x;else if(c["*"])G=c["*"];else{if(!a["*"]){S.push(new It(t,n[L],`unknown property "${L}"`));continue}G=x}S=S.concat(G({key:(t&&`${t}.`)+L,value:n[L],valueSpec:U,style:m,styleSpec:g,object:n,objectKey:L,validateSpec:x},n))}for(let L in a)c[L]||a[L].required&&a[L].default===void 0&&n[L]===void 0&&S.push(new It(t,n,`missing required property "${L}"`));return S}function Os(s){let t=s.value,n=s.valueSpec,a=s.style,c=s.styleSpec,m=s.key,g=s.arrayElementValidator||s.validateSpec;if(ni(t)!=="array")return[new It(m,t,`array expected, ${ni(t)} found`)];if(n.length&&t.length!==n.length)return[new It(m,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new It(m,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let x={type:n.value,values:n.values};c.$version<7&&(x.function=n.function),ni(n.value)==="object"&&(x=n.value);let S=[];for(let M=0;M<t.length;M++)S=S.concat(g({array:t,arrayIndex:M,value:t[M],valueSpec:x,validateSpec:s.validateSpec,style:a,styleSpec:c,key:`${m}[${M}]`}));return S}function fs(s){let t=s.key,n=s.value,a=s.valueSpec,c=ni(n);return c==="number"&&n!=n&&(c="NaN"),c!=="number"?[new It(t,n,`number expected, ${c} found`)]:"minimum"in a&&n<a.minimum?[new It(t,n,`${n} is less than the minimum value ${a.minimum}`)]:"maximum"in a&&n>a.maximum?[new It(t,n,`${n} is greater than the maximum value ${a.maximum}`)]:[]}function Ns(s){let t=s.valueSpec,n=Ur(s.value.type),a,c,m,g={},x=n!=="categorical"&&s.value.property===void 0,S=!x,M=ni(s.value.stops)==="array"&&ni(s.value.stops[0])==="array"&&ni(s.value.stops[0][0])==="object",L=_n({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(G){if(n==="identity")return[new It(G.key,G.value,'identity function may not have a "stops" property')];let Z=[],J=G.value;return Z=Z.concat(Os({key:G.key,value:J,valueSpec:G.valueSpec,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:z})),ni(J)==="array"&&J.length===0&&Z.push(new It(G.key,J,"array must have at least one stop")),Z},default:function(G){return G.validateSpec({key:G.key,value:G.value,valueSpec:t,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec})}}});return n==="identity"&&x&&L.push(new It(s.key,s.value,'missing required property "property"')),n==="identity"||s.value.stops||L.push(new It(s.key,s.value,'missing required property "stops"')),n==="exponential"&&s.valueSpec.expression&&!Ji(s.valueSpec)&&L.push(new It(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(S&&!Ni(s.valueSpec)?L.push(new It(s.key,s.value,"property functions not supported")):x&&!qi(s.valueSpec)&&L.push(new It(s.key,s.value,"zoom functions not supported"))),n!=="categorical"&&!M||s.value.property!==void 0||L.push(new It(s.key,s.value,'"property" property is required')),L;function z(G){let Z=[],J=G.value,ne=G.key;if(ni(J)!=="array")return[new It(ne,J,`array expected, ${ni(J)} found`)];if(J.length!==2)return[new It(ne,J,`array length 2 expected, length ${J.length} found`)];if(M){if(ni(J[0])!=="object")return[new It(ne,J,`object expected, ${ni(J[0])} found`)];if(J[0].zoom===void 0)return[new It(ne,J,"object stop key must have zoom")];if(J[0].value===void 0)return[new It(ne,J,"object stop key must have value")];if(m&&m>Ur(J[0].zoom))return[new It(ne,J[0].zoom,"stop zoom values must appear in ascending order")];Ur(J[0].zoom)!==m&&(m=Ur(J[0].zoom),c=void 0,g={}),Z=Z.concat(_n({key:`${ne}[0]`,value:J[0],valueSpec:{zoom:{}},validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:fs,value:U}}))}else Z=Z.concat(U({key:`${ne}[0]`,value:J[0],validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec},J));return jo(jn(J[1]))?Z.concat([new It(`${ne}[1]`,J[1],"expressions are not allowed in function stops.")]):Z.concat(G.validateSpec({key:`${ne}[1]`,value:J[1],valueSpec:t,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec}))}function U(G,Z){let J=ni(G.value),ne=Ur(G.value),he=G.value!==null?G.value:Z;if(a){if(J!==a)return[new It(G.key,he,`${J} stop domain type must match previous stop domain type ${a}`)]}else a=J;if(J!=="number"&&J!=="string"&&J!=="boolean")return[new It(G.key,he,"stop domain value must be a number, string, or boolean")];if(J!=="number"&&n!=="categorical"){let Te=`number expected, ${J} found`;return Ni(t)&&n===void 0&&(Te+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new It(G.key,he,Te)]}return n!=="categorical"||J!=="number"||isFinite(ne)&&Math.floor(ne)===ne?n!=="categorical"&&J==="number"&&c!==void 0&&ne<c?[new It(G.key,he,"stop domain values must appear in ascending order")]:(c=ne,n==="categorical"&&ne in g?[new It(G.key,he,"stop domain values must be unique")]:(g[ne]=!0,[])):[new It(G.key,he,`integer expected, found ${ne}`)]}}function Dn(s){let t=(s.expressionContext==="property"?Cn:n1)(jn(s.value),s.valueSpec);if(t.result==="error")return t.value.map(a=>new It(`${s.key}${a.key}`,s.value,a.message));let n=t.value.expression||t.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!n.outputDefined())return[new It(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!$i(n))return[new It(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!$i(n))return[new It(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!ji(n,["zoom","feature-state"]))return[new It(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Bi(n))return[new It(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zs(s){let t=s.key,n=s.value,a=ni(n);return a!=="string"?[new It(t,n,`color expected, ${a} found`)]:sr.parse(String(n))?[]:[new It(t,n,`color expected, "${n}" found`)]}function ms(s){let t=s.key,n=s.value,a=s.valueSpec,c=[];return Array.isArray(a.values)?a.values.indexOf(Ur(n))===-1&&c.push(new It(t,n,`expected one of [${a.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(a.values).indexOf(Ur(n))===-1&&c.push(new It(t,n,`expected one of [${Object.keys(a.values).join(", ")}], ${JSON.stringify(n)} found`)),c}function $s(s){return Io(jn(s.value))?Dn(Yr({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ia(s)}function ia(s){let t=s.value,n=s.key;if(ni(t)!=="array")return[new It(n,t,`array expected, ${ni(t)} found`)];let a=s.styleSpec,c,m=[];if(t.length<1)return[new It(n,t,"filter array must have at least 1 element")];switch(m=m.concat(ms({key:`${n}[0]`,value:t[0],valueSpec:a.filter_operator,style:s.style,styleSpec:s.styleSpec})),Ur(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Ur(t[1])==="$type"&&m.push(new It(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&m.push(new It(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(c=ni(t[1]),c!=="string"&&m.push(new It(`${n}[1]`,t[1],`string expected, ${c} found`)));for(let g=2;g<t.length;g++)c=ni(t[g]),Ur(t[1])==="$type"?m=m.concat(ms({key:`${n}[${g}]`,value:t[g],valueSpec:a.geometry_type,style:s.style,styleSpec:s.styleSpec})):c!=="string"&&c!=="number"&&c!=="boolean"&&m.push(new It(`${n}[${g}]`,t[g],`string, number, or boolean expected, ${c} found`));break;case"any":case"all":case"none":for(let g=1;g<t.length;g++)m=m.concat(ia({key:`${n}[${g}]`,value:t[g],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":c=ni(t[1]),t.length!==2?m.push(new It(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):c!=="string"&&m.push(new It(`${n}[1]`,t[1],`string expected, ${c} found`))}return m}function ra(s,t){let n=s.key,a=s.validateSpec,c=s.style,m=s.styleSpec,g=s.value,x=s.objectKey,S=m[`${t}_${s.layerType}`];if(!S)return[];let M=x.match(/^(.*)-transition$/);if(t==="paint"&&M&&S[M[1]]&&S[M[1]].transition)return a({key:n,value:g,valueSpec:m.transition,style:c,styleSpec:m});let L=s.valueSpec||S[x];if(!L)return[new It(n,g,`unknown property "${x}"`)];let z;if(ni(g)==="string"&&Ni(L)&&!L.tokens&&(z=/^{([^}]+)}$/.exec(g)))return[new It(n,g,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(z[1])} }\`.`)];let U=[];return s.layerType==="symbol"&&(x==="text-field"&&c&&!c.glyphs&&U.push(new It(n,g,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Pi(jn(g))&&Ur(g.type)==="identity"&&U.push(new It(n,g,'"text-font" does not support identity functions'))),U.concat(a({key:s.key,value:g,valueSpec:L,style:c,styleSpec:m,expressionContext:"property",propertyType:t,propertyKey:x}))}function na(s){return ra(s,"paint")}function ts(s){return ra(s,"layout")}function is(s){let t=[],n=s.value,a=s.key,c=s.style,m=s.styleSpec;if(ni(n)!=="object")return[new It(a,n,`object expected, ${ni(n)} found`)];n.type||n.ref||t.push(new It(a,n,'either "type" or "ref" is required'));let g=Ur(n.type),x=Ur(n.ref);if(n.id){let S=Ur(n.id);for(let M=0;M<s.arrayIndex;M++){let L=c.layers[M];Ur(L.id)===S&&t.push(new It(a,n.id,`duplicate layer id "${n.id}", previously used at line ${L.id.__line__}`))}}if("ref"in n){let S;["type","source","source-layer","filter","layout"].forEach(M=>{M in n&&t.push(new It(a,n[M],`"${M}" is prohibited for ref layers`))}),c.layers.forEach(M=>{Ur(M.id)===x&&(S=M)}),S?S.ref?t.push(new It(a,n.ref,"ref cannot reference another ref layer")):g=Ur(S.type):t.push(new It(a,n.ref,`ref layer "${x}" not found`))}else if(g!=="background")if(n.source){let S=c.sources&&c.sources[n.source],M=S&&Ur(S.type);S?M==="vector"&&g==="raster"?t.push(new It(a,n.source,`layer "${n.id}" requires a raster source`)):M!=="raster-dem"&&g==="hillshade"?t.push(new It(a,n.source,`layer "${n.id}" requires a raster-dem source`)):M==="raster"&&g!=="raster"?t.push(new It(a,n.source,`layer "${n.id}" requires a vector source`)):M!=="vector"||n["source-layer"]?M==="raster-dem"&&g!=="hillshade"?t.push(new It(a,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):g!=="line"||!n.paint||!n.paint["line-gradient"]||M==="geojson"&&S.lineMetrics||t.push(new It(a,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new It(a,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new It(a,n.source,`source "${n.source}" not found`))}else t.push(new It(a,n,'missing required property "source"'));return t=t.concat(_n({key:a,value:n,valueSpec:m.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${a}.type`,value:n.type,valueSpec:m.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:n,objectKey:"type"}),filter:$s,layout:S=>_n({layer:n,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":M=>ts(Yr({layerType:g},M))}}),paint:S=>_n({layer:n,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":M=>na(Yr({layerType:g},M))}})}})),t}function Kr(s){let t=s.value,n=s.key,a=ni(t);return a!=="string"?[new It(n,t,`string expected, ${a} found`)]:[]}let rs={promoteId:function({key:s,value:t}){if(ni(t)==="string")return Kr({key:s,value:t});{let n=[];for(let a in t)n.push(...Kr({key:`${s}.${a}`,value:t[a]}));return n}}};function Fs(s){let t=s.value,n=s.key,a=s.styleSpec,c=s.style,m=s.validateSpec;if(!t.type)return[new It(n,t,'"type" is required')];let g=Ur(t.type),x;switch(g){case"vector":case"raster":return x=_n({key:n,value:t,valueSpec:a[`source_${g.replace("-","_")}`],style:s.style,styleSpec:a,objectElementValidators:rs,validateSpec:m}),x;case"raster-dem":return x=function(S){var M;let L=(M=S.sourceName)!==null&&M!==void 0?M:"",z=S.value,U=S.styleSpec,G=U.source_raster_dem,Z=S.style,J=[],ne=ni(z);if(z===void 0)return J;if(ne!=="object")return J.push(new It("source_raster_dem",z,`object expected, ${ne} found`)),J;let he=Ur(z.encoding)==="custom",Te=["redFactor","greenFactor","blueFactor","baseShift"],me=S.value.encoding?`"${S.value.encoding}"`:"Default";for(let q in z)!he&&Te.includes(q)?J.push(new It(q,z[q],`In "${L}": "${q}" is only valid when "encoding" is set to "custom". ${me} encoding found`)):G[q]?J=J.concat(S.validateSpec({key:q,value:z[q],valueSpec:G[q],validateSpec:S.validateSpec,style:Z,styleSpec:U})):J.push(new It(q,z[q],`unknown property "${q}"`));return J}({sourceName:n,value:t,style:s.style,styleSpec:a,validateSpec:m}),x;case"geojson":if(x=_n({key:n,value:t,valueSpec:a.source_geojson,style:c,styleSpec:a,validateSpec:m,objectElementValidators:rs}),t.cluster)for(let S in t.clusterProperties){let[M,L]=t.clusterProperties[S],z=typeof M=="string"?[M,["accumulated"],["get",S]]:M;x.push(...Dn({key:`${n}.${S}.map`,value:L,expressionContext:"cluster-map"})),x.push(...Dn({key:`${n}.${S}.reduce`,value:z,expressionContext:"cluster-reduce"}))}return x;case"video":return _n({key:n,value:t,valueSpec:a.source_video,style:c,validateSpec:m,styleSpec:a});case"image":return _n({key:n,value:t,valueSpec:a.source_image,style:c,validateSpec:m,styleSpec:a});case"canvas":return[new It(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ms({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function sa(s){let t=s.value,n=s.styleSpec,a=n.light,c=s.style,m=[],g=ni(t);if(t===void 0)return m;if(g!=="object")return m=m.concat([new It("light",t,`object expected, ${g} found`)]),m;for(let x in t){let S=x.match(/^(.*)-transition$/);m=m.concat(S&&a[S[1]]&&a[S[1]].transition?s.validateSpec({key:x,value:t[x],valueSpec:n.transition,validateSpec:s.validateSpec,style:c,styleSpec:n}):a[x]?s.validateSpec({key:x,value:t[x],valueSpec:a[x],validateSpec:s.validateSpec,style:c,styleSpec:n}):[new It(x,t[x],`unknown property "${x}"`)])}return m}function aa(s){let t=s.value,n=s.styleSpec,a=n.sky,c=s.style,m=ni(t);if(t===void 0)return[];if(m!=="object")return[new It("sky",t,`object expected, ${m} found`)];let g=[];for(let x in t)g=g.concat(a[x]?s.validateSpec({key:x,value:t[x],valueSpec:a[x],style:c,styleSpec:n}):[new It(x,t[x],`unknown property "${x}"`)]);return g}function ns(s){let t=s.value,n=s.styleSpec,a=n.terrain,c=s.style,m=[],g=ni(t);if(t===void 0)return m;if(g!=="object")return m=m.concat([new It("terrain",t,`object expected, ${g} found`)]),m;for(let x in t)m=m.concat(a[x]?s.validateSpec({key:x,value:t[x],valueSpec:a[x],validateSpec:s.validateSpec,style:c,styleSpec:n}):[new It(x,t[x],`unknown property "${x}"`)]);return m}function Bs(s){let t=[],n=s.value,a=s.key;if(Array.isArray(n)){let c=[],m=[];for(let g in n)n[g].id&&c.includes(n[g].id)&&t.push(new It(a,n,`all the sprites' ids must be unique, but ${n[g].id} is duplicated`)),c.push(n[g].id),n[g].url&&m.includes(n[g].url)&&t.push(new It(a,n,`all the sprites' URLs must be unique, but ${n[g].url} is duplicated`)),m.push(n[g].url),t=t.concat(_n({key:`${a}[${g}]`,value:n[g],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return t}return Kr({key:a,value:n})}function Ss(s){return t=s.value,t&&t.constructor===Object?[]:[new It(s.key,s.value,`object expected, ${ni(s.value)} found`)];var t}let oa={"*":()=>[],array:Os,boolean:function(s){let t=s.value,n=s.key,a=ni(t);return a!=="boolean"?[new It(n,t,`boolean expected, ${a} found`)]:[]},number:fs,color:zs,constants:ps,enum:ms,filter:$s,function:Ns,layer:is,object:_n,source:Fs,light:sa,sky:aa,terrain:ns,projection:function(s){let t=s.value,n=s.styleSpec,a=n.projection,c=s.style,m=ni(t);if(t===void 0)return[];if(m!=="object")return[new It("projection",t,`object expected, ${m} found`)];let g=[];for(let x in t)g=g.concat(a[x]?s.validateSpec({key:x,value:t[x],valueSpec:a[x],style:c,styleSpec:n}):[new It(x,t[x],`unknown property "${x}"`)]);return g},projectionDefinition:function(s){let t=s.key,n=s.value;n=n instanceof String?n.valueOf():n;let a=ni(n);return a!=="array"||function(c){return Array.isArray(c)&&c.length===3&&typeof c[0]=="string"&&typeof c[1]=="string"&&typeof c[2]=="number"}(n)||function(c){return!!["interpolate","step","literal"].includes(c[0])}(n)?["array","string"].includes(a)?[]:[new It(t,n,`projection expected, invalid type "${a}" found`)]:[new It(t,n,`projection expected, invalid array ${JSON.stringify(n)} found`)]},string:Kr,formatted:function(s){return Kr(s).length===0?[]:Dn(s)},resolvedImage:function(s){return Kr(s).length===0?[]:Dn(s)},padding:function(s){let t=s.key,n=s.value;if(ni(n)==="array"){if(n.length<1||n.length>4)return[new It(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];let a={type:"number"},c=[];for(let m=0;m<n.length;m++)c=c.concat(s.validateSpec({key:`${t}[${m}]`,value:n[m],validateSpec:s.validateSpec,valueSpec:a}));return c}return fs({key:t,value:n,valueSpec:{}})},numberArray:function(s){let t=s.key,n=s.value;if(ni(n)==="array"){let a={type:"number"};if(n.length<1)return[new It(t,n,"array length at least 1 expected, length 0 found")];let c=[];for(let m=0;m<n.length;m++)c=c.concat(s.validateSpec({key:`${t}[${m}]`,value:n[m],validateSpec:s.validateSpec,valueSpec:a}));return c}return fs({key:t,value:n,valueSpec:{}})},colorArray:function(s){let t=s.key,n=s.value;if(ni(n)==="array"){if(n.length<1)return[new It(t,n,"array length at least 1 expected, length 0 found")];let a=[];for(let c=0;c<n.length;c++)a=a.concat(zs({key:`${t}[${c}]`,value:n[c]}));return a}return zs({key:t,value:n})},variableAnchorOffsetCollection:function(s){let t=s.key,n=s.value,a=ni(n),c=s.styleSpec;if(a!=="array"||n.length<1||n.length%2!=0)return[new It(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let m=[];for(let g=0;g<n.length;g+=2)m=m.concat(ms({key:`${t}[${g}]`,value:n[g],valueSpec:c.layout_symbol["text-anchor"]})),m=m.concat(Os({key:`${t}[${g+1}]`,value:n[g+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:c}));return m},sprite:Bs,state:Ss};function ss(s){let t=s.value,n=s.valueSpec,a=s.styleSpec;return s.validateSpec=ss,n.expression&&Pi(Ur(t))?Ns(s):n.expression&&jo(jn(t))?Dn(s):n.type&&oa[n.type]?oa[n.type](s):_n(Yr({},s,{valueSpec:n.type?a[n.type]:n}))}function la(s){let t=s.value,n=s.key,a=Kr(s);return a.length||(t.indexOf("{fontstack}")===-1&&a.push(new It(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&a.push(new It(n,t,'"glyphs" url must include a "{range}" token'))),a}function sn(s,t=te){let n=[];return n=n.concat(ss({key:"",value:s,valueSpec:t.$root,styleSpec:t,style:s,validateSpec:ss,objectElementValidators:{glyphs:la,"*":()=>[]}})),s.constants&&(n=n.concat(ps({key:"constants",value:s.constants}))),as(n)}function In(s){return function(t){return s({...t,validateSpec:ss})}}function as(s){return[].concat(s).sort((t,n)=>t.line-n.line)}function Mn(s){return function(...t){return as(s.apply(this,t))}}sn.source=Mn(In(Fs)),sn.sprite=Mn(In(Bs)),sn.glyphs=Mn(In(la)),sn.light=Mn(In(sa)),sn.sky=Mn(In(aa)),sn.terrain=Mn(In(ns)),sn.state=Mn(In(Ss)),sn.layer=Mn(In(is)),sn.filter=Mn(In($s)),sn.paintProperty=Mn(In(na)),sn.layoutProperty=Mn(In(ts));let os=sn,As=os.light,xa=os.sky,js=os.paintProperty,Cs=os.layoutProperty;function o1(s,t){let n=!1;if(t&&t.length)for(let a of t)s.fire(new ge(new Error(a.message))),n=!0;return n}class Gr{constructor(t,n,a){let c=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;let g=new Int32Array(this.arrayBuffer);t=g[0],this.d=(n=g[1])+2*(a=g[2]);for(let S=0;S<this.d*this.d;S++){let M=g[3+S],L=g[3+S+1];c.push(M===L?null:g.subarray(M,L))}let x=g[3+c.length+1];this.keys=g.subarray(g[3+c.length],x),this.bboxes=g.subarray(x),this.insert=this._insertReadonly}else{this.d=n+2*a;for(let g=0;g<this.d*this.d;g++)c.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=t,this.padding=a,this.scale=n/t,this.uid=0;let m=a/n*t;this.min=-m,this.max=t+m}insert(t,n,a,c,m){this._forEachCell(n,a,c,m,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(n),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(m)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,n,a,c,m,g){this.cells[m].push(g)}query(t,n,a,c,m){let g=this.min,x=this.max;if(t<=g&&n<=g&&x<=a&&x<=c&&!m)return Array.prototype.slice.call(this.keys);{let S=[];return this._forEachCell(t,n,a,c,this._queryCell,S,{},m),S}}_queryCell(t,n,a,c,m,g,x,S){let M=this.cells[m];if(M!==null){let L=this.keys,z=this.bboxes;for(let U=0;U<M.length;U++){let G=M[U];if(x[G]===void 0){let Z=4*G;(S?S(z[Z+0],z[Z+1],z[Z+2],z[Z+3]):t<=z[Z+2]&&n<=z[Z+3]&&a>=z[Z+0]&&c>=z[Z+1])?(x[G]=!0,g.push(L[G])):x[G]=!1}}}}_forEachCell(t,n,a,c,m,g,x,S){let M=this._convertToCellCoord(t),L=this._convertToCellCoord(n),z=this._convertToCellCoord(a),U=this._convertToCellCoord(c);for(let G=M;G<=z;G++)for(let Z=L;Z<=U;Z++){let J=this.d*Z+G;if((!S||S(this._convertFromCellCoord(G),this._convertFromCellCoord(Z),this._convertFromCellCoord(G+1),this._convertFromCellCoord(Z+1)))&&m.call(this,t,n,a,c,J,g,x,S))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let t=this.cells,n=3+this.cells.length+1+1,a=0;for(let g=0;g<this.cells.length;g++)a+=this.cells[g].length;let c=new Int32Array(n+a+this.keys.length+this.bboxes.length);c[0]=this.extent,c[1]=this.n,c[2]=this.padding;let m=n;for(let g=0;g<t.length;g++){let x=t[g];c[3+g]=m,c.set(x,m),m+=x.length}return c[3+t.length]=m,c.set(this.keys,m),m+=this.keys.length,c[3+t.length+1]=m,c.set(this.bboxes,m),m+=this.bboxes.length,c.buffer}static serialize(t,n){let a=t.toArrayBuffer();return n&&n.push(a),{buffer:a}}static deserialize(t){return new Gr(t.buffer)}}let Ln={};function zi(s,t,n={}){if(Ln[s])throw new Error(`${s} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:s,writeable:!1}),Ln[s]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}zi("Object",Object),zi("TransferableGridIndex",Gr),zi("Color",sr),zi("Error",Error),zi("AJAXError",za),zi("ResolvedImage",Ze),zi("StylePropertyFunction",$l),zi("StyleExpression",Ds,{omit:["_evaluator"]}),zi("ZoomDependentExpression",s1),zi("ZoomConstantExpression",z1),zi("CompoundExpression",yi,{omit:["_evaluate"]});for(let s in ri)ri[s]._classRegistryKey||zi(`Expression_${s}`,ri[s]);function Yi(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function l1(s){return s.$name||s.constructor._classRegistryKey}function _c(s){return!function(t){if(t===null||typeof t!="object")return!1;let n=l1(t);return!(!n||n==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||Yi(s)||_a(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function Ko(s,t){if(_c(s))return(Yi(s)||_a(s))&&t&&t.push(s),ArrayBuffer.isView(s)&&t&&t.push(s.buffer),s instanceof ImageData&&t&&t.push(s.data.buffer),s;if(Array.isArray(s)){let m=[];for(let g of s)m.push(Ko(g,t));return m}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);let n=l1(s);if(!n)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!Ln[n])throw new Error(`${n} is not registered.`);let{klass:a}=Ln[n],c=a.serialize?a.serialize(s,t):{};if(a.serialize){if(t&&c===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let m in s){if(!s.hasOwnProperty(m)||Ln[n].omit.indexOf(m)>=0)continue;let g=s[m];c[m]=Ln[n].shallow.indexOf(m)>=0?g:Ko(g,t)}s instanceof Error&&(c.message=s.message)}if(c.$name)throw new Error("$name property is reserved for worker serialization logic.");return n!=="Object"&&(c.$name=n),c}function Xr(s){if(_c(s))return s;if(Array.isArray(s))return s.map(Xr);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);let t=l1(s)||"Object";if(!Ln[t])throw new Error(`can't deserialize unregistered class ${t}`);let{klass:n}=Ln[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(s);let a=Object.create(n.prototype);for(let c of Object.keys(s)){if(c==="$name")continue;let m=s[c];a[c]=Ln[t].shallow.indexOf(c)>=0?m:Xr(m)}return a}class Vo{constructor(){this.first=!0}update(t,n){let a=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=a,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=a,!0):(this.lastFloorZoom>a?(this.lastIntegerZoom=a+1,this.lastIntegerZoomTime=n):this.lastFloorZoom<a&&(this.lastIntegerZoom=a,this.lastIntegerZoomTime=n),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=a,!0))}}let Cr={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Hangul Syllables":s=>s>=44032&&s<=55215,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Mo(s){for(let t of s)if(c1(t.charCodeAt(0)))return!0;return!1}function F1(s){for(let t of s)if(!j1(t.charCodeAt(0)))return!1;return!0}function B1(s){let t=s.map(n=>{try{return new RegExp(`\\p{sc=${n}}`,"u").source}catch{return null}}).filter(n=>n);return new RegExp(t.join("|"),"u")}let yc=B1(["Arab","Dupl","Mong","Ougr","Syrc"]);function j1(s){return!yc.test(String.fromCodePoint(s))}let jl=B1(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function c1(s){return!(s!==746&&s!==747&&(s<4352||!(Cr["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Cr["CJK Compatibility"](s)||Cr["CJK Strokes"](s)||!(!Cr["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Cr["Enclosed CJK Letters and Months"](s)||Cr["Ideographic Description Characters"](s)||Cr.Kanbun(s)||Cr.Katakana(s)&&s!==12540||!(!Cr["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Cr["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Cr["Vertical Forms"](s)||Cr["Yijing Hexagram Symbols"](s)||/\p{sc=Cans}/u.test(String.fromCodePoint(s))||/\p{sc=Hang}/u.test(String.fromCodePoint(s))||jl.test(String.fromCodePoint(s)))))}function Qo(s){return!(c1(s)||function(t){return!!(Cr["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||Cr["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||Cr["Letterlike Symbols"](t)||Cr["Number Forms"](t)||Cr["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||Cr["Control Pictures"](t)&&t!==9251||Cr["Optical Character Recognition"](t)||Cr["Enclosed Alphanumerics"](t)||Cr["Geometric Shapes"](t)||Cr["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Cr["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Cr["CJK Symbols and Punctuation"](t)||Cr.Katakana(t)||Cr["Private Use Area"](t)||Cr["CJK Compatibility Forms"](t)||Cr["Small Form Variants"](t)||Cr["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(s))}let po=B1(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function u1(s){return po.test(String.fromCodePoint(s))}function bc(s,t){return!(!t&&u1(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Cr.Khmer(s))}function Vl(s){for(let t of s)if(u1(t.charCodeAt(0)))return!0;return!1}let Po=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){if(Po.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(s,t){return u(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(s.pluginStatus!=="loading")return this.setState(s),s;let n=s.pluginURL,a=new Promise(m=>{this.loadScriptResolve=m});t(n);let c=new Promise(m=>setTimeout(()=>m(),this.TIMEOUT));if(yield Promise.race([a,c]),this.isParsed()){let m={pluginStatus:"loaded",pluginURL:n};return this.setState(m),m}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${n}`)})}};class yn{constructor(t,n){this.zoom=t,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Vo,this.transition={})}isSupportedScript(t){return function(n,a){for(let c of n)if(!bc(c.charCodeAt(0),a))return!1;return!0}(t,Po.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let t=this.zoom,n=t-Math.floor(t),a=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:n+(1-n)*a}:{fromScale:.5,toScale:1,t:1-(1-a)*n}}}class Ul{constructor(t,n){this.property=t,this.value=n,this.expression=function(a,c){if(Pi(a))return new $l(a,c);if(jo(a)){let m=Cn(a,c);if(m.result==="error")throw new Error(m.value.map(g=>`${g.key}: ${g.message}`).join(", "));return m.value}{let m=a;return c.type==="color"&&typeof a=="string"?m=sr.parse(a):c.type!=="padding"||typeof a!="number"&&!Array.isArray(a)?c.type!=="numberArray"||typeof a!="number"&&!Array.isArray(a)?c.type!=="colorArray"||typeof a!="string"&&!Array.isArray(a)?c.type==="variableAnchorOffsetCollection"&&Array.isArray(a)?m=Ue.parse(a):c.type==="projectionDefinition"&&typeof a=="string"&&(m=qe.parse(a)):m=$e.parse(a):m=ln.parse(a):m=es.parse(a),{kind:"constant",evaluate:()=>m}}}(n===void 0?t.specification.default:n,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,n,a){return this.property.possiblyEvaluate(this,t,n,a)}}class V1{constructor(t){this.property=t,this.value=new Ul(t,void 0)}transitioned(t,n){return new vl(this.property,this.value,n,Hn({},t.transition,this.transition),t.now)}untransitioned(){return new vl(this.property,this.value,null,{},0)}}class vc{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return xs(this._values[t].value.value)}setValue(t,n){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new V1(this._values[t].property)),this._values[t].value=new Ul(this._values[t].property,n===null?void 0:xs(n))}getTransition(t){return xs(this._values[t].transition)}setTransition(t,n){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new V1(this._values[t].property)),this._values[t].transition=xs(n)||void 0}serialize(){let t={};for(let n of Object.keys(this._values)){let a=this.getValue(n);a!==void 0&&(t[n]=a);let c=this.getTransition(n);c!==void 0&&(t[`${n}-transition`]=c)}return t}transitioned(t,n){let a=new xl(this._properties);for(let c of Object.keys(this._values))a._values[c]=this._values[c].transitioned(t,n._values[c]);return a}untransitioned(){let t=new xl(this._properties);for(let n of Object.keys(this._values))t._values[n]=this._values[n].untransitioned();return t}}class vl{constructor(t,n,a,c,m){this.property=t,this.value=n,this.begin=m+c.delay||0,this.end=this.begin+c.duration||0,t.specification.transition&&(c.delay||c.duration)&&(this.prior=a)}possiblyEvaluate(t,n,a){let c=t.now||0,m=this.value.possiblyEvaluate(t,n,a),g=this.prior;if(g){if(c>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(c<this.begin)return g.possiblyEvaluate(t,n,a);{let x=(c-this.begin)/(this.end-this.begin);return this.property.interpolate(g.possiblyEvaluate(t,n,a),m,Ws(x))}}return m}}class xl{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,n,a){let c=new h1(this._properties);for(let m of Object.keys(this._values))c._values[m]=this._values[m].possiblyEvaluate(t,n,a);return c}hasTransition(){for(let t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class wl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return xs(this._values[t].value)}setValue(t,n){this._values[t]=new Ul(this._values[t].property,n===null?void 0:xs(n))}serialize(){let t={};for(let n of Object.keys(this._values)){let a=this.getValue(n);a!==void 0&&(t[n]=a)}return t}possiblyEvaluate(t,n,a){let c=new h1(this._properties);for(let m of Object.keys(this._values))c._values[m]=this._values[m].possiblyEvaluate(t,n,a);return c}}class ca{constructor(t,n,a){this.property=t,this.value=n,this.parameters=a}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,n,a,c){return this.property.evaluate(this.value,this.parameters,t,n,a,c)}}class h1{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class nr{constructor(t){this.specification=t}possiblyEvaluate(t,n){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(n)}interpolate(t,n,a){let c=st[this.specification.type];return c?c(t,n,a):t}}class pr{constructor(t,n){this.specification=t,this.overrides=n}possiblyEvaluate(t,n,a,c){return new ca(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(n,null,{},a,c)}:t.expression,n)}interpolate(t,n,a){if(t.value.kind!=="constant"||n.value.kind!=="constant")return t;if(t.value.value===void 0||n.value.value===void 0)return new ca(this,{kind:"constant",value:void 0},t.parameters);let c=st[this.specification.type];if(c){let m=c(t.value.value,n.value.value,a);return new ca(this,{kind:"constant",value:m},t.parameters)}return t}evaluate(t,n,a,c,m,g){return t.kind==="constant"?t.value:t.evaluate(n,a,c,m,g)}}class el extends pr{possiblyEvaluate(t,n,a,c){if(t.value===void 0)return new ca(this,{kind:"constant",value:void 0},n);if(t.expression.kind==="constant"){let m=t.expression.evaluate(n,null,{},a,c),g=t.property.specification.type==="resolvedImage"&&typeof m!="string"?m.name:m,x=this._calculate(g,g,g,n);return new ca(this,{kind:"constant",value:x},n)}if(t.expression.kind==="camera"){let m=this._calculate(t.expression.evaluate({zoom:n.zoom-1}),t.expression.evaluate({zoom:n.zoom}),t.expression.evaluate({zoom:n.zoom+1}),n);return new ca(this,{kind:"constant",value:m},n)}return new ca(this,t.expression,n)}evaluate(t,n,a,c,m,g){if(t.kind==="source"){let x=t.evaluate(n,a,c,m,g);return this._calculate(x,x,x,n)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(n.zoom)-1},a,c),t.evaluate({zoom:Math.floor(n.zoom)},a,c),t.evaluate({zoom:Math.floor(n.zoom)+1},a,c),n):t.value}_calculate(t,n,a,c){return c.zoom>c.zoomHistory.lastIntegerZoom?{from:t,to:n}:{from:a,to:n}}interpolate(t){return t}}class d1{constructor(t){this.specification=t}possiblyEvaluate(t,n,a,c){if(t.value!==void 0){if(t.expression.kind==="constant"){let m=t.expression.evaluate(n,null,{},a,c);return this._calculate(m,m,m,n)}return this._calculate(t.expression.evaluate(new yn(Math.floor(n.zoom-1),n)),t.expression.evaluate(new yn(Math.floor(n.zoom),n)),t.expression.evaluate(new yn(Math.floor(n.zoom+1),n)),n)}}_calculate(t,n,a,c){return c.zoom>c.zoomHistory.lastIntegerZoom?{from:t,to:n}:{from:a,to:n}}interpolate(t){return t}}class U1{constructor(t){this.specification=t}possiblyEvaluate(t,n,a,c){return!!t.expression.evaluate(n,null,{},a,c)}interpolate(){return!1}}class Xn{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let n in t){let a=t[n];a.specification.overridable&&this.overridableProperties.push(n);let c=this.defaultPropertyValues[n]=new Ul(a,void 0),m=this.defaultTransitionablePropertyValues[n]=new V1(a);this.defaultTransitioningPropertyValues[n]=m.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=c.possiblyEvaluate({})}}}zi("DataDrivenProperty",pr),zi("DataConstantProperty",nr),zi("CrossFadedDataDrivenProperty",el),zi("CrossFadedProperty",d1),zi("ColorRampProperty",U1);let p1="-transition";class Fa extends Se{constructor(t,n){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),n.layout&&(this._unevaluatedLayout=new wl(n.layout)),n.paint)){this._transitionablePaint=new vc(n.paint);for(let a in t.paint)this.setPaintProperty(a,t.paint[a],{validate:!1});for(let a in t.layout)this.setLayoutProperty(a,t.layout[a],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new h1(n.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,n,a={}){n!=null&&this._validate(Cs,`layers.${this.id}.layout.${t}`,t,n,a)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,n):this.visibility=n)}getPaintProperty(t){return t.endsWith(p1)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,n,a={}){if(n!=null&&this._validate(js,`layers.${this.id}.paint.${t}`,t,n,a))return!1;if(t.endsWith(p1))return this._transitionablePaint.setTransition(t.slice(0,-11),n||void 0),!1;{let c=this._transitionablePaint._values[t],m=c.property.specification["property-type"]==="cross-faded-data-driven",g=c.value.isDataDriven(),x=c.value;this._transitionablePaint.setValue(t,n),this._handleSpecialPaintPropertyUpdate(t);let S=this._transitionablePaint._values[t].value;return S.isDataDriven()||g||m||this._handleOverridablePaintPropertyUpdate(t,x,S)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,n,a){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,n){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,n)}serialize(){let t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Rs(t,(n,a)=>!(n===void 0||a==="layout"&&!Object.keys(n).length||a==="paint"&&!Object.keys(n).length))}_validate(t,n,a,c,m={}){return(!m||m.validate!==!1)&&o1(this,t.call(os,{key:n,layerType:this.type,objectKey:a,value:c,styleSpec:te,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let t in this.paint._values){let n=this.paint.get(t);if(n instanceof ca&&Ni(n.property.specification)&&(n.value.kind==="source"||n.value.kind==="composite")&&n.value.isStateDependent)return!0}return!1}}let fo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class tl{constructor(t,n){this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class bn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,n){return t._trim(),n&&(t.isTransferred=!0,n.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){let n=Object.create(this.prototype);return n.arrayBuffer=t.arrayBuffer,n.length=t.length,n.capacity=t.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function fn(s,t=1){let n=0,a=0;return{members:s.map(c=>{let m=fo[c.type].BYTES_PER_ELEMENT,g=n=Ro(n,Math.max(t,m)),x=c.components||1;return a=Math.max(a,m),n+=m*x,{name:c.name,type:c.type,components:x,offset:g}}),size:Ro(n,Math.max(a,t)),alignment:t}}function Ro(s,t){return Math.ceil(s/t)*t}class Ba extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n){let a=this.length;return this.resize(a+1),this.emplace(a,t,n)}emplace(t,n,a){let c=2*t;return this.int16[c+0]=n,this.int16[c+1]=a,t}}Ba.prototype.bytesPerElement=4,zi("StructArrayLayout2i4",Ba);class il extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,a){let c=this.length;return this.resize(c+1),this.emplace(c,t,n,a)}emplace(t,n,a,c){let m=3*t;return this.int16[m+0]=n,this.int16[m+1]=a,this.int16[m+2]=c,t}}il.prototype.bytesPerElement=6,zi("StructArrayLayout3i6",il);class rl extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,a,c){let m=this.length;return this.resize(m+1),this.emplace(m,t,n,a,c)}emplace(t,n,a,c,m){let g=4*t;return this.int16[g+0]=n,this.int16[g+1]=a,this.int16[g+2]=c,this.int16[g+3]=m,t}}rl.prototype.bytesPerElement=8,zi("StructArrayLayout4i8",rl);class ua extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,a,c,m,g){let x=this.length;return this.resize(x+1),this.emplace(x,t,n,a,c,m,g)}emplace(t,n,a,c,m,g,x){let S=6*t;return this.int16[S+0]=n,this.int16[S+1]=a,this.int16[S+2]=c,this.int16[S+3]=m,this.int16[S+4]=g,this.int16[S+5]=x,t}}ua.prototype.bytesPerElement=12,zi("StructArrayLayout2i4i12",ua);class Vs extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,a,c,m,g){let x=this.length;return this.resize(x+1),this.emplace(x,t,n,a,c,m,g)}emplace(t,n,a,c,m,g,x){let S=4*t,M=8*t;return this.int16[S+0]=n,this.int16[S+1]=a,this.uint8[M+4]=c,this.uint8[M+5]=m,this.uint8[M+6]=g,this.uint8[M+7]=x,t}}Vs.prototype.bytesPerElement=8,zi("StructArrayLayout2i4ub8",Vs);class ls extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n){let a=this.length;return this.resize(a+1),this.emplace(a,t,n)}emplace(t,n,a){let c=2*t;return this.float32[c+0]=n,this.float32[c+1]=a,t}}ls.prototype.bytesPerElement=8,zi("StructArrayLayout2f8",ls);class Us extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,a,c,m,g,x,S,M,L){let z=this.length;return this.resize(z+1),this.emplace(z,t,n,a,c,m,g,x,S,M,L)}emplace(t,n,a,c,m,g,x,S,M,L,z){let U=10*t;return this.uint16[U+0]=n,this.uint16[U+1]=a,this.uint16[U+2]=c,this.uint16[U+3]=m,this.uint16[U+4]=g,this.uint16[U+5]=x,this.uint16[U+6]=S,this.uint16[U+7]=M,this.uint16[U+8]=L,this.uint16[U+9]=z,t}}Us.prototype.bytesPerElement=20,zi("StructArrayLayout10ui20",Us);class h extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,a,c,m,g,x,S,M,L,z,U){let G=this.length;return this.resize(G+1),this.emplace(G,t,n,a,c,m,g,x,S,M,L,z,U)}emplace(t,n,a,c,m,g,x,S,M,L,z,U,G){let Z=12*t;return this.int16[Z+0]=n,this.int16[Z+1]=a,this.int16[Z+2]=c,this.int16[Z+3]=m,this.uint16[Z+4]=g,this.uint16[Z+5]=x,this.uint16[Z+6]=S,this.uint16[Z+7]=M,this.int16[Z+8]=L,this.int16[Z+9]=z,this.int16[Z+10]=U,this.int16[Z+11]=G,t}}h.prototype.bytesPerElement=24,zi("StructArrayLayout4i4ui4i24",h);class e extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,a){let c=this.length;return this.resize(c+1),this.emplace(c,t,n,a)}emplace(t,n,a,c){let m=3*t;return this.float32[m+0]=n,this.float32[m+1]=a,this.float32[m+2]=c,t}}e.prototype.bytesPerElement=12,zi("StructArrayLayout3f12",e);class r extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){let n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.uint32[1*t+0]=n,t}}r.prototype.bytesPerElement=4,zi("StructArrayLayout1ul4",r);class o extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,a,c,m,g,x,S,M){let L=this.length;return this.resize(L+1),this.emplace(L,t,n,a,c,m,g,x,S,M)}emplace(t,n,a,c,m,g,x,S,M,L){let z=10*t,U=5*t;return this.int16[z+0]=n,this.int16[z+1]=a,this.int16[z+2]=c,this.int16[z+3]=m,this.int16[z+4]=g,this.int16[z+5]=x,this.uint32[U+3]=S,this.uint16[z+8]=M,this.uint16[z+9]=L,t}}o.prototype.bytesPerElement=20,zi("StructArrayLayout6i1ul2ui20",o);class l extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,a,c,m,g){let x=this.length;return this.resize(x+1),this.emplace(x,t,n,a,c,m,g)}emplace(t,n,a,c,m,g,x){let S=6*t;return this.int16[S+0]=n,this.int16[S+1]=a,this.int16[S+2]=c,this.int16[S+3]=m,this.int16[S+4]=g,this.int16[S+5]=x,t}}l.prototype.bytesPerElement=12,zi("StructArrayLayout2i2i2i12",l);class d extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,a,c,m){let g=this.length;return this.resize(g+1),this.emplace(g,t,n,a,c,m)}emplace(t,n,a,c,m,g){let x=4*t,S=8*t;return this.float32[x+0]=n,this.float32[x+1]=a,this.float32[x+2]=c,this.int16[S+6]=m,this.int16[S+7]=g,t}}d.prototype.bytesPerElement=16,zi("StructArrayLayout2f1f2i16",d);class b extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,n,a,c,m,g){let x=this.length;return this.resize(x+1),this.emplace(x,t,n,a,c,m,g)}emplace(t,n,a,c,m,g,x){let S=16*t,M=4*t,L=8*t;return this.uint8[S+0]=n,this.uint8[S+1]=a,this.float32[M+1]=c,this.float32[M+2]=m,this.int16[L+6]=g,this.int16[L+7]=x,t}}b.prototype.bytesPerElement=16,zi("StructArrayLayout2ub2f2i16",b);class E extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,a){let c=this.length;return this.resize(c+1),this.emplace(c,t,n,a)}emplace(t,n,a,c){let m=3*t;return this.uint16[m+0]=n,this.uint16[m+1]=a,this.uint16[m+2]=c,t}}E.prototype.bytesPerElement=6,zi("StructArrayLayout3ui6",E);class C extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,a,c,m,g,x,S,M,L,z,U,G,Z,J,ne,he){let Te=this.length;return this.resize(Te+1),this.emplace(Te,t,n,a,c,m,g,x,S,M,L,z,U,G,Z,J,ne,he)}emplace(t,n,a,c,m,g,x,S,M,L,z,U,G,Z,J,ne,he,Te){let me=24*t,q=12*t,re=48*t;return this.int16[me+0]=n,this.int16[me+1]=a,this.uint16[me+2]=c,this.uint16[me+3]=m,this.uint32[q+2]=g,this.uint32[q+3]=x,this.uint32[q+4]=S,this.uint16[me+10]=M,this.uint16[me+11]=L,this.uint16[me+12]=z,this.float32[q+7]=U,this.float32[q+8]=G,this.uint8[re+36]=Z,this.uint8[re+37]=J,this.uint8[re+38]=ne,this.uint32[q+10]=he,this.int16[me+22]=Te,t}}C.prototype.bytesPerElement=48,zi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",C);class k extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,a,c,m,g,x,S,M,L,z,U,G,Z,J,ne,he,Te,me,q,re,ye,ct,Kt,vt,Ft,hi,Qt){let fi=this.length;return this.resize(fi+1),this.emplace(fi,t,n,a,c,m,g,x,S,M,L,z,U,G,Z,J,ne,he,Te,me,q,re,ye,ct,Kt,vt,Ft,hi,Qt)}emplace(t,n,a,c,m,g,x,S,M,L,z,U,G,Z,J,ne,he,Te,me,q,re,ye,ct,Kt,vt,Ft,hi,Qt,fi){let qt=32*t,er=16*t;return this.int16[qt+0]=n,this.int16[qt+1]=a,this.int16[qt+2]=c,this.int16[qt+3]=m,this.int16[qt+4]=g,this.int16[qt+5]=x,this.int16[qt+6]=S,this.int16[qt+7]=M,this.uint16[qt+8]=L,this.uint16[qt+9]=z,this.uint16[qt+10]=U,this.uint16[qt+11]=G,this.uint16[qt+12]=Z,this.uint16[qt+13]=J,this.uint16[qt+14]=ne,this.uint16[qt+15]=he,this.uint16[qt+16]=Te,this.uint16[qt+17]=me,this.uint16[qt+18]=q,this.uint16[qt+19]=re,this.uint16[qt+20]=ye,this.uint16[qt+21]=ct,this.uint16[qt+22]=Kt,this.uint32[er+12]=vt,this.float32[er+13]=Ft,this.float32[er+14]=hi,this.uint16[qt+30]=Qt,this.uint16[qt+31]=fi,t}}k.prototype.bytesPerElement=64,zi("StructArrayLayout8i15ui1ul2f2ui64",k);class O extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){let n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.float32[1*t+0]=n,t}}O.prototype.bytesPerElement=4,zi("StructArrayLayout1f4",O);class j extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,a){let c=this.length;return this.resize(c+1),this.emplace(c,t,n,a)}emplace(t,n,a,c){let m=3*t;return this.uint16[6*t+0]=n,this.float32[m+1]=a,this.float32[m+2]=c,t}}j.prototype.bytesPerElement=12,zi("StructArrayLayout1ui2f12",j);class B extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n,a){let c=this.length;return this.resize(c+1),this.emplace(c,t,n,a)}emplace(t,n,a,c){let m=4*t;return this.uint32[2*t+0]=n,this.uint16[m+2]=a,this.uint16[m+3]=c,t}}B.prototype.bytesPerElement=8,zi("StructArrayLayout1ul2ui8",B);class H extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,n){let a=this.length;return this.resize(a+1),this.emplace(a,t,n)}emplace(t,n,a){let c=2*t;return this.uint16[c+0]=n,this.uint16[c+1]=a,t}}H.prototype.bytesPerElement=4,zi("StructArrayLayout2ui4",H);class X extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){let n=this.length;return this.resize(n+1),this.emplace(n,t)}emplace(t,n){return this.uint16[1*t+0]=n,t}}X.prototype.bytesPerElement=2,zi("StructArrayLayout1ui2",X);class le extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,n,a,c){let m=this.length;return this.resize(m+1),this.emplace(m,t,n,a,c)}emplace(t,n,a,c,m){let g=4*t;return this.float32[g+0]=n,this.float32[g+1]=a,this.float32[g+2]=c,this.float32[g+3]=m,t}}le.prototype.bytesPerElement=16,zi("StructArrayLayout4f16",le);class oe extends tl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new bi(this.anchorPointX,this.anchorPointY)}}oe.prototype.size=20;class ce extends o{get(t){return new oe(this,t)}}zi("CollisionBoxArray",ce);class fe extends tl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}fe.prototype.size=48;class xe extends C{get(t){return new fe(this,t)}}zi("PlacedSymbolArray",xe);class be extends tl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}be.prototype.size=64;class Ee extends k{get(t){return new be(this,t)}}zi("SymbolInstanceArray",Ee);class Ce extends O{getoffsetX(t){return this.float32[1*t+0]}}zi("GlyphOffsetArray",Ce);class we extends il{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}zi("SymbolLineVertexArray",we);class Je extends tl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Je.prototype.size=12;class Bt extends j{get(t){return new Je(this,t)}}zi("TextAnchorOffsetArray",Bt);class gt extends tl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}gt.prototype.size=8;class wt extends B{get(t){return new gt(this,t)}}zi("FeatureIndexArray",wt);class bt extends Ba{}class Ei extends Ba{}class ti extends Ba{}class Jt extends ua{}class Zi extends Vs{}class Ir extends ls{}class Dr extends Us{}class vn extends h{}class Qr extends e{}class En extends r{}class Tn extends l{}class mn extends b{}class Jr extends E{}class cs extends H{}let gs=fn([{name:"a_pos",components:2,type:"Int16"}],4),{members:_s}=gs;class Zr{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t}prepareSegment(t,n,a,c){let m=this.segments[this.segments.length-1];return t>Zr.MAX_VERTEX_ARRAY_LENGTH&&hs(`Max vertices per segment is ${Zr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Zr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!m||m.vertexLength+t>Zr.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==c?this.createNewSegment(n,a,c):m}createNewSegment(t,n,a){let c={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0,vaos:{}};return a!==void 0&&(c.sortKey=a),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(c),c}getOrCreateLatestSegment(t,n,a){return this.prepareSegment(0,t,n,a)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let t of this.segments)for(let n in t.vaos)t.vaos[n].destroy()}static simpleSegment(t,n,a,c){return new Zr([{vertexOffset:t,primitiveOffset:n,vertexLength:a,primitiveLength:c,vaos:{},sortKey:0}])}}function ko(s,t){return 256*(s=Zn(Math.floor(s),0,255))+Zn(Math.floor(t),0,255)}Zr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,zi("SegmentVector",Zr);let ys=fn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Do,nl,Vn,Pn={exports:{}},sl={exports:{}},Ra={exports:{}},mo=function(){if(Vn)return Pn.exports;Vn=1;var s=(Do||(Do=1,sl.exports=function(n,a){var c,m,g,x,S,M,L,z;for(m=n.length-(c=3&n.length),g=a,S=3432918353,M=461845907,z=0;z<m;)L=255&n.charCodeAt(z)|(255&n.charCodeAt(++z))<<8|(255&n.charCodeAt(++z))<<16|(255&n.charCodeAt(++z))<<24,++z,g=27492+(65535&(x=5*(65535&(g=(g^=L=(65535&(L=(L=(65535&L)*S+(((L>>>16)*S&65535)<<16)&4294967295)<<15|L>>>17))*M+(((L>>>16)*M&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(L=0,c){case 3:L^=(255&n.charCodeAt(z+2))<<16;case 2:L^=(255&n.charCodeAt(z+1))<<8;case 1:g^=L=(65535&(L=(L=(65535&(L^=255&n.charCodeAt(z)))*S+(((L>>>16)*S&65535)<<16)&4294967295)<<15|L>>>17))*M+(((L>>>16)*M&65535)<<16)&4294967295}return g^=n.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0}),sl.exports),t=(nl||(nl=1,Ra.exports=function(n,a){for(var c,m=n.length,g=a^m,x=0;m>=4;)c=1540483477*(65535&(c=255&n.charCodeAt(x)|(255&n.charCodeAt(++x))<<8|(255&n.charCodeAt(++x))<<16|(255&n.charCodeAt(++x))<<24))+((1540483477*(c>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(c=1540483477*(65535&(c^=c>>>24))+((1540483477*(c>>>16)&65535)<<16)),m-=4,++x;switch(m){case 3:g^=(255&n.charCodeAt(x+2))<<16;case 2:g^=(255&n.charCodeAt(x+1))<<8;case 1:g=1540483477*(65535&(g^=255&n.charCodeAt(x)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0}),Ra.exports);return Pn.exports=s,Pn.exports.murmur3=s,Pn.exports.murmur2=t,Pn.exports}(),to=tt(mo);class go{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,n,a,c){this.ids.push(On(t)),this.positions.push(n,a,c)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let n=On(t),a=0,c=this.ids.length-1;for(;a<c;){let g=a+c>>1;this.ids[g]>=n?c=g:a=g+1}let m=[];for(;this.ids[a]===n;)m.push({index:this.positions[3*a],start:this.positions[3*a+1],end:this.positions[3*a+2]}),a++;return m}static serialize(t,n){let a=new Float64Array(t.ids),c=new Uint32Array(t.positions);return Nn(a,c,0,a.length-1),n&&n.push(a.buffer,c.buffer),{ids:a,positions:c}}static deserialize(t){let n=new go;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}function On(s){let t=+s;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:to(String(s))}function Nn(s,t,n,a){for(;n<a;){let c=s[n+a>>1],m=n-1,g=a+1;for(;;){do m++;while(s[m]<c);do g--;while(s[g]>c);if(m>=g)break;bs(s,m,g),bs(t,3*m,3*g),bs(t,3*m+1,3*g+1),bs(t,3*m+2,3*g+2)}g-n<a-g?(Nn(s,t,n,g),n=g+1):(Nn(s,t,g+1,a),a=g)}}function bs(s,t,n){let a=s[t];s[t]=s[n],s[n]=a}zi("FeaturePositionMap",go);class an{constructor(t,n){this.gl=t.gl,this.location=n}}class al extends an{constructor(t,n){super(t,n),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class ql extends an{constructor(t,n){super(t,n),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Gl extends an{constructor(t,n){super(t,n),this.current=sr.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}let q1=new Float32Array(16);function ol(s){return[ko(255*s.r,255*s.g),ko(255*s.b,255*s.a)]}class ll{constructor(t,n,a){this.value=t,this.uniformNames=n.map(c=>`u_${c}`),this.type=a}setUniform(t,n,a){t.set(a.constantOr(this.value))}getBinding(t,n,a){return this.type==="color"?new Gl(t,n):new al(t,n)}}class zn{constructor(t,n){this.uniformNames=n.map(a=>`u_${a}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,n){this.pixelRatioFrom=n.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=n.tlbr,this.patternTo=t.tlbr}setUniform(t,n,a,c){let m=c==="u_pattern_to"?this.patternTo:c==="u_pattern_from"?this.patternFrom:c==="u_pixel_ratio_to"?this.pixelRatioTo:c==="u_pixel_ratio_from"?this.pixelRatioFrom:null;m&&t.set(m)}getBinding(t,n,a){return a.substr(0,9)==="u_pattern"?new ql(t,n):new al(t,n)}}class _o{constructor(t,n,a,c){this.expression=t,this.type=a,this.maxValue=0,this.paintVertexAttributes=n.map(m=>({name:`a_${m}`,type:"Float32",components:a==="color"?2:1,offset:0})),this.paintVertexArray=new c}populatePaintArray(t,n,a,c,m){let g=this.paintVertexArray.length,x=this.expression.evaluate(new yn(0),n,{},c,[],m);this.paintVertexArray.resize(t),this._setPaintValue(g,t,x)}updatePaintArray(t,n,a,c){let m=this.expression.evaluate({zoom:0},a,c);this._setPaintValue(t,n,m)}_setPaintValue(t,n,a){if(this.type==="color"){let c=ol(a);for(let m=t;m<n;m++)this.paintVertexArray.emplace(m,c[0],c[1])}else{for(let c=t;c<n;c++)this.paintVertexArray.emplace(c,a);this.maxValue=Math.max(this.maxValue,Math.abs(a))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ja{constructor(t,n,a,c,m,g){this.expression=t,this.uniformNames=n.map(x=>`u_${x}_t`),this.type=a,this.useIntegerZoom=c,this.zoom=m,this.maxValue=0,this.paintVertexAttributes=n.map(x=>({name:`a_${x}`,type:"Float32",components:a==="color"?4:2,offset:0})),this.paintVertexArray=new g}populatePaintArray(t,n,a,c,m){let g=this.expression.evaluate(new yn(this.zoom),n,{},c,[],m),x=this.expression.evaluate(new yn(this.zoom+1),n,{},c,[],m),S=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(S,t,g,x)}updatePaintArray(t,n,a,c){let m=this.expression.evaluate({zoom:this.zoom},a,c),g=this.expression.evaluate({zoom:this.zoom+1},a,c);this._setPaintValue(t,n,m,g)}_setPaintValue(t,n,a,c){if(this.type==="color"){let m=ol(a),g=ol(c);for(let x=t;x<n;x++)this.paintVertexArray.emplace(x,m[0],m[1],g[0],g[1])}else{for(let m=t;m<n;m++)this.paintVertexArray.emplace(m,a,c);this.maxValue=Math.max(this.maxValue,Math.abs(a),Math.abs(c))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,n){let a=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,c=Zn(this.expression.interpolationFactor(a,this.zoom,this.zoom+1),0,1);t.set(c)}getBinding(t,n,a){return new al(t,n)}}class Jn{constructor(t,n,a,c,m,g){this.expression=t,this.type=n,this.useIntegerZoom=a,this.zoom=c,this.layerId=g,this.zoomInPaintVertexArray=new m,this.zoomOutPaintVertexArray=new m}populatePaintArray(t,n,a){let c=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(c,t,n.patterns&&n.patterns[this.layerId],a)}updatePaintArray(t,n,a,c,m){this._setPaintValues(t,n,a.patterns&&a.patterns[this.layerId],m)}_setPaintValues(t,n,a,c){if(!c||!a)return;let{min:m,mid:g,max:x}=a,S=c[m],M=c[g],L=c[x];if(S&&M&&L)for(let z=t;z<n;z++)this.zoomInPaintVertexArray.emplace(z,M.tl[0],M.tl[1],M.br[0],M.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],M.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(z,M.tl[0],M.tl[1],M.br[0],M.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],M.pixelRatio,L.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,ys.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,ys.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class cl{constructor(t,n,a){this.binders={},this._buffers=[];let c=[];for(let m in t.paint._values){if(!a(m))continue;let g=t.paint.get(m);if(!(g instanceof ca&&Ni(g.property.specification)))continue;let x=G1(m,t.type),S=g.value,M=g.property.specification.type,L=g.property.useIntegerZoom,z=g.property.specification["property-type"],U=z==="cross-faded"||z==="cross-faded-data-driven";if(S.kind==="constant")this.binders[m]=U?new zn(S.value,x):new ll(S.value,x,M),c.push(`/u_${m}`);else if(S.kind==="source"||U){let G=Ru(m,M,"source");this.binders[m]=U?new Jn(S,M,L,n,G,t.id):new _o(S,x,M,G),c.push(`/a_${m}`)}else{let G=Ru(m,M,"composite");this.binders[m]=new ja(S,x,M,L,n,G),c.push(`/z_${m}`)}}this.cacheKey=c.sort().join("")}getMaxValue(t){let n=this.binders[t];return n instanceof _o||n instanceof ja?n.maxValue:0}populatePaintArrays(t,n,a,c,m){for(let g in this.binders){let x=this.binders[g];(x instanceof _o||x instanceof ja||x instanceof Jn)&&x.populatePaintArray(t,n,a,c,m)}}setConstantPatternPositions(t,n){for(let a in this.binders){let c=this.binders[a];c instanceof zn&&c.setConstantPatternPositions(t,n)}}updatePaintArrays(t,n,a,c,m){let g=!1;for(let x in t){let S=n.getPositions(x);for(let M of S){let L=a.feature(M.index);for(let z in this.binders){let U=this.binders[z];if((U instanceof _o||U instanceof ja||U instanceof Jn)&&U.expression.isStateDependent===!0){let G=c.paint.get(z);U.expression=G.value,U.updatePaintArray(M.start,M.end,L,t[x],m),g=!0}}}}return g}defines(){let t=[];for(let n in this.binders){let a=this.binders[n];(a instanceof ll||a instanceof zn)&&t.push(...a.uniformNames.map(c=>`#define HAS_UNIFORM_${c}`))}return t}getBinderAttributes(){let t=[];for(let n in this.binders){let a=this.binders[n];if(a instanceof _o||a instanceof ja)for(let c=0;c<a.paintVertexAttributes.length;c++)t.push(a.paintVertexAttributes[c].name);else if(a instanceof Jn)for(let c=0;c<ys.members.length;c++)t.push(ys.members[c].name)}return t}getBinderUniforms(){let t=[];for(let n in this.binders){let a=this.binders[n];if(a instanceof ll||a instanceof zn||a instanceof ja)for(let c of a.uniformNames)t.push(c)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,n){let a=[];for(let c in this.binders){let m=this.binders[c];if(m instanceof ll||m instanceof zn||m instanceof ja){for(let g of m.uniformNames)if(n[g]){let x=m.getBinding(t,n[g],g);a.push({name:g,property:c,binding:x})}}}return a}setUniforms(t,n,a,c){for(let{name:m,property:g,binding:x}of n)this.binders[g].setUniform(x,c,a.get(g),m)}updatePaintBuffers(t){this._buffers=[];for(let n in this.binders){let a=this.binders[n];if(t&&a instanceof Jn){let c=t.fromScale===2?a.zoomInPaintVertexBuffer:a.zoomOutPaintVertexBuffer;c&&this._buffers.push(c)}else(a instanceof _o||a instanceof ja)&&a.paintVertexBuffer&&this._buffers.push(a.paintVertexBuffer)}}upload(t){for(let n in this.binders){let a=this.binders[n];(a instanceof _o||a instanceof ja||a instanceof Jn)&&a.upload(t)}this.updatePaintBuffers()}destroy(){for(let t in this.binders){let n=this.binders[t];(n instanceof _o||n instanceof ja||n instanceof Jn)&&n.destroy()}}}class ha{constructor(t,n,a=()=>!0){this.programConfigurations={};for(let c of t)this.programConfigurations[c.id]=new cl(c,n,a);this.needsUpload=!1,this._featureMap=new go,this._bufferOffset=0}populatePaintArrays(t,n,a,c,m,g){for(let x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(t,n,c,m,g);n.id!==void 0&&this._featureMap.add(n.id,a,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,n,a,c){for(let m of a)this.needsUpload=this.programConfigurations[m.id].updatePaintArrays(t,this._featureMap,n,m,c)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(let n in this.programConfigurations)this.programConfigurations[n].upload(t);this.needsUpload=!1}}destroy(){for(let t in this.programConfigurations)this.programConfigurations[t].destroy()}}function G1(s,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${t}-`,"").replace(/-/g,"_")]}function Ru(s,t,n){let a={color:{source:ls,composite:le},number:{source:O,composite:ls}},c=function(m){return{"line-pattern":{source:Dr,composite:Dr},"fill-pattern":{source:Dr,composite:Dr},"fill-extrusion-pattern":{source:Dr,composite:Dr}}[m]}(s);return c&&c[n]||a[t][n]}zi("ConstantBinder",ll),zi("CrossFadedConstantBinder",zn),zi("SourceExpressionBinder",_o),zi("CrossFadedCompositeBinder",Jn),zi("CompositeExpressionBinder",ja),zi("ProgramConfiguration",cl,{omit:["_buffers"]}),zi("ProgramConfigurationSet",ha);let Zc=Math.pow(2,14)-1,ku=-Zc-1;function Zl(s){let t=Er/s.extent,n=s.loadGeometry();for(let a=0;a<n.length;a++){let c=n[a];for(let m=0;m<c.length;m++){let g=c[m],x=Math.round(g.x*t),S=Math.round(g.y*t);g.x=Zn(x,ku,Zc),g.y=Zn(S,ku,Zc),(x<g.x||x>g.x+1||S<g.y||S>g.y+1)&&hs("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function Hl(s,t){return{type:s.type,id:s.id,properties:s.properties,geometry:t?Zl(s):[]}}let Hc=-32768;function uh(s,t,n,a,c){s.emplaceBack(Hc+8*t+a,Hc+8*n+c)}class Wc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ei,this.indexArray=new Jr,this.segments=new Zr,this.programConfigurations=new ha(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,a){let c=this.layers[0],m=[],g=null,x=!1,S=c.type==="heatmap";if(c.type==="circle"){let L=c;g=L.layout.get("circle-sort-key"),x=!g.isConstant(),S=S||L.paint.get("circle-pitch-alignment")==="map"}let M=S?n.subdivisionGranularity.circle:1;for(let{feature:L,id:z,index:U,sourceLayerIndex:G}of t){let Z=this.layers[0]._featureFilter.needGeometry,J=Hl(L,Z);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom),J,a))continue;let ne=x?g.evaluate(J,{},a):void 0,he={id:z,properties:L.properties,type:L.type,sourceLayerIndex:G,index:U,geometry:Z?J.geometry:Zl(L),patterns:{},sortKey:ne};m.push(he)}x&&m.sort((L,z)=>L.sortKey-z.sortKey);for(let L of m){let{geometry:z,index:U,sourceLayerIndex:G}=L,Z=t[U].feature;this.addFeature(L,z,U,a,M),n.featureIndex.insert(Z,z,U,G,this.index)}}update(t,n,a){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,a)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_s),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,n,a,c,m=1){let g;switch(m){case 1:g=[0,7];break;case 3:g=[0,2,5,7];break;case 5:g=[0,1,3,4,6,7];break;case 7:g=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${m}; valid values are 1, 3, 5, 7.`)}let x=g.length;for(let S of n)for(let M of S){let L=M.x,z=M.y;if(L<0||L>=Er||z<0||z>=Er)continue;let U=this.segments.prepareSegment(x*x,this.layoutVertexArray,this.indexArray,t.sortKey),G=U.vertexLength;for(let Z=0;Z<x;Z++)for(let J=0;J<x;J++)uh(this.layoutVertexArray,L,z,g[J],g[Z]);for(let Z=0;Z<x-1;Z++)for(let J=0;J<x-1;J++){let ne=G+Z*x+J,he=G+(Z+1)*x+J;this.indexArray.emplaceBack(ne,he+1,ne+1),this.indexArray.emplaceBack(ne,he,he+1)}U.vertexLength+=x*x,U.primitiveLength+=(x-1)*(x-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,a,{},c)}}function Du(s,t){for(let n=0;n<s.length;n++)if(Wl(t,s[n]))return!0;for(let n=0;n<t.length;n++)if(Wl(s,t[n]))return!0;return!!xc(s,t)}function hh(s,t,n){return!!Wl(s,t)||!!Jc(t,s,n)}function Xc(s,t){if(s.length===1)return Ou(t,s[0]);for(let n=0;n<t.length;n++){let a=t[n];for(let c=0;c<a.length;c++)if(Wl(s,a[c]))return!0}for(let n=0;n<s.length;n++)if(Ou(t,s[n]))return!0;for(let n=0;n<t.length;n++)if(xc(s,t[n]))return!0;return!1}function dh(s,t,n){if(s.length>1){if(xc(s,t))return!0;for(let a=0;a<t.length;a++)if(Jc(t[a],s,n))return!0}for(let a=0;a<s.length;a++)if(Jc(s[a],t,n))return!0;return!1}function xc(s,t){if(s.length===0||t.length===0)return!1;for(let n=0;n<s.length-1;n++){let a=s[n],c=s[n+1];for(let m=0;m<t.length-1;m++)if(Lu(a,c,t[m],t[m+1]))return!0}return!1}function Lu(s,t,n,a){return on(s,n,a)!==on(t,n,a)&&on(s,t,n)!==on(s,t,a)}function Jc(s,t,n){let a=n*n;if(t.length===1)return s.distSqr(t[0])<a;for(let c=1;c<t.length;c++)if(wa(s,t[c-1],t[c])<a)return!0;return!1}function wa(s,t,n){let a=t.distSqr(n);if(a===0)return s.distSqr(t);let c=((s.x-t.x)*(n.x-t.x)+(s.y-t.y)*(n.y-t.y))/a;return s.distSqr(c<0?t:c>1?n:n.sub(t)._mult(c)._add(t))}function Ou(s,t){for(let n=0;n<s.length;n++)if(Wl(s[n],t))return!0;return!1}function Wl(s,t){let n=!1;for(let a=0,c=s.length-1;a<s.length;c=a++){let m=s[a],g=s[c];m.y>t.y!=g.y>t.y&&t.x<(g.x-m.x)*(t.y-m.y)/(g.y-m.y)+m.x&&(n=!n)}return n}function ph(s,t,n){let a=n[0],c=n[2];if(s.x<a.x&&t.x<a.x||s.x>c.x&&t.x>c.x||s.y<a.y&&t.y<a.y||s.y>c.y&&t.y>c.y)return!1;let m=on(s,t,n[0]);return m!==on(s,t,n[1])||m!==on(s,t,n[2])||m!==on(s,t,n[3])}function Z1(s,t,n){let a=t.paint.get(s).value;return a.kind==="constant"?a.value:n.programConfigurations.get(t.id).getMaxValue(s)}function wc(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function f1(s,t,n,a,c){if(!t[0]&&!t[1])return s;let m=bi.convert(t)._mult(c);n==="viewport"&&m._rotate(-a);let g=[];for(let x=0;x<s.length;x++)g.push(s[x].sub(m));return g}let Yc,Kc;zi("CircleBucket",Wc,{omit:["layers"]});var Ec={get paint(){return Kc=Kc||new Xn({"circle-radius":new pr(te.paint_circle["circle-radius"]),"circle-color":new pr(te.paint_circle["circle-color"]),"circle-blur":new pr(te.paint_circle["circle-blur"]),"circle-opacity":new pr(te.paint_circle["circle-opacity"]),"circle-translate":new nr(te.paint_circle["circle-translate"]),"circle-translate-anchor":new nr(te.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new nr(te.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new nr(te.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new pr(te.paint_circle["circle-stroke-width"]),"circle-stroke-color":new pr(te.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new pr(te.paint_circle["circle-stroke-opacity"])})},get layout(){return Yc=Yc||new Xn({"circle-sort-key":new pr(te.layout_circle["circle-sort-key"])})}};class m1 extends Fa{constructor(t){super(t,Ec)}createBucket(t){return new Wc(t)}queryRadius(t){let n=t;return Z1("circle-radius",this,n)+Z1("circle-stroke-width",this,n)+wc(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:n,featureState:a,geometry:c,transform:m,pixelsToTileUnits:g,unwrappedTileID:x,getElevation:S}){let M=f1(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-m.bearingInRadians,g),L=this.paint.get("circle-radius").evaluate(n,a)+this.paint.get("circle-stroke-width").evaluate(n,a),z=this.paint.get("circle-pitch-alignment")==="map",U=z?M:function(Z,J,ne,he){return Z.map(Te=>g1(Te,J,ne,he))}(M,m,x,S),G=z?L*g:L;for(let Z of c)for(let J of Z){let ne=z?J:g1(J,m,x,S),he=G,Te=m.projectTileCoordinates(J.x,J.y,x,S).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?he*=Te/m.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(he*=m.cameraToCenterDistance/Te),hh(U,ne,he))return!0}return!1}}function g1(s,t,n,a){let c=t.projectTileCoordinates(s.x,s.y,n,a).point;return new bi((.5*c.x+.5)*t.width,(.5*-c.y+.5)*t.height)}class _1 extends Wc{}let y1;zi("HeatmapBucket",_1,{omit:["layers"]});var fh={get paint(){return y1=y1||new Xn({"heatmap-radius":new pr(te.paint_heatmap["heatmap-radius"]),"heatmap-weight":new pr(te.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new nr(te.paint_heatmap["heatmap-intensity"]),"heatmap-color":new U1(te.paint_heatmap["heatmap-color"]),"heatmap-opacity":new nr(te.paint_heatmap["heatmap-opacity"])})}};function Xl(s,{width:t,height:n},a,c){if(c){if(c instanceof Uint8ClampedArray)c=new Uint8Array(c.buffer);else if(c.length!==t*n*a)throw new RangeError(`mismatched image size. expected: ${c.length} but got: ${t*n*a}`)}else c=new Uint8Array(t*n*a);return s.width=t,s.height=n,s.data=c,s}function H1(s,{width:t,height:n},a){if(t===s.width&&n===s.height)return;let c=Xl({},{width:t,height:n},a);Jl(s,c,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,t),height:Math.min(s.height,n)},a),s.width=t,s.height=n,s.data=c.data}function Jl(s,t,n,a,c,m){if(c.width===0||c.height===0)return t;if(c.width>s.width||c.height>s.height||n.x>s.width-c.width||n.y>s.height-c.height)throw new RangeError("out of range source coordinates for image copy");if(c.width>t.width||c.height>t.height||a.x>t.width-c.width||a.y>t.height-c.height)throw new RangeError("out of range destination coordinates for image copy");let g=s.data,x=t.data;if(g===x)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<c.height;S++){let M=((n.y+S)*s.width+n.x)*m,L=((a.y+S)*t.width+a.x)*m;for(let z=0;z<c.width*m;z++)x[L+z]=g[M+z]}return t}class W1{constructor(t,n){Xl(this,t,1,n)}resize(t){H1(this,t,1)}clone(){return new W1({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,n,a,c,m){Jl(t,n,a,c,m,1)}}class io{constructor(t,n){Xl(this,t,4,n)}resize(t){H1(this,t,4)}replace(t,n){n?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new io({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,n,a,c,m){Jl(t,n,a,c,m,4)}}function Qc(s){let t={},n=s.resolution||256,a=s.clips?s.clips.length:1,c=s.image||new io({width:n,height:a});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);let m=(g,x,S)=>{t[s.evaluationKey]=S;let M=s.expression.evaluate(t);c.data[g+x+0]=Math.floor(255*M.r/M.a),c.data[g+x+1]=Math.floor(255*M.g/M.a),c.data[g+x+2]=Math.floor(255*M.b/M.a),c.data[g+x+3]=Math.floor(255*M.a)};if(s.clips)for(let g=0,x=0;g<a;++g,x+=4*n)for(let S=0,M=0;S<n;S++,M+=4){let L=S/(n-1),{start:z,end:U}=s.clips[g];m(x,M,z*(1-L)+U*L)}else for(let g=0,x=0;g<n;g++,x+=4)m(0,x,g/(n-1));return c}zi("AlphaImage",W1),zi("RGBAImage",io);let Tc="big-fb";class mh extends Fa{createBucket(t){return new _1(t)}constructor(t){super(t,fh),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Qc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Tc)&&this.heatmapFbos.delete(Tc)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let eu;var tu={get paint(){return eu=eu||new Xn({"hillshade-illumination-direction":new nr(te.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new nr(te.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new nr(te.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new nr(te.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new nr(te.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new nr(te.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new nr(te.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new nr(te.paint_hillshade["hillshade-method"])})}};class a2 extends Fa{constructor(t){super(t,tu),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let t=this.paint.get("hillshade-illumination-direction").values,n=this.paint.get("hillshade-illumination-altitude").values,a=this.paint.get("hillshade-highlight-color").values,c=this.paint.get("hillshade-shadow-color").values,m=Math.max(t.length,n.length,a.length,c.length);t=t.concat(Array(m-t.length).fill(t.at(-1))),n=n.concat(Array(m-n.length).fill(n.at(-1))),a=a.concat(Array(m-a.length).fill(a.at(-1))),c=c.concat(Array(m-c.length).fill(c.at(-1)));let g=n.map(Xa);return{directionRadians:t.map(Xa),altitudeRadians:g,shadowColor:c,highlightColor:a}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let o2=fn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Nu}=o2;function ro(s,t,n){let a=n.patternDependencies,c=!1;for(let m of t){let g=m.paint.get(`${s}-pattern`);g.isConstant()||(c=!0);let x=g.constantOr(null);x&&(c=!0,a[x.to]=!0,a[x.from]=!0)}return c}function rr(s,t,n,a,c){let m=c.patternDependencies;for(let g of t){let x=g.paint.get(`${s}-pattern`).value;if(x.kind!=="constant"){let S=x.evaluate({zoom:a-1},n,{},c.availableImages),M=x.evaluate({zoom:a},n,{},c.availableImages),L=x.evaluate({zoom:a+1},n,{},c.availableImages);S=S&&S.name?S.name:S,M=M&&M.name?M.name:M,L=L&&L.name?L.name:L,m[S]=!0,m[M]=!0,m[L]=!0,n.patterns[g.id]={min:S,mid:M,max:L}}}return n}function fr(s,t,n,a,c){let m;if(c===function(g,x,S,M){let L=0;for(let z=x,U=S-M;z<S;z+=M)L+=(g[U]-g[z])*(g[z+1]+g[U+1]),U=z;return L}(s,t,n,a)>0)for(let g=t;g<n;g+=a)m=no(g/a|0,s[g],s[g+1],m);else for(let g=n-a;g>=t;g-=a)m=no(g/a|0,s[g],s[g+1],m);return m&&X1(m,m.next)&&(iu(m),m=m.next),m}function W(s,t){if(!s)return s;t||(t=s);let n,a=s;do if(n=!1,a.steiner||!X1(a,a.next)&&gn(a.prev,a,a.next)!==0)a=a.next;else{if(iu(a),a=t=a.prev,a===a.next)break;n=!0}while(n||a!==t);return t}function tn(s,t,n,a,c,m,g){if(!s)return;!g&&m&&function(S,M,L,z){let U=S;do U.z===0&&(U.z=Lo(U.x,U.y,M,L,z)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==S);U.prevZ.nextZ=null,U.prevZ=null,function(G){let Z,J=1;do{let ne,he=G;G=null;let Te=null;for(Z=0;he;){Z++;let me=he,q=0;for(let ye=0;ye<J&&(q++,me=me.nextZ,me);ye++);let re=J;for(;q>0||re>0&&me;)q!==0&&(re===0||!me||he.z<=me.z)?(ne=he,he=he.nextZ,q--):(ne=me,me=me.nextZ,re--),Te?Te.nextZ=ne:G=ne,ne.prevZ=Te,Te=ne;he=me}Te.nextZ=null,J*=2}while(Z>1)}(U)}(s,a,c,m);let x=s;for(;s.prev!==s.next;){let S=s.prev,M=s.next;if(m?Ea(s,a,c,m):A(s))t.push(S.i,s.i,M.i),iu(s),s=M.next,x=M.next;else if((s=M)===x){g?g===1?tn(s=I(W(s),t),t,n,a,c,m,2):g===2&&El(s,t,n,a,c,m):tn(W(s),t,n,a,c,m,1);break}}}function A(s){let t=s.prev,n=s,a=s.next;if(gn(t,n,a)>=0)return!1;let c=t.x,m=n.x,g=a.x,x=t.y,S=n.y,M=a.y,L=Math.min(c,m,g),z=Math.min(x,S,M),U=Math.max(c,m,g),G=Math.max(x,S,M),Z=a.next;for(;Z!==t;){if(Z.x>=L&&Z.x<=U&&Z.y>=z&&Z.y<=G&&Ua(c,x,m,S,g,M,Z.x,Z.y)&&gn(Z.prev,Z,Z.next)>=0)return!1;Z=Z.next}return!0}function Ea(s,t,n,a){let c=s.prev,m=s,g=s.next;if(gn(c,m,g)>=0)return!1;let x=c.x,S=m.x,M=g.x,L=c.y,z=m.y,U=g.y,G=Math.min(x,S,M),Z=Math.min(L,z,U),J=Math.max(x,S,M),ne=Math.max(L,z,U),he=Lo(G,Z,t,n,a),Te=Lo(J,ne,t,n,a),me=s.prevZ,q=s.nextZ;for(;me&&me.z>=he&&q&&q.z<=Te;){if(me.x>=G&&me.x<=J&&me.y>=Z&&me.y<=ne&&me!==c&&me!==g&&Ua(x,L,S,z,M,U,me.x,me.y)&&gn(me.prev,me,me.next)>=0||(me=me.prevZ,q.x>=G&&q.x<=J&&q.y>=Z&&q.y<=ne&&q!==c&&q!==g&&Ua(x,L,S,z,M,U,q.x,q.y)&&gn(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;me&&me.z>=he;){if(me.x>=G&&me.x<=J&&me.y>=Z&&me.y<=ne&&me!==c&&me!==g&&Ua(x,L,S,z,M,U,me.x,me.y)&&gn(me.prev,me,me.next)>=0)return!1;me=me.prevZ}for(;q&&q.z<=Te;){if(q.x>=G&&q.x<=J&&q.y>=Z&&q.y<=ne&&q!==c&&q!==g&&Ua(x,L,S,z,M,U,q.x,q.y)&&gn(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function I(s,t){let n=s;do{let a=n.prev,c=n.next.next;!X1(a,c)&&gh(a,n,n.next,c)&&ul(a,c)&&ul(c,a)&&(t.push(a.i,n.i,c.i),iu(n),iu(n.next),n=s=c),n=n.next}while(n!==s);return W(n)}function El(s,t,n,a,c,m){let g=s;do{let x=g.next.next;for(;x!==g.prev;){if(g.i!==x.i&&v1(g,x)){let S=bo(g,x);return g=W(g,g.next),S=W(S,S.next),tn(g,t,n,a,c,m,0),void tn(S,t,n,a,c,m,0)}x=x.next}g=g.next}while(g!==s)}function Yn(s,t){let n=s.x-t.x;return n===0&&(n=s.y-t.y,n===0)&&(n=(s.next.y-s.y)/(s.next.x-s.x)-(t.next.y-t.y)/(t.next.x-t.x)),n}function Va(s,t){let n=function(c,m){let g=m,x=c.x,S=c.y,M,L=-1/0;if(X1(c,g))return g;do{if(X1(c,g.next))return g.next;if(S<=g.y&&S>=g.next.y&&g.next.y!==g.y){let J=g.x+(S-g.y)*(g.next.x-g.x)/(g.next.y-g.y);if(J<=x&&J>L&&(L=J,M=g.x<g.next.x?g:g.next,J===x))return M}g=g.next}while(g!==m);if(!M)return null;let z=M,U=M.x,G=M.y,Z=1/0;g=M;do{if(x>=g.x&&g.x>=U&&x!==g.x&&Sn(S<G?x:L,S,U,G,S<G?L:x,S,g.x,g.y)){let J=Math.abs(S-g.y)/(x-g.x);ul(g,c)&&(J<Z||J===Z&&(g.x>M.x||g.x===M.x&&yo(M,g)))&&(M=g,Z=J)}g=g.next}while(g!==z);return M}(s,t);if(!n)return t;let a=bo(n,s);return W(a,a.next),W(n,n.next)}function yo(s,t){return gn(s.prev,s,t.prev)<0&&gn(t.next,s,s.next)<0}function Lo(s,t,n,a,c){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-n)*c|0)|s<<8))|s<<4))|s<<2))|s<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-a)*c|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function b1(s){let t=s,n=s;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==s);return n}function Sn(s,t,n,a,c,m,g,x){return(c-g)*(t-x)>=(s-g)*(m-x)&&(s-g)*(a-x)>=(n-g)*(t-x)&&(n-g)*(m-x)>=(c-g)*(a-x)}function Ua(s,t,n,a,c,m,g,x){return!(s===g&&t===x)&&Sn(s,t,n,a,c,m,g,x)}function v1(s,t){return s.next.i!==t.i&&s.prev.i!==t.i&&!function(n,a){let c=n;do{if(c.i!==n.i&&c.next.i!==n.i&&c.i!==a.i&&c.next.i!==a.i&&gh(c,c.next,n,a))return!0;c=c.next}while(c!==n);return!1}(s,t)&&(ul(s,t)&&ul(t,s)&&function(n,a){let c=n,m=!1,g=(n.x+a.x)/2,x=(n.y+a.y)/2;do c.y>x!=c.next.y>x&&c.next.y!==c.y&&g<(c.next.x-c.x)*(x-c.y)/(c.next.y-c.y)+c.x&&(m=!m),c=c.next;while(c!==n);return m}(s,t)&&(gn(s.prev,s,t.prev)||gn(s,t.prev,t))||X1(s,t)&&gn(s.prev,s,s.next)>0&&gn(t.prev,t,t.next)>0)}function gn(s,t,n){return(t.y-s.y)*(n.x-t.x)-(t.x-s.x)*(n.y-t.y)}function X1(s,t){return s.x===t.x&&s.y===t.y}function gh(s,t,n,a){let c=Kn(gn(s,t,n)),m=Kn(gn(s,t,a)),g=Kn(gn(n,a,s)),x=Kn(gn(n,a,t));return c!==m&&g!==x||!(c!==0||!Sc(s,n,t))||!(m!==0||!Sc(s,a,t))||!(g!==0||!Sc(n,s,a))||!(x!==0||!Sc(n,t,a))}function Sc(s,t,n){return t.x<=Math.max(s.x,n.x)&&t.x>=Math.min(s.x,n.x)&&t.y<=Math.max(s.y,n.y)&&t.y>=Math.min(s.y,n.y)}function Kn(s){return s>0?1:s<0?-1:0}function ul(s,t){return gn(s.prev,s,s.next)<0?gn(s,t,s.next)>=0&&gn(s,s.prev,t)>=0:gn(s,t,s.prev)<0||gn(s,s.next,t)<0}function bo(s,t){let n=Ac(s.i,s.x,s.y),a=Ac(t.i,t.x,t.y),c=s.next,m=t.prev;return s.next=t,t.prev=s,n.next=c,c.prev=n,a.next=n,n.prev=a,m.next=a,a.prev=m,a}function no(s,t,n,a){let c=Ac(s,t,n);return a?(c.next=a.next,c.prev=a,a.next.prev=c,a.next=c):(c.prev=c,c.next=c),c}function iu(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Ac(s,t,n){return{i:s,x:t,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Uo{constructor(t,n){if(n>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=n}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class x1{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}}x1.noSubdivision=new x1({fill:new Uo(0,0),line:new Uo(0,0),tile:new Uo(0,0),stencil:new Uo(0,0),circle:1}),zi("SubdivisionGranularityExpression",Uo),zi("SubdivisionGranularitySetting",x1);let so=-32768,J1=32767;class ru{constructor(t,n){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=Er/t,this._canonical=n}_getKey(t,n){return(t+=32768)<<16|(n+=32768)<<0}_vertexToIndex(t,n){if(t<-32768||n<-32768||t>32767||n>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let a=0|Math.round(t),c=0|Math.round(n),m=this._getKey(a,c);if(this._vertexDictionary.has(m))return this._vertexDictionary.get(m);let g=this._vertexBuffer.length/2;return this._vertexDictionary.set(m,g),this._vertexBuffer.push(a,c),g}_subdivideTrianglesScanline(t){if(this._granularity<2)return function(c,m){let g=[];for(let x=0;x<m.length;x+=3){let S=m[x],M=m[x+1],L=m[x+2],z=c[2*S],U=c[2*S+1];(c[2*M]-z)*(c[2*L+1]-U)-(c[2*M+1]-U)*(c[2*L]-z)>0?(g.push(S),g.push(L),g.push(M)):(g.push(S),g.push(M),g.push(L))}return g}(this._vertexBuffer,t);let n=[],a=t.length;for(let c=0;c<a;c+=3){let m=[t[c+0],t[c+1],t[c+2]],g=[this._vertexBuffer[2*t[c+0]+0],this._vertexBuffer[2*t[c+0]+1],this._vertexBuffer[2*t[c+1]+0],this._vertexBuffer[2*t[c+1]+1],this._vertexBuffer[2*t[c+2]+0],this._vertexBuffer[2*t[c+2]+1]],x=1/0,S=1/0,M=-1/0,L=-1/0;for(let J=0;J<3;J++){let ne=g[2*J],he=g[2*J+1];x=Math.min(x,ne),M=Math.max(M,ne),S=Math.min(S,he),L=Math.max(L,he)}if(x===M||S===L)continue;let z=Math.floor(x/this._granularityCellSize),U=Math.ceil(M/this._granularityCellSize),G=Math.floor(S/this._granularityCellSize),Z=Math.ceil(L/this._granularityCellSize);if(z!==U||G!==Z)for(let J=G;J<Z;J++){let ne=this._scanlineGenerateVertexRingForCellRow(J,g,m);_h(this._vertexBuffer,ne,n)}else n.push(...m)}return n}_scanlineGenerateVertexRingForCellRow(t,n,a){let c=t*this._granularityCellSize,m=c+this._granularityCellSize,g=[];for(let x=0;x<3;x++){let S=n[2*x],M=n[2*x+1],L=n[2*(x+1)%6],z=n[(2*(x+1)+1)%6],U=n[2*(x+2)%6],G=n[(2*(x+2)+1)%6],Z=L-S,J=z-M,ne=Z===0,he=J===0,Te=(c-M)/J,me=(m-M)/J,q=Math.min(Te,me),re=Math.max(Te,me);if(!he&&(q>=1||re<=0)||he&&(M<c||M>m)){z>=c&&z<=m&&g.push(a[(x+1)%3]);continue}!he&&q>0&&g.push(this._vertexToIndex(S+Z*q,M+J*q));let ye=S+Z*Math.max(q,0),ct=S+Z*Math.min(re,1);ne||this._generateIntraEdgeVertices(g,S,M,L,z,ye,ct),!he&&re<1&&g.push(this._vertexToIndex(S+Z*re,M+J*re)),(he||z>=c&&z<=m)&&g.push(a[(x+1)%3]),!he&&(z<=c||z>=m)&&this._generateInterEdgeVertices(g,S,M,L,z,U,G,ct,c,m)}return g}_generateIntraEdgeVertices(t,n,a,c,m,g,x){let S=c-n,M=m-a,L=M===0,z=L?Math.min(n,c):Math.min(g,x),U=L?Math.max(n,c):Math.max(g,x),G=Math.floor(z/this._granularityCellSize)+1,Z=Math.ceil(U/this._granularityCellSize)-1;if(L?n<c:g<x)for(let J=G;J<=Z;J++){let ne=J*this._granularityCellSize;t.push(this._vertexToIndex(ne,a+M*(ne-n)/S))}else for(let J=Z;J>=G;J--){let ne=J*this._granularityCellSize;t.push(this._vertexToIndex(ne,a+M*(ne-n)/S))}}_generateInterEdgeVertices(t,n,a,c,m,g,x,S,M,L){let z=m-a,U=g-c,G=x-m,Z=(M-m)/G,J=(L-m)/G,ne=Math.min(Z,J),he=Math.max(Z,J),Te=c+U*ne,me=Math.floor(Math.min(Te,S)/this._granularityCellSize)+1,q=Math.ceil(Math.max(Te,S)/this._granularityCellSize)-1,re=S<Te,ye=G===0;if(ye&&(x===M||x===L))return;if(ye||ne>=1||he<=0){let Kt=a-x,vt=g+(n-g)*Math.min((M-x)/Kt,(L-x)/Kt);me=Math.floor(Math.min(vt,S)/this._granularityCellSize)+1,q=Math.ceil(Math.max(vt,S)/this._granularityCellSize)-1,re=S<vt}let ct=z>0?L:M;if(re)for(let Kt=me;Kt<=q;Kt++)t.push(this._vertexToIndex(Kt*this._granularityCellSize,ct));else for(let Kt=q;Kt>=me;Kt--)t.push(this._vertexToIndex(Kt*this._granularityCellSize,ct))}_generateOutline(t){let n=[];for(let a of t){let c=qo(a,this._granularity,!0),m=this._pointArrayToIndices(c),g=[];for(let x=1;x<m.length;x++)g.push(m[x-1]),g.push(m[x]);n.push(g)}return n}_handlePoles(t){let n=!1,a=!1;this._canonical&&(this._canonical.y===0&&(n=!0),this._canonical.y===(1<<this._canonical.z)-1&&(a=!0)),(n||a)&&this._fillPoles(t,n,a)}_ensureNoPoleVertices(){let t=this._vertexBuffer;for(let n=0;n<t.length;n+=2){let a=t[n+1];a===so&&(t[n+1]=-32767),a===J1&&(t[n+1]=32766)}}_generatePoleQuad(t,n,a,c,m,g){c>m!=(g===so)?(t.push(n),t.push(a),t.push(this._vertexToIndex(c,g)),t.push(a),t.push(this._vertexToIndex(m,g)),t.push(this._vertexToIndex(c,g))):(t.push(a),t.push(n),t.push(this._vertexToIndex(c,g)),t.push(this._vertexToIndex(m,g)),t.push(a),t.push(this._vertexToIndex(c,g)))}_fillPoles(t,n,a){let c=this._vertexBuffer,m=Er,g=t.length;for(let x=2;x<g;x+=3){let S=t[x-2],M=t[x-1],L=t[x],z=c[2*S],U=c[2*S+1],G=c[2*M],Z=c[2*M+1],J=c[2*L],ne=c[2*L+1];n&&(U===0&&Z===0&&this._generatePoleQuad(t,S,M,z,G,so),Z===0&&ne===0&&this._generatePoleQuad(t,M,L,G,J,so),ne===0&&U===0&&this._generatePoleQuad(t,L,S,J,z,so)),a&&(U===m&&Z===m&&this._generatePoleQuad(t,S,M,z,G,J1),Z===m&&ne===m&&this._generatePoleQuad(t,M,L,G,J,J1),ne===m&&U===m&&this._generatePoleQuad(t,L,S,J,z,J1))}}_initializeVertices(t){for(let n=0;n<t.length;n+=2)this._vertexToIndex(t[n],t[n+1])}subdividePolygonInternal(t,n){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:a,holeIndices:c}=function(x){let S=[],M=[];for(let L of x)if(L.length!==0){L!==x[0]&&S.push(M.length/2);for(let z=0;z<L.length;z++)M.push(L[z].x),M.push(L[z].y)}return{flattened:M,holeIndices:S}}(t),m;this._initializeVertices(a);try{let x=function(M,L,z=2){let U=L&&L.length,G=U?L[0]*z:M.length,Z=fr(M,0,G,z,!0),J=[];if(!Z||Z.next===Z.prev)return J;let ne,he,Te;if(U&&(Z=function(me,q,re,ye){let ct=[];for(let Kt=0,vt=q.length;Kt<vt;Kt++){let Ft=fr(me,q[Kt]*ye,Kt<vt-1?q[Kt+1]*ye:me.length,ye,!1);Ft===Ft.next&&(Ft.steiner=!0),ct.push(b1(Ft))}ct.sort(Yn);for(let Kt=0;Kt<ct.length;Kt++)re=Va(ct[Kt],re);return re}(M,L,Z,z)),M.length>80*z){ne=1/0,he=1/0;let me=-1/0,q=-1/0;for(let re=z;re<G;re+=z){let ye=M[re],ct=M[re+1];ye<ne&&(ne=ye),ct<he&&(he=ct),ye>me&&(me=ye),ct>q&&(q=ct)}Te=Math.max(me-ne,q-he),Te=Te!==0?32767/Te:0}return tn(Z,J,z,ne,he,Te,0),J}(a,c),S=this._convertIndices(a,x);m=this._subdivideTrianglesScanline(S)}catch(x){console.error(x)}let g=[];return n&&(g=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(m),{verticesFlattened:this._vertexBuffer,indicesTriangles:m,indicesLineList:g}}_convertIndices(t,n){let a=[];for(let c=0;c<n.length;c++)a.push(this._vertexToIndex(t[2*n[c]],t[2*n[c]+1]));return a}_pointArrayToIndices(t){let n=[];for(let a=0;a<t.length;a++){let c=t[a];n.push(this._vertexToIndex(c.x,c.y))}return n}}function Y1(s,t,n,a=!0){return new ru(n,t).subdividePolygonInternal(s,a)}function qo(s,t,n=!1){if(!s||s.length<1)return[];if(s.length<2)return[];let a=s[0],c=s[s.length-1],m=n&&(a.x!==c.x||a.y!==c.y);if(t<2)return m?[...s,s[0]]:[...s];let g=Math.floor(Er/t),x=[];x.push(new bi(s[0].x,s[0].y));let S=s.length,M=m?S:S-1;for(let L=0;L<M;L++){let z=s[L],U=L<S-1?s[L+1]:s[0],G=z.x,Z=z.y,J=U.x,ne=U.y,he=G!==J,Te=Z!==ne;if(!he&&!Te)continue;let me=J-G,q=ne-Z,re=Math.abs(me),ye=Math.abs(q),ct=G,Kt=Z;for(;;){let Ft=me>0?(Math.floor(ct/g)+1)*g:(Math.ceil(ct/g)-1)*g,hi=q>0?(Math.floor(Kt/g)+1)*g:(Math.ceil(Kt/g)-1)*g,Qt=Math.abs(ct-Ft),fi=Math.abs(Kt-hi),qt=Math.abs(ct-J),er=Math.abs(Kt-ne),mr=he?Qt/re:Number.POSITIVE_INFINITY,dr=Te?fi/ye:Number.POSITIVE_INFINITY;if((qt<=Qt||!he)&&(er<=fi||!Te))break;if(mr<dr&&he||!Te){ct=Ft,Kt+=q*mr;let ar=new bi(ct,Math.round(Kt));x[x.length-1].x===ar.x&&x[x.length-1].y===ar.y||x.push(ar)}else{ct+=me*dr,Kt=hi;let ar=new bi(Math.round(ct),Kt);x[x.length-1].x===ar.x&&x[x.length-1].y===ar.y||x.push(ar)}}let vt=new bi(J,ne);x[x.length-1].x===vt.x&&x[x.length-1].y===vt.y||x.push(vt)}return x}function _h(s,t,n){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let a=0,c=s[2*t[0]];for(let S=1;S<t.length;S++){let M=s[2*t[S]];M<c&&(c=M,a=S)}let m=t.length,g=a,x=(g+1)%m;for(;;){let S=g-1>=0?g-1:m-1,M=(x+1)%m,L=s[2*t[S]],z=s[2*t[M]],U=s[2*t[g]],G=s[2*t[g]+1],Z=s[2*t[x]+1],J=!1;if(L<z)J=!0;else if(L>z)J=!1;else{let ne=Z-G,he=-(s[2*t[x]]-U),Te=G<Z?1:-1;((L-U)*ne+(s[2*t[S]+1]-G)*he)*Te>((z-U)*ne+(s[2*t[M]+1]-G)*he)*Te&&(J=!0)}if(J){let ne=t[S],he=t[g],Te=t[x];ne!==he&&ne!==Te&&he!==Te&&n.push(Te,he,ne),g--,g<0&&(g=m-1)}else{let ne=t[M],he=t[g],Te=t[x];ne!==he&&ne!==Te&&he!==Te&&n.push(Te,he,ne),x++,x>=m&&(x=0)}if(S===M)break}}function qa(s,t,n,a,c,m,g,x,S){let M=c.length/2,L=g&&x&&S;if(M<Zr.MAX_VERTEX_ARRAY_LENGTH){let z=t.prepareSegment(M,n,a),U=z.vertexLength;for(let J=0;J<m.length;J+=3)a.emplaceBack(U+m[J],U+m[J+1],U+m[J+2]);let G,Z;z.vertexLength+=M,z.primitiveLength+=m.length/3,L&&(Z=g.prepareSegment(M,n,x),G=Z.vertexLength,Z.vertexLength+=M);for(let J=0;J<c.length;J+=2)s(c[J],c[J+1]);if(L)for(let J=0;J<S.length;J++){let ne=S[J];for(let he=1;he<ne.length;he+=2)x.emplaceBack(G+ne[he-1],G+ne[he]);Z.primitiveLength+=ne.length/2}}else(function(z,U,G,Z,J,ne){let he=[];for(let ye=0;ye<Z.length/2;ye++)he.push(-1);let Te={count:0},me=0,q=z.getOrCreateLatestSegment(U,G),re=q.vertexLength;for(let ye=2;ye<J.length;ye+=3){let ct=J[ye-2],Kt=J[ye-1],vt=J[ye],Ft=he[ct]<me,hi=he[Kt]<me,Qt=he[vt]<me;q.vertexLength+((Ft?1:0)+(hi?1:0)+(Qt?1:0))>Zr.MAX_VERTEX_ARRAY_LENGTH&&(q=z.createNewSegment(U,G),me=Te.count,Ft=!0,hi=!0,Qt=!0,re=0);let fi=w1(he,Z,ne,Te,ct,Ft,q),qt=w1(he,Z,ne,Te,Kt,hi,q),er=w1(he,Z,ne,Te,vt,Qt,q);G.emplaceBack(re+fi-me,re+qt-me,re+er-me),q.primitiveLength++}})(t,n,a,c,m,s),L&&function(z,U,G,Z,J,ne){let he=[];for(let ye=0;ye<Z.length/2;ye++)he.push(-1);let Te={count:0},me=0,q=z.getOrCreateLatestSegment(U,G),re=q.vertexLength;for(let ye=0;ye<J.length;ye++){let ct=J[ye];for(let Kt=1;Kt<J[ye].length;Kt+=2){let vt=ct[Kt-1],Ft=ct[Kt],hi=he[vt]<me,Qt=he[Ft]<me;q.vertexLength+((hi?1:0)+(Qt?1:0))>Zr.MAX_VERTEX_ARRAY_LENGTH&&(q=z.createNewSegment(U,G),me=Te.count,hi=!0,Qt=!0,re=0);let fi=w1(he,Z,ne,Te,vt,hi,q),qt=w1(he,Z,ne,Te,Ft,Qt,q);G.emplaceBack(re+fi-me,re+qt-me),q.primitiveLength++}}}(g,n,x,c,S,s),t.forceNewSegmentOnNextPrepare(),g?.forceNewSegmentOnNextPrepare()}function w1(s,t,n,a,c,m,g){if(m){let x=a.count;return n(t[2*c],t[2*c+1]),s[c]=a.count,a.count++,g.vertexLength++,x}return s[c]}class nu{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ti,this.indexArray=new Jr,this.indexArray2=new cs,this.programConfigurations=new ha(t.layers,t.zoom),this.segments=new Zr,this.segments2=new Zr,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,a){this.hasPattern=ro("fill",this.layers,n);let c=this.layers[0].layout.get("fill-sort-key"),m=!c.isConstant(),g=[];for(let{feature:x,id:S,index:M,sourceLayerIndex:L}of t){let z=this.layers[0]._featureFilter.needGeometry,U=Hl(x,z);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom),U,a))continue;let G=m?c.evaluate(U,{},a,n.availableImages):void 0,Z={id:S,properties:x.properties,type:x.type,sourceLayerIndex:L,index:M,geometry:z?U.geometry:Zl(x),patterns:{},sortKey:G};g.push(Z)}m&&g.sort((x,S)=>x.sortKey-S.sortKey);for(let x of g){let{geometry:S,index:M,sourceLayerIndex:L}=x;if(this.hasPattern){let z=rr("fill",this.layers,x,this.zoom,n);this.patternFeatures.push(z)}else this.addFeature(x,S,M,a,{},n.subdivisionGranularity);n.featureIndex.insert(t[M].feature,S,M,L,this.index)}}update(t,n,a){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,a)}addFeatures(t,n,a){for(let c of this.patternFeatures)this.addFeature(c,c.geometry,c.index,n,a,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Nu),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,n,a,c,m,g){for(let x of Ol(n,500)){let S=Y1(x,c,g.fill.getGranularityForZoomLevel(c.z)),M=this.layoutVertexArray;qa((L,z)=>{M.emplaceBack(L,z)},this.segments,this.layoutVertexArray,this.indexArray,S.verticesFlattened,S.indicesTriangles,this.segments2,this.indexArray2,S.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,a,m,c)}}let Pd,Rd;zi("FillBucket",nu,{omit:["layers","patternFeatures"]});var x0={get paint(){return Rd=Rd||new Xn({"fill-antialias":new nr(te.paint_fill["fill-antialias"]),"fill-opacity":new pr(te.paint_fill["fill-opacity"]),"fill-color":new pr(te.paint_fill["fill-color"]),"fill-outline-color":new pr(te.paint_fill["fill-outline-color"]),"fill-translate":new nr(te.paint_fill["fill-translate"]),"fill-translate-anchor":new nr(te.paint_fill["fill-translate-anchor"]),"fill-pattern":new el(te.paint_fill["fill-pattern"])})},get layout(){return Pd=Pd||new Xn({"fill-sort-key":new pr(te.layout_fill["fill-sort-key"])})}};class w0 extends Fa{constructor(t){super(t,x0)}recalculate(t,n){super.recalculate(t,n);let a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new nu(t)}queryRadius(){return wc(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:n,transform:a,pixelsToTileUnits:c}){return Xc(f1(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-a.bearingInRadians,c),n)}isTileClipped(){return!0}}let E0=fn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),T0=fn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:S0}=E0;var l2,kd,c2,Dd,u2,Ld,Od,yh={};function Nd(){if(kd)return l2;kd=1;var s=ci();function t(c,m,g,x,S){this.properties={},this.extent=g,this.type=0,this._pbf=c,this._geometry=-1,this._keys=x,this._values=S,c.readFields(n,this,m)}function n(c,m,g){c==1?m.id=g.readVarint():c==2?function(x,S){for(var M=x.readVarint()+x.pos;x.pos<M;){var L=S._keys[x.readVarint()],z=S._values[x.readVarint()];S.properties[L]=z}}(g,m):c==3?m.type=g.readVarint():c==4&&(m._geometry=g.pos)}function a(c){for(var m,g,x=0,S=0,M=c.length,L=M-1;S<M;L=S++)x+=((g=c[L]).x-(m=c[S]).x)*(m.y+g.y);return x}return l2=t,t.types=["Unknown","Point","LineString","Polygon"],t.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var m,g=c.readVarint()+c.pos,x=1,S=0,M=0,L=0,z=[];c.pos<g;){if(S<=0){var U=c.readVarint();x=7&U,S=U>>3}if(S--,x===1||x===2)M+=c.readSVarint(),L+=c.readSVarint(),x===1&&(m&&z.push(m),m=[]),m.push(new s(M,L));else{if(x!==7)throw new Error("unknown command "+x);m&&m.push(m[0].clone())}}return m&&z.push(m),z},t.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var m=c.readVarint()+c.pos,g=1,x=0,S=0,M=0,L=1/0,z=-1/0,U=1/0,G=-1/0;c.pos<m;){if(x<=0){var Z=c.readVarint();g=7&Z,x=Z>>3}if(x--,g===1||g===2)(S+=c.readSVarint())<L&&(L=S),S>z&&(z=S),(M+=c.readSVarint())<U&&(U=M),M>G&&(G=M);else if(g!==7)throw new Error("unknown command "+g)}return[L,U,z,G]},t.prototype.toGeoJSON=function(c,m,g){var x,S,M=this.extent*Math.pow(2,g),L=this.extent*c,z=this.extent*m,U=this.loadGeometry(),G=t.types[this.type];function Z(he){for(var Te=0;Te<he.length;Te++){var me=he[Te];he[Te]=[360*(me.x+L)/M-180,360/Math.PI*Math.atan(Math.exp((180-360*(me.y+z)/M)*Math.PI/180))-90]}}switch(this.type){case 1:var J=[];for(x=0;x<U.length;x++)J[x]=U[x][0];Z(U=J);break;case 2:for(x=0;x<U.length;x++)Z(U[x]);break;case 3:for(U=function(he){var Te=he.length;if(Te<=1)return[he];for(var me,q,re=[],ye=0;ye<Te;ye++){var ct=a(he[ye]);ct!==0&&(q===void 0&&(q=ct<0),q===ct<0?(me&&re.push(me),me=[he[ye]]):me.push(he[ye]))}return me&&re.push(me),re}(U),x=0;x<U.length;x++)for(S=0;S<U[x].length;S++)Z(U[x][S])}U.length===1?U=U[0]:G="Multi"+G;var ne={type:"Feature",geometry:{type:G,coordinates:U},properties:this.properties};return"id"in this&&(ne.id=this.id),ne},l2}function zd(){if(Dd)return c2;Dd=1;var s=Nd();function t(a,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(n,this,c),this.length=this._features.length}function n(a,c,m){a===15?c.version=m.readVarint():a===1?c.name=m.readString():a===5?c.extent=m.readVarint():a===2?c._features.push(m.pos):a===3?c._keys.push(m.readString()):a===4&&c._values.push(function(g){for(var x=null,S=g.readVarint()+g.pos;g.pos<S;){var M=g.readVarint()>>3;x=M===1?g.readString():M===2?g.readFloat():M===3?g.readDouble():M===4?g.readVarint64():M===5?g.readVarint():M===6?g.readSVarint():M===7?g.readBoolean():null}return x}(m))}return c2=t,t.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var c=this._pbf.readVarint()+this._pbf.pos;return new s(this._pbf,c,this.extent,this._keys,this._values)},c2}function $d(){return Od||(Od=1,yh.VectorTile=function(){if(Ld)return u2;Ld=1;var s=zd();function t(n,a,c){if(n===3){var m=new s(c,c.readVarint()+c.pos);m.length&&(a[m.name]=m)}}return u2=function(n,a){this.layers=n.readFields(t,{},a)},u2}(),yh.VectorTileFeature=Nd(),yh.VectorTileLayer=zd()),yh}var zu=tt($d());let A0=zu.VectorTileFeature.types,h2=Math.pow(2,13);function $u(s,t,n,a,c,m,g,x){s.emplaceBack(t,n,2*Math.floor(a*h2)+g,c*h2*2,m*h2*2,Math.round(x))}class d2{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Jt,this.centroidVertexArray=new bt,this.indexArray=new Jr,this.programConfigurations=new ha(t.layers,t.zoom),this.segments=new Zr,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,a){this.features=[],this.hasPattern=ro("fill-extrusion",this.layers,n);for(let{feature:c,id:m,index:g,sourceLayerIndex:x}of t){let S=this.layers[0]._featureFilter.needGeometry,M=Hl(c,S);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom),M,a))continue;let L={id:m,sourceLayerIndex:x,index:g,geometry:S?M.geometry:Zl(c),properties:c.properties,type:c.type,patterns:{}};this.hasPattern?this.features.push(rr("fill-extrusion",this.layers,L,this.zoom,n)):this.addFeature(L,L.geometry,g,a,{},n.subdivisionGranularity),n.featureIndex.insert(c,L.geometry,g,x,this.index,!0)}}addFeatures(t,n,a){for(let c of this.features){let{geometry:m}=c;this.addFeature(c,m,c.index,n,a,t.subdivisionGranularity)}}update(t,n,a){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,a)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,S0),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,T0.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,n,a,c,m,g){for(let x of Ol(n,500)){let S={x:0,y:0,sampleCount:0},M=this.layoutVertexArray.length;this.processPolygon(S,c,t,x,g);let L=this.layoutVertexArray.length-M,z=Math.floor(S.x/S.sampleCount),U=Math.floor(S.y/S.sampleCount);for(let G=0;G<L;G++)this.centroidVertexArray.emplaceBack(z,U)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,a,m,c)}processPolygon(t,n,a,c,m){if(c.length<1||Fd(c[0]))return;for(let z of c)z.length!==0&&C0(t,z);let g={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},x=m.fill.getGranularityForZoomLevel(n.z),S=A0[a.type]==="Polygon";for(let z of c){if(z.length===0||Fd(z))continue;let U=qo(z,x,S);this._generateSideFaces(U,g)}if(!S)return;let M=Y1(c,n,x,!1),L=this.layoutVertexArray;qa((z,U)=>{$u(L,z,U,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,M.verticesFlattened,M.indicesTriangles)}_generateSideFaces(t,n){let a=0;for(let c=1;c<t.length;c++){let m=t[c],g=t[c-1];if(I0(m,g))continue;n.segment.vertexLength+4>Zr.MAX_VERTEX_ARRAY_LENGTH&&(n.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let x=m.sub(g)._perp()._unit(),S=g.dist(m);a+S>32768&&(a=0),$u(this.layoutVertexArray,m.x,m.y,x.x,x.y,0,0,a),$u(this.layoutVertexArray,m.x,m.y,x.x,x.y,0,1,a),a+=S,$u(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,0,a),$u(this.layoutVertexArray,g.x,g.y,x.x,x.y,0,1,a);let M=n.segment.vertexLength;this.indexArray.emplaceBack(M,M+2,M+1),this.indexArray.emplaceBack(M+1,M+2,M+3),n.segment.vertexLength+=4,n.segment.primitiveLength+=2}}}function C0(s,t){for(let n=0;n<t.length;n++){let a=t[n];n===t.length-1&&t[0].x===a.x&&t[0].y===a.y||(s.x+=a.x,s.y+=a.y,s.sampleCount++)}}function I0(s,t){return s.x===t.x&&(s.x<0||s.x>Er)||s.y===t.y&&(s.y<0||s.y>Er)}function Fd(s){return s.every(t=>t.x<0)||s.every(t=>t.x>Er)||s.every(t=>t.y<0)||s.every(t=>t.y>Er)}let Bd;zi("FillExtrusionBucket",d2,{omit:["layers","features"]});var M0={get paint(){return Bd=Bd||new Xn({"fill-extrusion-opacity":new nr(te["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new pr(te["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new nr(te["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new nr(te["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new el(te["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new pr(te["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new pr(te["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new nr(te["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class P0 extends Fa{constructor(t){super(t,M0)}createBucket(t){return new d2(t)}queryRadius(){return wc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:t,feature:n,featureState:a,geometry:c,transform:m,pixelsToTileUnits:g,pixelPosMatrix:x}){let S=f1(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-m.bearingInRadians,g),M=this.paint.get("fill-extrusion-height").evaluate(n,a),L=this.paint.get("fill-extrusion-base").evaluate(n,a),z=function(G,Z,J){let ne=[];for(let he of G){let Te=[he.x,he.y,0,1];un(Te,Te,Z),ne.push(new bi(Te[0]/Te[3],Te[1]/Te[3]))}return ne}(S,x),U=function(G,Z,J,ne){let he=[],Te=[],me=ne[8]*Z,q=ne[9]*Z,re=ne[10]*Z,ye=ne[11]*Z,ct=ne[8]*J,Kt=ne[9]*J,vt=ne[10]*J,Ft=ne[11]*J;for(let hi of G){let Qt=[],fi=[];for(let qt of hi){let er=qt.x,mr=qt.y,dr=ne[0]*er+ne[4]*mr+ne[12],ar=ne[1]*er+ne[5]*mr+ne[13],Vr=ne[2]*er+ne[6]*mr+ne[14],Qn=ne[3]*er+ne[7]*mr+ne[15],Gs=Vr+re,Da=Qn+ye,Zo=dr+ct,xo=ar+Kt,Ta=Vr+vt,Un=Qn+Ft,da=new bi((dr+me)/Da,(ar+q)/Da);da.z=Gs/Da,Qt.push(da);let Sa=new bi(Zo/Un,xo/Un);Sa.z=Ta/Un,fi.push(Sa)}he.push(Qt),Te.push(fi)}return[he,Te]}(c,L,M,x);return function(G,Z,J){let ne=1/0;Xc(J,Z)&&(ne=jd(J,Z[0]));for(let he=0;he<Z.length;he++){let Te=Z[he],me=G[he];for(let q=0;q<Te.length-1;q++){let re=Te[q],ye=[re,Te[q+1],me[q+1],me[q],re];Du(J,ye)&&(ne=Math.min(ne,jd(J,ye)))}}return ne!==1/0&&ne}(U[0],U[1],z)}}function Fu(s,t){return s.x*t.x+s.y*t.y}function jd(s,t){if(s.length===1){let n=0,a=t[n++],c;for(;!c||a.equals(c);)if(c=t[n++],!c)return 1/0;for(;n<t.length;n++){let m=t[n],g=s[0],x=c.sub(a),S=m.sub(a),M=g.sub(a),L=Fu(x,x),z=Fu(x,S),U=Fu(S,S),G=Fu(M,x),Z=Fu(M,S),J=L*U-z*z,ne=(U*G-z*Z)/J,he=(L*Z-z*G)/J,Te=a.z*(1-ne-he)+c.z*ne+m.z*he;if(isFinite(Te))return Te}return 1/0}{let n=1/0;for(let a of t)n=Math.min(n,a.z);return n}}let R0=fn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:k0}=R0,D0=fn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:L0}=D0,O0=zu.VectorTileFeature.types,N0=Math.cos(Math.PI/180*37.5),Vd=Math.pow(2,14)/.5;class p2{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(n=>n.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(n=>{this.gradients[n.id]={}}),this.layoutVertexArray=new Zi,this.layoutVertexArray2=new Ir,this.indexArray=new Jr,this.programConfigurations=new ha(t.layers,t.zoom),this.segments=new Zr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(t,n,a){this.hasPattern=ro("line",this.layers,n);let c=this.layers[0].layout.get("line-sort-key"),m=!c.isConstant(),g=[];for(let{feature:x,id:S,index:M,sourceLayerIndex:L}of t){let z=this.layers[0]._featureFilter.needGeometry,U=Hl(x,z);if(!this.layers[0]._featureFilter.filter(new yn(this.zoom),U,a))continue;let G=m?c.evaluate(U,{},a):void 0,Z={id:S,properties:x.properties,type:x.type,sourceLayerIndex:L,index:M,geometry:z?U.geometry:Zl(x),patterns:{},sortKey:G};g.push(Z)}m&&g.sort((x,S)=>x.sortKey-S.sortKey);for(let x of g){let{geometry:S,index:M,sourceLayerIndex:L}=x;if(this.hasPattern){let z=rr("line",this.layers,x,this.zoom,n);this.patternFeatures.push(z)}else this.addFeature(x,S,M,a,{},n.subdivisionGranularity);n.featureIndex.insert(t[M].feature,S,M,L,this.index)}}update(t,n,a){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,n,this.stateDependentLayers,a)}addFeatures(t,n,a){for(let c of this.patternFeatures)this.addFeature(c,c.geometry,c.index,n,a,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,L0)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,k0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,n,a,c,m,g){let x=this.layers[0].layout,S=x.get("line-join").evaluate(t,{}),M=x.get("line-cap"),L=x.get("line-miter-limit"),z=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(let U of n)this.addLine(U,t,S,M,L,z,c,g);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,a,m,c)}addLine(t,n,a,c,m,g,x,S){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=qo(t,x?S.line.getGranularityForZoomLevel(x.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let me=0;me<t.length-1;me++)this.totalDistance+=t[me].dist(t[me+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let M=O0[n.type]==="Polygon",L=t.length;for(;L>=2&&t[L-1].equals(t[L-2]);)L--;let z=0;for(;z<L-1&&t[z].equals(t[z+1]);)z++;if(L<(M?3:2))return;a==="bevel"&&(m=1.05);let U=this.overscaling<=16?15*Er/(512*this.overscaling):0,G=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray),Z,J,ne,he,Te;this.e1=this.e2=-1,M&&(Z=t[L-2],Te=t[z].sub(Z)._unit()._perp());for(let me=z;me<L;me++){if(ne=me===L-1?M?t[z+1]:void 0:t[me+1],ne&&t[me].equals(ne))continue;Te&&(he=Te),Z&&(J=Z),Z=t[me],Te=ne?ne.sub(Z)._unit()._perp():he,he=he||Te;let q=he.add(Te);q.x===0&&q.y===0||q._unit();let re=he.x*Te.x+he.y*Te.y,ye=q.x*Te.x+q.y*Te.y,ct=ye!==0?1/ye:1/0,Kt=2*Math.sqrt(2-2*ye),vt=ye<N0&&J&&ne,Ft=he.x*Te.y-he.y*Te.x>0;if(vt&&me>z){let fi=Z.dist(J);if(fi>2*U){let qt=Z.sub(Z.sub(J)._mult(U/fi)._round());this.updateDistance(J,qt),this.addCurrentVertex(qt,he,0,0,G),J=qt}}let hi=J&&ne,Qt=hi?a:M?"butt":c;if(hi&&Qt==="round"&&(ct<g?Qt="miter":ct<=2&&(Qt="fakeround")),Qt==="miter"&&ct>m&&(Qt="bevel"),Qt==="bevel"&&(ct>2&&(Qt="flipbevel"),ct<m&&(Qt="miter")),J&&this.updateDistance(J,Z),Qt==="miter")q._mult(ct),this.addCurrentVertex(Z,q,0,0,G);else if(Qt==="flipbevel"){if(ct>100)q=Te.mult(-1);else{let fi=ct*he.add(Te).mag()/he.sub(Te).mag();q._perp()._mult(fi*(Ft?-1:1))}this.addCurrentVertex(Z,q,0,0,G),this.addCurrentVertex(Z,q.mult(-1),0,0,G)}else if(Qt==="bevel"||Qt==="fakeround"){let fi=-Math.sqrt(ct*ct-1),qt=Ft?fi:0,er=Ft?0:fi;if(J&&this.addCurrentVertex(Z,he,qt,er,G),Qt==="fakeround"){let mr=Math.round(180*Kt/Math.PI/20);for(let dr=1;dr<mr;dr++){let ar=dr/mr;if(ar!==.5){let Qn=ar-.5;ar+=ar*Qn*(ar-1)*((1.0904+re*(re*(3.55645-1.43519*re)-3.2452))*Qn*Qn+(.848013+re*(.215638*re-1.06021)))}let Vr=Te.sub(he)._mult(ar)._add(he)._unit()._mult(Ft?-1:1);this.addHalfVertex(Z,Vr.x,Vr.y,!1,Ft,0,G)}}ne&&this.addCurrentVertex(Z,Te,-qt,-er,G)}else if(Qt==="butt")this.addCurrentVertex(Z,q,0,0,G);else if(Qt==="square"){let fi=J?1:-1;this.addCurrentVertex(Z,q,fi,fi,G)}else Qt==="round"&&(J&&(this.addCurrentVertex(Z,he,0,0,G),this.addCurrentVertex(Z,he,1,1,G,!0)),ne&&(this.addCurrentVertex(Z,Te,-1,-1,G,!0),this.addCurrentVertex(Z,Te,0,0,G)));if(vt&&me<L-1){let fi=Z.dist(ne);if(fi>2*U){let qt=Z.add(ne.sub(Z)._mult(U/fi)._round());this.updateDistance(Z,qt),this.addCurrentVertex(qt,Te,0,0,G),Z=qt}}}}addCurrentVertex(t,n,a,c,m,g=!1){let x=n.y*c-n.x,S=-n.y-n.x*c;this.addHalfVertex(t,n.x+n.y*a,n.y-n.x*a,g,!1,a,m),this.addHalfVertex(t,x,S,g,!0,-c,m),this.distance>Vd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,n,a,c,m,g))}addHalfVertex({x:t,y:n},a,c,m,g,x,S){let M=.5*(this.lineClips?this.scaledDistance*(Vd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(m?1:0),(n<<1)+(g?1:0),Math.round(63*a)+128,Math.round(63*c)+128,1+(x===0?0:x<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let L=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,L,this.e2),S.primitiveLength++),g?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,n){this.distance+=t.dist(n),this.updateScaledDistance()}}let Ud,qd;zi("LineBucket",p2,{omit:["layers","patternFeatures"]});var Gd={get paint(){return qd=qd||new Xn({"line-opacity":new pr(te.paint_line["line-opacity"]),"line-color":new pr(te.paint_line["line-color"]),"line-translate":new nr(te.paint_line["line-translate"]),"line-translate-anchor":new nr(te.paint_line["line-translate-anchor"]),"line-width":new pr(te.paint_line["line-width"]),"line-gap-width":new pr(te.paint_line["line-gap-width"]),"line-offset":new pr(te.paint_line["line-offset"]),"line-blur":new pr(te.paint_line["line-blur"]),"line-dasharray":new d1(te.paint_line["line-dasharray"]),"line-pattern":new el(te.paint_line["line-pattern"]),"line-gradient":new U1(te.paint_line["line-gradient"])})},get layout(){return Ud=Ud||new Xn({"line-cap":new nr(te.layout_line["line-cap"]),"line-join":new pr(te.layout_line["line-join"]),"line-miter-limit":new nr(te.layout_line["line-miter-limit"]),"line-round-limit":new nr(te.layout_line["line-round-limit"]),"line-sort-key":new pr(te.layout_line["line-sort-key"])})}};class z0 extends pr{possiblyEvaluate(t,n){return n=new yn(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(t,n)}evaluate(t,n,a,c){return n=Hn({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(t,n,a,c)}}let bh;class $0 extends Fa{constructor(t){super(t,Gd),this.gradientVersion=0,bh||(bh=new z0(Gd.paint.properties["line-width"].specification),bh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){let n=this.gradientExpression();this.stepInterpolant=!!function(a){return a._styleExpression!==void 0}(n)&&n._styleExpression.expression instanceof Et,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,n){super.recalculate(t,n),this.paint._values["line-floorwidth"]=bh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new p2(t)}queryRadius(t){let n=t,a=Zd(Z1("line-width",this,n),Z1("line-gap-width",this,n)),c=Z1("line-offset",this,n);return a/2+Math.abs(c)+wc(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:n,featureState:a,geometry:c,transform:m,pixelsToTileUnits:g}){let x=f1(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-m.bearingInRadians,g),S=g/2*Zd(this.paint.get("line-width").evaluate(n,a),this.paint.get("line-gap-width").evaluate(n,a)),M=this.paint.get("line-offset").evaluate(n,a);return M&&(c=function(L,z){let U=[];for(let G=0;G<L.length;G++){let Z=L[G],J=[];for(let ne=0;ne<Z.length;ne++){let he=Z[ne-1],Te=Z[ne],me=Z[ne+1],q=ne===0?new bi(0,0):Te.sub(he)._unit()._perp(),re=ne===Z.length-1?new bi(0,0):me.sub(Te)._unit()._perp(),ye=q._add(re)._unit(),ct=ye.x*re.x+ye.y*re.y;ct!==0&&ye._mult(1/ct),J.push(ye._mult(z)._add(Te))}U.push(J)}return U}(c,M*g)),function(L,z,U){for(let G=0;G<z.length;G++){let Z=z[G];if(L.length>=3){for(let J=0;J<Z.length;J++)if(Wl(L,Z[J]))return!0}if(dh(L,Z,U))return!0}return!1}(x,c,S)}isTileClipped(){return!0}}function Zd(s,t){return t>0?t+2*s:s}let F0=fn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),B0=fn([{name:"a_projected_pos",components:3,type:"Float32"}],4);fn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let j0=fn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);fn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let Hd=fn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),V0=fn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function U0(s,t,n){return s.sections.forEach(a=>{a.text=function(c,m,g){let x=m.layout.get("text-transform").evaluate(g,{});return x==="uppercase"?c=c.toLocaleUpperCase():x==="lowercase"&&(c=c.toLocaleLowerCase()),Po.applyArabicShaping&&(c=Po.applyArabicShaping(c)),c}(a.text,t,n)}),s}fn([{name:"triangle",components:3,type:"Uint16"}]),fn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),fn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),fn([{type:"Float32",name:"offsetX"}]),fn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),fn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let Bu={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Wd,f2,Xd,qs=24,m2={};function q0(){return Wd||(Wd=1,m2.read=function(s,t,n,a,c){var m,g,x=8*c-a-1,S=(1<<x)-1,M=S>>1,L=-7,z=n?c-1:0,U=n?-1:1,G=s[t+z];for(z+=U,m=G&(1<<-L)-1,G>>=-L,L+=x;L>0;m=256*m+s[t+z],z+=U,L-=8);for(g=m&(1<<-L)-1,m>>=-L,L+=a;L>0;g=256*g+s[t+z],z+=U,L-=8);if(m===0)m=1-M;else{if(m===S)return g?NaN:1/0*(G?-1:1);g+=Math.pow(2,a),m-=M}return(G?-1:1)*g*Math.pow(2,m-a)},m2.write=function(s,t,n,a,c,m){var g,x,S,M=8*m-c-1,L=(1<<M)-1,z=L>>1,U=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=a?0:m-1,Z=a?1:-1,J=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(x=isNaN(t)?1:0,g=L):(g=Math.floor(Math.log(t)/Math.LN2),t*(S=Math.pow(2,-g))<1&&(g--,S*=2),(t+=g+z>=1?U/S:U*Math.pow(2,1-z))*S>=2&&(g++,S/=2),g+z>=L?(x=0,g=L):g+z>=1?(x=(t*S-1)*Math.pow(2,c),g+=z):(x=t*Math.pow(2,z-1)*Math.pow(2,c),g=0));c>=8;s[n+G]=255&x,G+=Z,x/=256,c-=8);for(g=g<<c|x,M+=c;M>0;s[n+G]=255&g,G+=Z,g/=256,M-=8);s[n+G-Z]|=128*J}),m2}function Jd(){if(Xd)return f2;Xd=1,f2=t;var s=q0();function t(q){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(q)?q:new Uint8Array(q||0),this.pos=0,this.type=0,this.length=this.buf.length}t.Varint=0,t.Fixed64=1,t.Bytes=2,t.Fixed32=5;var n=4294967296,a=1/n,c=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function m(q){return q.type===t.Bytes?q.readVarint()+q.pos:q.pos+1}function g(q,re,ye){return ye?4294967296*re+(q>>>0):4294967296*(re>>>0)+(q>>>0)}function x(q,re,ye){var ct=re<=16383?1:re<=2097151?2:re<=268435455?3:Math.floor(Math.log(re)/(7*Math.LN2));ye.realloc(ct);for(var Kt=ye.pos-1;Kt>=q;Kt--)ye.buf[Kt+ct]=ye.buf[Kt]}function S(q,re){for(var ye=0;ye<q.length;ye++)re.writeVarint(q[ye])}function M(q,re){for(var ye=0;ye<q.length;ye++)re.writeSVarint(q[ye])}function L(q,re){for(var ye=0;ye<q.length;ye++)re.writeFloat(q[ye])}function z(q,re){for(var ye=0;ye<q.length;ye++)re.writeDouble(q[ye])}function U(q,re){for(var ye=0;ye<q.length;ye++)re.writeBoolean(q[ye])}function G(q,re){for(var ye=0;ye<q.length;ye++)re.writeFixed32(q[ye])}function Z(q,re){for(var ye=0;ye<q.length;ye++)re.writeSFixed32(q[ye])}function J(q,re){for(var ye=0;ye<q.length;ye++)re.writeFixed64(q[ye])}function ne(q,re){for(var ye=0;ye<q.length;ye++)re.writeSFixed64(q[ye])}function he(q,re){return(q[re]|q[re+1]<<8|q[re+2]<<16)+16777216*q[re+3]}function Te(q,re,ye){q[ye]=re,q[ye+1]=re>>>8,q[ye+2]=re>>>16,q[ye+3]=re>>>24}function me(q,re){return(q[re]|q[re+1]<<8|q[re+2]<<16)+(q[re+3]<<24)}return t.prototype={destroy:function(){this.buf=null},readFields:function(q,re,ye){for(ye=ye||this.length;this.pos<ye;){var ct=this.readVarint(),Kt=ct>>3,vt=this.pos;this.type=7&ct,q(Kt,re,this),this.pos===vt&&this.skip(ct)}return re},readMessage:function(q,re){return this.readFields(q,re,this.readVarint()+this.pos)},readFixed32:function(){var q=he(this.buf,this.pos);return this.pos+=4,q},readSFixed32:function(){var q=me(this.buf,this.pos);return this.pos+=4,q},readFixed64:function(){var q=he(this.buf,this.pos)+he(this.buf,this.pos+4)*n;return this.pos+=8,q},readSFixed64:function(){var q=he(this.buf,this.pos)+me(this.buf,this.pos+4)*n;return this.pos+=8,q},readFloat:function(){var q=s.read(this.buf,this.pos,!0,23,4);return this.pos+=4,q},readDouble:function(){var q=s.read(this.buf,this.pos,!0,52,8);return this.pos+=8,q},readVarint:function(q){var re,ye,ct=this.buf;return re=127&(ye=ct[this.pos++]),ye<128?re:(re|=(127&(ye=ct[this.pos++]))<<7,ye<128?re:(re|=(127&(ye=ct[this.pos++]))<<14,ye<128?re:(re|=(127&(ye=ct[this.pos++]))<<21,ye<128?re:function(Kt,vt,Ft){var hi,Qt,fi=Ft.buf;if(hi=(112&(Qt=fi[Ft.pos++]))>>4,Qt<128||(hi|=(127&(Qt=fi[Ft.pos++]))<<3,Qt<128)||(hi|=(127&(Qt=fi[Ft.pos++]))<<10,Qt<128)||(hi|=(127&(Qt=fi[Ft.pos++]))<<17,Qt<128)||(hi|=(127&(Qt=fi[Ft.pos++]))<<24,Qt<128)||(hi|=(1&(Qt=fi[Ft.pos++]))<<31,Qt<128))return g(Kt,hi,vt);throw new Error("Expected varint not more than 10 bytes")}(re|=(15&(ye=ct[this.pos]))<<28,q,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var q=this.readVarint();return q%2==1?(q+1)/-2:q/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var q=this.readVarint()+this.pos,re=this.pos;return this.pos=q,q-re>=12&&c?function(ye,ct,Kt){return c.decode(ye.subarray(ct,Kt))}(this.buf,re,q):function(ye,ct,Kt){for(var vt="",Ft=ct;Ft<Kt;){var hi,Qt,fi,qt=ye[Ft],er=null,mr=qt>239?4:qt>223?3:qt>191?2:1;if(Ft+mr>Kt)break;mr===1?qt<128&&(er=qt):mr===2?(192&(hi=ye[Ft+1]))==128&&(er=(31&qt)<<6|63&hi)<=127&&(er=null):mr===3?(Qt=ye[Ft+2],(192&(hi=ye[Ft+1]))==128&&(192&Qt)==128&&((er=(15&qt)<<12|(63&hi)<<6|63&Qt)<=2047||er>=55296&&er<=57343)&&(er=null)):mr===4&&(Qt=ye[Ft+2],fi=ye[Ft+3],(192&(hi=ye[Ft+1]))==128&&(192&Qt)==128&&(192&fi)==128&&((er=(15&qt)<<18|(63&hi)<<12|(63&Qt)<<6|63&fi)<=65535||er>=1114112)&&(er=null)),er===null?(er=65533,mr=1):er>65535&&(er-=65536,vt+=String.fromCharCode(er>>>10&1023|55296),er=56320|1023&er),vt+=String.fromCharCode(er),Ft+=mr}return vt}(this.buf,re,q)},readBytes:function(){var q=this.readVarint()+this.pos,re=this.buf.subarray(this.pos,q);return this.pos=q,re},readPackedVarint:function(q,re){if(this.type!==t.Bytes)return q.push(this.readVarint(re));var ye=m(this);for(q=q||[];this.pos<ye;)q.push(this.readVarint(re));return q},readPackedSVarint:function(q){if(this.type!==t.Bytes)return q.push(this.readSVarint());var re=m(this);for(q=q||[];this.pos<re;)q.push(this.readSVarint());return q},readPackedBoolean:function(q){if(this.type!==t.Bytes)return q.push(this.readBoolean());var re=m(this);for(q=q||[];this.pos<re;)q.push(this.readBoolean());return q},readPackedFloat:function(q){if(this.type!==t.Bytes)return q.push(this.readFloat());var re=m(this);for(q=q||[];this.pos<re;)q.push(this.readFloat());return q},readPackedDouble:function(q){if(this.type!==t.Bytes)return q.push(this.readDouble());var re=m(this);for(q=q||[];this.pos<re;)q.push(this.readDouble());return q},readPackedFixed32:function(q){if(this.type!==t.Bytes)return q.push(this.readFixed32());var re=m(this);for(q=q||[];this.pos<re;)q.push(this.readFixed32());return q},readPackedSFixed32:function(q){if(this.type!==t.Bytes)return q.push(this.readSFixed32());var re=m(this);for(q=q||[];this.pos<re;)q.push(this.readSFixed32());return q},readPackedFixed64:function(q){if(this.type!==t.Bytes)return q.push(this.readFixed64());var re=m(this);for(q=q||[];this.pos<re;)q.push(this.readFixed64());return q},readPackedSFixed64:function(q){if(this.type!==t.Bytes)return q.push(this.readSFixed64());var re=m(this);for(q=q||[];this.pos<re;)q.push(this.readSFixed64());return q},skip:function(q){var re=7&q;if(re===t.Varint)for(;this.buf[this.pos++]>127;);else if(re===t.Bytes)this.pos=this.readVarint()+this.pos;else if(re===t.Fixed32)this.pos+=4;else{if(re!==t.Fixed64)throw new Error("Unimplemented type: "+re);this.pos+=8}},writeTag:function(q,re){this.writeVarint(q<<3|re)},realloc:function(q){for(var re=this.length||16;re<this.pos+q;)re*=2;if(re!==this.length){var ye=new Uint8Array(re);ye.set(this.buf),this.buf=ye,this.length=re}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(q){this.realloc(4),Te(this.buf,q,this.pos),this.pos+=4},writeSFixed32:function(q){this.realloc(4),Te(this.buf,q,this.pos),this.pos+=4},writeFixed64:function(q){this.realloc(8),Te(this.buf,-1&q,this.pos),Te(this.buf,Math.floor(q*a),this.pos+4),this.pos+=8},writeSFixed64:function(q){this.realloc(8),Te(this.buf,-1&q,this.pos),Te(this.buf,Math.floor(q*a),this.pos+4),this.pos+=8},writeVarint:function(q){(q=+q||0)>268435455||q<0?function(re,ye){var ct,Kt;if(re>=0?(ct=re%4294967296|0,Kt=re/4294967296|0):(Kt=~(-re/4294967296),4294967295^(ct=~(-re%4294967296))?ct=ct+1|0:(ct=0,Kt=Kt+1|0)),re>=18446744073709552e3||re<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");ye.realloc(10),function(vt,Ft,hi){hi.buf[hi.pos++]=127&vt|128,vt>>>=7,hi.buf[hi.pos++]=127&vt|128,vt>>>=7,hi.buf[hi.pos++]=127&vt|128,vt>>>=7,hi.buf[hi.pos++]=127&vt|128,hi.buf[hi.pos]=127&(vt>>>=7)}(ct,0,ye),function(vt,Ft){var hi=(7&vt)<<4;Ft.buf[Ft.pos++]|=hi|((vt>>>=3)?128:0),vt&&(Ft.buf[Ft.pos++]=127&vt|((vt>>>=7)?128:0),vt&&(Ft.buf[Ft.pos++]=127&vt|((vt>>>=7)?128:0),vt&&(Ft.buf[Ft.pos++]=127&vt|((vt>>>=7)?128:0),vt&&(Ft.buf[Ft.pos++]=127&vt|((vt>>>=7)?128:0),vt&&(Ft.buf[Ft.pos++]=127&vt)))))}(Kt,ye)}(q,this):(this.realloc(4),this.buf[this.pos++]=127&q|(q>127?128:0),q<=127||(this.buf[this.pos++]=127&(q>>>=7)|(q>127?128:0),q<=127||(this.buf[this.pos++]=127&(q>>>=7)|(q>127?128:0),q<=127||(this.buf[this.pos++]=q>>>7&127))))},writeSVarint:function(q){this.writeVarint(q<0?2*-q-1:2*q)},writeBoolean:function(q){this.writeVarint(!!q)},writeString:function(q){q=String(q),this.realloc(4*q.length),this.pos++;var re=this.pos;this.pos=function(ct,Kt,vt){for(var Ft,hi,Qt=0;Qt<Kt.length;Qt++){if((Ft=Kt.charCodeAt(Qt))>55295&&Ft<57344){if(!hi){Ft>56319||Qt+1===Kt.length?(ct[vt++]=239,ct[vt++]=191,ct[vt++]=189):hi=Ft;continue}if(Ft<56320){ct[vt++]=239,ct[vt++]=191,ct[vt++]=189,hi=Ft;continue}Ft=hi-55296<<10|Ft-56320|65536,hi=null}else hi&&(ct[vt++]=239,ct[vt++]=191,ct[vt++]=189,hi=null);Ft<128?ct[vt++]=Ft:(Ft<2048?ct[vt++]=Ft>>6|192:(Ft<65536?ct[vt++]=Ft>>12|224:(ct[vt++]=Ft>>18|240,ct[vt++]=Ft>>12&63|128),ct[vt++]=Ft>>6&63|128),ct[vt++]=63&Ft|128)}return vt}(this.buf,q,this.pos);var ye=this.pos-re;ye>=128&&x(re,ye,this),this.pos=re-1,this.writeVarint(ye),this.pos+=ye},writeFloat:function(q){this.realloc(4),s.write(this.buf,q,this.pos,!0,23,4),this.pos+=4},writeDouble:function(q){this.realloc(8),s.write(this.buf,q,this.pos,!0,52,8),this.pos+=8},writeBytes:function(q){var re=q.length;this.writeVarint(re),this.realloc(re);for(var ye=0;ye<re;ye++)this.buf[this.pos++]=q[ye]},writeRawMessage:function(q,re){this.pos++;var ye=this.pos;q(re,this);var ct=this.pos-ye;ct>=128&&x(ye,ct,this),this.pos=ye-1,this.writeVarint(ct),this.pos+=ct},writeMessage:function(q,re,ye){this.writeTag(q,t.Bytes),this.writeRawMessage(re,ye)},writePackedVarint:function(q,re){re.length&&this.writeMessage(q,S,re)},writePackedSVarint:function(q,re){re.length&&this.writeMessage(q,M,re)},writePackedBoolean:function(q,re){re.length&&this.writeMessage(q,U,re)},writePackedFloat:function(q,re){re.length&&this.writeMessage(q,L,re)},writePackedDouble:function(q,re){re.length&&this.writeMessage(q,z,re)},writePackedFixed32:function(q,re){re.length&&this.writeMessage(q,G,re)},writePackedSFixed32:function(q,re){re.length&&this.writeMessage(q,Z,re)},writePackedFixed64:function(q,re){re.length&&this.writeMessage(q,J,re)},writePackedSFixed64:function(q,re){re.length&&this.writeMessage(q,ne,re)},writeBytesField:function(q,re){this.writeTag(q,t.Bytes),this.writeBytes(re)},writeFixed32Field:function(q,re){this.writeTag(q,t.Fixed32),this.writeFixed32(re)},writeSFixed32Field:function(q,re){this.writeTag(q,t.Fixed32),this.writeSFixed32(re)},writeFixed64Field:function(q,re){this.writeTag(q,t.Fixed64),this.writeFixed64(re)},writeSFixed64Field:function(q,re){this.writeTag(q,t.Fixed64),this.writeSFixed64(re)},writeVarintField:function(q,re){this.writeTag(q,t.Varint),this.writeVarint(re)},writeSVarintField:function(q,re){this.writeTag(q,t.Varint),this.writeSVarint(re)},writeStringField:function(q,re){this.writeTag(q,t.Bytes),this.writeString(re)},writeFloatField:function(q,re){this.writeTag(q,t.Fixed32),this.writeFloat(re)},writeDoubleField:function(q,re){this.writeTag(q,t.Fixed64),this.writeDouble(re)},writeBooleanField:function(q,re){this.writeVarintField(q,!!re)}},f2}var g2=tt(Jd());let _2=3;function G0(s,t,n){s===1&&n.readMessage(Z0,t)}function Z0(s,t,n){if(s===3){let{id:a,bitmap:c,width:m,height:g,left:x,top:S,advance:M}=n.readMessage(H0,{});t.push({id:a,bitmap:new W1({width:m+2*_2,height:g+2*_2},c),metrics:{width:m,height:g,left:x,top:S,advance:M}})}}function H0(s,t,n){s===1?t.id=n.readVarint():s===2?t.bitmap=n.readBytes():s===3?t.width=n.readVarint():s===4?t.height=n.readVarint():s===5?t.left=n.readSVarint():s===6?t.top=n.readSVarint():s===7&&(t.advance=n.readVarint())}let W0=_2;function Yd(s){let t=0,n=0;for(let g of s)t+=g.w*g.h,n=Math.max(n,g.w);s.sort((g,x)=>x.h-g.h);let a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}],c=0,m=0;for(let g of s)for(let x=a.length-1;x>=0;x--){let S=a[x];if(!(g.w>S.w||g.h>S.h)){if(g.x=S.x,g.y=S.y,m=Math.max(m,g.y+g.h),c=Math.max(c,g.x+g.w),g.w===S.w&&g.h===S.h){let M=a.pop();x<a.length&&(a[x]=M)}else g.h===S.h?(S.x+=g.w,S.w-=g.w):g.w===S.w?(S.y+=g.h,S.h-=g.h):(a.push({x:S.x+g.w,y:S.y,w:S.w-g.w,h:g.h}),S.y+=g.h,S.h-=g.h);break}}return{w:c,h:m,fill:t/(c*m)||0}}let vo=1;class y2{constructor(t,{pixelRatio:n,version:a,stretchX:c,stretchY:m,content:g,textFitWidth:x,textFitHeight:S}){this.paddedRect=t,this.pixelRatio=n,this.stretchX=c,this.stretchY=m,this.content=g,this.version=a,this.textFitWidth=x,this.textFitHeight=S}get tl(){return[this.paddedRect.x+vo,this.paddedRect.y+vo]}get br(){return[this.paddedRect.x+this.paddedRect.w-vo,this.paddedRect.y+this.paddedRect.h-vo]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*vo)/this.pixelRatio,(this.paddedRect.h-2*vo)/this.pixelRatio]}}class Kd{constructor(t,n){let a={},c={};this.haveRenderCallbacks=[];let m=[];this.addImages(t,a,m),this.addImages(n,c,m);let{w:g,h:x}=Yd(m),S=new io({width:g||1,height:x||1});for(let M in t){let L=t[M],z=a[M].paddedRect;io.copy(L.data,S,{x:0,y:0},{x:z.x+vo,y:z.y+vo},L.data)}for(let M in n){let L=n[M],z=c[M].paddedRect,U=z.x+vo,G=z.y+vo,Z=L.data.width,J=L.data.height;io.copy(L.data,S,{x:0,y:0},{x:U,y:G},L.data),io.copy(L.data,S,{x:0,y:J-1},{x:U,y:G-1},{width:Z,height:1}),io.copy(L.data,S,{x:0,y:0},{x:U,y:G+J},{width:Z,height:1}),io.copy(L.data,S,{x:Z-1,y:0},{x:U-1,y:G},{width:1,height:J}),io.copy(L.data,S,{x:0,y:0},{x:U+Z,y:G},{width:1,height:J})}this.image=S,this.iconPositions=a,this.patternPositions=c}addImages(t,n,a){for(let c in t){let m=t[c],g={x:0,y:0,w:m.data.width+2*vo,h:m.data.height+2*vo};a.push(g),n[c]=new y2(g,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(c)}}patchUpdatedImages(t,n){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let a in t.updatedImages)this.patchUpdatedImage(this.iconPositions[a],t.getImage(a),n),this.patchUpdatedImage(this.patternPositions[a],t.getImage(a),n)}patchUpdatedImage(t,n,a){if(!t||!n||t.version===n.version)return;t.version=n.version;let[c,m]=t.tl;a.update(n.data,void 0,{x:c,y:m})}}var K1;zi("ImagePosition",y2),zi("ImageAtlas",Kd),R.al=void 0,(K1=R.al||(R.al={}))[K1.none=0]="none",K1[K1.horizontal=1]="horizontal",K1[K1.vertical=2]="vertical",K1[K1.horizontalOnly=3]="horizontalOnly";let vh=-17;class ju{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(t,n,a){let c=new ju;return c.scale=t||1,c.fontStack=n,c.verticalAlign=a||"bottom",c}static forImage(t,n){let a=new ju;return a.imageName=t,a.verticalAlign=n||"bottom",a}}class su{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,n){let a=new su;for(let c=0;c<t.sections.length;c++){let m=t.sections[c];m.image?a.addImageSection(m):a.addTextSection(m,n)}return a}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let n="";for(let a=0;a<t.length;a++){let c=t.charCodeAt(a+1)||null,m=t.charCodeAt(a-1)||null;n+=c&&Qo(c)&&!Bu[t[a+1]]||m&&Qo(m)&&!Bu[t[a-1]]||!Bu[t[a]]?t[a]:Bu[t[a]]}return n}(this.text)}trim(){let t=0;for(let a=0;a<this.text.length&&wh[this.text.charCodeAt(a)];a++)t++;let n=this.text.length;for(let a=this.text.length-1;a>=0&&a>=t&&wh[this.text.charCodeAt(a)];a--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)}substring(t,n){let a=new su;return a.text=this.text.substring(t,n),a.sectionIndex=this.sectionIndex.slice(t,n),a.sections=this.sections,a}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,n)=>Math.max(t,this.sections[n].scale),0)}getMaxImageSize(t){let n=0,a=0;for(let c=0;c<this.length();c++){let m=this.getSection(c);if(m.imageName){let g=t[m.imageName];if(!g)continue;let x=g.displaySize;n=Math.max(n,x[0]),a=Math.max(a,x[1])}}return{maxImageWidth:n,maxImageHeight:a}}addTextSection(t,n){this.text+=t.text,this.sections.push(ju.forText(t.scale,t.fontStack||n,t.verticalAlign));let a=this.sections.length-1;for(let c=0;c<t.text.length;++c)this.sectionIndex.push(a)}addImageSection(t){let n=t.image?t.image.name:"";if(n.length===0)return void hs("Can't add FormattedSection with an empty image.");let a=this.getNextImageSectionCharCode();a?(this.text+=String.fromCharCode(a),this.sections.push(ju.forImage(n,t.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):hs("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function xh(s,t,n,a,c,m,g,x,S,M,L,z,U,G,Z){let J=su.fromFeature(s,c),ne;z===R.al.vertical&&J.verticalizePunctuation();let{processBidirectionalText:he,processStyledBidirectionalText:Te}=Po;if(he&&J.sections.length===1){ne=[];let re=he(J.toString(),b2(J,M,m,t,a,G));for(let ye of re){let ct=new su;ct.text=ye,ct.sections=J.sections;for(let Kt=0;Kt<ye.length;Kt++)ct.sectionIndex.push(0);ne.push(ct)}}else if(Te){ne=[];let re=Te(J.text,J.sectionIndex,b2(J,M,m,t,a,G));for(let ye of re){let ct=new su;ct.text=ye[0],ct.sectionIndex=ye[1],ct.sections=J.sections,ne.push(ct)}}else ne=function(re,ye){let ct=[],Kt=re.text,vt=0;for(let Ft of ye)ct.push(re.substring(vt,Ft)),vt=Ft;return vt<Kt.length&&ct.push(re.substring(vt,Kt.length)),ct}(J,b2(J,M,m,t,a,G));let me=[],q={positionedLines:me,text:J.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:z,iconsInText:!1,verticalizable:!1};return function(re,ye,ct,Kt,vt,Ft,hi,Qt,fi,qt,er,mr){let dr=0,ar=0,Vr=0,Qn=0,Gs=Qt==="right"?1:Qt==="left"?0:.5,Da=qs/mr,Zo=0;for(let Un of vt){Un.trim();let da=Un.getMaxScale(),Sa={positionedGlyphs:[],lineOffset:0};re.positionedLines[Zo]=Sa;let Aa=Sa.positionedGlyphs,ao=0;if(!Un.length()){ar+=Ft,++Zo;continue}let Ho=K0(Kt,Un,Da);for(let wo=0;wo<Un.length();wo++){let Zs=Un.getSection(wo),fa=Un.getSectionIndex(wo),ma=Un.getCharCode(wo),Is=Q0(fi,er,ma),$n;if(Zs.imageName){if(re.iconsInText=!0,Zs.scale=Zs.scale*Da,$n=t3(Zs,Is,da,Ho,Kt),!$n)continue;ao=Math.max(ao,$n.imageOffset)}else if($n=e3(Zs,ma,Is,Ho,ye,ct),!$n)continue;let{rect:Tl,metrics:cu,baselineOffset:Sl}=$n;Aa.push({glyph:ma,imageName:Zs.imageName,x:dr,y:ar+Sl+vh,vertical:Is,scale:Zs.scale,fontStack:Zs.fontStack,sectionIndex:fa,metrics:cu,rect:Tl}),Is?(re.verticalizable=!0,dr+=(Zs.imageName?cu.advance:qs)*Zs.scale+qt):dr+=cu.advance*Zs.scale+qt}Aa.length!==0&&(Vr=Math.max(dr-qt,Vr),i3(Aa,0,Aa.length-1,Gs)),dr=0,Sa.lineOffset=Math.max(ao,(da-1)*qs);let pa=Ft*da+ao;ar+=pa,Qn=Math.max(pa,Qn),++Zo}let{horizontalAlign:xo,verticalAlign:Ta}=v2(hi);(function(Un,da,Sa,Aa,ao,Ho,pa,wo,Zs){let fa=(da-Sa)*ao,ma=0;ma=Ho!==pa?-wo*Aa-vh:-Aa*Zs*pa+.5*pa;for(let Is of Un)for(let $n of Is.positionedGlyphs)$n.x+=fa,$n.y+=ma})(re.positionedLines,Gs,xo,Ta,Vr,Qn,Ft,ar,vt.length),re.top+=-Ta*ar,re.bottom=re.top+ar,re.left+=-xo*Vr,re.right=re.left+Vr}(q,t,n,a,ne,g,x,S,z,M,U,Z),!function(re){for(let ye of re)if(ye.positionedGlyphs.length!==0)return!1;return!0}(me)&&q}let wh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},X0={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},J0={40:!0};function Qd(s,t,n,a,c,m){if(t.imageName){let g=a[t.imageName];return g?g.displaySize[0]*t.scale*qs/m+c:0}{let g=n[t.fontStack],x=g&&g[s];return x?x.metrics.advance*t.scale+c:0}}function ep(s,t,n,a){let c=Math.pow(s-t,2);return a?s<t?c/2:2*c:c+Math.abs(n)*n}function Y0(s,t,n){let a=0;return s===10&&(a-=1e4),n&&(a+=150),s!==40&&s!==65288||(a+=50),t!==41&&t!==65289||(a+=50),a}function tp(s,t,n,a,c,m){let g=null,x=ep(t,n,c,m);for(let S of a){let M=ep(t-S.x,n,c,m)+S.badness;M<=x&&(g=S,x=M)}return{index:s,x:t,priorBreak:g,badness:x}}function ip(s){return s?ip(s.priorBreak).concat(s.index):[]}function b2(s,t,n,a,c,m){if(!s)return[];let g=[],x=function(z,U,G,Z,J,ne){let he=0;for(let Te=0;Te<z.length();Te++){let me=z.getSection(Te);he+=Qd(z.getCharCode(Te),me,Z,J,U,ne)}return he/Math.max(1,Math.ceil(he/G))}(s,t,n,a,c,m),S=s.text.indexOf("\u200B")>=0,M=0;for(let z=0;z<s.length();z++){let U=s.getSection(z),G=s.getCharCode(z);if(wh[G]||(M+=Qd(G,U,a,c,t,m)),z<s.length()-1){let Z=!((L=G)<11904)&&(!!Cr["CJK Compatibility Forms"](L)||!!Cr["CJK Compatibility"](L)||!!Cr["CJK Strokes"](L)||!!Cr["CJK Symbols and Punctuation"](L)||!!Cr["Enclosed CJK Letters and Months"](L)||!!Cr["Halfwidth and Fullwidth Forms"](L)||!!Cr["Ideographic Description Characters"](L)||!!Cr["Vertical Forms"](L)||jl.test(String.fromCodePoint(L)));(X0[G]||Z||U.imageName||z!==s.length()-2&&J0[s.getCharCode(z+1)])&&g.push(tp(z+1,M,x,g,Y0(G,s.getCharCode(z+1),Z&&S),!1))}}var L;return ip(tp(s.length(),M,x,g,0,!0))}function v2(s){let t=.5,n=.5;switch(s){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function K0(s,t,n){let a=t.getMaxScale()*qs,{maxImageWidth:c,maxImageHeight:m}=t.getMaxImageSize(s),g=Math.max(a,m*n);return{verticalLineContentWidth:Math.max(a,c*n),horizontalLineContentHeight:g}}function rp(s){switch(s){case"top":return 0;case"center":return .5;default:return 1}}function Q0(s,t,n){return!(s===R.al.horizontal||!t&&!c1(n)||t&&(wh[n]||(a=n,/\p{sc=Arab}/u.test(String.fromCodePoint(a)))));var a}function e3(s,t,n,a,c,m){let g=m[s.fontStack],x=function(M,L,z,U){if(M&&M.rect)return M;let G=L[z.fontStack],Z=G&&G[U];return Z?{rect:null,metrics:Z.metrics}:null}(g&&g[t],c,s,t);if(x===null)return null;let S;if(n)S=a.verticalLineContentWidth-s.scale*qs;else{let M=rp(s.verticalAlign);S=(a.horizontalLineContentHeight-s.scale*qs)*M}return{rect:x.rect,metrics:x.metrics,baselineOffset:S}}function t3(s,t,n,a,c){let m=c[s.imageName];if(!m)return null;let g=m.paddedRect,x=m.displaySize,S={width:x[0],height:x[1],left:vo,top:-3,advance:t?x[1]:x[0]},M;if(t)M=a.verticalLineContentWidth-x[1]*s.scale;else{let L=rp(s.verticalAlign);M=(a.horizontalLineContentHeight-x[1]*s.scale)*L}return{rect:g,metrics:S,baselineOffset:M,imageOffset:(t?x[0]:x[1])*s.scale-qs*n}}function i3(s,t,n,a){if(a===0)return;let c=s[n],m=(s[n].x+c.metrics.advance*c.scale)*a;for(let g=t;g<=n;g++)s[g].x-=m}function r3(s,t,n){let{horizontalAlign:a,verticalAlign:c}=v2(n),m=t[0]-s.displaySize[0]*a,g=t[1]-s.displaySize[1]*c;return{image:s,top:g,bottom:g+s.displaySize[1],left:m,right:m+s.displaySize[0]}}function np(s){var t,n;let a=s.left,c=s.top,m=s.right-a,g=s.bottom-c,x=(t=s.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",S=(n=s.image.textFitHeight)!==null&&n!==void 0?n:"stretchOrShrink",M=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(S==="proportional"){if(x==="stretchOnly"&&m/g<M||x==="proportional"){let L=Math.ceil(g*M);a*=L/m,m=L}}else if(x==="proportional"&&S==="stretchOnly"&&M!==0&&m/g>M){let L=Math.ceil(m/M);c*=L/g,g=L}return{x1:a,y1:c,x2:a+m,y2:c+g}}function sp(s,t,n,a,c,m){let g=s.image,x;if(g.content){let ne=g.content,he=g.pixelRatio||1;x=[ne[0]/he,ne[1]/he,g.displaySize[0]-ne[2]/he,g.displaySize[1]-ne[3]/he]}let S=t.left*m,M=t.right*m,L,z,U,G;n==="width"||n==="both"?(G=c[0]+S-a[3],z=c[0]+M+a[1]):(G=c[0]+(S+M-g.displaySize[0])/2,z=G+g.displaySize[0]);let Z=t.top*m,J=t.bottom*m;return n==="height"||n==="both"?(L=c[1]+Z-a[0],U=c[1]+J+a[2]):(L=c[1]+(Z+J-g.displaySize[1])/2,U=L+g.displaySize[1]),{image:g,top:L,right:z,bottom:U,left:G,collisionPadding:x}}let Vu=255,Yl=128,Q1=Vu*Yl;function ap(s,t){let{expression:n}=t;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new yn(s+1))};if(n.kind==="source")return{kind:"source"};{let{zoomStops:a,interpolationType:c}=n,m=0;for(;m<a.length&&a[m]<=s;)m++;m=Math.max(0,m-1);let g=m;for(;g<a.length&&a[g]<s+1;)g++;g=Math.min(a.length-1,g);let x=a[m],S=a[g];return n.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:c}:{kind:"camera",minZoom:x,maxZoom:S,minSize:n.evaluate(new yn(x)),maxSize:n.evaluate(new yn(S)),interpolationType:c}}}function x2(s,t,n){let a="never",c=s.get(t);return c?a=c:s.get(n)&&(a="always"),a}let n3=zu.VectorTileFeature.types,s3=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Eh(s,t,n,a,c,m,g,x,S,M,L,z,U){let G=x?Math.min(Q1,Math.round(x[0])):0,Z=x?Math.min(Q1,Math.round(x[1])):0;s.emplaceBack(t,n,Math.round(32*a),Math.round(32*c),m,g,(G<<1)+(S?1:0),Z,16*M,16*L,256*z,256*U)}function w2(s,t,n){s.emplaceBack(t.x,t.y,n),s.emplaceBack(t.x,t.y,n),s.emplaceBack(t.x,t.y,n),s.emplaceBack(t.x,t.y,n)}function a3(s){for(let t of s.sections)if(Vl(t.text))return!0;return!1}class E2{constructor(t){this.layoutVertexArray=new vn,this.indexArray=new Jr,this.programConfigurations=t,this.segments=new Zr,this.dynamicLayoutVertexArray=new Qr,this.opacityVertexArray=new En,this.hasVisibleVertices=!1,this.placedSymbolArray=new xe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,n,a,c){this.isEmpty()||(a&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,F0.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,B0.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,s3,!0),this.opacityVertexBuffer.itemSize=1),(a||c)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}zi("SymbolBuffers",E2);class T2{constructor(t,n,a){this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new a,this.segments=new Zr,this.collisionVertexArray=new mn}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,j0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}zi("CollisionBuffers",T2);class au{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(g=>g.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ap(this.zoom,n["text-size"]),this.iconSizeData=ap(this.zoom,n["icon-size"]);let a=this.layers[0].layout,c=a.get("symbol-sort-key"),m=a.get("symbol-z-order");this.canOverlap=x2(a,"text-overlap","text-allow-overlap")!=="never"||x2(a,"icon-overlap","icon-allow-overlap")!=="never"||a.get("text-ignore-placement")||a.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&!c.isConstant(),this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,a.get("symbol-placement")==="point"&&(this.writingModes=a.get("text-writing-mode").map(g=>R.al[g])),this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id),this.sourceID=t.sourceID}createArrays(){this.text=new E2(new ha(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new E2(new ha(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new Ce,this.lineVertexArray=new we,this.symbolInstances=new Ee,this.textAnchorOffsets=new Bt}calculateGlyphDependencies(t,n,a,c,m){for(let g=0;g<t.length;g++)if(n[t.charCodeAt(g)]=!0,(a||c)&&m){let x=Bu[t.charAt(g)];x&&(n[x.charCodeAt(0)]=!0)}}populate(t,n,a){let c=this.layers[0],m=c.layout,g=m.get("text-font"),x=m.get("text-field"),S=m.get("icon-image"),M=(x.value.kind!=="constant"||x.value.value instanceof ds&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(g.value.kind!=="constant"||g.value.value.length>0),L=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,z=m.get("symbol-sort-key");if(this.features=[],!M&&!L)return;let U=n.iconDependencies,G=n.glyphDependencies,Z=n.availableImages,J=new yn(this.zoom);for(let{feature:ne,id:he,index:Te,sourceLayerIndex:me}of t){let q=c._featureFilter.needGeometry,re=Hl(ne,q);if(!c._featureFilter.filter(J,re,a))continue;let ye,ct;if(q||(re.geometry=Zl(ne)),M){let vt=c.getValueAndResolveTokens("text-field",re,a,Z),Ft=ds.factory(vt),hi=this.hasRTLText=this.hasRTLText||a3(Ft);(!hi||Po.getRTLTextPluginStatus()==="unavailable"||hi&&Po.isParsed())&&(ye=U0(Ft,c,re))}if(L){let vt=c.getValueAndResolveTokens("icon-image",re,a,Z);ct=vt instanceof Ze?vt:Ze.fromString(vt)}if(!ye&&!ct)continue;let Kt=this.sortFeaturesByKey?z.evaluate(re,{},a):void 0;if(this.features.push({id:he,text:ye,icon:ct,index:Te,sourceLayerIndex:me,geometry:re.geometry,properties:ne.properties,type:n3[ne.type],sortKey:Kt}),ct&&(U[ct.name]=!0),ye){let vt=g.evaluate(re,{},a).join(","),Ft=m.get("text-rotation-alignment")!=="viewport"&&m.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(R.al.vertical)>=0;for(let hi of ye.sections)if(hi.image)U[hi.image.name]=!0;else{let Qt=Mo(ye.toString()),fi=hi.fontStack||vt,qt=G[fi]=G[fi]||{};this.calculateGlyphDependencies(hi.text,qt,Ft,this.allowVerticalPlacement,Qt)}}}m.get("symbol-placement")==="line"&&(this.features=function(ne){let he={},Te={},me=[],q=0;function re(vt){me.push(ne[vt]),q++}function ye(vt,Ft,hi){let Qt=Te[vt];return delete Te[vt],Te[Ft]=Qt,me[Qt].geometry[0].pop(),me[Qt].geometry[0]=me[Qt].geometry[0].concat(hi[0]),Qt}function ct(vt,Ft,hi){let Qt=he[Ft];return delete he[Ft],he[vt]=Qt,me[Qt].geometry[0].shift(),me[Qt].geometry[0]=hi[0].concat(me[Qt].geometry[0]),Qt}function Kt(vt,Ft,hi){let Qt=hi?Ft[0][Ft[0].length-1]:Ft[0][0];return`${vt}:${Qt.x}:${Qt.y}`}for(let vt=0;vt<ne.length;vt++){let Ft=ne[vt],hi=Ft.geometry,Qt=Ft.text?Ft.text.toString():null;if(!Qt){re(vt);continue}let fi=Kt(Qt,hi),qt=Kt(Qt,hi,!0);if(fi in Te&&qt in he&&Te[fi]!==he[qt]){let er=ct(fi,qt,hi),mr=ye(fi,qt,me[er].geometry);delete he[fi],delete Te[qt],Te[Kt(Qt,me[mr].geometry,!0)]=mr,me[er].geometry=null}else fi in Te?ye(fi,qt,hi):qt in he?ct(fi,qt,hi):(re(vt),he[fi]=q-1,Te[qt]=q-1)}return me.filter(vt=>vt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ne,he)=>ne.sortKey-he.sortKey)}update(t,n,a){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,n,this.layers,a),this.icon.programConfigurations.updatePaintArrays(t,n,this.layers,a))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,n){let a=this.lineVertexArray.length;if(t.segment!==void 0){let c=t.dist(n[t.segment+1]),m=t.dist(n[t.segment]),g={};for(let x=t.segment+1;x<n.length;x++)g[x]={x:n[x].x,y:n[x].y,tileUnitDistanceFromAnchor:c},x<n.length-1&&(c+=n[x+1].dist(n[x]));for(let x=t.segment||0;x>=0;x--)g[x]={x:n[x].x,y:n[x].y,tileUnitDistanceFromAnchor:m},x>0&&(m+=n[x-1].dist(n[x]));for(let x=0;x<n.length;x++){let S=g[x];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:a,lineLength:this.lineVertexArray.length-a}}addSymbols(t,n,a,c,m,g,x,S,M,L,z,U){let G=t.indexArray,Z=t.layoutVertexArray,J=t.segments.prepareSegment(4*n.length,Z,G,this.canOverlap?g.sortKey:void 0),ne=this.glyphOffsetArray.length,he=J.vertexLength,Te=this.allowVerticalPlacement&&x===R.al.vertical?Math.PI/2:0,me=g.text&&g.text.sections;for(let q=0;q<n.length;q++){let{tl:re,tr:ye,bl:ct,br:Kt,tex:vt,pixelOffsetTL:Ft,pixelOffsetBR:hi,minFontScaleX:Qt,minFontScaleY:fi,glyphOffset:qt,isSDF:er,sectionIndex:mr}=n[q],dr=J.vertexLength,ar=qt[1];Eh(Z,S.x,S.y,re.x,ar+re.y,vt.x,vt.y,a,er,Ft.x,Ft.y,Qt,fi),Eh(Z,S.x,S.y,ye.x,ar+ye.y,vt.x+vt.w,vt.y,a,er,hi.x,Ft.y,Qt,fi),Eh(Z,S.x,S.y,ct.x,ar+ct.y,vt.x,vt.y+vt.h,a,er,Ft.x,hi.y,Qt,fi),Eh(Z,S.x,S.y,Kt.x,ar+Kt.y,vt.x+vt.w,vt.y+vt.h,a,er,hi.x,hi.y,Qt,fi),w2(t.dynamicLayoutVertexArray,S,Te),G.emplaceBack(dr,dr+2,dr+1),G.emplaceBack(dr+1,dr+2,dr+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(qt[0]),q!==n.length-1&&mr===n[q+1].sectionIndex||t.programConfigurations.populatePaintArrays(Z.length,g,g.index,{},U,me&&me[mr])}t.placedSymbolArray.emplaceBack(S.x,S.y,ne,this.glyphOffsetArray.length-ne,he,M,L,S.segment,a?a[0]:0,a?a[1]:0,c[0],c[1],x,0,!1,0,z)}_addCollisionDebugVertex(t,n,a,c,m,g){return n.emplaceBack(0,0),t.emplaceBack(a.x,a.y,c,m,Math.round(g.x),Math.round(g.y))}addCollisionDebugVertices(t,n,a,c,m,g,x){let S=m.segments.prepareSegment(4,m.layoutVertexArray,m.indexArray),M=S.vertexLength,L=m.layoutVertexArray,z=m.collisionVertexArray,U=x.anchorX,G=x.anchorY;this._addCollisionDebugVertex(L,z,g,U,G,new bi(t,n)),this._addCollisionDebugVertex(L,z,g,U,G,new bi(a,n)),this._addCollisionDebugVertex(L,z,g,U,G,new bi(a,c)),this._addCollisionDebugVertex(L,z,g,U,G,new bi(t,c)),S.vertexLength+=4;let Z=m.indexArray;Z.emplaceBack(M,M+1),Z.emplaceBack(M+1,M+2),Z.emplaceBack(M+2,M+3),Z.emplaceBack(M+3,M),S.primitiveLength+=4}addDebugCollisionBoxes(t,n,a,c){for(let m=t;m<n;m++){let g=this.collisionBoxArray.get(m);this.addCollisionDebugVertices(g.x1,g.y1,g.x2,g.y2,c?this.textCollisionBox:this.iconCollisionBox,g.anchorPoint,a)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new T2(Tn,Hd.members,cs),this.iconCollisionBox=new T2(Tn,Hd.members,cs);for(let t=0;t<this.symbolInstances.length;t++){let n=this.symbolInstances.get(t);this.addDebugCollisionBoxes(n.textBoxStartIndex,n.textBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.iconBoxStartIndex,n.iconBoxEndIndex,n,!1),this.addDebugCollisionBoxes(n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex,n,!1)}}_deserializeCollisionBoxesForSymbol(t,n,a,c,m,g,x,S,M){let L={};for(let z=n;z<a;z++){let U=t.get(z);L.textBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.textFeatureIndex=U.featureIndex;break}for(let z=c;z<m;z++){let U=t.get(z);L.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.verticalTextFeatureIndex=U.featureIndex;break}for(let z=g;z<x;z++){let U=t.get(z);L.iconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.iconFeatureIndex=U.featureIndex;break}for(let z=S;z<M;z++){let U=t.get(z);L.verticalIconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.verticalIconFeatureIndex=U.featureIndex;break}return L}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){let a=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,a.textBoxStartIndex,a.textBoxEndIndex,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a.iconBoxStartIndex,a.iconBoxEndIndex,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,n){let a=t.placedSymbolArray.get(n),c=a.vertexStartIndex+4*a.numGlyphs;for(let m=a.vertexStartIndex;m<c;m+=4)t.indexArray.emplaceBack(m,m+2,m+1),t.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let n=Math.sin(t),a=Math.cos(t),c=[],m=[],g=[];for(let x=0;x<this.symbolInstances.length;++x){g.push(x);let S=this.symbolInstances.get(x);c.push(0|Math.round(n*S.anchorX+a*S.anchorY)),m.push(S.featureIndex)}return g.sort((x,S)=>c[x]-c[S]||m[S]-m[x]),g}addToSortKeyRanges(t,n){let a=this.sortKeyRanges[this.sortKeyRanges.length-1];a&&a.sortKey===n?a.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let n of this.symbolInstanceIndexes){let a=this.symbolInstances.get(n);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((c,m,g)=>{c>=0&&g.indexOf(c)===m&&this.addIndicesForPlacedSymbol(this.text,c)}),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let op,lp;zi("SymbolBucket",au,{omit:["layers","collisionBoxArray","features","compareText"]}),au.MAX_GLYPHS=65535,au.addDynamicAttributes=w2;var S2={get paint(){return lp=lp||new Xn({"icon-opacity":new pr(te.paint_symbol["icon-opacity"]),"icon-color":new pr(te.paint_symbol["icon-color"]),"icon-halo-color":new pr(te.paint_symbol["icon-halo-color"]),"icon-halo-width":new pr(te.paint_symbol["icon-halo-width"]),"icon-halo-blur":new pr(te.paint_symbol["icon-halo-blur"]),"icon-translate":new nr(te.paint_symbol["icon-translate"]),"icon-translate-anchor":new nr(te.paint_symbol["icon-translate-anchor"]),"text-opacity":new pr(te.paint_symbol["text-opacity"]),"text-color":new pr(te.paint_symbol["text-color"],{runtimeType:kr,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new pr(te.paint_symbol["text-halo-color"]),"text-halo-width":new pr(te.paint_symbol["text-halo-width"]),"text-halo-blur":new pr(te.paint_symbol["text-halo-blur"]),"text-translate":new nr(te.paint_symbol["text-translate"]),"text-translate-anchor":new nr(te.paint_symbol["text-translate-anchor"])})},get layout(){return op=op||new Xn({"symbol-placement":new nr(te.layout_symbol["symbol-placement"]),"symbol-spacing":new nr(te.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new nr(te.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new pr(te.layout_symbol["symbol-sort-key"]),"symbol-z-order":new nr(te.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new nr(te.layout_symbol["icon-allow-overlap"]),"icon-overlap":new nr(te.layout_symbol["icon-overlap"]),"icon-ignore-placement":new nr(te.layout_symbol["icon-ignore-placement"]),"icon-optional":new nr(te.layout_symbol["icon-optional"]),"icon-rotation-alignment":new nr(te.layout_symbol["icon-rotation-alignment"]),"icon-size":new pr(te.layout_symbol["icon-size"]),"icon-text-fit":new nr(te.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new nr(te.layout_symbol["icon-text-fit-padding"]),"icon-image":new pr(te.layout_symbol["icon-image"]),"icon-rotate":new pr(te.layout_symbol["icon-rotate"]),"icon-padding":new pr(te.layout_symbol["icon-padding"]),"icon-keep-upright":new nr(te.layout_symbol["icon-keep-upright"]),"icon-offset":new pr(te.layout_symbol["icon-offset"]),"icon-anchor":new pr(te.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new nr(te.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new nr(te.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new nr(te.layout_symbol["text-rotation-alignment"]),"text-field":new pr(te.layout_symbol["text-field"]),"text-font":new pr(te.layout_symbol["text-font"]),"text-size":new pr(te.layout_symbol["text-size"]),"text-max-width":new pr(te.layout_symbol["text-max-width"]),"text-line-height":new nr(te.layout_symbol["text-line-height"]),"text-letter-spacing":new pr(te.layout_symbol["text-letter-spacing"]),"text-justify":new pr(te.layout_symbol["text-justify"]),"text-radial-offset":new pr(te.layout_symbol["text-radial-offset"]),"text-variable-anchor":new nr(te.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new pr(te.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new pr(te.layout_symbol["text-anchor"]),"text-max-angle":new nr(te.layout_symbol["text-max-angle"]),"text-writing-mode":new nr(te.layout_symbol["text-writing-mode"]),"text-rotate":new pr(te.layout_symbol["text-rotate"]),"text-padding":new nr(te.layout_symbol["text-padding"]),"text-keep-upright":new nr(te.layout_symbol["text-keep-upright"]),"text-transform":new pr(te.layout_symbol["text-transform"]),"text-offset":new pr(te.layout_symbol["text-offset"]),"text-allow-overlap":new nr(te.layout_symbol["text-allow-overlap"]),"text-overlap":new nr(te.layout_symbol["text-overlap"]),"text-ignore-placement":new nr(te.layout_symbol["text-ignore-placement"]),"text-optional":new nr(te.layout_symbol["text-optional"])})}};class cp{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:cr,this.defaultValue=t}evaluate(t){if(t.formattedSection){let n=this.defaultValue.property.overrides;if(n&&n.hasOverride(t.formattedSection))return n.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}zi("FormatSectionOverride",cp,{omit:["defaultValue"]});class Th extends Fa{constructor(t){super(t,S2)}recalculate(t,n){if(super.recalculate(t,n),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let a=this.layout.get("text-writing-mode");if(a){let c=[];for(let m of a)c.indexOf(m)<0&&c.push(m);this.layout._values["text-writing-mode"]=c}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,n,a,c){let m=this.layout.get(t).evaluate(n,{},a,c),g=this._unevaluatedLayout._values[t];return g.isDataDriven()||jo(g.value)||!m?m:function(x,S){return S.replace(/{([^{}]+)}/g,(M,L)=>x&&L in x?String(x[L]):"")}(n.properties,m)}createBucket(t){return new au(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let t of S2.paint.overridableProperties){if(!Th.hasPaintOverride(this.layout,t))continue;let n=this.paint.get(t),a=new cp(n),c=new Ds(a,n.property.specification),m=null;m=n.value.kind==="constant"||n.value.kind==="source"?new z1("source",c):new s1("composite",c,n.value.zoomStops),this.paint._values[t]=new ca(n.property,m,n.parameters)}}_handleOverridablePaintPropertyUpdate(t,n,a){return!(!this.layout||n.isDataDriven()||a.isDataDriven())&&Th.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,n){let a=t.get("text-field"),c=S2.paint.properties[n],m=!1,g=x=>{for(let S of x)if(c.overrides&&c.overrides.hasOverride(S))return void(m=!0)};if(a.value.kind==="constant"&&a.value.value instanceof ds)g(a.value.value.sections);else if(a.value.kind==="source"){let x=M=>{m||(M instanceof xr&&Rn(M.value)===f?g(M.value.sections):M instanceof Dt?g(M.sections):M.eachChild(x))},S=a.value;S._styleExpression&&x(S._styleExpression.expression)}return m}}let up;var o3={get paint(){return up=up||new Xn({"background-color":new nr(te.paint_background["background-color"]),"background-pattern":new d1(te.paint_background["background-pattern"]),"background-opacity":new nr(te.paint_background["background-opacity"])})}};class l3 extends Fa{constructor(t){super(t,o3)}}let hp;var c3={get paint(){return hp=hp||new Xn({"raster-opacity":new nr(te.paint_raster["raster-opacity"]),"raster-hue-rotate":new nr(te.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new nr(te.paint_raster["raster-brightness-min"]),"raster-brightness-max":new nr(te.paint_raster["raster-brightness-max"]),"raster-saturation":new nr(te.paint_raster["raster-saturation"]),"raster-contrast":new nr(te.paint_raster["raster-contrast"]),"raster-resampling":new nr(te.paint_raster["raster-resampling"]),"raster-fade-duration":new nr(te.paint_raster["raster-fade-duration"])})}};class u3 extends Fa{constructor(t){super(t,c3)}}class h3 extends Fa{constructor(t){super(t,{}),this.onAdd=n=>{this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)},this.onRemove=n=>{this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class d3{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let p3={once:!0},A2=63710088e-1;class ec{constructor(t,n){if(isNaN(t)||isNaN(n))throw new Error(`Invalid LngLat object: (${t}, ${n})`);if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ec(Ma(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){let n=Math.PI/180,a=this.lat*n,c=t.lat*n,m=Math.sin(a)*Math.sin(c)+Math.cos(a)*Math.cos(c)*Math.cos((t.lng-this.lng)*n);return A2*Math.acos(Math.min(m,1))}static convert(t){if(t instanceof ec)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new ec(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new ec(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let dp=2*Math.PI*A2;function pp(s){return dp*Math.cos(s*Math.PI/180)}function fp(s){return(180+s)/360}function mp(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function gp(s,t){return s/pp(t)}function C2(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function _p(s,t){return s*pp(C2(t))}class Uu{constructor(t,n,a=0){this.x=+t,this.y=+n,this.z=+a}static fromLngLat(t,n=0){let a=ec.convert(t);return new Uu(fp(a.lng),mp(a.lat),gp(n,a.lat))}toLngLat(){return new ec(360*this.x-180,C2(this.y))}toAltitude(){return _p(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/dp*(t=C2(this.y),1/Math.cos(t*Math.PI/180));var t}}function yp(s,t,n){var a=2*Math.PI*6378137/256/Math.pow(2,n);return[s*a-2*Math.PI*6378137/2,t*a-2*Math.PI*6378137/2]}class I2{constructor(t,n,a){if(!function(c,m,g){return!(c<0||c>25||g<0||g>=Math.pow(2,c)||m<0||m>=Math.pow(2,c))}(t,n,a))throw new Error(`x=${n}, y=${a}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=n,this.y=a,this.key=ou(0,t,t,n,a)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,n,a){let c=(g=this.y,x=this.z,S=yp(256*(m=this.x),256*(g=Math.pow(2,x)-g-1),x),M=yp(256*(m+1),256*(g+1),x),S[0]+","+S[1]+","+M[0]+","+M[1]);var m,g,x,S,M;let L=function(z,U,G){let Z,J="";for(let ne=z;ne>0;ne--)Z=1<<ne-1,J+=(U&Z?1:0)+(G&Z?2:0);return J}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(a==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,n>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,c)}isChildOf(t){let n=this.z-t.z;return n>0&&t.x===this.x>>n&&t.y===this.y>>n}getTilePoint(t){let n=Math.pow(2,this.z);return new bi((t.x*n-this.x)*Er,(t.y*n-this.y)*Er)}toString(){return`${this.z}/${this.x}/${this.y}`}}class bp{constructor(t,n){this.wrap=t,this.canonical=n,this.key=ou(t,n.z,n.z,n.x,n.y)}}class Go{constructor(t,n,a,c,m){if(this.terrainRttPosMatrix32f=null,t<a)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${a}`);this.overscaledZ=t,this.wrap=n,this.canonical=new I2(a,+c,+m),this.key=ou(n,t,a,c,m)}clone(){return new Go(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);let n=this.canonical.z-t;return t>this.canonical.z?new Go(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Go(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}calculateScaledKey(t,n){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);let a=this.canonical.z-t;return t>this.canonical.z?ou(this.wrap*+n,t,this.canonical.z,this.canonical.x,this.canonical.y):ou(this.wrap*+n,t,t,this.canonical.x>>a,this.canonical.y>>a)}isChildOf(t){if(t.wrap!==this.wrap)return!1;let n=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>n&&t.canonical.y===this.canonical.y>>n}children(t){if(this.overscaledZ>=t)return[new Go(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let n=this.canonical.z+1,a=2*this.canonical.x,c=2*this.canonical.y;return[new Go(n,this.wrap,n,a,c),new Go(n,this.wrap,n,a+1,c),new Go(n,this.wrap,n,a,c+1),new Go(n,this.wrap,n,a+1,c+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Go(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Go(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new bp(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Uu(t.x-this.wrap,t.y))}}function ou(s,t,n,a,c){(s*=2)<0&&(s=-1*s-1);let m=1<<n;return(m*m*s+m*c+a).toString(36)+n.toString(36)+t.toString(36)}zi("CanonicalTileID",I2),zi("OverscaledTileID",Go,{omit:["terrainRttPosMatrix32f"]});class vp{constructor(t,n,a,c=1,m=1,g=1,x=0){if(this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(a&&!["mapbox","terrarium","custom"].includes(a))return void hs(`"${a}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=n.height;let S=this.dim=n.height-2;switch(this.data=new Uint32Array(n.data.buffer),a){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=c,this.greenFactor=m,this.blueFactor=g,this.baseShift=x;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let M=0;M<S;M++)this.data[this._idx(-1,M)]=this.data[this._idx(0,M)],this.data[this._idx(S,M)]=this.data[this._idx(S-1,M)],this.data[this._idx(M,-1)]=this.data[this._idx(M,0)],this.data[this._idx(M,S)]=this.data[this._idx(M,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let M=0;M<S;M++)for(let L=0;L<S;L++){let z=this.get(M,L);z>this.max&&(this.max=z),z<this.min&&(this.min=z)}}get(t,n){let a=new Uint8Array(this.data.buffer),c=4*this._idx(t,n);return this.unpack(a[c],a[c+1],a[c+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,n){if(t<-1||t>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(t+1)}unpack(t,n,a){return t*this.redFactor+n*this.greenFactor+a*this.blueFactor-this.baseShift}getPixels(){return new io({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,n,a){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let c=n*this.dim,m=n*this.dim+this.dim,g=a*this.dim,x=a*this.dim+this.dim;switch(n){case-1:c=m-1;break;case 1:m=c+1}switch(a){case-1:g=x-1;break;case 1:x=g+1}let S=-n*this.dim,M=-a*this.dim;for(let L=g;L<x;L++)for(let z=c;z<m;z++)this.data[this._idx(z,L)]=t.data[this._idx(z+S,L+M)]}}zi("DEMData",vp);class xp{constructor(t){this._stringToNumber={},this._numberToString=[];for(let n=0;n<t.length;n++){let a=t[n];this._stringToNumber[a]=n,this._numberToString[n]=a}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class wp{constructor(t,n,a,c,m){this.type="Feature",this._vectorTileFeature=t,t._z=n,t._x=a,t._y=c,this.properties=t.properties,this.id=m}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){let t={geometry:this.geometry};for(let n in this)n!=="_geometry"&&n!=="_vectorTileFeature"&&(t[n]=this[n]);return t}}class Ep{constructor(t,n){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Gr(Er,16,0),this.grid3D=new Gr(Er,16,0),this.featureIndexArray=new wt,this.promoteId=n}insert(t,n,a,c,m,g){let x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(a,c,m);let S=g?this.grid3D:this.grid;for(let M=0;M<n.length;M++){let L=n[M],z=[1/0,1/0,-1/0,-1/0];for(let U=0;U<L.length;U++){let G=L[U];z[0]=Math.min(z[0],G.x),z[1]=Math.min(z[1],G.y),z[2]=Math.max(z[2],G.x),z[3]=Math.max(z[3],G.y)}z[0]<Er&&z[1]<Er&&z[2]>=0&&z[3]>=0&&S.insert(x,z[0],z[1],z[2],z[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new zu.VectorTile(new g2(this.rawTileData)).layers,this.sourceLayerCoder=new xp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,n,a,c){this.loadVTLayers();let m=t.params,g=Er/t.tileSize/t.scale,x=Bl(m.filter),S=t.queryGeometry,M=t.queryPadding*g,L=Sp(S),z=this.grid.query(L.minX-M,L.minY-M,L.maxX+M,L.maxY+M),U=Sp(t.cameraQueryGeometry),G=this.grid3D.query(U.minX-M,U.minY-M,U.maxX+M,U.maxY+M,(ne,he,Te,me)=>function(q,re,ye,ct,Kt){for(let Ft of q)if(re<=Ft.x&&ye<=Ft.y&&ct>=Ft.x&&Kt>=Ft.y)return!0;let vt=[new bi(re,ye),new bi(re,Kt),new bi(ct,Kt),new bi(ct,ye)];if(q.length>2){for(let Ft of vt)if(Wl(q,Ft))return!0}for(let Ft=0;Ft<q.length-1;Ft++)if(ph(q[Ft],q[Ft+1],vt))return!0;return!1}(t.cameraQueryGeometry,ne-M,he-M,Te+M,me+M));for(let ne of G)z.push(ne);z.sort(f3);let Z={},J;for(let ne=0;ne<z.length;ne++){let he=z[ne];if(he===J)continue;J=he;let Te=this.featureIndexArray.get(he),me=null;this.loadMatchingFeature(Z,Te.bucketIndex,Te.sourceLayerIndex,Te.featureIndex,x,m.layers,m.availableImages,n,a,c,(q,re,ye)=>(me||(me=Zl(q)),re.queryIntersectsFeature({queryGeometry:S,feature:q,featureState:ye,geometry:me,zoom:this.z,transform:t.transform,pixelsToTileUnits:g,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation})))}return Z}loadMatchingFeature(t,n,a,c,m,g,x,S,M,L,z){let U=this.bucketLayerIDs[n];if(g&&!U.some(ne=>g.has(ne)))return;let G=this.sourceLayerCoder.decode(a),Z=this.vtLayers[G].feature(c);if(m.needGeometry){let ne=Hl(Z,!0);if(!m.filter(new yn(this.tileID.overscaledZ),ne,this.tileID.canonical))return}else if(!m.filter(new yn(this.tileID.overscaledZ),Z))return;let J=this.getId(Z,G);for(let ne=0;ne<U.length;ne++){let he=U[ne];if(g&&!g.has(he))continue;let Te=S[he];if(!Te)continue;let me={};J&&L&&(me=L.getState(Te.sourceLayer||"_geojsonTileLayer",J));let q=Hn({},M[he]);q.paint=Tp(q.paint,Te.paint,Z,me,x),q.layout=Tp(q.layout,Te.layout,Z,me,x);let re=!z||z(Z,Te,me);if(!re)continue;let ye=new wp(Z,this.z,this.x,this.y,J);ye.layer=q;let ct=t[he];ct===void 0&&(ct=t[he]=[]),ct.push({featureIndex:c,feature:ye,intersectionZ:re})}}lookupSymbolFeatures(t,n,a,c,m,g,x,S){let M={};this.loadVTLayers();let L=Bl(m);for(let z of t)this.loadMatchingFeature(M,a,c,z,L,g,x,S,n);return M}hasLayer(t){for(let n of this.bucketLayerIDs)for(let a of n)if(t===a)return!0;return!1}getId(t,n){var a;let c=t.id;return this.promoteId&&(c=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[n]],typeof c=="boolean"&&(c=Number(c)),c===void 0&&(!((a=t.properties)===null||a===void 0)&&a.cluster)&&this.promoteId&&(c=Number(t.properties.cluster_id))),c}}function Tp(s,t,n,a,c){return oo(s,(m,g)=>{let x=t instanceof h1?t.get(g):null;return x&&x.evaluate?x.evaluate(n,a,c):x})}function Sp(s){let t=1/0,n=1/0,a=-1/0,c=-1/0;for(let m of s)t=Math.min(t,m.x),n=Math.min(n,m.y),a=Math.max(a,m.x),c=Math.max(c,m.y);return{minX:t,minY:n,maxX:a,maxY:c}}function f3(s,t){return t-s}function Ap(s,t,n,a,c){let m=[];for(let g=0;g<s.length;g++){let x=s[g],S;for(let M=0;M<x.length-1;M++){let L=x[M],z=x[M+1];L.x<t&&z.x<t||(L.x<t?L=new bi(t,L.y+(t-L.x)/(z.x-L.x)*(z.y-L.y))._round():z.x<t&&(z=new bi(t,L.y+(t-L.x)/(z.x-L.x)*(z.y-L.y))._round()),L.y<n&&z.y<n||(L.y<n?L=new bi(L.x+(n-L.y)/(z.y-L.y)*(z.x-L.x),n)._round():z.y<n&&(z=new bi(L.x+(n-L.y)/(z.y-L.y)*(z.x-L.x),n)._round()),L.x>=a&&z.x>=a||(L.x>=a?L=new bi(a,L.y+(a-L.x)/(z.x-L.x)*(z.y-L.y))._round():z.x>=a&&(z=new bi(a,L.y+(a-L.x)/(z.x-L.x)*(z.y-L.y))._round()),L.y>=c&&z.y>=c||(L.y>=c?L=new bi(L.x+(c-L.y)/(z.y-L.y)*(z.x-L.x),c)._round():z.y>=c&&(z=new bi(L.x+(c-L.y)/(z.y-L.y)*(z.x-L.x),c)._round()),S&&L.equals(S[S.length-1])||(S=[L],m.push(S)),S.push(z)))))}}return m}zi("FeatureIndex",Ep,{omit:["rawTileData","sourceLayerCoder"]});class tc extends bi{constructor(t,n,a,c){super(t,n),this.angle=a,c!==void 0&&(this.segment=c)}clone(){return new tc(this.x,this.y,this.angle,this.segment)}}function Cp(s,t,n,a,c){if(t.segment===void 0||n===0)return!0;let m=t,g=t.segment+1,x=0;for(;x>-n/2;){if(g--,g<0)return!1;x-=s[g].dist(m),m=s[g]}x+=s[g].dist(s[g+1]),g++;let S=[],M=0;for(;x<n/2;){let L=s[g],z=s[g+1];if(!z)return!1;let U=s[g-1].angleTo(L)-L.angleTo(z);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:U}),M+=U;x-S[0].distance>a;)M-=S.shift().angleDelta;if(M>c)return!1;g++,x+=L.dist(z)}return!0}function Ip(s){let t=0;for(let n=0;n<s.length-1;n++)t+=s[n].dist(s[n+1]);return t}function Mp(s,t,n){return s?.6*t*n:0}function Pp(s,t){return Math.max(s?s.right-s.left:0,t?t.right-t.left:0)}function m3(s,t,n,a,c,m){let g=Mp(n,c,m),x=Pp(n,a)*m,S=0,M=Ip(s)/2;for(let L=0;L<s.length-1;L++){let z=s[L],U=s[L+1],G=z.dist(U);if(S+G>M){let Z=(M-S)/G,J=st.number(z.x,U.x,Z),ne=st.number(z.y,U.y,Z),he=new tc(J,ne,U.angleTo(z),L);return he._round(),!g||Cp(s,he,x,g,t)?he:void 0}S+=G}}function g3(s,t,n,a,c,m,g,x,S){let M=Mp(a,m,g),L=Pp(a,c),z=L*g,U=s[0].x===0||s[0].x===S||s[0].y===0||s[0].y===S;return t-z<t/4&&(t=z+t/4),Rp(s,U?t/2*x%t:(L/2+2*m)*g*x%t,t,M,n,z,U,!1,S)}function Rp(s,t,n,a,c,m,g,x,S){let M=m/2,L=Ip(s),z=0,U=t-n,G=[];for(let Z=0;Z<s.length-1;Z++){let J=s[Z],ne=s[Z+1],he=J.dist(ne),Te=ne.angleTo(J);for(;U+n<z+he;){U+=n;let me=(U-z)/he,q=st.number(J.x,ne.x,me),re=st.number(J.y,ne.y,me);if(q>=0&&q<S&&re>=0&&re<S&&U-M>=0&&U+M<=L){let ye=new tc(q,re,Te,Z);ye._round(),a&&!Cp(s,ye,m,a,c)||G.push(ye)}}z+=he}return x||G.length||g||(G=Rp(s,z/2,n,a,c,m,g,!0,S)),G}zi("Anchor",tc);let qu=vo;function kp(s,t,n,a){let c=[],m=s.image,g=m.pixelRatio,x=m.paddedRect.w-2*qu,S=m.paddedRect.h-2*qu,M={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom},L=m.stretchX||[[0,x]],z=m.stretchY||[[0,S]],U=(qt,er)=>qt+er[1]-er[0],G=L.reduce(U,0),Z=z.reduce(U,0),J=x-G,ne=S-Z,he=0,Te=G,me=0,q=Z,re=0,ye=J,ct=0,Kt=ne;if(m.content&&a){let qt=m.content,er=qt[2]-qt[0],mr=qt[3]-qt[1];(m.textFitWidth||m.textFitHeight)&&(M=np(s)),he=Sh(L,0,qt[0]),me=Sh(z,0,qt[1]),Te=Sh(L,qt[0],qt[2]),q=Sh(z,qt[1],qt[3]),re=qt[0]-he,ct=qt[1]-me,ye=er-Te,Kt=mr-q}let vt=M.x1,Ft=M.y1,hi=M.x2-vt,Qt=M.y2-Ft,fi=(qt,er,mr,dr)=>{let ar=Ah(qt.stretch-he,Te,hi,vt),Vr=Ch(qt.fixed-re,ye,qt.stretch,G),Qn=Ah(er.stretch-me,q,Qt,Ft),Gs=Ch(er.fixed-ct,Kt,er.stretch,Z),Da=Ah(mr.stretch-he,Te,hi,vt),Zo=Ch(mr.fixed-re,ye,mr.stretch,G),xo=Ah(dr.stretch-me,q,Qt,Ft),Ta=Ch(dr.fixed-ct,Kt,dr.stretch,Z),Un=new bi(ar,Qn),da=new bi(Da,Qn),Sa=new bi(Da,xo),Aa=new bi(ar,xo),ao=new bi(Vr/g,Gs/g),Ho=new bi(Zo/g,Ta/g),pa=t*Math.PI/180;if(pa){let fa=Math.sin(pa),ma=Math.cos(pa),Is=[ma,-fa,fa,ma];Un._matMult(Is),da._matMult(Is),Aa._matMult(Is),Sa._matMult(Is)}let wo=qt.stretch+qt.fixed,Zs=er.stretch+er.fixed;return{tl:Un,tr:da,bl:Aa,br:Sa,tex:{x:m.paddedRect.x+qu+wo,y:m.paddedRect.y+qu+Zs,w:mr.stretch+mr.fixed-wo,h:dr.stretch+dr.fixed-Zs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ao,pixelOffsetBR:Ho,minFontScaleX:ye/g/hi,minFontScaleY:Kt/g/Qt,isSDF:n}};if(a&&(m.stretchX||m.stretchY)){let qt=Dp(L,J,G),er=Dp(z,ne,Z);for(let mr=0;mr<qt.length-1;mr++){let dr=qt[mr],ar=qt[mr+1];for(let Vr=0;Vr<er.length-1;Vr++)c.push(fi(dr,er[Vr],ar,er[Vr+1]))}}else c.push(fi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return c}function Sh(s,t,n){let a=0;for(let c of s)a+=Math.max(t,Math.min(n,c[1]))-Math.max(t,Math.min(n,c[0]));return a}function Dp(s,t,n){let a=[{fixed:-1,stretch:0}];for(let[c,m]of s){let g=a[a.length-1];a.push({fixed:c-g.stretch,stretch:g.stretch}),a.push({fixed:c-g.stretch,stretch:g.stretch+(m-c)})}return a.push({fixed:t+qu,stretch:n}),a}function Ah(s,t,n,a){return s/t*n+a}function Ch(s,t,n,a){return s-t*n/a}class Ih{constructor(t,n,a,c,m,g,x,S,M,L){var z;if(this.boxStartIndex=t.length,M){let U=g.top,G=g.bottom,Z=g.collisionPadding;Z&&(U-=Z[1],G+=Z[3]);let J=G-U;J>0&&(J=Math.max(10,J),this.circleDiameter=J)}else{let U=!((z=g.image)===null||z===void 0)&&z.content&&(g.image.textFitWidth||g.image.textFitHeight)?np(g):{x1:g.left,y1:g.top,x2:g.right,y2:g.bottom};U.y1=U.y1*x-S[0],U.y2=U.y2*x+S[2],U.x1=U.x1*x-S[3],U.x2=U.x2*x+S[1];let G=g.collisionPadding;if(G&&(U.x1-=G[0]*x,U.y1-=G[1]*x,U.x2+=G[2]*x,U.y2+=G[3]*x),L){let Z=new bi(U.x1,U.y1),J=new bi(U.x2,U.y1),ne=new bi(U.x1,U.y2),he=new bi(U.x2,U.y2),Te=L*Math.PI/180;Z._rotate(Te),J._rotate(Te),ne._rotate(Te),he._rotate(Te),U.x1=Math.min(Z.x,J.x,ne.x,he.x),U.x2=Math.max(Z.x,J.x,ne.x,he.x),U.y1=Math.min(Z.y,J.y,ne.y,he.y),U.y2=Math.max(Z.y,J.y,ne.y,he.y)}t.emplaceBack(n.x,n.y,U.x1,U.y1,U.x2,U.y2,a,c,m)}this.boxEndIndex=t.length}}class _3{constructor(t=[],n=(a,c)=>a<c?-1:a>c?1:0){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;let t=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){let{data:n,compare:a}=this,c=n[t];for(;t>0;){let m=t-1>>1,g=n[m];if(a(c,g)>=0)break;n[t]=g,t=m}n[t]=c}_down(t){let{data:n,compare:a}=this,c=this.length>>1,m=n[t];for(;t<c;){let g=1+(t<<1),x=g+1;if(x<this.length&&a(n[x],n[g])<0&&(g=x),a(n[g],m)>=0)break;n[t]=n[g],t=g}n[t]=m}}function y3(s,t=1,n=!1){let a=1/0,c=1/0,m=-1/0,g=-1/0,x=s[0];for(let G=0;G<x.length;G++){let Z=x[G];(!G||Z.x<a)&&(a=Z.x),(!G||Z.y<c)&&(c=Z.y),(!G||Z.x>m)&&(m=Z.x),(!G||Z.y>g)&&(g=Z.y)}let S=Math.min(m-a,g-c),M=S/2,L=new _3([],b3);if(S===0)return new bi(a,c);for(let G=a;G<m;G+=S)for(let Z=c;Z<g;Z+=S)L.push(new lu(G+M,Z+M,M,s));let z=function(G){let Z=0,J=0,ne=0,he=G[0];for(let Te=0,me=he.length,q=me-1;Te<me;q=Te++){let re=he[Te],ye=he[q],ct=re.x*ye.y-ye.x*re.y;J+=(re.x+ye.x)*ct,ne+=(re.y+ye.y)*ct,Z+=3*ct}return new lu(J/Z,ne/Z,0,G)}(s),U=L.length;for(;L.length;){let G=L.pop();(G.d>z.d||!z.d)&&(z=G,n&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,U)),G.max-z.d<=t||(M=G.h/2,L.push(new lu(G.p.x-M,G.p.y-M,M,s)),L.push(new lu(G.p.x+M,G.p.y-M,M,s)),L.push(new lu(G.p.x-M,G.p.y+M,M,s)),L.push(new lu(G.p.x+M,G.p.y+M,M,s)),U+=4)}return n&&(console.log(`num probes: ${U}`),console.log(`best distance: ${z.d}`)),z.p}function b3(s,t){return t.max-s.max}function lu(s,t,n,a){this.p=new bi(s,t),this.h=n,this.d=function(c,m){let g=!1,x=1/0;for(let S=0;S<m.length;S++){let M=m[S];for(let L=0,z=M.length,U=z-1;L<z;U=L++){let G=M[L],Z=M[U];G.y>c.y!=Z.y>c.y&&c.x<(Z.x-G.x)*(c.y-G.y)/(Z.y-G.y)+G.x&&(g=!g),x=Math.min(x,wa(c,G,Z))}}return(g?1:-1)*Math.sqrt(x)}(this.p,a),this.max=this.d+this.h*Math.SQRT2}var ka;R.aB=void 0,(ka=R.aB||(R.aB={}))[ka.center=1]="center",ka[ka.left=2]="left",ka[ka.right=3]="right",ka[ka.top=4]="top",ka[ka.bottom=5]="bottom",ka[ka["top-left"]=6]="top-left",ka[ka["top-right"]=7]="top-right",ka[ka["bottom-left"]=8]="bottom-left",ka[ka["bottom-right"]=9]="bottom-right";let ic=7,M2=Number.POSITIVE_INFINITY;function Lp(s,t){return t[1]!==M2?function(n,a,c){let m=0,g=0;switch(a=Math.abs(a),c=Math.abs(c),n){case"top-right":case"top-left":case"top":g=c-ic;break;case"bottom-right":case"bottom-left":case"bottom":g=-c+ic}switch(n){case"top-right":case"bottom-right":case"right":m=-a;break;case"top-left":case"bottom-left":case"left":m=a}return[m,g]}(s,t[0],t[1]):function(n,a){let c=0,m=0;a<0&&(a=0);let g=a/Math.SQRT2;switch(n){case"top-right":case"top-left":m=g-ic;break;case"bottom-right":case"bottom-left":m=-g+ic;break;case"bottom":m=-a+ic;break;case"top":m=a-ic}switch(n){case"top-right":case"bottom-right":c=-g;break;case"top-left":case"bottom-left":c=g;break;case"left":c=a;break;case"right":c=-a}return[c,m]}(s,t[0])}function Op(s,t,n){var a;let c=s.layout,m=(a=c.get("text-variable-anchor-offset"))===null||a===void 0?void 0:a.evaluate(t,{},n);if(m){let x=m.values,S=[];for(let M=0;M<x.length;M+=2){let L=S[M]=x[M],z=x[M+1].map(U=>U*qs);L.startsWith("top")?z[1]-=ic:L.startsWith("bottom")&&(z[1]+=ic),S[M+1]=z}return new Ue(S)}let g=c.get("text-variable-anchor");if(g){let x;x=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[c.get("text-radial-offset").evaluate(t,{},n)*qs,M2]:c.get("text-offset").evaluate(t,{},n).map(M=>M*qs);let S=[];for(let M of g)S.push(M,Lp(M,x));return new Ue(S)}return null}function P2(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function v3(s,t,n,a,c,m,g,x,S,M,L,z){let U=m.textMaxSize.evaluate(t,{});U===void 0&&(U=g);let G=s.layers[0].layout,Z=G.get("icon-offset").evaluate(t,{},L),J=zp(n.horizontal),ne=g/24,he=s.tilePixelRatio*ne,Te=s.tilePixelRatio*U/24,me=s.tilePixelRatio*x,q=s.tilePixelRatio*G.get("symbol-spacing"),re=G.get("text-padding")*s.tilePixelRatio,ye=function(mr,dr,ar,Vr=1){let Qn=mr.get("icon-padding").evaluate(dr,{},ar),Gs=Qn&&Qn.values;return[Gs[0]*Vr,Gs[1]*Vr,Gs[2]*Vr,Gs[3]*Vr]}(G,t,L,s.tilePixelRatio),ct=G.get("text-max-angle")/180*Math.PI,Kt=G.get("text-rotation-alignment")!=="viewport"&&G.get("symbol-placement")!=="point",vt=G.get("icon-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",Ft=G.get("symbol-placement"),hi=q/2,Qt=G.get("icon-text-fit"),fi;a&&Qt!=="none"&&(s.allowVerticalPlacement&&n.vertical&&(fi=sp(a,n.vertical,Qt,G.get("icon-text-fit-padding"),Z,ne)),J&&(a=sp(a,J,Qt,G.get("icon-text-fit-padding"),Z,ne)));let qt=L?z.line.getGranularityForZoomLevel(L.z):1,er=(mr,dr)=>{dr.x<0||dr.x>=Er||dr.y<0||dr.y>=Er||function(ar,Vr,Qn,Gs,Da,Zo,xo,Ta,Un,da,Sa,Aa,ao,Ho,pa,wo,Zs,fa,ma,Is,$n,Tl,cu,Sl,E3){let uu=ar.addToLineVertexArray(Vr,Qn),Cc,hu,du,pu,jp=0,Vp=0,Up=0,qp=0,$2=-1,F2=-1,E1={},Gp=to("");if(ar.allowVerticalPlacement&&Gs.vertical){let Ga=Ta.layout.get("text-rotate").evaluate($n,{},Sl)+90;du=new Ih(Un,Vr,da,Sa,Aa,Gs.vertical,ao,Ho,pa,Ga),xo&&(pu=new Ih(Un,Vr,da,Sa,Aa,xo,Zs,fa,pa,Ga))}if(Da){let Ga=Ta.layout.get("icon-rotate").evaluate($n,{}),Wo=Ta.layout.get("icon-text-fit")!=="none",Ic=kp(Da,Ga,cu,Wo),Cl=xo?kp(xo,Ga,cu,Wo):void 0;hu=new Ih(Un,Vr,da,Sa,Aa,Da,Zs,fa,!1,Ga),jp=4*Ic.length;let Mc=ar.iconSizeData,Kl=null;Mc.kind==="source"?(Kl=[Yl*Ta.layout.get("icon-size").evaluate($n,{})],Kl[0]>Q1&&hs(`${ar.layerIds[0]}: Value for "icon-size" is >= ${Vu}. Reduce your "icon-size".`)):Mc.kind==="composite"&&(Kl=[Yl*Tl.compositeIconSizes[0].evaluate($n,{},Sl),Yl*Tl.compositeIconSizes[1].evaluate($n,{},Sl)],(Kl[0]>Q1||Kl[1]>Q1)&&hs(`${ar.layerIds[0]}: Value for "icon-size" is >= ${Vu}. Reduce your "icon-size".`)),ar.addSymbols(ar.icon,Ic,Kl,Is,ma,$n,R.al.none,Vr,uu.lineStartIndex,uu.lineLength,-1,Sl),$2=ar.icon.placedSymbolArray.length-1,Cl&&(Vp=4*Cl.length,ar.addSymbols(ar.icon,Cl,Kl,Is,ma,$n,R.al.vertical,Vr,uu.lineStartIndex,uu.lineLength,-1,Sl),F2=ar.icon.placedSymbolArray.length-1)}let Zp=Object.keys(Gs.horizontal);for(let Ga of Zp){let Wo=Gs.horizontal[Ga];if(!Cc){Gp=to(Wo.text);let Cl=Ta.layout.get("text-rotate").evaluate($n,{},Sl);Cc=new Ih(Un,Vr,da,Sa,Aa,Wo,ao,Ho,pa,Cl)}let Ic=Wo.positionedLines.length===1;if(Up+=Np(ar,Vr,Wo,Zo,Ta,pa,$n,wo,uu,Gs.vertical?R.al.horizontal:R.al.horizontalOnly,Ic?Zp:[Ga],E1,$2,Tl,Sl),Ic)break}Gs.vertical&&(qp+=Np(ar,Vr,Gs.vertical,Zo,Ta,pa,$n,wo,uu,R.al.vertical,["vertical"],E1,F2,Tl,Sl));let T3=Cc?Cc.boxStartIndex:ar.collisionBoxArray.length,S3=Cc?Cc.boxEndIndex:ar.collisionBoxArray.length,A3=du?du.boxStartIndex:ar.collisionBoxArray.length,C3=du?du.boxEndIndex:ar.collisionBoxArray.length,I3=hu?hu.boxStartIndex:ar.collisionBoxArray.length,M3=hu?hu.boxEndIndex:ar.collisionBoxArray.length,P3=pu?pu.boxStartIndex:ar.collisionBoxArray.length,R3=pu?pu.boxEndIndex:ar.collisionBoxArray.length,Al=-1,Ph=(Ga,Wo)=>Ga&&Ga.circleDiameter?Math.max(Ga.circleDiameter,Wo):Wo;Al=Ph(Cc,Al),Al=Ph(du,Al),Al=Ph(hu,Al),Al=Ph(pu,Al);let Hp=Al>-1?1:0;Hp&&(Al*=E3/qs),ar.glyphOffsetArray.length>=au.MAX_GLYPHS&&hs("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),$n.sortKey!==void 0&&ar.addToSortKeyRanges(ar.symbolInstances.length,$n.sortKey);let k3=Op(Ta,$n,Sl),[D3,L3]=function(Ga,Wo){let Ic=Ga.length,Cl=Wo?.values;if(Cl?.length>0)for(let Mc=0;Mc<Cl.length;Mc+=2){let Kl=Cl[Mc+1];Ga.emplaceBack(R.aB[Cl[Mc]],Kl[0],Kl[1])}return[Ic,Ga.length]}(ar.textAnchorOffsets,k3);ar.symbolInstances.emplaceBack(Vr.x,Vr.y,E1.right>=0?E1.right:-1,E1.center>=0?E1.center:-1,E1.left>=0?E1.left:-1,E1.vertical||-1,$2,F2,Gp,T3,S3,A3,C3,I3,M3,P3,R3,da,Up,qp,jp,Vp,Hp,0,ao,Al,D3,L3)}(s,dr,mr,n,a,c,fi,s.layers[0],s.collisionBoxArray,t.index,t.sourceLayerIndex,s.index,he,[re,re,re,re],Kt,S,me,ye,vt,Z,t,m,M,L,g)};if(Ft==="line")for(let mr of Ap(t.geometry,0,0,Er,Er)){let dr=qo(mr,qt),ar=g3(dr,q,ct,n.vertical||J,a,24,Te,s.overscaling,Er);for(let Vr of ar)J&&x3(s,J.text,hi,Vr)||er(dr,Vr)}else if(Ft==="line-center"){for(let mr of t.geometry)if(mr.length>1){let dr=qo(mr,qt),ar=m3(dr,ct,n.vertical||J,a,24,Te);ar&&er(dr,ar)}}else if(t.type==="Polygon")for(let mr of Ol(t.geometry,0)){let dr=y3(mr,16);er(qo(mr[0],qt,!0),new tc(dr.x,dr.y,0))}else if(t.type==="LineString")for(let mr of t.geometry){let dr=qo(mr,qt);er(dr,new tc(dr[0].x,dr[0].y,0))}else if(t.type==="Point")for(let mr of t.geometry)for(let dr of mr)er([dr],new tc(dr.x,dr.y,0))}function Np(s,t,n,a,c,m,g,x,S,M,L,z,U,G,Z){let J=function(Te,me,q,re,ye,ct,Kt,vt){let Ft=re.layout.get("text-rotate").evaluate(ct,{})*Math.PI/180,hi=[];for(let Qt of me.positionedLines)for(let fi of Qt.positionedGlyphs){if(!fi.rect)continue;let qt=fi.rect||{},er=W0+1,mr=!0,dr=1,ar=0,Vr=(ye||vt)&&fi.vertical,Qn=fi.metrics.advance*fi.scale/2;if(vt&&me.verticalizable&&(ar=Qt.lineOffset/2-(fi.imageName?-(qs-fi.metrics.width*fi.scale)/2:(fi.scale-1)*qs)),fi.imageName){let fa=Kt[fi.imageName];mr=fa.sdf,dr=fa.pixelRatio,er=vo/dr}let Gs=ye?[fi.x+Qn,fi.y]:[0,0],Da=ye?[0,0]:[fi.x+Qn+q[0],fi.y+q[1]-ar],Zo=[0,0];Vr&&(Zo=Da,Da=[0,0]);let xo=fi.metrics.isDoubleResolution?2:1,Ta=(fi.metrics.left-er)*fi.scale-Qn+Da[0],Un=(-fi.metrics.top-er)*fi.scale+Da[1],da=Ta+qt.w/xo*fi.scale/dr,Sa=Un+qt.h/xo*fi.scale/dr,Aa=new bi(Ta,Un),ao=new bi(da,Un),Ho=new bi(Ta,Sa),pa=new bi(da,Sa);if(Vr){let fa=new bi(-Qn,Qn-vh),ma=-Math.PI/2,Is=qs/2-Qn,$n=new bi(5-vh-Is,-(fi.imageName?Is:0)),Tl=new bi(...Zo);Aa._rotateAround(ma,fa)._add($n)._add(Tl),ao._rotateAround(ma,fa)._add($n)._add(Tl),Ho._rotateAround(ma,fa)._add($n)._add(Tl),pa._rotateAround(ma,fa)._add($n)._add(Tl)}if(Ft){let fa=Math.sin(Ft),ma=Math.cos(Ft),Is=[ma,-fa,fa,ma];Aa._matMult(Is),ao._matMult(Is),Ho._matMult(Is),pa._matMult(Is)}let wo=new bi(0,0),Zs=new bi(0,0);hi.push({tl:Aa,tr:ao,bl:Ho,br:pa,tex:qt,writingMode:me.writingMode,glyphOffset:Gs,sectionIndex:fi.sectionIndex,isSDF:mr,pixelOffsetTL:wo,pixelOffsetBR:Zs,minFontScaleX:0,minFontScaleY:0})}return hi}(0,n,x,c,m,g,a,s.allowVerticalPlacement),ne=s.textSizeData,he=null;ne.kind==="source"?(he=[Yl*c.layout.get("text-size").evaluate(g,{})],he[0]>Q1&&hs(`${s.layerIds[0]}: Value for "text-size" is >= ${Vu}. Reduce your "text-size".`)):ne.kind==="composite"&&(he=[Yl*G.compositeTextSizes[0].evaluate(g,{},Z),Yl*G.compositeTextSizes[1].evaluate(g,{},Z)],(he[0]>Q1||he[1]>Q1)&&hs(`${s.layerIds[0]}: Value for "text-size" is >= ${Vu}. Reduce your "text-size".`)),s.addSymbols(s.text,J,he,x,m,g,M,t,S.lineStartIndex,S.lineLength,U,Z);for(let Te of L)z[Te]=s.text.placedSymbolArray.length-1;return 4*J.length}function zp(s){for(let t in s)return s[t];return null}function x3(s,t,n,a){let c=s.compareText;if(t in c){let m=c[t];for(let g=m.length-1;g>=0;g--)if(a.dist(m[g])<n)return!0}else c[t]=[];return c[t].push(a),!1}let $p=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class R2{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[n,a]=new Uint8Array(t,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");let c=a>>4;if(c!==1)throw new Error(`Got v${c} data when expected v1.`);let m=$p[15&a];if(!m)throw new Error("Unrecognized array type.");let[g]=new Uint16Array(t,2,1),[x]=new Uint32Array(t,4,1);return new R2(x,g,m,t)}constructor(t,n=64,a=Float64Array,c){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=a,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;let m=$p.indexOf(this.ArrayType),g=2*t*this.ArrayType.BYTES_PER_ELEMENT,x=t*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-x%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${a}.`);c&&c instanceof ArrayBuffer?(this.data=c,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+S,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+g+x+S),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+x+S,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}add(t,n){let a=this._pos>>1;return this.ids[a]=a,this.coords[this._pos++]=t,this.coords[this._pos++]=n,a}finish(){let t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return k2(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,n,a,c){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:m,coords:g,nodeSize:x}=this,S=[0,m.length-1,0],M=[];for(;S.length;){let L=S.pop()||0,z=S.pop()||0,U=S.pop()||0;if(z-U<=x){for(let ne=U;ne<=z;ne++){let he=g[2*ne],Te=g[2*ne+1];he>=t&&he<=a&&Te>=n&&Te<=c&&M.push(m[ne])}continue}let G=U+z>>1,Z=g[2*G],J=g[2*G+1];Z>=t&&Z<=a&&J>=n&&J<=c&&M.push(m[G]),(L===0?t<=Z:n<=J)&&(S.push(U),S.push(G-1),S.push(1-L)),(L===0?a>=Z:c>=J)&&(S.push(G+1),S.push(z),S.push(1-L))}return M}within(t,n,a){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:c,coords:m,nodeSize:g}=this,x=[0,c.length-1,0],S=[],M=a*a;for(;x.length;){let L=x.pop()||0,z=x.pop()||0,U=x.pop()||0;if(z-U<=g){for(let ne=U;ne<=z;ne++)Bp(m[2*ne],m[2*ne+1],t,n)<=M&&S.push(c[ne]);continue}let G=U+z>>1,Z=m[2*G],J=m[2*G+1];Bp(Z,J,t,n)<=M&&S.push(c[G]),(L===0?t-a<=Z:n-a<=J)&&(x.push(U),x.push(G-1),x.push(1-L)),(L===0?t+a>=Z:n+a>=J)&&(x.push(G+1),x.push(z),x.push(1-L))}return S}}function k2(s,t,n,a,c,m){if(c-a<=n)return;let g=a+c>>1;Fp(s,t,g,a,c,m),k2(s,t,n,a,g-1,1-m),k2(s,t,n,g+1,c,1-m)}function Fp(s,t,n,a,c,m){for(;c>a;){if(c-a>600){let M=c-a+1,L=n-a+1,z=Math.log(M),U=.5*Math.exp(2*z/3),G=.5*Math.sqrt(z*U*(M-U)/M)*(L-M/2<0?-1:1);Fp(s,t,n,Math.max(a,Math.floor(n-L*U/M+G)),Math.min(c,Math.floor(n+(M-L)*U/M+G)),m)}let g=t[2*n+m],x=a,S=c;for(Gu(s,t,a,n),t[2*c+m]>g&&Gu(s,t,a,c);x<S;){for(Gu(s,t,x,S),x++,S--;t[2*x+m]<g;)x++;for(;t[2*S+m]>g;)S--}t[2*a+m]===g?Gu(s,t,a,S):(S++,Gu(s,t,S,c)),S<=n&&(a=S+1),n<=S&&(c=S-1)}}function Gu(s,t,n,a){D2(s,n,a),D2(t,2*n,2*a),D2(t,2*n+1,2*a+1)}function D2(s,t,n){let a=s[t];s[t]=s[n],s[n]=a}function Bp(s,t,n,a){let c=s-n,m=t-a;return c*c+m*m}var L2;R.co=void 0,(L2=R.co||(R.co={})).create="create",L2.load="load",L2.fullLoad="fullLoad";let Mh=null,Zu=[],O2=1e3/60,N2="loadTime",z2="fullLoadTime",w3={mark(s){performance.mark(s)},frame(s){let t=s;Mh!=null&&Zu.push(t-Mh),Mh=t},clearMetrics(){Mh=null,Zu=[],performance.clearMeasures(N2),performance.clearMeasures(z2);for(let s in R.co)performance.clearMarks(R.co[s])},getPerformanceMetrics(){performance.measure(N2,R.co.create,R.co.load),performance.measure(z2,R.co.create,R.co.fullLoad);let s=performance.getEntriesByName(N2)[0].duration,t=performance.getEntriesByName(z2)[0].duration,n=Zu.length,a=1/(Zu.reduce((m,g)=>m+g,0)/n/1e3),c=Zu.filter(m=>m>O2).reduce((m,g)=>m+(g-O2)/O2,0);return{loadTime:s,fullLoadTime:t,fps:a,percentDroppedFrames:c/(n+c)*100,totalFrames:n}}};R.$=Uu,R.A=ur,R.B=st,R.C=yn,R.D=nr,R.E=Se,R.F=xa,R.G=function(s){if(Ha==null){let t=s.navigator?s.navigator.userAgent:null;Ha=!!s.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Ha},R.H=class{constructor(s,t){this.target=s,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new d3(()=>this.process()),this.subscription=de(this.target,"message",n=>this.receive(n),!1),this.globalScope=ks(self)?s:window}registerMessageHandler(s,t){this.messageHandlers[s]=t}sendAsync(s,t){return new Promise((n,a)=>{let c=Math.round(1e18*Math.random()).toString(36).substring(0,10),m=t?de(t.signal,"abort",()=>{m?.unsubscribe(),delete this.resolveRejects[c];let S={id:c,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},p3):null;this.resolveRejects[c]={resolve:S=>{m?.unsubscribe(),n(S)},reject:S=>{m?.unsubscribe(),a(S)}};let g=[],x=Object.assign(Object.assign({},s),{id:c,sourceMapId:this.mapId,origin:location.origin,data:Ko(s.data,g)});this.target.postMessage(x,{transfer:g})})}receive(s){let t=s.data,n=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[n];let a=this.abortControllers[n];return delete this.abortControllers[n],void(a&&a.abort())}if(ks(self)||t.mustQueue)return this.tasks[n]=t,this.taskQueue.push(n),void this.invoker.trigger();this.processTask(n,t)}}process(){if(this.taskQueue.length===0)return;let s=this.taskQueue.shift(),t=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(s,t)}processTask(s,t){return u(this,void 0,void 0,function*(){if(t.type==="<response>"){let c=this.resolveRejects[s];return delete this.resolveRejects[s],c?void(t.error?c.reject(Xr(t.error)):c.resolve(Xr(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let n=Xr(t.data),a=new AbortController;this.abortControllers[s]=a;try{let c=yield this.messageHandlers[t.type](t.sourceMapId,n,a);this.completeTask(s,null,c)}catch(c){this.completeTask(s,c)}})}completeTask(s,t,n){let a=[];delete this.abortControllers[s];let c={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Ko(t):null,data:Ko(n,a)};this.target.postMessage(c,{transfer:a})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},R.I=y2,R.J=t1,R.K=function(){var s=new ur(16);return ur!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},R.L=function(s,t,n){var a,c,m,g,x,S,M,L,z,U,G,Z,J=n[0],ne=n[1],he=n[2];return t===s?(s[12]=t[0]*J+t[4]*ne+t[8]*he+t[12],s[13]=t[1]*J+t[5]*ne+t[9]*he+t[13],s[14]=t[2]*J+t[6]*ne+t[10]*he+t[14],s[15]=t[3]*J+t[7]*ne+t[11]*he+t[15]):(c=t[1],m=t[2],g=t[3],x=t[4],S=t[5],M=t[6],L=t[7],z=t[8],U=t[9],G=t[10],Z=t[11],s[0]=a=t[0],s[1]=c,s[2]=m,s[3]=g,s[4]=x,s[5]=S,s[6]=M,s[7]=L,s[8]=z,s[9]=U,s[10]=G,s[11]=Z,s[12]=a*J+x*ne+z*he+t[12],s[13]=c*J+S*ne+U*he+t[13],s[14]=m*J+M*ne+G*he+t[14],s[15]=g*J+L*ne+Z*he+t[15]),s},R.M=function(s,t,n){var a=n[0],c=n[1],m=n[2];return s[0]=t[0]*a,s[1]=t[1]*a,s[2]=t[2]*a,s[3]=t[3]*a,s[4]=t[4]*c,s[5]=t[5]*c,s[6]=t[6]*c,s[7]=t[7]*c,s[8]=t[8]*m,s[9]=t[9]*m,s[10]=t[10]*m,s[11]=t[11]*m,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},R.N=function(s,t,n){var a=t[0],c=t[1],m=t[2],g=t[3],x=t[4],S=t[5],M=t[6],L=t[7],z=t[8],U=t[9],G=t[10],Z=t[11],J=t[12],ne=t[13],he=t[14],Te=t[15],me=n[0],q=n[1],re=n[2],ye=n[3];return s[0]=me*a+q*x+re*z+ye*J,s[1]=me*c+q*S+re*U+ye*ne,s[2]=me*m+q*M+re*G+ye*he,s[3]=me*g+q*L+re*Z+ye*Te,s[4]=(me=n[4])*a+(q=n[5])*x+(re=n[6])*z+(ye=n[7])*J,s[5]=me*c+q*S+re*U+ye*ne,s[6]=me*m+q*M+re*G+ye*he,s[7]=me*g+q*L+re*Z+ye*Te,s[8]=(me=n[8])*a+(q=n[9])*x+(re=n[10])*z+(ye=n[11])*J,s[9]=me*c+q*S+re*U+ye*ne,s[10]=me*m+q*M+re*G+ye*he,s[11]=me*g+q*L+re*Z+ye*Te,s[12]=(me=n[12])*a+(q=n[13])*x+(re=n[14])*z+(ye=n[15])*J,s[13]=me*c+q*S+re*U+ye*ne,s[14]=me*m+q*M+re*G+ye*he,s[15]=me*g+q*L+re*Z+ye*Te,s},R.O=function(s,t){let n={};for(let a=0;a<t.length;a++){let c=t[a];c in s&&(n[c]=s[c])}return n},R.P=bi,R.Q=ec,R.R=io,R.S=mp,R.T=vc,R.U=fp,R.V=en,R.W=Nr,R.X=No,R.Y=Go,R.Z=Er,R._=u,R.a=Ka,R.a$=function(s,t,n){var a=Math.sin(n),c=Math.cos(n),m=t[4],g=t[5],x=t[6],S=t[7],M=t[8],L=t[9],z=t[10],U=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=m*c+M*a,s[5]=g*c+L*a,s[6]=x*c+z*a,s[7]=S*c+U*a,s[8]=M*c-m*a,s[9]=L*c-g*a,s[10]=z*c-x*a,s[11]=U*c-S*a,s},R.a0=25,R.a1=I2,R.a2=s=>{let t=window.document.createElement("video");return t.muted=!0,new Promise(n=>{t.onloadstart=()=>{n(t)};for(let a of s){let c=window.document.createElement("source");Be(a)||(t.crossOrigin="Anonymous"),c.src=a,t.appendChild(c)}})},R.a3=It,R.a4=function(){return Pa++},R.a5=ce,R.a6=au,R.a7=Bl,R.a8=Hl,R.a9=wp,R.aA=function(s,t,n,a,c=!1){if(!n[0]&&!n[1])return[0,0];let m=c?a==="map"?-s.bearingInRadians:0:a==="viewport"?s.bearingInRadians:0;if(m){let g=Math.sin(m),x=Math.cos(m);n=[n[0]*x-n[1]*g,n[0]*g+n[1]*x]}return[c?n[0]:An(t,n[0],s.zoom),c?n[1]:An(t,n[1],s.zoom)]},R.aC=x2,R.aD=P2,R.aE=v2,R.aF=R2,R.aG=fn,R.aH=x1,R.aI=bt,R.aJ=Zr,R.aK=Jr,R.aL=Ma,R.aM=Ja,R.aN=_p,R.aO=function(s,t,n){return s[0]=t[0]*n,s[1]=t[1]*n,s[2]=t[2]*n,s},R.aP=function(s,t,n){return s[0]=t[0]+n[0],s[1]=t[1]+n[1],s[2]=t[2]+n[2],s},R.aQ=function(s){var t=new ur(3);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},R.aR=function(s,t,n){return s[0]=t[0]*n[0],s[1]=t[1]*n[1],s[2]=t[2]*n[2],s[3]=t[3]*n[3],s},R.aS=function(s,t,n){return s[0]=t[0]-n[0],s[1]=t[1]-n[1],s[2]=t[2]-n[2],s},R.aT=function(s,t){var n=t[0],a=t[1],c=t[2],m=n*n+a*a+c*c;return m>0&&(m=1/Math.sqrt(m)),s[0]=t[0]*m,s[1]=t[1]*m,s[2]=t[2]*m,s},R.aU=function(s,t,n){var a=t[0],c=t[1],m=t[2],g=n[0],x=n[1],S=n[2];return s[0]=c*S-m*x,s[1]=m*g-a*S,s[2]=a*x-c*g,s},R.aV=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]},R.aW=bp,R.aX=ou,R.aY=function(s,t,n,a,c){var m,g=1/Math.tan(t/2);return s[0]=g/n,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=g,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,c!=null&&c!==1/0?(s[10]=(c+a)*(m=1/(a-c)),s[14]=2*c*a*m):(s[10]=-1,s[14]=-2*a),s},R.aZ=function(s){var t=new ur(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},R.a_=function(s,t,n){var a=Math.sin(n),c=Math.cos(n),m=t[0],g=t[1],x=t[2],S=t[3],M=t[4],L=t[5],z=t[6],U=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=m*c+M*a,s[1]=g*c+L*a,s[2]=x*c+z*a,s[3]=S*c+U*a,s[4]=M*c-m*a,s[5]=L*c-g*a,s[6]=z*c-x*a,s[7]=U*c-S*a,s},R.aa=function(s){let t={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(n,a,c,m)=>{let g=c||m;return t[a]=!g||g.toLowerCase(),""}),t["max-age"]){let n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t},R.ab=Xa,R.ac=function(s){return Math.pow(2,s)},R.ad=yr,R.ae=Zn,R.af=85.051129,R.ag=gp,R.ah=function(s){return Math.log(s)/Math.LN2},R.ai=function(s){var t=s[0],n=s[1];return t*t+n*n},R.aj=function(s,t){let n=[];for(let a in s)a in t||n.push(a);return n},R.ak=function(s,t){let n=0,a=0;if(s.kind==="constant")a=s.layoutSize;else if(s.kind!=="source"){let{interpolationType:c,minZoom:m,maxZoom:g}=s,x=c?Zn(Qe.interpolationFactor(c,t,m,g),0,1):0;s.kind==="camera"?a=st.number(s.minSize,s.maxSize,x):n=x}return{uSizeT:n,uSize:a}},R.am=function(s,{uSize:t,uSizeT:n},{lowerSize:a,upperSize:c}){return s.kind==="source"?a/Yl:s.kind==="composite"?st.number(a/Yl,c/Yl,n):t},R.an=function(s,t){var n=t[0],a=t[1],c=t[2],m=t[3],g=t[4],x=t[5],S=t[6],M=t[7],L=t[8],z=t[9],U=t[10],G=t[11],Z=t[12],J=t[13],ne=t[14],he=t[15],Te=n*x-a*g,me=n*S-c*g,q=n*M-m*g,re=a*S-c*x,ye=a*M-m*x,ct=c*M-m*S,Kt=L*J-z*Z,vt=L*ne-U*Z,Ft=L*he-G*Z,hi=z*ne-U*J,Qt=z*he-G*J,fi=U*he-G*ne,qt=Te*fi-me*Qt+q*hi+re*Ft-ye*vt+ct*Kt;return qt?(s[0]=(x*fi-S*Qt+M*hi)*(qt=1/qt),s[1]=(c*Qt-a*fi-m*hi)*qt,s[2]=(J*ct-ne*ye+he*re)*qt,s[3]=(U*ye-z*ct-G*re)*qt,s[4]=(S*Ft-g*fi-M*vt)*qt,s[5]=(n*fi-c*Ft+m*vt)*qt,s[6]=(ne*q-Z*ct-he*me)*qt,s[7]=(L*ct-U*q+G*me)*qt,s[8]=(g*Qt-x*Ft+M*Kt)*qt,s[9]=(a*Ft-n*Qt-m*Kt)*qt,s[10]=(Z*ye-J*q+he*Te)*qt,s[11]=(z*q-L*ye-G*Te)*qt,s[12]=(x*vt-g*hi-S*Kt)*qt,s[13]=(n*hi-a*vt+c*Kt)*qt,s[14]=(J*me-Z*re-ne*Te)*qt,s[15]=(L*re-z*me+U*Te)*qt,s):null},R.ao=Ia,R.ap=function(s){return Math.hypot(s[0],s[1])},R.aq=function(s){return s[0]=0,s[1]=0,s},R.ar=function(s,t,n){return s[0]=t[0]*n,s[1]=t[1]*n,s},R.as=w2,R.at=un,R.au=function(s,t,n,a){let c=t.y-s.y,m=t.x-s.x,g=a.y-n.y,x=a.x-n.x,S=g*m-x*c;if(S===0)return null;let M=(x*(s.y-n.y)-g*(s.x-n.x))/S;return new bi(s.x+M*m,s.y+M*c)},R.av=Ap,R.aw=Du,R.ax=function(s){let t=1/0,n=1/0,a=-1/0,c=-1/0;for(let m of s)t=Math.min(t,m.x),n=Math.min(n,m.y),a=Math.max(a,m.x),c=Math.max(c,m.y);return[t,n,a,c]},R.ay=qs,R.az=An,R.b=_a,R.b$=class extends X{},R.b0=function(){let s=new Float32Array(16);return yr(s),s},R.b1=function(){let s=new Float64Array(16);return yr(s),s},R.b2=function(){return new Float64Array(16)},R.b3=function(s,t,n){let a=new Float64Array(4);return function(c,m,g,x){var S=.5*Math.PI/180;m*=S,g*=S,x*=S;var M=Math.sin(m),L=Math.cos(m),z=Math.sin(g),U=Math.cos(g),G=Math.sin(x),Z=Math.cos(x);c[0]=M*U*Z-L*z*G,c[1]=L*z*Z+M*U*G,c[2]=L*U*G-M*z*Z,c[3]=L*U*Z+M*z*G}(a,s,t-90,n),a},R.b4=function(s,t,n,a){var c,m,g,x,S,M=t[0],L=t[1],z=t[2],U=t[3],G=n[0],Z=n[1],J=n[2],ne=n[3];return(m=M*G+L*Z+z*J+U*ne)<0&&(m=-m,G=-G,Z=-Z,J=-J,ne=-ne),1-m>Pr?(c=Math.acos(m),g=Math.sin(c),x=Math.sin((1-a)*c)/g,S=Math.sin(a*c)/g):(x=1-a,S=a),s[0]=x*M+S*G,s[1]=x*L+S*Z,s[2]=x*z+S*J,s[3]=x*U+S*ne,s},R.b5=function(s){let t=new Float64Array(9);var n,a,c,m,g,x,S,M,L,z,U,G,Z,J,ne,he,Te,me;z=(c=(a=s)[0])*(S=c+c),U=(m=a[1])*S,Z=(g=a[2])*S,J=g*(M=m+m),he=(x=a[3])*S,Te=x*M,me=x*(L=g+g),(n=t)[0]=1-(G=m*M)-(ne=g*L),n[3]=U-me,n[6]=Z+Te,n[1]=U+me,n[4]=1-z-ne,n[7]=J-he,n[2]=Z-Te,n[5]=J+he,n[8]=1-z-G;let q=Ja(-Math.asin(Zn(t[2],-1,1))),re,ye;return Math.hypot(t[5],t[8])<.001?(re=0,ye=-Ja(Math.atan2(t[3],t[4]))):(re=Ja(t[5]===0&&t[8]===0?0:Math.atan2(t[5],t[8])),ye=Ja(t[1]===0&&t[0]===0?0:Math.atan2(t[1],t[0]))),{roll:re,pitch:q+90,bearing:ye}},R.b6=function(s,t){return s.roll==t.roll&&s.pitch==t.pitch&&s.bearing==t.bearing},R.b7=sr,R.b8=al,R.b9=so,R.bA=function(s){if(s.type==="custom")return new h3(s);switch(s.type){case"background":return new l3(s);case"circle":return new m1(s);case"fill":return new w0(s);case"fill-extrusion":return new P0(s);case"heatmap":return new mh(s);case"hillshade":return new a2(s);case"line":return new $0(s);case"raster":return new u3(s);case"symbol":return new Th(s)}},R.bB=xs,R.bC=function(s,t){if(!s)return[{command:"setStyle",args:[t]}];let n=[];try{if(!ke(s.version,t.version))return[{command:"setStyle",args:[t]}];ke(s.center,t.center)||n.push({command:"setCenter",args:[t.center]}),ke(s.state,t.state)||n.push({command:"setGlobalState",args:[t.state]}),ke(s.centerAltitude,t.centerAltitude)||n.push({command:"setCenterAltitude",args:[t.centerAltitude]}),ke(s.zoom,t.zoom)||n.push({command:"setZoom",args:[t.zoom]}),ke(s.bearing,t.bearing)||n.push({command:"setBearing",args:[t.bearing]}),ke(s.pitch,t.pitch)||n.push({command:"setPitch",args:[t.pitch]}),ke(s.roll,t.roll)||n.push({command:"setRoll",args:[t.roll]}),ke(s.sprite,t.sprite)||n.push({command:"setSprite",args:[t.sprite]}),ke(s.glyphs,t.glyphs)||n.push({command:"setGlyphs",args:[t.glyphs]}),ke(s.transition,t.transition)||n.push({command:"setTransition",args:[t.transition]}),ke(s.light,t.light)||n.push({command:"setLight",args:[t.light]}),ke(s.terrain,t.terrain)||n.push({command:"setTerrain",args:[t.terrain]}),ke(s.sky,t.sky)||n.push({command:"setSky",args:[t.sky]}),ke(s.projection,t.projection)||n.push({command:"setProjection",args:[t.projection]});let a={},c=[];(function(g,x,S,M){let L;for(L in x=x||{},g=g||{})Object.prototype.hasOwnProperty.call(g,L)&&(Object.prototype.hasOwnProperty.call(x,L)||Yt(L,S,M));for(L in x)Object.prototype.hasOwnProperty.call(x,L)&&(Object.prototype.hasOwnProperty.call(g,L)?ke(g[L],x[L])||(g[L].type==="geojson"&&x[L].type==="geojson"&&Di(g,x,L)?at(S,{command:"setGeoJSONSourceData",args:[L,x[L].data]}):Ti(L,x,S,M)):je(L,x,S))})(s.sources,t.sources,c,a);let m=[];s.layers&&s.layers.forEach(g=>{"source"in g&&a[g.source]?n.push({command:"removeLayer",args:[g.id]}):m.push(g)}),n=n.concat(c),function(g,x,S){x=x||[];let M=(g=g||[]).map(Tr),L=x.map(Tr),z=g.reduce(_r,{}),U=x.reduce(_r,{}),G=M.slice(),Z=Object.create(null),J,ne,he,Te,me;for(let q=0,re=0;q<M.length;q++)J=M[q],Object.prototype.hasOwnProperty.call(U,J)?re++:(at(S,{command:"removeLayer",args:[J]}),G.splice(G.indexOf(J,re),1));for(let q=0,re=0;q<L.length;q++)J=L[L.length-1-q],G[G.length-1-q]!==J&&(Object.prototype.hasOwnProperty.call(z,J)?(at(S,{command:"removeLayer",args:[J]}),G.splice(G.lastIndexOf(J,G.length-re),1)):re++,Te=G[G.length-q],at(S,{command:"addLayer",args:[U[J],Te]}),G.splice(G.length-q,0,J),Z[J]=!0);for(let q=0;q<L.length;q++)if(J=L[q],ne=z[J],he=U[J],!Z[J]&&!ke(ne,he))if(ke(ne.source,he.source)&&ke(ne["source-layer"],he["source-layer"])&&ke(ne.type,he.type)){for(me in Hi(ne.layout,he.layout,S,J,null,"setLayoutProperty"),Hi(ne.paint,he.paint,S,J,null,"setPaintProperty"),ke(ne.filter,he.filter)||at(S,{command:"setFilter",args:[J,he.filter]}),ke(ne.minzoom,he.minzoom)&&ke(ne.maxzoom,he.maxzoom)||at(S,{command:"setLayerZoomRange",args:[J,he.minzoom,he.maxzoom]}),ne)Object.prototype.hasOwnProperty.call(ne,me)&&me!=="layout"&&me!=="paint"&&me!=="filter"&&me!=="metadata"&&me!=="minzoom"&&me!=="maxzoom"&&(me.indexOf("paint.")===0?Hi(ne[me],he[me],S,J,me.slice(6),"setPaintProperty"):ke(ne[me],he[me])||at(S,{command:"setLayerProperty",args:[J,me,he[me]]}));for(me in he)Object.prototype.hasOwnProperty.call(he,me)&&!Object.prototype.hasOwnProperty.call(ne,me)&&me!=="layout"&&me!=="paint"&&me!=="filter"&&me!=="metadata"&&me!=="minzoom"&&me!=="maxzoom"&&(me.indexOf("paint.")===0?Hi(ne[me],he[me],S,J,me.slice(6),"setPaintProperty"):ke(ne[me],he[me])||at(S,{command:"setLayerProperty",args:[J,me,he[me]]}))}else at(S,{command:"removeLayer",args:[J]}),Te=G[G.lastIndexOf(J)+1],at(S,{command:"addLayer",args:[he,Te]})}(m,t.layers,n)}catch(a){console.warn("Unable to compute style diff:",a),n=[{command:"setStyle",args:[t]}]}return n},R.bD=function(s){let t=[],n=s.id;return n===void 0&&t.push({message:`layers.${n}: missing required property "id"`}),s.render===void 0&&t.push({message:`layers.${n}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},R.bE=function s(t,n){if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(!s(t[a],n[a]))return!1;return!0}if(typeof t=="object"&&t!==null&&n!==null){if(typeof n!="object"||Object.keys(t).length!==Object.keys(n).length)return!1;for(let a in t)if(!s(t[a],n[a]))return!1;return!0}return t===n},R.bF=oo,R.bG=Rs,R.bH=class extends an{constructor(s,t){super(s,t),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},R.bI=Gl,R.bJ=class extends an{constructor(s,t){super(s,t),this.current=q1}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let t=1;t<16;t++)if(s[t]!==this.current[t]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},R.bK=ql,R.bL=class extends an{constructor(s,t){super(s,t),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},R.bM=class extends an{constructor(s,t){super(s,t),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},R.bN=zr,R.bO=function(s,t){var n=Math.sin(t),a=Math.cos(t);return s[0]=a,s[1]=n,s[2]=0,s[3]=-n,s[4]=a,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},R.bP=function(s,t,n){var a=t[0],c=t[1],m=t[2];return s[0]=a*n[0]+c*n[3]+m*n[6],s[1]=a*n[1]+c*n[4]+m*n[7],s[2]=a*n[2]+c*n[5]+m*n[8],s},R.bQ=function(s,t,n,a,c,m,g){var x=1/(t-n),S=1/(a-c),M=1/(m-g);return s[0]=-2*x,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*S,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*M,s[11]=0,s[12]=(t+n)*x,s[13]=(c+a)*S,s[14]=(g+m)*M,s[15]=1,s},R.bR=class extends an{constructor(s,t){super(s,t),this.current=new Array}set(s){if(s!=this.current){this.current=s;let t=new Float32Array(4*s.length);for(let n=0;n<s.length;n++)t[4*n]=s[n].r,t[4*n+1]=s[n].g,t[4*n+2]=s[n].b,t[4*n+3]=s[n].a;this.gl.uniform4fv(this.location,t)}}},R.bS=class extends an{constructor(s,t){super(s,t),this.current=new Array}set(s){if(s!=this.current){this.current=s;let t=new Float32Array(s);this.gl.uniform1fv(this.location,t)}}},R.bT=class extends d{},R.bU=V0,R.bV=class extends E{},R.bW=Tc,R.bX=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},R.bY=Qc,R.bZ=function(s,t,n){var a=t[0],c=t[1],m=t[2],g=n[3]*a+n[7]*c+n[11]*m+n[15];return s[0]=(n[0]*a+n[4]*c+n[8]*m+n[12])/(g=g||1),s[1]=(n[1]*a+n[5]*c+n[9]*m+n[13])/g,s[2]=(n[2]*a+n[6]*c+n[10]*m+n[14])/g,s},R.b_=class extends rl{},R.ba=J1,R.bb=Uo,R.bc=Fr,R.bd=Ws,R.be=qe,R.bf=function(s,t,n,a,c){return Fr(a,c,Zn((s-t)/(n-t),0,1))},R.bg=Ps,R.bh=function(){return new Float64Array(3)},R.bi=function(s,t,n,a){return s[0]=t[0]+n[0]*a,s[1]=t[1]+n[1]*a,s[2]=t[2]+n[2]*a,s},R.bj=cn,R.bk=function(){return new Float64Array(4)},R.bl=function(s,t,n,a){var c=[],m=[];return c[0]=t[0]-n[0],c[1]=t[1]-n[1],c[2]=t[2]-n[2],m[0]=c[0]*Math.cos(a)-c[1]*Math.sin(a),m[1]=c[0]*Math.sin(a)+c[1]*Math.cos(a),m[2]=c[2],s[0]=m[0]+n[0],s[1]=m[1]+n[1],s[2]=m[2]+n[2],s},R.bm=function(s,t,n,a){var c=[],m=[];return c[0]=t[0]-n[0],c[1]=t[1]-n[1],c[2]=t[2]-n[2],m[0]=c[0],m[1]=c[1]*Math.cos(a)-c[2]*Math.sin(a),m[2]=c[1]*Math.sin(a)+c[2]*Math.cos(a),s[0]=m[0]+n[0],s[1]=m[1]+n[1],s[2]=m[2]+n[2],s},R.bn=function(s,t,n,a){var c=[],m=[];return c[0]=t[0]-n[0],c[1]=t[1]-n[1],c[2]=t[2]-n[2],m[0]=c[2]*Math.sin(a)+c[0]*Math.cos(a),m[1]=c[1],m[2]=c[2]*Math.cos(a)-c[0]*Math.sin(a),s[0]=m[0]+n[0],s[1]=m[1]+n[1],s[2]=m[2]+n[2],s},R.bo=qn,R.bp=function(s,t,n){var a=Math.sin(n),c=Math.cos(n),m=t[0],g=t[1],x=t[2],S=t[3],M=t[8],L=t[9],z=t[10],U=t[11];return t!==s&&(s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=m*c-M*a,s[1]=g*c-L*a,s[2]=x*c-z*a,s[3]=S*c-U*a,s[8]=m*a+M*c,s[9]=g*a+L*c,s[10]=x*a+z*c,s[11]=S*a+U*c,s},R.bq=function(s,t){let n=Ps(s,360),a=Ps(t,360),c=a-n,m=a>n?c-360:c+360;return Math.abs(c)<Math.abs(m)?c:m},R.br=function(s){return s[0]=0,s[1]=0,s[2]=0,s},R.bs=function(s,t,n,a){let c=Math.sqrt(s*s+t*t),m=Math.sqrt(n*n+a*a);s/=c,t/=c,n/=m,a/=m;let g=Math.acos(s*n+t*a);return-t*n+s*a>0?g:-g},R.bt=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]},R.bu=A2,R.bv=function(s,t){let n=Ps(s,2*Math.PI),a=Ps(t,2*Math.PI);return Math.min(Math.abs(n-a),Math.abs(n-a+2*Math.PI),Math.abs(n-a-2*Math.PI))},R.bw=function(){let s={},t=te.$version;for(let n in te.$root){let a=te.$root[n];if(a.required){let c=null;c=n==="version"?t:a.type==="array"?[]:{},c!=null&&(s[n]=c)}}return s},R.bx=Vo,R.by=ba,R.bz=function(s){s=s.slice();let t=Object.create(null);for(let n=0;n<s.length;n++)t[s[n].id]=s[n];for(let n=0;n<s.length;n++)"ref"in s[n]&&(s[n]=Ae(s[n],t[s[n].ref]));return s},R.c=Ya,R.c0=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]&&s[3]===t[3]&&s[4]===t[4]&&s[5]===t[5]&&s[6]===t[6]&&s[7]===t[7]&&s[8]===t[8]&&s[9]===t[9]&&s[10]===t[10]&&s[11]===t[11]&&s[12]===t[12]&&s[13]===t[13]&&s[14]===t[14]&&s[15]===t[15]},R.c1=function(s,t){var n=s[0],a=s[1],c=s[2],m=s[3],g=s[4],x=s[5],S=s[6],M=s[7],L=s[8],z=s[9],U=s[10],G=s[11],Z=s[12],J=s[13],ne=s[14],he=s[15],Te=t[0],me=t[1],q=t[2],re=t[3],ye=t[4],ct=t[5],Kt=t[6],vt=t[7],Ft=t[8],hi=t[9],Qt=t[10],fi=t[11],qt=t[12],er=t[13],mr=t[14],dr=t[15];return Math.abs(n-Te)<=Pr*Math.max(1,Math.abs(n),Math.abs(Te))&&Math.abs(a-me)<=Pr*Math.max(1,Math.abs(a),Math.abs(me))&&Math.abs(c-q)<=Pr*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(m-re)<=Pr*Math.max(1,Math.abs(m),Math.abs(re))&&Math.abs(g-ye)<=Pr*Math.max(1,Math.abs(g),Math.abs(ye))&&Math.abs(x-ct)<=Pr*Math.max(1,Math.abs(x),Math.abs(ct))&&Math.abs(S-Kt)<=Pr*Math.max(1,Math.abs(S),Math.abs(Kt))&&Math.abs(M-vt)<=Pr*Math.max(1,Math.abs(M),Math.abs(vt))&&Math.abs(L-Ft)<=Pr*Math.max(1,Math.abs(L),Math.abs(Ft))&&Math.abs(z-hi)<=Pr*Math.max(1,Math.abs(z),Math.abs(hi))&&Math.abs(U-Qt)<=Pr*Math.max(1,Math.abs(U),Math.abs(Qt))&&Math.abs(G-fi)<=Pr*Math.max(1,Math.abs(G),Math.abs(fi))&&Math.abs(Z-qt)<=Pr*Math.max(1,Math.abs(Z),Math.abs(qt))&&Math.abs(J-er)<=Pr*Math.max(1,Math.abs(J),Math.abs(er))&&Math.abs(ne-mr)<=Pr*Math.max(1,Math.abs(ne),Math.abs(mr))&&Math.abs(he-dr)<=Pr*Math.max(1,Math.abs(he),Math.abs(dr))},R.c2=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},R.c3=s=>s.type==="symbol",R.c4=s=>s.type==="circle",R.c5=s=>s.type==="heatmap",R.c6=s=>s.type==="line",R.c7=s=>s.type==="fill",R.c8=s=>s.type==="fill-extrusion",R.c9=s=>s.type==="hillshade",R.cA=nu,R.cB=d2,R.cC=zu,R.cD=g2,R.cE=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},R.cF=function(s,t,n,a,c){return u(this,void 0,void 0,function*(){if(Nr())try{return yield No(s,t,n,a,c)}catch{}return function(m,g,x,S,M){let L=m.width,z=m.height;ya&&Wa||(ya=new OffscreenCanvas(L,z),Wa=ya.getContext("2d",{willReadFrequently:!0})),ya.width=L,ya.height=z,Wa.drawImage(m,0,0,L,z);let U=Wa.getImageData(g,x,S,M);return Wa.clearRect(0,0,L,z),U.data}(s,t,n,a,c)})},R.cG=vp,R.cH=tt,R.cI=ci,R.cJ=$d,R.cK=Jd,R.cL=n1,R.cM=Po,R.ca=s=>s.type==="raster",R.cb=s=>s.type==="background",R.cc=s=>s.type==="custom",R.cd=Jo,R.ce=function(s,t,n){let a=Na(t.x-n.x,t.y-n.y),c=Na(s.x-n.x,s.y-n.y);var m,g;return Ja(Math.atan2(a[0]*c[1]-a[1]*c[0],(m=a)[0]*(g=c)[0]+m[1]*g[1]))},R.cf=Xs,R.cg=function(s,t){return lo[t]&&(s instanceof MouseEvent||s instanceof WheelEvent)},R.ch=function(s,t){return So[t]&&"touches"in s},R.ci=function(s){return So[s]||lo[s]},R.cj=function(s,t,n){var a=t[0],c=t[1];return s[0]=n[0]*a+n[4]*c+n[12],s[1]=n[1]*a+n[5]*c+n[13],s},R.ck=function(s,t){let{x:n,y:a}=Uu.fromLngLat(t);return!(s<0||s>25||a<0||a>=1||n<0||n>=1)},R.cl=function(s,t){return s[0]=t[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=t[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=t[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},R.cm=class extends il{},R.cn=w3,R.cp=function(s){return s.message===zo},R.cq=za,R.cr=function(s,t){Ka.REGISTERED_PROTOCOLS[s]=t},R.cs=function(s){delete Ka.REGISTERED_PROTOCOLS[s]},R.ct=function(s,t){let n={};for(let c=0;c<s.length;c++){let m=t&&t[s[c].id]||ta(s[c]);t&&(t[s[c].id]=m);let g=n[m];g||(g=n[m]=[]),g.push(s[c])}let a=[];for(let c in n)a.push(n[c]);return a},R.cu=zi,R.cv=xp,R.cw=Ep,R.cx=Kd,R.cy=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=Er/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;let t=s.bucket.layers[0],n=t.layout,a=t._unevaluatedLayout._values,c={layoutIconSize:a["icon-size"].possiblyEvaluate(new yn(s.bucket.zoom+1),s.canonical),layoutTextSize:a["text-size"].possiblyEvaluate(new yn(s.bucket.zoom+1),s.canonical),textMaxSize:a["text-size"].possiblyEvaluate(new yn(18))};if(s.bucket.textSizeData.kind==="composite"){let{minZoom:M,maxZoom:L}=s.bucket.textSizeData;c.compositeTextSizes=[a["text-size"].possiblyEvaluate(new yn(M),s.canonical),a["text-size"].possiblyEvaluate(new yn(L),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){let{minZoom:M,maxZoom:L}=s.bucket.iconSizeData;c.compositeIconSizes=[a["icon-size"].possiblyEvaluate(new yn(M),s.canonical),a["icon-size"].possiblyEvaluate(new yn(L),s.canonical)]}let m=n.get("text-line-height")*qs,g=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",x=n.get("text-keep-upright"),S=n.get("text-size");for(let M of s.bucket.features){let L=n.get("text-font").evaluate(M,{},s.canonical).join(","),z=S.evaluate(M,{},s.canonical),U=c.layoutTextSize.evaluate(M,{},s.canonical),G=c.layoutIconSize.evaluate(M,{},s.canonical),Z={horizontal:{},vertical:void 0},J=M.text,ne,he=[0,0];if(J){let q=J.toString(),re=n.get("text-letter-spacing").evaluate(M,{},s.canonical)*qs,ye=F1(q)?re:0,ct=n.get("text-anchor").evaluate(M,{},s.canonical),Kt=Op(t,M,s.canonical);if(!Kt){let Qt=n.get("text-radial-offset").evaluate(M,{},s.canonical);he=Qt?Lp(ct,[Qt*qs,M2]):n.get("text-offset").evaluate(M,{},s.canonical).map(fi=>fi*qs)}let vt=g?"center":n.get("text-justify").evaluate(M,{},s.canonical),Ft=n.get("symbol-placement")==="point"?n.get("text-max-width").evaluate(M,{},s.canonical)*qs:1/0,hi=()=>{s.bucket.allowVerticalPlacement&&Mo(q)&&(Z.vertical=xh(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,Ft,m,ct,"left",ye,he,R.al.vertical,!0,U,z))};if(!g&&Kt){let Qt=new Set;if(vt==="auto")for(let qt=0;qt<Kt.values.length;qt+=2)Qt.add(P2(Kt.values[qt]));else Qt.add(vt);let fi=!1;for(let qt of Qt)if(!Z.horizontal[qt])if(fi)Z.horizontal[qt]=Z.horizontal[0];else{let er=xh(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,Ft,m,"center",qt,ye,he,R.al.horizontal,!1,U,z);er&&(Z.horizontal[qt]=er,fi=er.positionedLines.length===1)}hi()}else{vt==="auto"&&(vt=P2(ct));let Qt=xh(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,Ft,m,ct,vt,ye,he,R.al.horizontal,!1,U,z);Qt&&(Z.horizontal[vt]=Qt),hi(),Mo(q)&&g&&x&&(Z.vertical=xh(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,Ft,m,ct,vt,ye,he,R.al.vertical,!1,U,z))}}let Te=!1;if(M.icon&&M.icon.name){let q=s.imageMap[M.icon.name];q&&(ne=r3(s.imagePositions[M.icon.name],n.get("icon-offset").evaluate(M,{},s.canonical),n.get("icon-anchor").evaluate(M,{},s.canonical)),Te=!!q.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=Te:s.bucket.sdfIcons!==Te&&hs("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(q.pixelRatio!==s.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}let me=zp(Z.horizontal)||Z.vertical;s.bucket.iconsInText=!!me&&me.iconsInText,(me||ne)&&v3(s.bucket,M,Z,ne,s.imageMap,c,U,G,he,Te,s.canonical,s.subdivisionGranularity)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},R.cz=p2,R.d=Be,R.e=Hn,R.f=s=>u(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));let t=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(t)}catch(n){throw new Error(`Could not load image because of ${n.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),R.g=Ys,R.h=s=>new Promise((t,n)=>{let a=new Image;a.onload=()=>{t(a),URL.revokeObjectURL(a.src),a.onload=null,window.requestAnimationFrame(()=>{a.src=Yo})},a.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let c=new Blob([new Uint8Array(s)],{type:"image/png"});a.src=s.byteLength?URL.createObjectURL(c):Yo}),R.i=ks,R.j=(s,t)=>co(Hn(s,{type:"json"}),t),R.k=ge,R.l=se,R.m=co,R.n=(s,t)=>co(Hn(s,{type:"arrayBuffer"}),t),R.o=function(s){return new g2(s).readFields(G0,[])},R.p=Yd,R.q=W1,R.r=Xn,R.s=de,R.t=As,R.u=Cr,R.v=te,R.w=hs,R.x=o1,R.y=os,R.z=function([s,t,n]){return t+=90,t*=Math.PI/180,n*=Math.PI/180,{x:s*Math.cos(t)*Math.sin(n),y:s*Math.sin(t)*Math.sin(n),z:s*Math.cos(n)}}}),N("worker",["./shared"],function(R){"use strict";class u{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,K){for(let ge of Y){this._layerConfigs[ge.id]=ge;let Se=this._layers[ge.id]=R.bA(ge);Se._featureFilter=R.a7(Se.filter),this.keyCache[ge.id]&&delete this.keyCache[ge.id]}for(let ge of K)delete this.keyCache[ge],delete this._layerConfigs[ge],delete this._layers[ge];this.familiesBySource={};let se=R.ct(Object.values(this._layerConfigs),this.keyCache);for(let ge of se){let Se=ge.map(je=>this._layers[je.id]),te=Se[0];if(te.visibility==="none")continue;let Re=te.source||"",Ae=this.familiesBySource[Re];Ae||(Ae=this.familiesBySource[Re]={});let ke=te.sourceLayer||"_geojsonTileLayer",at=Ae[ke];at||(at=Ae[ke]=[]),at.push(Se)}}}class tt{constructor(Y){let K={},se=[];for(let Re in Y){let Ae=Y[Re],ke=K[Re]={};for(let at in Ae){let je=Ae[+at];if(!je||je.bitmap.width===0||je.bitmap.height===0)continue;let Yt={x:0,y:0,w:je.bitmap.width+2,h:je.bitmap.height+2};se.push(Yt),ke[at]={rect:Yt,metrics:je.metrics}}}let{w:ge,h:Se}=R.p(se),te=new R.q({width:ge||1,height:Se||1});for(let Re in Y){let Ae=Y[Re];for(let ke in Ae){let at=Ae[+ke];if(!at||at.bitmap.width===0||at.bitmap.height===0)continue;let je=K[Re][ke].rect;R.q.copy(at.bitmap,te,{x:0,y:0},{x:je.x+1,y:je.y+1},at.bitmap)}}this.image=te,this.positions=K}}R.cu("GlyphAtlas",tt);class Nt{constructor(Y){this.tileID=new R.Y(Y.tileID.overscaledZ,Y.tileID.wrap,Y.tileID.canonical.z,Y.tileID.canonical.x,Y.tileID.canonical.y),this.uid=Y.uid,this.zoom=Y.zoom,this.pixelRatio=Y.pixelRatio,this.tileSize=Y.tileSize,this.source=Y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Y.showCollisionBoxes,this.collectResourceTiming=!!Y.collectResourceTiming,this.returnDependencies=!!Y.returnDependencies,this.promoteId=Y.promoteId,this.inFlightDependencies=[]}parse(Y,K,se,ge,Se){return R._(this,void 0,void 0,function*(){this.status="parsing",this.data=Y,this.collisionBoxArray=new R.a5;let te=new R.cv(Object.keys(Y.layers).sort()),Re=new R.cw(this.tileID,this.promoteId);Re.bucketLayerIDs=[];let Ae={},ke={featureIndex:Re,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:se,subdivisionGranularity:Se},at=K.familiesBySource[this.source];for(let cr in at){let Gt=Y.layers[cr];if(!Gt)continue;Gt.version===1&&R.w(`Vector tile source "${this.source}" layer "${cr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let li=te.encode(cr),br=[];for(let kr=0;kr<Gt.length;kr++){let hn=Gt.feature(kr),i=Re.getId(hn,cr);br.push({feature:hn,id:i,index:kr,sourceLayerIndex:li})}for(let kr of at[cr]){let hn=kr[0];hn.source!==this.source&&R.w(`layer.source = ${hn.source} does not equal this.source = ${this.source}`),hn.minzoom&&this.zoom<Math.floor(hn.minzoom)||hn.maxzoom&&this.zoom>=hn.maxzoom||hn.visibility!=="none"&&(ai(kr,this.zoom,se),(Ae[hn.id]=hn.createBucket({index:Re.bucketLayerIDs.length,layers:kr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:li,sourceID:this.source})).populate(br,ke,this.tileID.canonical),Re.bucketLayerIDs.push(kr.map(i=>i.id)))}}let je=R.bF(ke.glyphDependencies,cr=>Object.keys(cr).map(Number));this.inFlightDependencies.forEach(cr=>cr?.abort()),this.inFlightDependencies=[];let Yt=Promise.resolve({});if(Object.keys(je).length){let cr=new AbortController;this.inFlightDependencies.push(cr),Yt=ge.sendAsync({type:"GG",data:{stacks:je,source:this.source,tileID:this.tileID,type:"glyphs"}},cr)}let Ti=Object.keys(ke.iconDependencies),Di=Promise.resolve({});if(Ti.length){let cr=new AbortController;this.inFlightDependencies.push(cr),Di=ge.sendAsync({type:"GI",data:{icons:Ti,source:this.source,tileID:this.tileID,type:"icons"}},cr)}let Hi=Object.keys(ke.patternDependencies),Tr=Promise.resolve({});if(Hi.length){let cr=new AbortController;this.inFlightDependencies.push(cr),Tr=ge.sendAsync({type:"GI",data:{icons:Hi,source:this.source,tileID:this.tileID,type:"patterns"}},cr)}let[_r,It,Yr]=yield Promise.all([Yt,Di,Tr]),Lr=new tt(_r),Wr=new R.cx(It,Yr);for(let cr in Ae){let Gt=Ae[cr];Gt instanceof R.a6?(ai(Gt.layers,this.zoom,se),R.cy({bucket:Gt,glyphMap:_r,glyphPositions:Lr.positions,imageMap:It,imagePositions:Wr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:ke.subdivisionGranularity})):Gt.hasPattern&&(Gt instanceof R.cz||Gt instanceof R.cA||Gt instanceof R.cB)&&(ai(Gt.layers,this.zoom,se),Gt.addFeatures(ke,this.tileID.canonical,Wr.patternPositions))}return this.status="done",{buckets:Object.values(Ae).filter(cr=>!cr.isEmpty()),featureIndex:Re,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Lr.image,imageAtlas:Wr,glyphMap:this.returnDependencies?_r:null,iconMap:this.returnDependencies?It:null,glyphPositions:this.returnDependencies?Lr.positions:null}})}}function ai(Be,Y,K){let se=new R.C(Y);for(let ge of Be)ge.recalculate(se,K)}class ci{constructor(Y,K,se){this.actor=Y,this.layerIndex=K,this.availableImages=se,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(Y,K){return R._(this,void 0,void 0,function*(){let se=yield R.n(Y.request,K);try{return{vectorTile:new R.cC.VectorTile(new R.cD(se.data)),rawData:se.data,cacheControl:se.cacheControl,expires:se.expires}}catch(ge){let Se=new Uint8Array(se.data),te=`Unable to parse the tile at ${Y.request.url}, `;throw te+=Se[0]===31&&Se[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ge.message}`,new Error(te)}})}loadTile(Y){return R._(this,void 0,void 0,function*(){let K=Y.uid,se=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new R.cE(Y.request),ge=new Nt(Y);this.loading[K]=ge;let Se=new AbortController;ge.abort=Se;try{let te=yield this.loadVectorTile(Y,Se);if(delete this.loading[K],!te)return null;let Re=te.rawData,Ae={};te.expires&&(Ae.expires=te.expires),te.cacheControl&&(Ae.cacheControl=te.cacheControl);let ke={};if(se){let je=se.finish();je&&(ke.resourceTiming=JSON.parse(JSON.stringify(je)))}ge.vectorTile=te.vectorTile;let at=ge.parse(te.vectorTile,this.layerIndex,this.availableImages,this.actor,Y.subdivisionGranularity);this.loaded[K]=ge,this.fetching[K]={rawTileData:Re,cacheControl:Ae,resourceTiming:ke};try{let je=yield at;return R.e({rawTileData:Re.slice(0)},je,Ae,ke)}finally{delete this.fetching[K]}}catch(te){throw delete this.loading[K],ge.status="done",this.loaded[K]=ge,te}})}reloadTile(Y){return R._(this,void 0,void 0,function*(){let K=Y.uid;if(!this.loaded||!this.loaded[K])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let se=this.loaded[K];if(se.showCollisionBoxes=Y.showCollisionBoxes,se.status==="parsing"){let ge=yield se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,Y.subdivisionGranularity),Se;if(this.fetching[K]){let{rawTileData:te,cacheControl:Re,resourceTiming:Ae}=this.fetching[K];delete this.fetching[K],Se=R.e({rawTileData:te.slice(0)},ge,Re,Ae)}else Se=ge;return Se}if(se.status==="done"&&se.vectorTile)return se.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor,Y.subdivisionGranularity)})}abortTile(Y){return R._(this,void 0,void 0,function*(){let K=this.loading,se=Y.uid;K&&K[se]&&K[se].abort&&(K[se].abort.abort(),delete K[se])})}removeTile(Y){return R._(this,void 0,void 0,function*(){this.loaded&&this.loaded[Y.uid]&&delete this.loaded[Y.uid]})}}class Vt{constructor(){this.loaded={}}loadTile(Y){return R._(this,void 0,void 0,function*(){let{uid:K,encoding:se,rawImageData:ge,redFactor:Se,greenFactor:te,blueFactor:Re,baseShift:Ae}=Y,ke=ge.width+2,at=ge.height+2,je=R.b(ge)?new R.R({width:ke,height:at},yield R.cF(ge,-1,-1,ke,at)):ge,Yt=new R.cG(K,je,se,Se,te,Re,Ae);return this.loaded=this.loaded||{},this.loaded[K]=Yt,Yt})}removeTile(Y){let K=this.loaded,se=Y.uid;K&&K[se]&&delete K[se]}}var Ne,bi,gr=function(){if(bi)return Ne;function Be(K,se){if(K.length!==0){Y(K[0],se);for(var ge=1;ge<K.length;ge++)Y(K[ge],!se)}}function Y(K,se){for(var ge=0,Se=0,te=0,Re=K.length,Ae=Re-1;te<Re;Ae=te++){var ke=(K[te][0]-K[Ae][0])*(K[Ae][1]+K[te][1]),at=ge+ke;Se+=Math.abs(ge)>=Math.abs(ke)?ge-at+ke:ke-at+ge,ge=at}ge+Se>=0!=!!se&&K.reverse()}return bi=1,Ne=function K(se,ge){var Se,te=se&&se.type;if(te==="FeatureCollection")for(Se=0;Se<se.features.length;Se++)K(se.features[Se],ge);else if(te==="GeometryCollection")for(Se=0;Se<se.geometries.length;Se++)K(se.geometries[Se],ge);else if(te==="Feature")K(se.geometry,ge);else if(te==="Polygon")Be(se.coordinates,ge);else if(te==="MultiPolygon")for(Se=0;Se<se.coordinates.length;Se++)Be(se.coordinates[Se],ge);return se}}(),Hr=R.cH(gr);let Ar=R.cC.VectorTileFeature.prototype.toGeoJSON;class Mr{constructor(Y){this._feature=Y,this.extent=R.Z,this.type=Y.type,this.properties=Y.tags,"id"in Y&&!isNaN(Y.id)&&(this.id=parseInt(Y.id,10))}loadGeometry(){if(this._feature.type===1){let Y=[];for(let K of this._feature.geometry)Y.push([new R.P(K[0],K[1])]);return Y}{let Y=[];for(let K of this._feature.geometry){let se=[];for(let ge of K)se.push(new R.P(ge[0],ge[1]));Y.push(se)}return Y}}toGeoJSON(Y,K,se){return Ar.call(this,Y,K,se)}}class en{constructor(Y){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=R.Z,this.length=Y.length,this._features=Y}feature(Y){return new Mr(this._features[Y])}}var Nr,Pr,ur,zr={exports:{}},yr=function(){if(ur)return zr.exports;ur=1;var Be=R.cK(),Y=function(){if(Pr)return Nr;Pr=1;var at=R.cI(),je=R.cJ().VectorTileFeature;function Yt(Di,Hi){this.options=Hi||{},this.features=Di,this.length=Di.length}function Ti(Di,Hi){this.id=typeof Di.id=="number"?Di.id:void 0,this.type=Di.type,this.rawGeometry=Di.type===1?[Di.geometry]:Di.geometry,this.properties=Di.tags,this.extent=Hi||4096}return Nr=Yt,Yt.prototype.feature=function(Di){return new Ti(this.features[Di],this.options.extent)},Ti.prototype.loadGeometry=function(){var Di=this.rawGeometry;this.geometry=[];for(var Hi=0;Hi<Di.length;Hi++){for(var Tr=Di[Hi],_r=[],It=0;It<Tr.length;It++)_r.push(new at(Tr[It][0],Tr[It][1]));this.geometry.push(_r)}return this.geometry},Ti.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Di=this.geometry,Hi=1/0,Tr=-1/0,_r=1/0,It=-1/0,Yr=0;Yr<Di.length;Yr++)for(var Lr=Di[Yr],Wr=0;Wr<Lr.length;Wr++){var cr=Lr[Wr];Hi=Math.min(Hi,cr.x),Tr=Math.max(Tr,cr.x),_r=Math.min(_r,cr.y),It=Math.max(It,cr.y)}return[Hi,_r,Tr,It]},Ti.prototype.toGeoJSON=je.prototype.toGeoJSON,Nr}();function K(at){var je=new Be;return function(Yt,Ti){for(var Di in Yt.layers)Ti.writeMessage(3,se,Yt.layers[Di])}(at,je),je.finish()}function se(at,je){var Yt;je.writeVarintField(15,at.version||1),je.writeStringField(1,at.name||""),je.writeVarintField(5,at.extent||4096);var Ti={keys:[],values:[],keycache:{},valuecache:{}};for(Yt=0;Yt<at.length;Yt++)Ti.feature=at.feature(Yt),je.writeMessage(2,ge,Ti);var Di=Ti.keys;for(Yt=0;Yt<Di.length;Yt++)je.writeStringField(3,Di[Yt]);var Hi=Ti.values;for(Yt=0;Yt<Hi.length;Yt++)je.writeMessage(4,ke,Hi[Yt])}function ge(at,je){var Yt=at.feature;Yt.id!==void 0&&je.writeVarintField(1,Yt.id),je.writeMessage(2,Se,at),je.writeVarintField(3,Yt.type),je.writeMessage(4,Ae,Yt)}function Se(at,je){var Yt=at.feature,Ti=at.keys,Di=at.values,Hi=at.keycache,Tr=at.valuecache;for(var _r in Yt.properties){var It=Yt.properties[_r],Yr=Hi[_r];if(It!==null){Yr===void 0&&(Ti.push(_r),Hi[_r]=Yr=Ti.length-1),je.writeVarint(Yr);var Lr=typeof It;Lr!=="string"&&Lr!=="boolean"&&Lr!=="number"&&(It=JSON.stringify(It));var Wr=Lr+":"+It,cr=Tr[Wr];cr===void 0&&(Di.push(It),Tr[Wr]=cr=Di.length-1),je.writeVarint(cr)}}}function te(at,je){return(je<<3)+(7&at)}function Re(at){return at<<1^at>>31}function Ae(at,je){for(var Yt=at.loadGeometry(),Ti=at.type,Di=0,Hi=0,Tr=Yt.length,_r=0;_r<Tr;_r++){var It=Yt[_r],Yr=1;Ti===1&&(Yr=It.length),je.writeVarint(te(1,Yr));for(var Lr=Ti===3?It.length-1:It.length,Wr=0;Wr<Lr;Wr++){Wr===1&&Ti!==1&&je.writeVarint(te(2,Lr-1));var cr=It[Wr].x-Di,Gt=It[Wr].y-Hi;je.writeVarint(Re(cr)),je.writeVarint(Re(Gt)),Di+=cr,Hi+=Gt}Ti===3&&je.writeVarint(te(7,1))}}function ke(at,je){var Yt=typeof at;Yt==="string"?je.writeStringField(1,at):Yt==="boolean"?je.writeBooleanField(7,at):Yt==="number"&&(at%1!=0?je.writeDoubleField(3,at):at<0?je.writeSVarintField(6,at):je.writeVarintField(5,at))}return zr.exports=K,zr.exports.fromVectorTileJs=K,zr.exports.fromGeojsonVt=function(at,je){je=je||{};var Yt={};for(var Ti in at)Yt[Ti]=new Y(at[Ti].features,je),Yt[Ti].name=Ti,Yt[Ti].version=je.version,Yt[Ti].extent=je.extent;return K({layers:Yt})},zr.exports.GeoJSONWrapper=Y,zr.exports}(),xn=R.cH(yr);let qn={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Be=>Be},$r=Math.fround||(rn=new Float32Array(1),Be=>(rn[0]=+Be,rn[0]));var rn;let cn=3,un=5,Gn=6;class Ia{constructor(Y){this.options=Object.assign(Object.create(qn),Y),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Y){let{log:K,minZoom:se,maxZoom:ge}=this.options;K&&console.time("total time");let Se=`prepare ${Y.length} points`;K&&console.time(Se),this.points=Y;let te=[];for(let Ae=0;Ae<Y.length;Ae++){let ke=Y[Ae];if(!ke.geometry)continue;let[at,je]=ke.geometry.coordinates,Yt=$r(An(at)),Ti=$r(Ps(je));te.push(Yt,Ti,1/0,Ae,-1,1),this.options.reduce&&te.push(0)}let Re=this.trees[ge+1]=this._createTree(te);K&&console.timeEnd(Se);for(let Ae=ge;Ae>=se;Ae--){let ke=+Date.now();Re=this.trees[Ae]=this._createTree(this._cluster(Re,Ae)),K&&console.log("z%d: %d clusters in %dms",Ae,Re.numItems,+Date.now()-ke)}return K&&console.timeEnd("total time"),this}getClusters(Y,K){let se=((Y[0]+180)%360+360)%360-180,ge=Math.max(-90,Math.min(90,Y[1])),Se=Y[2]===180?180:((Y[2]+180)%360+360)%360-180,te=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)se=-180,Se=180;else if(se>Se){let je=this.getClusters([se,ge,180,te],K),Yt=this.getClusters([-180,ge,Se,te],K);return je.concat(Yt)}let Re=this.trees[this._limitZoom(K)],Ae=Re.range(An(se),Ps(te),An(Se),Ps(ge)),ke=Re.data,at=[];for(let je of Ae){let Yt=this.stride*je;at.push(ke[Yt+un]>1?Na(ke,Yt,this.clusterProps):this.points[ke[Yt+cn]])}return at}getChildren(Y){let K=this._getOriginId(Y),se=this._getOriginZoom(Y),ge="No cluster with the specified id.",Se=this.trees[se];if(!Se)throw new Error(ge);let te=Se.data;if(K*this.stride>=te.length)throw new Error(ge);let Re=this.options.radius/(this.options.extent*Math.pow(2,se-1)),Ae=Se.within(te[K*this.stride],te[K*this.stride+1],Re),ke=[];for(let at of Ae){let je=at*this.stride;te[je+4]===Y&&ke.push(te[je+un]>1?Na(te,je,this.clusterProps):this.points[te[je+cn]])}if(ke.length===0)throw new Error(ge);return ke}getLeaves(Y,K,se){let ge=[];return this._appendLeaves(ge,Y,K=K||10,se=se||0,0),ge}getTile(Y,K,se){let ge=this.trees[this._limitZoom(Y)],Se=Math.pow(2,Y),{extent:te,radius:Re}=this.options,Ae=Re/te,ke=(se-Ae)/Se,at=(se+1+Ae)/Se,je={features:[]};return this._addTileFeatures(ge.range((K-Ae)/Se,ke,(K+1+Ae)/Se,at),ge.data,K,se,Se,je),K===0&&this._addTileFeatures(ge.range(1-Ae/Se,ke,1,at),ge.data,Se,se,Se,je),K===Se-1&&this._addTileFeatures(ge.range(0,ke,Ae/Se,at),ge.data,-1,se,Se,je),je.features.length?je:null}getClusterExpansionZoom(Y){let K=this._getOriginZoom(Y)-1;for(;K<=this.options.maxZoom;){let se=this.getChildren(Y);if(K++,se.length!==1)break;Y=se[0].properties.cluster_id}return K}_appendLeaves(Y,K,se,ge,Se){let te=this.getChildren(K);for(let Re of te){let Ae=Re.properties;if(Ae&&Ae.cluster?Se+Ae.point_count<=ge?Se+=Ae.point_count:Se=this._appendLeaves(Y,Ae.cluster_id,se,ge,Se):Se<ge?Se++:Y.push(Re),Y.length===se)break}return Se}_createTree(Y){let K=new R.aF(Y.length/this.stride|0,this.options.nodeSize,Float32Array);for(let se=0;se<Y.length;se+=this.stride)K.add(Y[se],Y[se+1]);return K.finish(),K.data=Y,K}_addTileFeatures(Y,K,se,ge,Se,te){for(let Re of Y){let Ae=Re*this.stride,ke=K[Ae+un]>1,at,je,Yt;if(ke)at=Er(K,Ae,this.clusterProps),je=K[Ae],Yt=K[Ae+1];else{let Hi=this.points[K[Ae+cn]];at=Hi.properties;let[Tr,_r]=Hi.geometry.coordinates;je=An(Tr),Yt=Ps(_r)}let Ti={type:1,geometry:[[Math.round(this.options.extent*(je*Se-se)),Math.round(this.options.extent*(Yt*Se-ge))]],tags:at},Di;Di=ke||this.options.generateId?K[Ae+cn]:this.points[K[Ae+cn]].id,Di!==void 0&&(Ti.id=Di),te.features.push(Ti)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,K){let{radius:se,extent:ge,reduce:Se,minPoints:te}=this.options,Re=se/(ge*Math.pow(2,K)),Ae=Y.data,ke=[],at=this.stride;for(let je=0;je<Ae.length;je+=at){if(Ae[je+2]<=K)continue;Ae[je+2]=K;let Yt=Ae[je],Ti=Ae[je+1],Di=Y.within(Ae[je],Ae[je+1],Re),Hi=Ae[je+un],Tr=Hi;for(let _r of Di){let It=_r*at;Ae[It+2]>K&&(Tr+=Ae[It+un])}if(Tr>Hi&&Tr>=te){let _r,It=Yt*Hi,Yr=Ti*Hi,Lr=-1,Wr=((je/at|0)<<5)+(K+1)+this.points.length;for(let cr of Di){let Gt=cr*at;if(Ae[Gt+2]<=K)continue;Ae[Gt+2]=K;let li=Ae[Gt+un];It+=Ae[Gt]*li,Yr+=Ae[Gt+1]*li,Ae[Gt+4]=Wr,Se&&(_r||(_r=this._map(Ae,je,!0),Lr=this.clusterProps.length,this.clusterProps.push(_r)),Se(_r,this._map(Ae,Gt)))}Ae[je+4]=Wr,ke.push(It/Tr,Yr/Tr,1/0,Wr,-1,Tr),Se&&ke.push(Lr)}else{for(let _r=0;_r<at;_r++)ke.push(Ae[je+_r]);if(Tr>1)for(let _r of Di){let It=_r*at;if(!(Ae[It+2]<=K)){Ae[It+2]=K;for(let Yr=0;Yr<at;Yr++)ke.push(Ae[It+Yr])}}}}return ke}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,K,se){if(Y[K+un]>1){let te=this.clusterProps[Y[K+Gn]];return se?Object.assign({},te):te}let ge=this.points[Y[K+cn]].properties,Se=this.options.map(ge);return se&&Se===ge?Object.assign({},Se):Se}}function Na(Be,Y,K){return{type:"Feature",id:Be[Y+cn],properties:Er(Be,Y,K),geometry:{type:"Point",coordinates:[(se=Be[Y],360*(se-.5)),Fr(Be[Y+1])]}};var se}function Er(Be,Y,K){let se=Be[Y+un],ge=se>=1e4?`${Math.round(se/1e3)}k`:se>=1e3?Math.round(se/100)/10+"k":se,Se=Be[Y+Gn],te=Se===-1?{}:Object.assign({},K[Se]);return Object.assign(te,{cluster:!0,cluster_id:Be[Y+cn],point_count:se,point_count_abbreviated:ge})}function An(Be){return Be/360+.5}function Ps(Be){let Y=Math.sin(Be*Math.PI/180),K=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return K<0?0:K>1?1:K}function Fr(Be){let Y=(180-360*Be)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function Ws(Be,Y,K,se){let ge=se,Se=Y+(K-Y>>1),te,Re=K-Y,Ae=Be[Y],ke=Be[Y+1],at=Be[K],je=Be[K+1];for(let Yt=Y+3;Yt<K;Yt+=3){let Ti=Jo(Be[Yt],Be[Yt+1],Ae,ke,at,je);if(Ti>ge)te=Yt,ge=Ti;else if(Ti===ge){let Di=Math.abs(Yt-Se);Di<Re&&(te=Yt,Re=Di)}}ge>se&&(te-Y>3&&Ws(Be,Y,te,se),Be[te+2]=ge,K-te>3&&Ws(Be,te,K,se))}function Jo(Be,Y,K,se,ge,Se){let te=ge-K,Re=Se-se;if(te!==0||Re!==0){let Ae=((Be-K)*te+(Y-se)*Re)/(te*te+Re*Re);Ae>1?(K=ge,se=Se):Ae>0&&(K+=te*Ae,se+=Re*Ae)}return te=Be-K,Re=Y-se,te*te+Re*Re}function Xs(Be,Y,K,se){let ge={id:Be??null,type:Y,geometry:K,tags:se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Y==="Point"||Y==="MultiPoint"||Y==="LineString")Zn(ge,K);else if(Y==="Polygon")Zn(ge,K[0]);else if(Y==="MultiLineString")for(let Se of K)Zn(ge,Se);else if(Y==="MultiPolygon")for(let Se of K)Zn(ge,Se[0]);return ge}function Zn(Be,Y){for(let K=0;K<Y.length;K+=3)Be.minX=Math.min(Be.minX,Y[K]),Be.minY=Math.min(Be.minY,Y[K+1]),Be.maxX=Math.max(Be.maxX,Y[K]),Be.maxY=Math.max(Be.maxY,Y[K+1])}function Ma(Be,Y,K,se){if(!Y.geometry)return;let ge=Y.geometry.coordinates;if(ge&&ge.length===0)return;let Se=Y.geometry.type,te=Math.pow(K.tolerance/((1<<K.maxZoom)*K.extent),2),Re=[],Ae=Y.id;if(K.promoteId?Ae=Y.properties[K.promoteId]:K.generateId&&(Ae=se||0),Se==="Point")Hn(ge,Re);else if(Se==="MultiPoint")for(let ke of ge)Hn(ke,Re);else if(Se==="LineString")Pa(ge,Re,te,!1);else if(Se==="MultiLineString"){if(K.lineMetrics){for(let ke of ge)Re=[],Pa(ke,Re,te,!1),Be.push(Xs(Ae,"LineString",Re,Y.properties));return}oo(ge,Re,te,!1)}else if(Se==="Polygon")oo(ge,Re,te,!0);else{if(Se!=="MultiPolygon"){if(Se==="GeometryCollection"){for(let ke of Y.geometry.geometries)Ma(Be,{id:Ae,geometry:ke,properties:Y.properties},K,se);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let ke of ge){let at=[];oo(ke,at,te,!0),Re.push(at)}}Be.push(Xs(Ae,Se,Re,Y.properties))}function Hn(Be,Y){Y.push(Rs(Be[0]),xs(Be[1]),0)}function Pa(Be,Y,K,se){let ge,Se,te=0;for(let Ae=0;Ae<Be.length;Ae++){let ke=Rs(Be[Ae][0]),at=xs(Be[Ae][1]);Y.push(ke,at,0),Ae>0&&(te+=se?(ge*at-ke*Se)/2:Math.sqrt(Math.pow(ke-ge,2)+Math.pow(at-Se,2))),ge=ke,Se=at}let Re=Y.length-3;Y[2]=1,Ws(Y,0,Re,K),Y[Re+2]=1,Y.size=Math.abs(te),Y.start=0,Y.end=Y.size}function oo(Be,Y,K,se){for(let ge=0;ge<Be.length;ge++){let Se=[];Pa(Be[ge],Se,K,se),Y.push(Se)}}function Rs(Be){return Be/360+.5}function xs(Be){let Y=Math.sin(Be*Math.PI/180),K=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return K<0?0:K>1?1:K}function Js(Be,Y,K,se,ge,Se,te,Re){if(se/=Y,Se>=(K/=Y)&&te<se)return Be;if(te<K||Se>=se)return null;let Ae=[];for(let ke of Be){let at=ke.geometry,je=ke.type,Yt=ge===0?ke.minX:ke.minY,Ti=ge===0?ke.maxX:ke.maxY;if(Yt>=K&&Ti<se){Ae.push(ke);continue}if(Ti<K||Yt>=se)continue;let Di=[];if(je==="Point"||je==="MultiPoint")hs(at,Di,K,se,ge);else if(je==="LineString")on(at,Di,K,se,ge,!1,Re.lineMetrics);else if(je==="MultiLineString")Ha(at,Di,K,se,ge,!1);else if(je==="Polygon")Ha(at,Di,K,se,ge,!0);else if(je==="MultiPolygon")for(let Hi of at){let Tr=[];Ha(Hi,Tr,K,se,ge,!0),Tr.length&&Di.push(Tr)}if(Di.length){if(Re.lineMetrics&&je==="LineString"){for(let Hi of Di)Ae.push(Xs(ke.id,je,Hi,ke.tags));continue}je!=="LineString"&&je!=="MultiLineString"||(Di.length===1?(je="LineString",Di=Di[0]):je="MultiLineString"),je!=="Point"&&je!=="MultiPoint"||(je=Di.length===3?"Point":"MultiPoint"),Ae.push(Xs(ke.id,je,Di,ke.tags))}}return Ae.length?Ae:null}function hs(Be,Y,K,se,ge){for(let Se=0;Se<Be.length;Se+=3){let te=Be[Se+ge];te>=K&&te<=se&&_a(Y,Be[Se],Be[Se+1],Be[Se+2])}}function on(Be,Y,K,se,ge,Se,te){let Re=ks(Be),Ae=ge===0?Yo:No,ke,at,je=Be.start;for(let Tr=0;Tr<Be.length-3;Tr+=3){let _r=Be[Tr],It=Be[Tr+1],Yr=Be[Tr+2],Lr=Be[Tr+3],Wr=Be[Tr+4],cr=ge===0?_r:It,Gt=ge===0?Lr:Wr,li=!1;te&&(ke=Math.sqrt(Math.pow(_r-Lr,2)+Math.pow(It-Wr,2))),cr<K?Gt>K&&(at=Ae(Re,_r,It,Lr,Wr,K),te&&(Re.start=je+ke*at)):cr>se?Gt<se&&(at=Ae(Re,_r,It,Lr,Wr,se),te&&(Re.start=je+ke*at)):_a(Re,_r,It,Yr),Gt<K&&cr>=K&&(at=Ae(Re,_r,It,Lr,Wr,K),li=!0),Gt>se&&cr<=se&&(at=Ae(Re,_r,It,Lr,Wr,se),li=!0),!Se&&li&&(te&&(Re.end=je+ke*at),Y.push(Re),Re=ks(Be)),te&&(je+=ke)}let Yt=Be.length-3,Ti=Be[Yt],Di=Be[Yt+1],Hi=ge===0?Ti:Di;Hi>=K&&Hi<=se&&_a(Re,Ti,Di,Be[Yt+2]),Yt=Re.length-3,Se&&Yt>=3&&(Re[Yt]!==Re[0]||Re[Yt+1]!==Re[1])&&_a(Re,Re[0],Re[1],Re[2]),Re.length&&Y.push(Re)}function ks(Be){let Y=[];return Y.size=Be.size,Y.start=Be.start,Y.end=Be.end,Y}function Ha(Be,Y,K,se,ge,Se){for(let te of Be)on(te,Y,K,se,ge,Se,!1)}function _a(Be,Y,K,se){Be.push(Y,K,se)}function Yo(Be,Y,K,se,ge,Se){let te=(Se-Y)/(se-Y);return _a(Be,Se,K+(ge-K)*te,1),te}function No(Be,Y,K,se,ge,Se){let te=(Se-K)/(ge-K);return _a(Be,Y+(se-Y)*te,Se,1),te}function ya(Be,Y){let K=[];for(let se=0;se<Be.length;se++){let ge=Be[se],Se=ge.type,te;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")te=Wa(ge.geometry,Y);else if(Se==="MultiLineString"||Se==="Polygon"){te=[];for(let Re of ge.geometry)te.push(Wa(Re,Y))}else if(Se==="MultiPolygon"){te=[];for(let Re of ge.geometry){let Ae=[];for(let ke of Re)Ae.push(Wa(ke,Y));te.push(Ae)}}K.push(Xs(ge.id,Se,te,ge.tags))}return K}function Wa(Be,Y){let K=[];K.size=Be.size,Be.start!==void 0&&(K.start=Be.start,K.end=Be.end);for(let se=0;se<Be.length;se+=3)K.push(Be[se]+Y,Be[se+1],Be[se+2]);return K}function de(Be,Y){if(Be.transformed)return Be;let K=1<<Be.z,se=Be.x,ge=Be.y;for(let Se of Be.features){let te=Se.geometry,Re=Se.type;if(Se.geometry=[],Re===1)for(let Ae=0;Ae<te.length;Ae+=2)Se.geometry.push(Xa(te[Ae],te[Ae+1],Y,K,se,ge));else for(let Ae=0;Ae<te.length;Ae++){let ke=[];for(let at=0;at<te[Ae].length;at+=2)ke.push(Xa(te[Ae][at],te[Ae][at+1],Y,K,se,ge));Se.geometry.push(ke)}}return Be.transformed=!0,Be}function Xa(Be,Y,K,se,ge,Se){return[Math.round(K*(Be*se-ge)),Math.round(K*(Y*se-Se))]}function Ja(Be,Y,K,se,ge){let Se=Y===ge.maxZoom?0:ge.tolerance/((1<<Y)*ge.extent),te={features:[],numPoints:0,numSimplified:0,numFeatures:Be.length,source:null,x:K,y:se,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let Re of Be)So(te,Re,Se,ge);return te}function So(Be,Y,K,se){let ge=Y.geometry,Se=Y.type,te=[];if(Be.minX=Math.min(Be.minX,Y.minX),Be.minY=Math.min(Be.minY,Y.minY),Be.maxX=Math.max(Be.maxX,Y.maxX),Be.maxY=Math.max(Be.maxY,Y.maxY),Se==="Point"||Se==="MultiPoint")for(let Re=0;Re<ge.length;Re+=3)te.push(ge[Re],ge[Re+1]),Be.numPoints++,Be.numSimplified++;else if(Se==="LineString")lo(te,ge,Be,K,!1,!1);else if(Se==="MultiLineString"||Se==="Polygon")for(let Re=0;Re<ge.length;Re++)lo(te,ge[Re],Be,K,Se==="Polygon",Re===0);else if(Se==="MultiPolygon")for(let Re=0;Re<ge.length;Re++){let Ae=ge[Re];for(let ke=0;ke<Ae.length;ke++)lo(te,Ae[ke],Be,K,!0,ke===0)}if(te.length){let Re=Y.tags||null;if(Se==="LineString"&&se.lineMetrics){Re={};for(let ke in Y.tags)Re[ke]=Y.tags[ke];Re.mapbox_clip_start=ge.start/ge.size,Re.mapbox_clip_end=ge.end/ge.size}let Ae={geometry:te,type:Se==="Polygon"||Se==="MultiPolygon"?3:Se==="LineString"||Se==="MultiLineString"?2:1,tags:Re};Y.id!==null&&(Ae.id=Y.id),Be.features.push(Ae)}}function lo(Be,Y,K,se,ge,Se){let te=se*se;if(se>0&&Y.size<(ge?te:se))return void(K.numPoints+=Y.length/3);let Re=[];for(let Ae=0;Ae<Y.length;Ae+=3)(se===0||Y[Ae+2]>te)&&(K.numSimplified++,Re.push(Y[Ae],Y[Ae+1])),K.numPoints++;ge&&function(Ae,ke){let at=0;for(let je=0,Yt=Ae.length,Ti=Yt-2;je<Yt;Ti=je,je+=2)at+=(Ae[je]-Ae[Ti])*(Ae[je+1]+Ae[Ti+1]);if(at>0===ke)for(let je=0,Yt=Ae.length;je<Yt/2;je+=2){let Ti=Ae[je],Di=Ae[je+1];Ae[je]=Ae[Yt-2-je],Ae[je+1]=Ae[Yt-1-je],Ae[Yt-2-je]=Ti,Ae[Yt-1-je]=Di}}(Re,Se),Be.push(Re)}let zo={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ya{constructor(Y,K){let se=(K=this.options=function(Se,te){for(let Re in te)Se[Re]=te[Re];return Se}(Object.create(zo),K)).debug;if(se&&console.time("preprocess data"),K.maxZoom<0||K.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(K.promoteId&&K.generateId)throw new Error("promoteId and generateId cannot be used together.");let ge=function(Se,te){let Re=[];if(Se.type==="FeatureCollection")for(let Ae=0;Ae<Se.features.length;Ae++)Ma(Re,Se.features[Ae],te,Ae);else Ma(Re,Se.type==="Feature"?Se:{geometry:Se},te);return Re}(Y,K);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",K.indexMaxZoom,K.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ge=function(Se,te){let Re=te.buffer/te.extent,Ae=Se,ke=Js(Se,1,-1-Re,Re,0,-1,2,te),at=Js(Se,1,1-Re,2+Re,0,-1,2,te);return(ke||at)&&(Ae=Js(Se,1,-Re,1+Re,0,-1,2,te)||[],ke&&(Ae=ya(ke,1).concat(Ae)),at&&(Ae=Ae.concat(ya(at,-1)))),Ae}(ge,K),ge.length&&this.splitTile(ge,0,0,0),se&&(ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Y,K,se,ge,Se,te,Re){let Ae=[Y,K,se,ge],ke=this.options,at=ke.debug;for(;Ae.length;){ge=Ae.pop(),se=Ae.pop(),K=Ae.pop(),Y=Ae.pop();let je=1<<K,Yt=Ka(K,se,ge),Ti=this.tiles[Yt];if(!Ti&&(at>1&&console.time("creation"),Ti=this.tiles[Yt]=Ja(Y,K,se,ge,ke),this.tileCoords.push({z:K,x:se,y:ge}),at)){at>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",K,se,ge,Ti.numFeatures,Ti.numPoints,Ti.numSimplified),console.timeEnd("creation"));let li=`z${K}`;this.stats[li]=(this.stats[li]||0)+1,this.total++}if(Ti.source=Y,Se==null){if(K===ke.indexMaxZoom||Ti.numPoints<=ke.indexMaxPoints)continue}else{if(K===ke.maxZoom||K===Se)continue;if(Se!=null){let li=Se-K;if(se!==te>>li||ge!==Re>>li)continue}}if(Ti.source=null,Y.length===0)continue;at>1&&console.time("clipping");let Di=.5*ke.buffer/ke.extent,Hi=.5-Di,Tr=.5+Di,_r=1+Di,It=null,Yr=null,Lr=null,Wr=null,cr=Js(Y,je,se-Di,se+Tr,0,Ti.minX,Ti.maxX,ke),Gt=Js(Y,je,se+Hi,se+_r,0,Ti.minX,Ti.maxX,ke);Y=null,cr&&(It=Js(cr,je,ge-Di,ge+Tr,1,Ti.minY,Ti.maxY,ke),Yr=Js(cr,je,ge+Hi,ge+_r,1,Ti.minY,Ti.maxY,ke),cr=null),Gt&&(Lr=Js(Gt,je,ge-Di,ge+Tr,1,Ti.minY,Ti.maxY,ke),Wr=Js(Gt,je,ge+Hi,ge+_r,1,Ti.minY,Ti.maxY,ke),Gt=null),at>1&&console.timeEnd("clipping"),Ae.push(It||[],K+1,2*se,2*ge),Ae.push(Yr||[],K+1,2*se,2*ge+1),Ae.push(Lr||[],K+1,2*se+1,2*ge),Ae.push(Wr||[],K+1,2*se+1,2*ge+1)}}getTile(Y,K,se){Y=+Y,K=+K,se=+se;let ge=this.options,{extent:Se,debug:te}=ge;if(Y<0||Y>24)return null;let Re=1<<Y,Ae=Ka(Y,K=K+Re&Re-1,se);if(this.tiles[Ae])return de(this.tiles[Ae],Se);te>1&&console.log("drilling down to z%d-%d-%d",Y,K,se);let ke,at=Y,je=K,Yt=se;for(;!ke&&at>0;)at--,je>>=1,Yt>>=1,ke=this.tiles[Ka(at,je,Yt)];return ke&&ke.source?(te>1&&(console.log("found parent tile z%d-%d-%d",at,je,Yt),console.time("drilling down")),this.splitTile(ke.source,at,je,Yt,Y,K,se),te>1&&console.timeEnd("drilling down"),this.tiles[Ae]?de(this.tiles[Ae],Se):null):null}}function Ka(Be,Y,K){return 32*((1<<Be)*K+Y)+Be}function Ys(Be,Y){return Y?Be.properties[Y]:Be.id}function t1(Be,Y){if(Be==null)return!0;if(Be.type==="Feature")return Ys(Be,Y)!=null;if(Be.type==="FeatureCollection"){let K=new Set;for(let se of Be.features){let ge=Ys(se,Y);if(ge==null||K.has(ge))return!1;K.add(ge)}return!0}return!1}function za(Be,Y){let K=new Map;if(Be!=null)if(Be.type==="Feature")K.set(Ys(Be,Y),Be);else for(let se of Be.features)K.set(Ys(se,Y),se);return K}class ba extends ci{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(Y,K){return R._(this,void 0,void 0,function*(){let se=Y.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let ge=this._geoJSONIndex.getTile(se.z,se.x,se.y);if(!ge)return null;let Se=new en(ge.features),te=xn(Se);return te.byteOffset===0&&te.byteLength===te.buffer.byteLength||(te=new Uint8Array(te)),{vectorTile:Se,rawData:te.buffer}})}loadData(Y){return R._(this,void 0,void 0,function*(){var K;(K=this._pendingRequest)===null||K===void 0||K.abort();let se=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new R.cE(Y.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(Y,this._pendingRequest),this._geoJSONIndex=Y.cluster?new Ia(function({superclusterOptions:te,clusterProperties:Re}){if(!Re||!te)return te;let Ae={},ke={},at={accumulated:null,zoom:0},je={properties:null},Yt=Object.keys(Re);for(let Ti of Yt){let[Di,Hi]=Re[Ti],Tr=R.cL(Hi),_r=R.cL(typeof Di=="string"?[Di,["accumulated"],["get",Ti]]:Di);Ae[Ti]=Tr.value,ke[Ti]=_r.value}return te.map=Ti=>{je.properties=Ti;let Di={};for(let Hi of Yt)Di[Hi]=Ae[Hi].evaluate(at,je);return Di},te.reduce=(Ti,Di)=>{je.properties=Di;for(let Hi of Yt)at.accumulated=Ti[Hi],Ti[Hi]=ke[Hi].evaluate(at,je)},te}(Y)).load((yield this._pendingData).features):(ge=yield this._pendingData,new Ya(ge,Y.geojsonVtOptions)),this.loaded={};let Se={};if(se){let te=se.finish();te&&(Se.resourceTiming={},Se.resourceTiming[Y.source]=JSON.parse(JSON.stringify(te)))}return Se}catch(Se){if(delete this._pendingRequest,R.cp(Se))return{abandoned:!0};throw Se}var ge})}getData(){return R._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(Y){let K=this.loaded;return K&&K[Y.uid]?super.reloadTile(Y):this.loadTile(Y)}loadAndProcessGeoJSON(Y,K){return R._(this,void 0,void 0,function*(){let se=yield this.loadGeoJSON(Y,K);if(delete this._pendingRequest,typeof se!="object")throw new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`);if(Hr(se,!0),Y.filter){let ge=R.cL(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ge.result==="error")throw new Error(ge.value.map(te=>`${te.key}: ${te.message}`).join(", "));se={type:"FeatureCollection",features:se.features.filter(te=>ge.value.evaluate({zoom:0},te))}}return se})}loadGeoJSON(Y,K){return R._(this,void 0,void 0,function*(){let{promoteId:se}=Y;if(Y.request){let ge=yield R.j(Y.request,K);return this._dataUpdateable=t1(ge.data,se)?za(ge.data,se):void 0,ge.data}if(typeof Y.data=="string")try{let ge=JSON.parse(Y.data);return this._dataUpdateable=t1(ge,se)?za(ge,se):void 0,ge}catch{throw new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`)}if(!Y.dataDiff)throw new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Y.source}`);return function(ge,Se,te){var Re,Ae,ke,at;if(Se.removeAll&&ge.clear(),Se.remove)for(let je of Se.remove)ge.delete(je);if(Se.add)for(let je of Se.add){let Yt=Ys(je,te);Yt!=null&&ge.set(Yt,je)}if(Se.update)for(let je of Se.update){let Yt=ge.get(je.id);if(Yt==null)continue;let Ti=!je.removeAllProperties&&(((Re=je.removeProperties)===null||Re===void 0?void 0:Re.length)>0||((Ae=je.addOrUpdateProperties)===null||Ae===void 0?void 0:Ae.length)>0);if((je.newGeometry||je.removeAllProperties||Ti)&&(Yt=Object.assign({},Yt),ge.set(je.id,Yt),Ti&&(Yt.properties=Object.assign({},Yt.properties))),je.newGeometry&&(Yt.geometry=je.newGeometry),je.removeAllProperties)Yt.properties={};else if(((ke=je.removeProperties)===null||ke===void 0?void 0:ke.length)>0)for(let Di of je.removeProperties)Object.prototype.hasOwnProperty.call(Yt.properties,Di)&&delete Yt.properties[Di];if(((at=je.addOrUpdateProperties)===null||at===void 0?void 0:at.length)>0)for(let{key:Di,value:Hi}of je.addOrUpdateProperties)Yt.properties[Di]=Hi}}(this._dataUpdateable,Y.dataDiff,se),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(Y){return R._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(Y){return this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId)}getClusterChildren(Y){return this._geoJSONIndex.getChildren(Y.clusterId)}getClusterLeaves(Y){return this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset)}}class co{constructor(Y){this.self=Y,this.actor=new R.H(Y),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(K,se)=>{if(this.externalWorkerSourceTypes[K])throw new Error(`Worker source with name "${K}" already registered.`);this.externalWorkerSourceTypes[K]=se},this.self.addProtocol=R.cr,this.self.removeProtocol=R.cs,this.self.registerRTLTextPlugin=K=>{R.cM.setMethods(K)},this.actor.registerMessageHandler("LDT",(K,se)=>this._getDEMWorkerSource(K,se.source).loadTile(se)),this.actor.registerMessageHandler("RDT",(K,se)=>R._(this,void 0,void 0,function*(){this._getDEMWorkerSource(K,se.source).removeTile(se)})),this.actor.registerMessageHandler("GCEZ",(K,se)=>R._(this,void 0,void 0,function*(){return this._getWorkerSource(K,se.type,se.source).getClusterExpansionZoom(se)})),this.actor.registerMessageHandler("GCC",(K,se)=>R._(this,void 0,void 0,function*(){return this._getWorkerSource(K,se.type,se.source).getClusterChildren(se)})),this.actor.registerMessageHandler("GCL",(K,se)=>R._(this,void 0,void 0,function*(){return this._getWorkerSource(K,se.type,se.source).getClusterLeaves(se)})),this.actor.registerMessageHandler("LD",(K,se)=>this._getWorkerSource(K,se.type,se.source).loadData(se)),this.actor.registerMessageHandler("GD",(K,se)=>this._getWorkerSource(K,se.type,se.source).getData()),this.actor.registerMessageHandler("LT",(K,se)=>this._getWorkerSource(K,se.type,se.source).loadTile(se)),this.actor.registerMessageHandler("RT",(K,se)=>this._getWorkerSource(K,se.type,se.source).reloadTile(se)),this.actor.registerMessageHandler("AT",(K,se)=>this._getWorkerSource(K,se.type,se.source).abortTile(se)),this.actor.registerMessageHandler("RMT",(K,se)=>this._getWorkerSource(K,se.type,se.source).removeTile(se)),this.actor.registerMessageHandler("RS",(K,se)=>R._(this,void 0,void 0,function*(){if(!this.workerSources[K]||!this.workerSources[K][se.type]||!this.workerSources[K][se.type][se.source])return;let ge=this.workerSources[K][se.type][se.source];delete this.workerSources[K][se.type][se.source],ge.removeSource!==void 0&&ge.removeSource(se)})),this.actor.registerMessageHandler("RM",K=>R._(this,void 0,void 0,function*(){delete this.layerIndexes[K],delete this.availableImages[K],delete this.workerSources[K],delete this.demWorkerSources[K]})),this.actor.registerMessageHandler("SR",(K,se)=>R._(this,void 0,void 0,function*(){this.referrer=se})),this.actor.registerMessageHandler("SRPS",(K,se)=>this._syncRTLPluginState(K,se)),this.actor.registerMessageHandler("IS",(K,se)=>R._(this,void 0,void 0,function*(){this.self.importScripts(se)})),this.actor.registerMessageHandler("SI",(K,se)=>this._setImages(K,se)),this.actor.registerMessageHandler("UL",(K,se)=>R._(this,void 0,void 0,function*(){this._getLayerIndex(K).update(se.layers,se.removedIds)})),this.actor.registerMessageHandler("SL",(K,se)=>R._(this,void 0,void 0,function*(){this._getLayerIndex(K).replace(se)}))}_setImages(Y,K){return R._(this,void 0,void 0,function*(){this.availableImages[Y]=K;for(let se in this.workerSources[Y]){let ge=this.workerSources[Y][se];for(let Se in ge)ge[Se].availableImages=K}})}_syncRTLPluginState(Y,K){return R._(this,void 0,void 0,function*(){return yield R.cM.syncState(K,this.self.importScripts)})}_getAvailableImages(Y){let K=this.availableImages[Y];return K||(K=[]),K}_getLayerIndex(Y){let K=this.layerIndexes[Y];return K||(K=this.layerIndexes[Y]=new u),K}_getWorkerSource(Y,K,se){if(this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][K]||(this.workerSources[Y][K]={}),!this.workerSources[Y][K][se]){let ge={sendAsync:(Se,te)=>(Se.targetMapId=Y,this.actor.sendAsync(Se,te))};switch(K){case"vector":this.workerSources[Y][K][se]=new ci(ge,this._getLayerIndex(Y),this._getAvailableImages(Y));break;case"geojson":this.workerSources[Y][K][se]=new ba(ge,this._getLayerIndex(Y),this._getAvailableImages(Y));break;default:this.workerSources[Y][K][se]=new this.externalWorkerSourceTypes[K](ge,this._getLayerIndex(Y),this._getAvailableImages(Y))}}return this.workerSources[Y][K][se]}_getDEMWorkerSource(Y,K){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][K]||(this.demWorkerSources[Y][K]=new Vt),this.demWorkerSources[Y][K]}}return R.i(self)&&(self.worker=new co(self)),co}),N("index",["exports","./shared"],function(R,u){"use strict";var tt="5.5.0";function Nt(){var h=new u.A(4);return u.A!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}let ai,ci,Vt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(h,e,r){let o=requestAnimationFrame(d=>{l(),e(d)}),{unsubscribe:l}=u.s(h.signal,"abort",()=>{l(),cancelAnimationFrame(o),r(u.c())},!1)},frameAsync(h){return new Promise((e,r)=>{this.frame(h,e,r)})},getImageData(h,e=0){return this.getImageCanvasContext(h).getImageData(-e,-e,h.width+2*e,h.height+2*e)},getImageCanvasContext(h){let e=window.document.createElement("canvas"),r=e.getContext("2d",{willReadFrequently:!0});if(!r)throw new Error("failed to create canvas 2d context");return e.width=h.width,e.height=h.height,r.drawImage(h,0,0,h.width,h.height),r},resolveURL:h=>(ai||(ai=document.createElement("a")),ai.href=h,ai.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ci==null&&(ci=matchMedia("(prefers-reduced-motion: reduce)")),ci.matches)}};class Ne{static testProp(e){if(!Ne.docStyle)return e[0];for(let r=0;r<e.length;r++)if(e[r]in Ne.docStyle)return e[r];return e[0]}static create(e,r,o){let l=window.document.createElement(e);return r!==void 0&&(l.className=r),o&&o.appendChild(l),l}static createNS(e,r){return window.document.createElementNS(e,r)}static disableDrag(){Ne.docStyle&&Ne.selectProp&&(Ne.userSelect=Ne.docStyle[Ne.selectProp],Ne.docStyle[Ne.selectProp]="none")}static enableDrag(){Ne.docStyle&&Ne.selectProp&&(Ne.docStyle[Ne.selectProp]=Ne.userSelect)}static setTransform(e,r){e.style[Ne.transformProp]=r}static addEventListener(e,r,o,l={}){e.addEventListener(r,o,"passive"in l?l:l.capture)}static removeEventListener(e,r,o,l={}){e.removeEventListener(r,o,"passive"in l?l:l.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",Ne.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",Ne.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",Ne.suppressClickInternal,!0)},0)}static getScale(e){let r=e.getBoundingClientRect();return{x:r.width/e.offsetWidth||1,y:r.height/e.offsetHeight||1,boundingClientRect:r}}static getPoint(e,r,o){let l=r.boundingClientRect;return new u.P((o.clientX-l.left)/r.x-e.clientLeft,(o.clientY-l.top)/r.y-e.clientTop)}static mousePos(e,r){let o=Ne.getScale(e);return Ne.getPoint(e,o,r)}static touchPos(e,r){let o=[],l=Ne.getScale(e);for(let d=0;d<r.length;d++)o.push(Ne.getPoint(e,l,r[d]));return o}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}static sanitize(e){let r=new DOMParser().parseFromString(e,"text/html").body||document.createElement("body"),o=r.querySelectorAll("script");for(let l of o)l.remove();return Ne.clean(r),r.innerHTML}static isPossiblyDangerous(e,r){let o=r.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(e)||!o.includes("javascript:")&&!o.includes("data:"))||!!e.startsWith("on")||void 0}static clean(e){let r=e.children;for(let o of r)Ne.removeAttributes(o),Ne.clean(o)}static removeAttributes(e){for(let{name:r,value:o}of e.attributes)Ne.isPossiblyDangerous(r,o)&&e.removeAttribute(r)}}Ne.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,Ne.selectProp=Ne.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Ne.transformProp=Ne.testProp(["transform","WebkitTransform"]);let bi={supported:!1,testSupport:function(h){!Ar&&Hr&&(Mr?en(h):gr=h)}},gr,Hr,Ar=!1,Mr=!1;function en(h){let e=h.createTexture();h.bindTexture(h.TEXTURE_2D,e);try{if(h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,Hr),h.isContextLost())return;bi.supported=!0}catch{}h.deleteTexture(e),Ar=!0}var Nr;typeof document<"u"&&(Hr=document.createElement("img"),Hr.onload=()=>{gr&&en(gr),gr=null,Mr=!0},Hr.onerror=()=>{Ar=!0,gr=null},Hr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(h){let e,r,o,l;h.resetRequestQueue=()=>{e=[],r=0,o=0,l={}},h.addThrottleControl=C=>{let k=o++;return l[k]=C,k},h.removeThrottleControl=C=>{delete l[C],b()},h.getImage=(C,k,O=!0)=>new Promise((j,B)=>{bi.supported&&(C.headers||(C.headers={}),C.headers.accept="image/webp,*/*"),u.e(C,{type:"image"}),e.push({abortController:k,requestParameters:C,supportImageRefresh:O,state:"queued",onError:H=>{B(H)},onSuccess:H=>{j(H)}}),b()});let d=C=>u._(this,void 0,void 0,function*(){C.state="running";let{requestParameters:k,supportImageRefresh:O,onError:j,onSuccess:B,abortController:H}=C,X=O===!1&&!u.i(self)&&!u.g(k.url)&&(!k.headers||Object.keys(k.headers).reduce((ce,fe)=>ce&&fe==="accept",!0));r++;let le=X?E(k,H):u.m(k,H);try{let ce=yield le;delete C.abortController,C.state="completed",ce.data instanceof HTMLImageElement||u.b(ce.data)?B(ce):ce.data&&B({data:yield(oe=ce.data,typeof createImageBitmap=="function"?u.f(oe):u.h(oe)),cacheControl:ce.cacheControl,expires:ce.expires})}catch(ce){delete C.abortController,j(ce)}finally{r--,b()}var oe}),b=()=>{let C=(()=>{for(let k of Object.keys(l))if(l[k]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let k=r;k<C&&e.length>0;k++){let O=e.shift();O.abortController.signal.aborted?k--:d(O)}},E=(C,k)=>new Promise((O,j)=>{let B=new Image,H=C.url,X=C.credentials;X&&X==="include"?B.crossOrigin="use-credentials":(X&&X==="same-origin"||!u.d(H))&&(B.crossOrigin="anonymous"),k.signal.addEventListener("abort",()=>{B.src="",j(u.c())}),B.fetchPriority="high",B.onload=()=>{B.onerror=B.onload=null,O({data:B})},B.onerror=()=>{B.onerror=B.onload=null,k.signal.aborted||j(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},B.src=H})}(Nr||(Nr={})),Nr.resetRequestQueue();class Pr{constructor(e){this._transformRequestFn=e}transformRequest(e,r){return this._transformRequestFn&&this._transformRequestFn(e,r)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function ur(h){let e=[];if(typeof h=="string")e.push({id:"default",url:h});else if(h&&h.length>0){let r=[];for(let{id:o,url:l}of h){let d=`${o}${l}`;r.indexOf(d)===-1&&(r.push(d),e.push({id:o,url:l}))}}return e}function zr(h,e,r){try{let o=new URL(h);return o.pathname+=`${e}${r}`,o.toString()}catch{throw new Error(`Invalid sprite URL "${h}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class yr{constructor(e,r,o,l){this.context=e,this.format=o,this.texture=e.gl.createTexture(),this.update(r,l)}update(e,r,o){let{width:l,height:d}=e,b=!(this.size&&this.size[0]===l&&this.size[1]===d||o),{context:E}=this,{gl:C}=E;if(this.useMipmap=!!(r&&r.useMipmap),C.bindTexture(C.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!r||r.premultiply!==!1)),b)this.size=[l,d],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||u.b(e)?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,e):C.texImage2D(C.TEXTURE_2D,0,this.format,l,d,0,this.format,C.UNSIGNED_BYTE,e.data);else{let{x:k,y:O}=o||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||u.b(e)?C.texSubImage2D(C.TEXTURE_2D,0,k,O,C.RGBA,C.UNSIGNED_BYTE,e):C.texSubImage2D(C.TEXTURE_2D,0,k,O,l,d,C.RGBA,C.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&C.generateMipmap(C.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(e,r,o){let{context:l}=this,{gl:d}=l;d.bindTexture(d.TEXTURE_2D,this.texture),o!==d.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(o=d.LINEAR),e!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,e),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,o||e),this.filter=e),r!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,r),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function xn(h){let{userImage:e}=h;return!!(e&&e.render&&e.render())&&(h.data.replace(new Uint8Array(e.data.buffer)),!0)}class qn extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(let{ids:r,promiseResolve:o}of this.requestors)o(this._getImagesForIds(r));this.requestors=[]}}getImage(e){let r=this.images[e];if(r&&!r.data&&r.spriteData){let o=r.spriteData;r.data=new u.R({width:o.width,height:o.height},o.context.getImageData(o.x,o.y,o.width,o.height).data),r.spriteData=null}return r}addImage(e,r){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,r)&&(this.images[e]=r)}_validate(e,r){let o=!0,l=r.data||r.spriteData;return this._validateStretch(r.stretchX,l&&l.width)||(this.fire(new u.k(new Error(`Image "${e}" has invalid "stretchX" value`))),o=!1),this._validateStretch(r.stretchY,l&&l.height)||(this.fire(new u.k(new Error(`Image "${e}" has invalid "stretchY" value`))),o=!1),this._validateContent(r.content,r)||(this.fire(new u.k(new Error(`Image "${e}" has invalid "content" value`))),o=!1),o}_validateStretch(e,r){if(!e)return!0;let o=0;for(let l of e){if(l[0]<o||l[1]<l[0]||r<l[1])return!1;o=l[1]}return!0}_validateContent(e,r){if(!e)return!0;if(e.length!==4)return!1;let o=r.spriteData,l=o&&o.width||r.data.width,d=o&&o.height||r.data.height;return!(e[0]<0||l<e[0]||e[1]<0||d<e[1]||e[2]<0||l<e[2]||e[3]<0||d<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,r,o=!0){let l=this.getImage(e);if(o&&(l.data.width!==r.data.width||l.data.height!==r.data.height))throw new Error(`size mismatch between old image (${l.data.width}x${l.data.height}) and new image (${r.data.width}x${r.data.height}).`);r.version=l.version+1,this.images[e]=r,this.updatedImages[e]=!0}removeImage(e){let r=this.images[e];delete this.images[e],delete this.patterns[e],r.userImage&&r.userImage.onRemove&&r.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise((r,o)=>{let l=!0;if(!this.isLoaded())for(let d of e)this.images[d]||(l=!1);this.isLoaded()||l?r(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:r})})}_getImagesForIds(e){let r={};for(let o of e){let l=this.getImage(o);l||(this.fire(new u.l("styleimagemissing",{id:o})),l=this.getImage(o)),l?r[o]={data:l.data.clone(),pixelRatio:l.pixelRatio,sdf:l.sdf,version:l.version,stretchX:l.stretchX,stretchY:l.stretchY,content:l.content,textFitWidth:l.textFitWidth,textFitHeight:l.textFitHeight,hasRenderCallback:!!(l.userImage&&l.userImage.render)}:u.w(`Image "${o}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return r}getPixelSize(){let{width:e,height:r}=this.atlasImage;return{width:e,height:r}}getPattern(e){let r=this.patterns[e],o=this.getImage(e);if(!o)return null;if(r&&r.position.version===o.version)return r.position;if(r)r.position.version=o.version;else{let l={w:o.data.width+2,h:o.data.height+2,x:0,y:0},d=new u.I(l,o);this.patterns[e]={bin:l,position:d}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){let r=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new yr(e,this.atlasImage,r.RGBA),this.atlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}_updatePatternAtlas(){let e=[];for(let d in this.patterns)e.push(this.patterns[d].bin);let{w:r,h:o}=u.p(e),l=this.atlasImage;l.resize({width:r||1,height:o||1});for(let d in this.patterns){let{bin:b}=this.patterns[d],E=b.x+1,C=b.y+1,k=this.getImage(d).data,O=k.width,j=k.height;u.R.copy(k,l,{x:0,y:0},{x:E,y:C},{width:O,height:j}),u.R.copy(k,l,{x:0,y:j-1},{x:E,y:C-1},{width:O,height:1}),u.R.copy(k,l,{x:0,y:0},{x:E,y:C+j},{width:O,height:1}),u.R.copy(k,l,{x:O-1,y:0},{x:E-1,y:C},{width:1,height:j}),u.R.copy(k,l,{x:0,y:0},{x:E+O,y:C},{width:1,height:j})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(let r of e){if(this.callbackDispatchedThisFrame[r])continue;this.callbackDispatchedThisFrame[r]=!0;let o=this.getImage(r);o||u.w(`Image with ID: "${r}" was not found`),xn(o)&&this.updateImage(r,o)}}}let $r=1e20;function rn(h,e,r,o,l,d,b,E,C){for(let k=e;k<e+o;k++)cn(h,r*d+k,d,l,b,E,C);for(let k=r;k<r+l;k++)cn(h,k*d+e,1,o,b,E,C)}function cn(h,e,r,o,l,d,b){d[0]=0,b[0]=-1e20,b[1]=$r,l[0]=h[e];for(let E=1,C=0,k=0;E<o;E++){l[E]=h[e+E*r];let O=E*E;do{let j=d[C];k=(l[E]-l[j]+O-j*j)/(E-j)/2}while(k<=b[C]&&--C>-1);C++,d[C]=E,b[C]=k,b[C+1]=$r}for(let E=0,C=0;E<o;E++){for(;b[C+1]<E;)C++;let k=d[C],O=E-k;h[e+E*r]=l[k]+O*O}}class un{constructor(e,r){this.requestManager=e,this.localIdeographFontFamily=r,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return u._(this,void 0,void 0,function*(){let r=[];for(let d in e)for(let b of e[d])r.push(this._getAndCacheGlyphsPromise(d,b));let o=yield Promise.all(r),l={};for(let{stack:d,id:b,glyph:E}of o)l[d]||(l[d]={}),l[d][b]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return l})}_getAndCacheGlyphsPromise(e,r){return u._(this,void 0,void 0,function*(){let o=this.entries[e];o||(o=this.entries[e]={glyphs:{},requests:{},ranges:{}});let l=o.glyphs[r];if(l!==void 0)return{stack:e,id:r,glyph:l};if(l=this._tinySDF(o,e,r),l)return o.glyphs[r]=l,{stack:e,id:r,glyph:l};let d=Math.floor(r/256);if(256*d>65535)throw new Error("glyphs > 65535 not supported");if(o.ranges[d])return{stack:e,id:r,glyph:l};if(!this.url)throw new Error("glyphsUrl is not set");if(!o.requests[d]){let E=un.loadGlyphRange(e,d,this.url,this.requestManager);o.requests[d]=E}let b=yield o.requests[d];for(let E in b)this._doesCharSupportLocalGlyph(+E)||(o.glyphs[+E]=b[+E]);return o.ranges[d]=!0,{stack:e,id:r,glyph:b[r]||null}})}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&(/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(e))||u.u["CJK Unified Ideographs"](e)||u.u["Hangul Syllables"](e)||u.u.Hiragana(e)||u.u.Katakana(e)||u.u["CJK Symbols and Punctuation"](e)||u.u["Halfwidth and Fullwidth Forms"](e))}_tinySDF(e,r,o){let l=this.localIdeographFontFamily;if(!l||!this._doesCharSupportLocalGlyph(o))return;let d=e.tinySDF;if(!d){let E="400";/bold/i.test(r)?E="900":/medium/i.test(r)?E="500":/light/i.test(r)&&(E="200"),d=e.tinySDF=new un.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:l,fontWeight:E})}let b=d.draw(String.fromCharCode(o));return{id:o,bitmap:new u.q({width:b.width||60,height:b.height||60},b.data),metrics:{width:b.glyphWidth/2||24,height:b.glyphHeight/2||24,left:b.glyphLeft/2+.5||0,top:b.glyphTop/2-27.5||-8,advance:b.glyphAdvance/2||24,isDoubleResolution:!0}}}}un.loadGlyphRange=function(h,e,r,o){return u._(this,void 0,void 0,function*(){let l=256*e,d=l+255,b=o.transformRequest(r.replace("{fontstack}",h).replace("{range}",`${l}-${d}`),"Glyphs"),E=yield u.n(b,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${e}, ${l}-${d}`);let C={};for(let k of u.o(E.data))C[k.id]=k;return C})},un.TinySDF=class{constructor({fontSize:h=24,buffer:e=3,radius:r=8,cutoff:o=.25,fontFamily:l="sans-serif",fontWeight:d="normal",fontStyle:b="normal"}={}){this.buffer=e,this.cutoff=o,this.radius=r;let E=this.size=h+4*e,C=this._createCanvas(E),k=this.ctx=C.getContext("2d",{willReadFrequently:!0});k.font=`${b} ${d} ${h}px ${l}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(h){let e=document.createElement("canvas");return e.width=e.height=h,e}draw(h){let{width:e,actualBoundingBoxAscent:r,actualBoundingBoxDescent:o,actualBoundingBoxLeft:l,actualBoundingBoxRight:d}=this.ctx.measureText(h),b=Math.ceil(r),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(d-l))),C=Math.min(this.size-this.buffer,b+Math.ceil(o)),k=E+2*this.buffer,O=C+2*this.buffer,j=Math.max(k*O,0),B=new Uint8ClampedArray(j),H={data:B,width:k,height:O,glyphWidth:E,glyphHeight:C,glyphTop:b,glyphLeft:0,glyphAdvance:e};if(E===0||C===0)return H;let{ctx:X,buffer:le,gridInner:oe,gridOuter:ce}=this;X.clearRect(le,le,E,C),X.fillText(h,le,le+b);let fe=X.getImageData(le,le,E,C);ce.fill($r,0,j),oe.fill(0,0,j);for(let xe=0;xe<C;xe++)for(let be=0;be<E;be++){let Ee=fe.data[4*(xe*E+be)+3]/255;if(Ee===0)continue;let Ce=(xe+le)*k+be+le;if(Ee===1)ce[Ce]=0,oe[Ce]=$r;else{let we=.5-Ee;ce[Ce]=we>0?we*we:0,oe[Ce]=we<0?we*we:0}}rn(ce,0,0,k,O,k,this.f,this.v,this.z),rn(oe,le,le,E,C,k,this.f,this.v,this.z);for(let xe=0;xe<j;xe++){let be=Math.sqrt(ce[xe])-Math.sqrt(oe[xe]);B[xe]=Math.round(255-255*(be/this.radius+this.cutoff))}return H}};class Gn{constructor(){this.specification=u.v.light.position}possiblyEvaluate(e,r){return u.z(e.expression.evaluate(r))}interpolate(e,r,o){return{x:u.B.number(e.x,r.x,o),y:u.B.number(e.y,r.y,o),z:u.B.number(e.z,r.z,o)}}}let Ia;class Na extends u.E{constructor(e){super(),Ia=Ia||new u.r({anchor:new u.D(u.v.light.anchor),position:new Gn,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(Ia),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,r={}){if(!this._validate(u.t,e,r))for(let o in e){let l=e[o];o.endsWith("-transition")?this._transitionable.setTransition(o.slice(0,-11),l):this._transitionable.setValue(o,l)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,r,o){return(!o||o.validate!==!1)&&u.x(this,e.call(u.y,{value:r,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}let Er=new u.r({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class An extends u.E{constructor(e){super(),this._transitionable=new u.T(Er),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.C(0))}setSky(e,r={}){if(!this._validate(u.F,e,r)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let o in e){let l=e[o];o.endsWith("-transition")?this._transitionable.setTransition(o.slice(0,-11),l):this._transitionable.setValue(o,l)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,r,o={}){return o?.validate!==!1&&u.x(this,e.call(u.y,u.e({value:r,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class Ps{constructor(e,r){this.width=e,this.height=r,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,r){let o=e.join(",")+String(r);return this.dashEntry[o]||(this.dashEntry[o]=this.addDash(e,r)),this.dashEntry[o]}getDashRanges(e,r,o){let l=[],d=e.length%2==1?-e[e.length-1]*o:0,b=e[0]*o,E=!0;l.push({left:d,right:b,isDash:E,zeroLength:e[0]===0});let C=e[0];for(let k=1;k<e.length;k++){E=!E;let O=e[k];d=C*o,C+=O,b=C*o,l.push({left:d,right:b,isDash:E,zeroLength:O===0})}return l}addRoundDash(e,r,o){let l=r/2;for(let d=-o;d<=o;d++){let b=this.width*(this.nextRow+o+d),E=0,C=e[E];for(let k=0;k<this.width;k++){k/C.right>1&&(C=e[++E]);let O=Math.abs(k-C.left),j=Math.abs(k-C.right),B=Math.min(O,j),H,X=d/o*(l+1);if(C.isDash){let le=l-Math.abs(X);H=Math.sqrt(B*B+le*le)}else H=l-Math.sqrt(B*B+X*X);this.data[b+k]=Math.max(0,Math.min(255,H+128))}}}addRegularDash(e){for(let E=e.length-1;E>=0;--E){let C=e[E],k=e[E+1];C.zeroLength?e.splice(E,1):k&&k.isDash===C.isDash&&(k.left=C.left,e.splice(E,1))}let r=e[0],o=e[e.length-1];r.isDash===o.isDash&&(r.left=o.left-this.width,o.right=r.right+this.width);let l=this.width*this.nextRow,d=0,b=e[d];for(let E=0;E<this.width;E++){E/b.right>1&&(b=e[++d]);let C=Math.abs(E-b.left),k=Math.abs(E-b.right),O=Math.min(C,k);this.data[l+E]=Math.max(0,Math.min(255,(b.isDash?O:-O)+128))}}addDash(e,r){let o=r?7:0,l=2*o+1;if(this.nextRow+l>this.height)return u.w("LineAtlas out of space"),null;let d=0;for(let E=0;E<e.length;E++)d+=e[E];if(d!==0){let E=this.width/d,C=this.getDashRanges(e,this.width,E);r?this.addRoundDash(C,E,o):this.addRegularDash(C)}let b={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:d};return this.nextRow+=l,this.dirty=!0,b}bind(e){let r=e.gl;this.texture?(r.bindTexture(r.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,r.texSubImage2D(r.TEXTURE_2D,0,0,0,this.width,this.height,r.ALPHA,r.UNSIGNED_BYTE,this.data))):(this.texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texImage2D(r.TEXTURE_2D,0,r.ALPHA,this.width,this.height,0,r.ALPHA,r.UNSIGNED_BYTE,this.data))}}let Fr="maplibre_preloaded_worker_pool";class Ws{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Ws.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach(r=>{r.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Fr]}numActive(){return Object.keys(this.active).length}}let Jo=Math.floor(Vt.hardwareConcurrency/2),Xs,Zn;function Ma(){return Xs||(Xs=new Ws),Xs}Ws.workerCount=u.G(globalThis)?Math.max(Math.min(Jo,3),1):1;class Hn{constructor(e,r){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=r;let o=this.workerPool.acquire(r);for(let l=0;l<o.length;l++){let d=new u.H(o[l],r);d.name=`Worker ${l}`,this.actors.push(d)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,r){let o=[];for(let l of this.actors)o.push(l.sendAsync({type:e,data:r}));return Promise.all(o)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach(r=>{r.remove()}),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,r){for(let o of this.actors)o.registerMessageHandler(e,r)}}function Pa(){return Zn||(Zn=new Hn(Ma(),u.J),Zn.registerMessageHandler("GR",(h,e,r)=>u.m(e,r))),Zn}function oo(h,e){let r=u.K();return u.L(r,r,[1,1,0]),u.M(r,r,[.5*h.width,.5*h.height,1]),h.calculatePosMatrix?u.N(r,r,h.calculatePosMatrix(e.toUnwrapped())):r}function Rs(h,e,r,o,l,d,b){var E;let C=function(B,H,X){if(B)for(let le of B){let oe=H[le];if(oe&&oe.source===X&&oe.type==="fill-extrusion")return!0}else for(let le in H){let oe=H[le];if(oe.source===X&&oe.type==="fill-extrusion")return!0}return!1}((E=l?.layers)!==null&&E!==void 0?E:null,e,h.id),k=d.maxPitchScaleFactor(),O=h.tilesIn(o,k,C);O.sort(xs);let j=[];for(let B of O)j.push({wrappedTileID:B.tileID.wrapped().key,queryResults:B.tile.queryRenderedFeatures(e,r,h._state,B.queryGeometry,B.cameraQueryGeometry,B.scale,l,d,k,oo(h.transform,B.tileID),b?(H,X)=>b(B.tileID,H,X):void 0)});return function(B,H){for(let X in B)for(let le of B[X])Js(le,H);return B}(function(B){let H={},X={};for(let le of B){let oe=le.queryResults,ce=le.wrappedTileID,fe=X[ce]=X[ce]||{};for(let xe in oe){let be=oe[xe],Ee=fe[xe]=fe[xe]||{},Ce=H[xe]=H[xe]||[];for(let we of be)Ee[we.featureIndex]||(Ee[we.featureIndex]=!0,Ce.push(we))}}return H}(j),h)}function xs(h,e){let r=h.tileID,o=e.tileID;return r.overscaledZ-o.overscaledZ||r.canonical.y-o.canonical.y||r.wrap-o.wrap||r.canonical.x-o.canonical.x}function Js(h,e){let r=h.feature,o=e.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o}function hs(h,e,r){return u._(this,void 0,void 0,function*(){let o=h;if(h.url?o=(yield u.j(e.transformRequest(h.url,"Source"),r)).data:yield Vt.frameAsync(r),!o)return null;let l=u.O(u.e(o,h),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in o&&o.vector_layers&&(l.vectorLayerIds=o.vector_layers.map(d=>d.id)),l})}class on{constructor(e,r){e&&(r?this.setSouthWest(e).setNorthEast(r):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof u.Q?new u.Q(e.lng,e.lat):u.Q.convert(e),this}setSouthWest(e){return this._sw=e instanceof u.Q?new u.Q(e.lng,e.lat):u.Q.convert(e),this}extend(e){let r=this._sw,o=this._ne,l,d;if(e instanceof u.Q)l=e,d=e;else{if(!(e instanceof on))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(on.convert(e)):this.extend(u.Q.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(u.Q.convert(e)):this;if(l=e._sw,d=e._ne,!l||!d)return this}return r||o?(r.lng=Math.min(l.lng,r.lng),r.lat=Math.min(l.lat,r.lat),o.lng=Math.max(d.lng,o.lng),o.lat=Math.max(d.lat,o.lat)):(this._sw=new u.Q(l.lng,l.lat),this._ne=new u.Q(d.lng,d.lat)),this}getCenter(){return new u.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.Q(this.getWest(),this.getNorth())}getSouthEast(){return new u.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){let{lng:r,lat:o}=u.Q.convert(e),l=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(l=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=o&&o<=this._ne.lat&&l}static convert(e){return e instanceof on?e:e&&new on(e)}static fromLngLat(e,r=0){let o=360*r/40075017,l=o/Math.cos(Math.PI/180*e.lat);return new on(new u.Q(e.lng-l,e.lat-o),new u.Q(e.lng+l,e.lat+o))}adjustAntiMeridian(){let e=new u.Q(this._sw.lng,this._sw.lat),r=new u.Q(this._ne.lng,this._ne.lat);return new on(e,e.lng>r.lng?new u.Q(r.lng+360,r.lat):r)}}class ks{constructor(e,r,o){this.bounds=on.convert(this.validateBounds(e)),this.minzoom=r||0,this.maxzoom=o||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){let r=Math.pow(2,e.z),o=Math.floor(u.U(this.bounds.getWest())*r),l=Math.floor(u.S(this.bounds.getNorth())*r),d=Math.ceil(u.U(this.bounds.getEast())*r),b=Math.ceil(u.S(this.bounds.getSouth())*r);return e.x>=o&&e.x<d&&e.y>=l&&e.y<b}}class Ha extends u.E{constructor(e,r,o,l){if(super(),this.id=e,this.dispatcher=o,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.O(r,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(l)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let e=yield hs(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(u.e(this,e),e.bounds&&(this.tileBounds=new ks(e.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new u.k(e))}})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(e){return u._(this,void 0,void 0,function*(){let r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),o={request:this.map._requestManager.transformRequest(r,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};o.request.collectResourceTiming=this._collectResourceTiming;let l="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise((d,b)=>{e.reloadPromise={resolve:d,reject:b}})}else e.actor=this.dispatcher.getActor(),l="LT";e.abortController=new AbortController;try{let d=yield e.actor.sendAsync({type:l,data:o},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,d)}catch(d){if(delete e.abortController,e.aborted)return;if(d&&d.status!==404)throw d;this._afterTileLoadWorkerResponse(e,null)}})}_afterTileLoadWorkerResponse(e,r){if(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),r&&this.map._refreshExpiredTiles&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),e.reloadPromise){let o=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(o.resolve).catch(o.reject)}}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class _a extends u.E{constructor(e,r,o,l){super(),this.id=e,this.dispatcher=o,this.setEventedParent(l),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},r),u.e(this,u.O(r,["url","scheme","tileSize"]))}load(){return u._(this,arguments,void 0,function*(e=!1){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let r=yield hs(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new ks(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:e})))}catch(r){this._tileJSONRequest=null,this.fire(new u.k(r))}})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load(!0)}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}serialize(){return u.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return u._(this,void 0,void 0,function*(){let r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{let o=yield Nr.getImage(this.map._requestManager.transformRequest(r,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(o&&o.data){this.map._refreshExpiredTiles&&(o.cacheControl||o.expires)&&e.setExpiryData({cacheControl:o.cacheControl,expires:o.expires});let l=this.map.painter.context,d=l.gl,b=o.data;e.texture=this.map.painter.getTileTexture(b.width),e.texture?e.texture.update(b,{useMipmap:!0}):(e.texture=new yr(l,b,d.RGBA,{useMipmap:!0}),e.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE,d.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(o){if(delete e.abortController,e.aborted)e.state="unloaded";else if(o)throw e.state="errored",o}})}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)})}hasTransition(){return!1}}class Yo extends _a{constructor(e,r,o,l){super(e,r,o,l),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox",this.redFactor=r.redFactor,this.greenFactor=r.greenFactor,this.blueFactor=r.blueFactor,this.baseShift=r.baseShift}loadTile(e){return u._(this,void 0,void 0,function*(){let r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),o=this.map._requestManager.transformRequest(r,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{let l=yield Nr.getImage(o,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(l&&l.data){let d=l.data;this.map._refreshExpiredTiles&&(l.cacheControl||l.expires)&&e.setExpiryData({cacheControl:l.cacheControl,expires:l.expires});let b=u.b(d)&&u.V()?d:yield this.readImageNow(d),E={type:this.type,uid:e.uid,source:this.id,rawImageData:b,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();let C=yield e.actor.sendAsync({type:"LDT",data:E});e.dem=C,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(l){if(delete e.abortController,e.aborted)e.state="unloaded";else if(l)throw e.state="errored",l}})}readImageNow(e){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.W()){let r=e.width+2,o=e.height+2;try{return new u.R({width:r,height:o},yield u.X(e,-1,-1,r,o))}catch{}}return Vt.getImageData(e,1)})}_getNeighboringTiles(e){let r=e.canonical,o=Math.pow(2,r.z),l=(r.x-1+o)%o,d=r.x===0?e.wrap-1:e.wrap,b=(r.x+1+o)%o,E=r.x+1===o?e.wrap+1:e.wrap,C={};return C[new u.Y(e.overscaledZ,d,r.z,l,r.y).key]={backfilled:!1},C[new u.Y(e.overscaledZ,E,r.z,b,r.y).key]={backfilled:!1},r.y>0&&(C[new u.Y(e.overscaledZ,d,r.z,l,r.y-1).key]={backfilled:!1},C[new u.Y(e.overscaledZ,e.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},C[new u.Y(e.overscaledZ,E,r.z,b,r.y-1).key]={backfilled:!1}),r.y+1<o&&(C[new u.Y(e.overscaledZ,d,r.z,l,r.y+1).key]={backfilled:!1},C[new u.Y(e.overscaledZ,e.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},C[new u.Y(e.overscaledZ,E,r.z,b,r.y+1).key]={backfilled:!1}),C}unloadTile(e){return u._(this,void 0,void 0,function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))})}}class No extends u.E{constructor(e,r,o,l){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=o.getActor(),this.setEventedParent(l),this._data=r.data,this._options=u.e({},r),this._collectResourceTiming=r.collectResourceTiming,r.maxzoom!==void 0&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId,r.clusterMaxZoom!==void 0&&this.maxzoom<=r.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${r.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(r.buffer!==void 0?r.buffer:128),tolerance:this._pixelsToTileUnits(r.tolerance!==void 0?r.tolerance:.375),extent:u.Z,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:r.clusterMaxZoom!==void 0?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:u.Z,radius:this._pixelsToTileUnits(r.clusterRadius||50),log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(e){return e*(u.Z/this.tileSize)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return u._(this,void 0,void 0,function*(){let e=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})})}getCoordinatesFromGeometry(e){return e.type==="GeometryCollection"?e.geometries.map(r=>r.coordinates).flat(1/0):e.coordinates.flat(1/0)}getBounds(){return u._(this,void 0,void 0,function*(){let e=new on,r=yield this.getData(),o;switch(r.type){case"FeatureCollection":o=r.features.map(l=>this.getCoordinatesFromGeometry(l.geometry)).flat(1/0);break;case"Feature":o=this.getCoordinatesFromGeometry(r.geometry);break;default:o=this.getCoordinatesFromGeometry(r)}if(o.length==0)return e;for(let l=0;l<o.length-1;l+=2)e.extend([o[l],o[l+1]]);return e})}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(e.clusterRadius)),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,r,o){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:r,offset:o}})}_updateWorkerData(e){return u._(this,void 0,void 0,function*(){let r=u.e({type:this.type},this.workerOptions);e?r.dataDiff=e:typeof this._data=="string"?(r.request=this.map._requestManager.transformRequest(Vt.resolveURL(this._data),"Source"),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.l("dataloading",{dataType:"source"}));try{let o=yield this.actor.sendAsync({type:"LD",data:r});if(this._pendingLoads--,this._removed||o.abandoned)return void this.fire(new u.l("dataabort",{dataType:"source"}));let l=null;o.resourceTiming&&o.resourceTiming[this.id]&&(l=o.resourceTiming[this.id].slice(0));let d={dataType:"source"};this._collectResourceTiming&&l&&l.length>0&&u.e(d,{resourceTiming:l}),this.fire(new u.l("data",Object.assign(Object.assign({},d),{sourceDataType:"metadata"}))),this.fire(new u.l("data",Object.assign(Object.assign({},d),{sourceDataType:"content"})))}catch(o){if(this._pendingLoads--,this._removed)return void this.fire(new u.l("dataabort",{dataType:"source"}));this.fire(new u.k(o))}})}loaded(){return this._pendingLoads===0}loadTile(e){return u._(this,void 0,void 0,function*(){let r=e.actor?"RT":"LT";e.actor=this.actor;let o={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};e.abortController=new AbortController;let l=yield this.actor.sendAsync({type:r,data:o},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(l,this.map.painter,r==="RT")})}abortTile(e){return u._(this,void 0,void 0,function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0})}unloadTile(e){return u._(this,void 0,void 0,function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class ya extends u.E{constructor(e,r,o,l){super(),this.flippedWindingOrder=!1,this.id=e,this.dispatcher=o,this.coordinates=r.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(l),this.options=r}load(e){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let r=yield Nr.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,r&&r.data&&(this.image=r.data,e&&(this.coordinates=e),this._finishLoading())}catch(r){this._request=null,this._loaded=!0,this.fire(new u.k(r))}})}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;let r=e.map(u.$.fromLngLat);var o;return this.tileID=function(l){let d=1/0,b=1/0,E=-1/0,C=-1/0;for(let B of l)d=Math.min(d,B.x),b=Math.min(b,B.y),E=Math.max(E,B.x),C=Math.max(C,B.y);let k=Math.max(E-d,C-b),O=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),j=Math.pow(2,O);return new u.a1(O,Math.floor((d+E)/2*j),Math.floor((b+C)/2*j))}(r),this.terrainTileRanges=this._getOverlappingTileRanges(r),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=r.map(l=>this.tileID.getTilePoint(l)._round()),this.flippedWindingOrder=((o=this.tileCoords)[1].x-o[0].x)*(o[2].y-o[0].y)-(o[1].y-o[0].y)*(o[2].x-o[0].x)<0,this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let e=this.map.painter.context,r=e.gl;this.texture||(this.texture=new yr(e,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let o=!1;for(let l in this.tiles){let d=this.tiles[l];d.state!=="loaded"&&(d.state="loaded",d.texture=this.texture,o=!0)}o&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(e){let r=1/0,o=1/0,l=-1/0,d=-1/0;for(let E of e)r=Math.min(r,E.x),o=Math.min(o,E.y),l=Math.max(l,E.x),d=Math.max(d,E.y);let b={};for(let E=0;E<=u.a0;E++){let C=Math.pow(2,E),k=Math.floor(r*C),O=Math.floor(o*C),j=Math.floor(l*C),B=Math.floor(d*C);b[E]={minTileX:k,minTileY:O,maxTileX:j,maxTileY:B}}return b}}class Wa extends ya{constructor(e,r,o,l){super(e,r,o,l),this.roundZoom=!0,this.type="video",this.options=r}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;let e=this.options;this.urls=[];for(let r of e.urls)this.urls.push(this.map._requestManager.transformRequest(r,"Source").url);try{let r=yield u.a2(this.urls);if(this._loaded=!0,!r)return;this.video=r,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(r){this.fire(new u.k(r))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){let r=this.video.seekable;e<r.start(0)||e>r.end(0)?this.fire(new u.k(new u.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let e=this.map.painter.context,r=e.gl;this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new yr(e,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let o=!1;for(let l in this.tiles){let d=this.tiles[l];d.state!=="loaded"&&(d.state="loaded",d.texture=this.texture,o=!0)}o&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class de extends ya{constructor(e,r,o,l){super(e,r,o,l),r.coordinates?Array.isArray(r.coordinates)&&r.coordinates.length===4&&!r.coordinates.some(d=>!Array.isArray(d)||d.length!==2||d.some(b=>typeof b!="number"))||this.fire(new u.k(new u.a3(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.k(new u.a3(`sources.${e}`,null,'missing required property "coordinates"'))),r.animate&&typeof r.animate!="boolean"&&this.fire(new u.k(new u.a3(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),r.canvas?typeof r.canvas=="string"||r.canvas instanceof HTMLCanvasElement||this.fire(new u.k(new u.a3(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.k(new u.a3(`sources.${e}`,null,'missing required property "canvas"'))),this.options=r,this.animate=r.animate===void 0||r.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let r=this.map.painter.context,o=r.gl;this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new yr(r,this.canvas,o.RGBA,{premultiply:!0});let l=!1;for(let d in this.tiles){let b=this.tiles[d];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,l=!0)}l&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}let Xa={},Ja=h=>{switch(h){case"geojson":return No;case"image":return ya;case"raster":return _a;case"raster-dem":return Yo;case"vector":return Ha;case"video":return Wa;case"canvas":return de}return Xa[h]},So="RTLPluginLoaded";class lo extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Pa()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch(r=>{throw this.status="error",r})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return u._(this,arguments,void 0,function*(r,o=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=Vt.resolveURL(r),!this.url)throw new Error(`requested url ${r} is invalid`);if(this.status==="unavailable"){if(!o)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.l(So))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let zo=null;function Ya(){return zo||(zo=new lo),zo}class Ka{constructor(e,r){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=u.a4(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){let r=e+this.timeAdded;r<this.fadeEndTime||(this.fadeEndTime=r)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,r,o){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(l,d){let b={};if(!d)return b;for(let E of l){let C=E.layerIds.map(k=>d.getLayer(k)).filter(Boolean);if(C.length!==0){E.layers=C,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(k=>C.filter(O=>O.id===k)[0]));for(let k of C)b[k.id]=E}}return b}(e.buckets,r?.style),this.hasSymbolBuckets=!1;for(let l in this.buckets){let d=this.buckets[l];if(d instanceof u.a6){if(this.hasSymbolBuckets=!0,!o)break;d.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let l in this.buckets){let d=this.buckets[l];if(d instanceof u.a6&&d.hasRTLText){this.hasRTLText=!0,Ya().lazyLoad();break}}this.queryPadding=0;for(let l in this.buckets){let d=this.buckets[l];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(l).queryRadius(d))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(let e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(let o in this.buckets){let l=this.buckets[o];l.uploadPending()&&l.upload(e)}let r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new yr(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new yr(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,r,o,l,d,b,E,C,k,O,j){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:l,cameraQueryGeometry:d,scale:b,tileSize:this.tileSize,pixelPosMatrix:O,transform:C,params:E,queryPadding:this.queryPadding*k,getElevation:j},e,r,o):{}}querySourceFeatures(e,r){let o=this.latestFeatureIndex;if(!o||!o.rawTileData)return;let l=o.loadVTLayers(),d=r&&r.sourceLayer?r.sourceLayer:"",b=l._geojsonTileLayer||l[d];if(!b)return;let E=u.a7(r&&r.filter),{z:C,x:k,y:O}=this.tileID.canonical,j={z:C,x:k,y:O};for(let B=0;B<b.length;B++){let H=b.feature(B);if(E.needGeometry){let oe=u.a8(H,!0);if(!E.filter(new u.C(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!E.filter(new u.C(this.tileID.overscaledZ),H))continue;let X=o.getId(H,d),le=new u.a9(H,C,k,O,X);le.tile=j,e.push(le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){let r=this.expirationTime;if(e.cacheControl){let o=u.aa(e.cacheControl);o["max-age"]&&(this.expirationTime=Date.now()+1e3*o["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){let o=Date.now(),l=!1;if(this.expirationTime>o)l=!1;else if(r)if(this.expirationTime<r)l=!0;else{let d=this.expirationTime-r;d?this.expirationTime=o+Math.max(d,3e4):l=!0}else l=!0;l?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,r){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;let o=this.latestFeatureIndex.loadVTLayers();for(let l in this.buckets){if(!r.style.hasLayer(l))continue;let d=this.buckets[l],b=d.layers[0].sourceLayer||"_geojsonTileLayer",E=o[b],C=e[b];if(!E||!C||Object.keys(C).length===0)continue;d.update(C,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});let k=r&&r.style&&r.style.getLayer(l);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(d)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Vt.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Vt.now()+e}setDependencies(e,r){let o={};for(let l of r)o[l]=!0;this.dependencies[e]=o}hasDependency(e,r){for(let o of e){let l=this.dependencies[o];if(l){for(let d of r)if(l[d])return!0}}return!1}}class Ys{constructor(e,r){this.max=e,this.onRemove=r,this.reset()}reset(){for(let e in this.data)for(let r of this.data[e])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(e,r,o){let l=e.wrapped().key;this.data[l]===void 0&&(this.data[l]=[]);let d={value:r,timeout:void 0};if(o!==void 0&&(d.timeout=setTimeout(()=>{this.remove(e,d)},o)),this.data[l].push(d),this.order.push(l),this.order.length>this.max){let b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){let r=this.data[e].shift();return r.timeout&&clearTimeout(r.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),r.value}getByKey(e){let r=this.data[e];return r?r[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,r){if(!this.has(e))return this;let o=e.wrapped().key,l=r===void 0?0:this.data[o].indexOf(r),d=this.data[o][l];return this.data[o].splice(l,1),d.timeout&&clearTimeout(d.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(d.value),this.order.splice(this.order.indexOf(o),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){let r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(e){let r=[];for(let o in this.data)for(let l of this.data[o])e(l.value)||r.push(l);for(let o of r)this.remove(o.value.tileID,o)}}class t1{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,o){let l=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][l]=this.stateChanges[e][l]||{},u.e(this.stateChanges[e][l],o),this.deletedStates[e]===null){this.deletedStates[e]={};for(let d in this.state[e])d!==l&&(this.deletedStates[e][d]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][l]===null){this.deletedStates[e][l]={};for(let d in this.state[e][l])o[d]||(this.deletedStates[e][l][d]=null)}else for(let d in o)this.deletedStates[e]&&this.deletedStates[e][l]&&this.deletedStates[e][l][d]===null&&delete this.deletedStates[e][l][d]}removeFeatureState(e,r,o){if(this.deletedStates[e]===null)return;let l=String(r);if(this.deletedStates[e]=this.deletedStates[e]||{},o&&r!==void 0)this.deletedStates[e][l]!==null&&(this.deletedStates[e][l]=this.deletedStates[e][l]||{},this.deletedStates[e][l][o]=null);else if(r!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][l])for(o in this.deletedStates[e][l]={},this.stateChanges[e][l])this.deletedStates[e][l][o]=null;else this.deletedStates[e][l]=null;else this.deletedStates[e]=null}getState(e,r){let o=String(r),l=u.e({},(this.state[e]||{})[o],(this.stateChanges[e]||{})[o]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){let d=this.deletedStates[e][r];if(d===null)return{};for(let b in d)delete l[b]}return l}initializeTileState(e,r){e.setFeatureState(this.state,r)}coalesceChanges(e,r){let o={};for(let l in this.stateChanges){this.state[l]=this.state[l]||{};let d={};for(let b in this.stateChanges[l])this.state[l][b]||(this.state[l][b]={}),u.e(this.state[l][b],this.stateChanges[l][b]),d[b]=this.state[l][b];o[l]=d}for(let l in this.deletedStates){this.state[l]=this.state[l]||{};let d={};if(this.deletedStates[l]===null)for(let b in this.state[l])d[b]={},this.state[l][b]={};else for(let b in this.deletedStates[l]){if(this.deletedStates[l][b]===null)this.state[l][b]={};else for(let E of Object.keys(this.deletedStates[l][b]))delete this.state[l][b][E];d[b]=this.state[l][b]}o[l]=o[l]||{},u.e(o[l],d)}if(this.stateChanges={},this.deletedStates={},Object.keys(o).length!==0)for(let l in e)e[l].setFeatureState(o,r)}}let za=89.25;function ba(h,e){let r=u.ae(e.lat,-85.051129,u.af);return new u.P(u.U(e.lng)*h,u.S(r)*h)}function co(h,e){return new u.$(e.x/h,e.y/h).toLngLat()}function Be(h){return h.cameraToCenterDistance*Math.min(.85*Math.tan(u.ab(90-h.pitch)),Math.tan(u.ab(za-h.pitch)))}function Y(h,e){let r=h.canonical,o=e/u.ac(r.z),l=r.x+Math.pow(2,r.z)*h.wrap,d=u.ad(new Float64Array(16));return u.L(d,d,[l*o,r.y*o,0]),u.M(d,d,[o/u.Z,o/u.Z,1]),d}function K(h,e,r,o,l){let d=u.$.fromLngLat(h,e),b=l*u.ag(1,h.lat),E=b*Math.cos(u.ab(r)),C=Math.sqrt(b*b-E*E),k=C*Math.sin(u.ab(-o)),O=C*Math.cos(u.ab(-o));return new u.$(d.x+k,d.y+O,d.z+E)}function se(h,e,r){let o=e.intersectsFrustum(h);if(!r)return o;let l=e.intersectsPlane(r);return o===0||l===0?0:o===2&&l===2?2:1}function ge(h,e,r){let o=0,l=(r-e)/10;for(let d=0;d<10;d++)o+=l*Math.pow(Math.cos(e+(d+.5)/10*(r-e)),h);return o}function Se(h,e){return function(r,o,l,d,b){let E=2*((h-1)/u.ah(Math.cos(u.ab(za-b))/Math.cos(u.ab(za)))-1),C=Math.acos(l/d),k=2*ge(E-1,0,u.ab(b/2)),O=Math.min(u.ab(za),C+u.ab(b/2)),j=ge(E-1,Math.min(O,C-u.ab(b/2)),O),B=Math.atan(o/l),H=Math.hypot(o,l),X=r;return X+=u.ah(d/H/Math.max(.5,Math.cos(u.ab(b/2)))),X+=E*u.ah(Math.cos(B))/2,X-=u.ah(Math.max(1,j/k/e))/2,X}}let te=Se(9.314,3);function Re(h,e){let r=(e.roundZoom?Math.round:Math.floor)(h.zoom+u.ah(h.tileSize/e.tileSize));return Math.max(0,r)}function Ae(h,e){let r=h.getCameraFrustum(),o=h.getClippingPlane(),l=h.screenPointToMercatorCoordinate(h.getCameraPoint()),d=u.$.fromLngLat(h.center,h.elevation);l.z=d.z+Math.cos(h.pitchInRadians)*h.cameraToCenterDistance/h.worldSize;let b=h.getCoveringTilesDetailsProvider(),E=b.allowVariableZoom(h,e),C=Re(h,e),k=e.minzoom||0,O=e.maxzoom!==void 0?e.maxzoom:h.maxZoom,j=Math.min(Math.max(0,C),O),B=Math.pow(2,j),H=[B*l.x,B*l.y,0],X=[B*d.x,B*d.y,0],le=Math.hypot(d.x-l.x,d.y-l.y),oe=Math.abs(d.z-l.z),ce=Math.hypot(le,oe),fe=Ee=>({zoom:0,x:0,y:0,wrap:Ee,fullyVisible:!1}),xe=[],be=[];if(h.renderWorldCopies&&b.allowWorldCopies())for(let Ee=1;Ee<=3;Ee++)xe.push(fe(-Ee)),xe.push(fe(Ee));for(xe.push(fe(0));xe.length>0;){let Ee=xe.pop(),Ce=Ee.x,we=Ee.y,Je=Ee.fullyVisible,Bt={x:Ce,y:we,z:Ee.zoom},gt=b.getTileAABB(Bt,Ee.wrap,h.elevation,e);if(!Je){let ti=se(r,gt,o);if(ti===0)continue;Je=ti===2}let wt=b.distanceToTile2d(l.x,l.y,Bt,gt),bt=C;E&&(bt=(e.calculateTileZoom||te)(h.zoom+u.ah(h.tileSize/e.tileSize),wt,oe,ce,h.fov)),bt=(e.roundZoom?Math.round:Math.floor)(bt),bt=Math.max(0,bt);let Ei=Math.min(bt,O);if(Ee.wrap=b.getWrap(d,Bt,Ee.wrap),Ee.zoom>=Ei){if(Ee.zoom<k)continue;let ti=j-Ee.zoom,Jt=H[0]-.5-(Ce<<ti),Zi=H[1]-.5-(we<<ti),Ir=e.reparseOverscaled?Math.max(Ee.zoom,bt):Ee.zoom;be.push({tileID:new u.Y(Ee.zoom===O?Ir:Ee.zoom,Ee.wrap,Ee.zoom,Ce,we),distanceSq:u.ai([X[0]-.5-Ce,X[1]-.5-we]),tileDistanceToCamera:Math.sqrt(Jt*Jt+Zi*Zi)})}else for(let ti=0;ti<4;ti++)xe.push({zoom:Ee.zoom+1,x:(Ce<<1)+ti%2,y:(we<<1)+(ti>>1),wrap:Ee.wrap,fullyVisible:Je})}return be.sort((Ee,Ce)=>Ee.distanceSq-Ce.distanceSq).map(Ee=>Ee.tileID)}class ke extends u.E{constructor(e,r,o){super(),this.id=e,this.dispatcher=o,this.on("data",l=>this._dataHandler(l)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((l,d,b,E)=>{let C=new(Ja(d.type))(l,d,b,E);if(C.id!==l)throw new Error(`Expected Source id to be ${l} instead of ${C.id}`);return C})(e,r,o,this),this._tiles={},this._cache=new Ys(0,l=>this._unloadTile(l)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t1,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let e in this._tiles){let r=this._tiles[e];if(r.state!=="loaded"&&r.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,r,o){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,r,o)}catch(l){e.state="errored",l.status!==404?this._source.fire(new u.k(l,{tile:e})):this.update(this.transform,this.terrain)}})}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new u.l("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let r in this._tiles){let o=this._tiles[r];o.upload(e),o.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(at).map(e=>e.key)}getRenderableIds(e){let r=[];for(let o in this._tiles)this._isIdRenderable(o,e)&&r.push(this._tiles[o]);return e?r.sort((o,l)=>{let d=o.tileID,b=l.tileID,E=new u.P(d.canonical.x,d.canonical.y)._rotate(-this.transform.bearingInRadians),C=new u.P(b.canonical.x,b.canonical.y)._rotate(-this.transform.bearingInRadians);return d.overscaledZ-b.overscaledZ||C.y-E.y||C.x-E.x}).map(o=>o.tileID.key):r.map(o=>o.tileID).sort(at).map(o=>o.key)}hasRenderableParent(e){let r=this.findLoadedParent(e,0);return!!r&&this._isIdRenderable(r.tileID.key)}_isIdRenderable(e,r){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(r||!this._tiles[e].holdingForFade())}reload(e){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let r in this._tiles)(e||this._tiles[r].state!=="errored")&&this._reloadTile(r,"reloading")}}_reloadTile(e,r){return u._(this,void 0,void 0,function*(){let o=this._tiles[e];o&&(o.state!=="loading"&&(o.state=r),yield this._loadTile(o,e,r))})}_tileLoaded(e,r,o){e.timeAdded=Vt.now(),o==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new u.l("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){let r=this.getRenderableIds();for(let l=0;l<r.length;l++){let d=r[l];if(e.neighboringTiles&&e.neighboringTiles[d]){let b=this.getTileByID(d);o(e,b),o(b,e)}}function o(l,d){l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0;let b=d.tileID.canonical.x-l.tileID.canonical.x,E=d.tileID.canonical.y-l.tileID.canonical.y,C=Math.pow(2,l.tileID.canonical.z),k=d.tileID.key;b===0&&E===0||Math.abs(E)>1||(Math.abs(b)>1&&(Math.abs(b+C)===1?b+=C:Math.abs(b-C)===1&&(b-=C)),d.dem&&l.dem&&(l.dem.backfillBorder(d.dem,b,E),l.neighboringTiles&&l.neighboringTiles[k]&&(l.neighboringTiles[k].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,r,o,l){for(let d in this._tiles){let b=this._tiles[d];if(l[d]||!b.hasData()||b.tileID.overscaledZ<=r||b.tileID.overscaledZ>o)continue;let E=b.tileID;for(;b&&b.tileID.overscaledZ>r+1;){let k=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[k.key],b&&b.hasData()&&(E=k)}let C=E;for(;C.overscaledZ>r;)if(C=C.scaledTo(C.overscaledZ-1),e[C.key]||e[C.canonical.key]){l[E.key]=E;break}}}findLoadedParent(e,r){if(e.key in this._loadedParentTiles){let o=this._loadedParentTiles[e.key];return o&&o.tileID.overscaledZ>=r?o:null}for(let o=e.overscaledZ-1;o>=r;o--){let l=e.scaledTo(o),d=this._getLoadedTile(l);if(d)return d}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){let r=this._tiles[e.key];return r&&r.hasData()?r:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){let r=Math.ceil(e.width/this._source.tileSize)+1,o=Math.ceil(e.height/this._source.tileSize)+1,l=Math.floor(r*o*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),d=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,l):l;this._cache.setMaxSize(d)}handleWrapJump(e){let r=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,r){let o={};for(let l in this._tiles){let d=this._tiles[l];d.tileID=d.tileID.unwrapTo(d.tileID.wrap+r),o[d.tileID.key]=d}this._tiles=o;for(let l in this._timers)clearTimeout(this._timers[l]),delete this._timers[l];for(let l in this._tiles)this._setTileReloadTimer(l,this._tiles[l])}}_updateCoveredAndRetainedTiles(e,r,o,l,d,b){let E={},C={},k=Object.keys(e),O=Vt.now();for(let j of k){let B=e[j],H=this._tiles[j];if(!H||H.fadeEndTime!==0&&H.fadeEndTime<=O)continue;let X=this.findLoadedParent(B,r),le=this.findLoadedSibling(B),oe=X||le||null;oe&&(this._addTile(oe.tileID),E[oe.tileID.key]=oe.tileID),C[j]=B}this._retainLoadedChildren(C,l,o,e);for(let j in E)e[j]||(this._coveredTiles[j]=!0,e[j]=E[j]);if(b){let j={},B={};for(let H of d)this._tiles[H.key].hasData()?j[H.key]=H:B[H.key]=H;for(let H in B){let X=B[H].children(this._source.maxzoom);this._tiles[X[0].key]&&this._tiles[X[1].key]&&this._tiles[X[2].key]&&this._tiles[X[3].key]&&(j[X[0].key]=e[X[0].key]=X[0],j[X[1].key]=e[X[1].key]=X[1],j[X[2].key]=e[X[2].key]=X[2],j[X[3].key]=e[X[3].key]=X[3],delete B[H])}for(let H in B){let X=B[H],le=this.findLoadedParent(X,this._source.minzoom),oe=this.findLoadedSibling(X),ce=le||oe||null;if(ce){j[ce.tileID.key]=e[ce.tileID.key]=ce.tileID;for(let fe in j)j[fe].isChildOf(ce.tileID)&&delete j[fe]}}for(let H in this._tiles)j[H]||(this._coveredTiles[H]=!0)}}update(e,r){if(!this._sourceLoaded||this._paused)return;let o;this.transform=e,this.terrain=r,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?o=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new u.Y(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(o=Ae(e,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:r,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(o=o.filter(O=>this._source.hasTile(O)))):o=[];let l=Re(e,this._source),d=Math.max(l-ke.maxOverzooming,this._source.minzoom),b=Math.max(l+ke.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let O={};for(let j of o)if(j.canonical.z>this._source.minzoom){let B=j.scaledTo(j.canonical.z-1);O[B.key]=B;let H=j.scaledTo(Math.max(this._source.minzoom,Math.min(j.canonical.z,5)));O[H.key]=H}o=o.concat(Object.values(O))}let E=o.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new u.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let C=this._updateRetainedTiles(o,l);je(this._source.type)&&this._updateCoveredAndRetainedTiles(C,d,b,l,o,r);for(let O in C)this._tiles[O].clearFadeHold();let k=u.aj(this._tiles,C);for(let O of k){let j=this._tiles[O];j.hasSymbolBuckets&&!j.holdingForFade()?j.setHoldDuration(this.map._fadeDuration):j.hasSymbolBuckets&&!j.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,r){var o;let l={},d={},b=Math.max(r-ke.maxOverzooming,this._source.minzoom),E=Math.max(r+ke.maxUnderzooming,this._source.minzoom),C={};for(let k of e){let O=this._addTile(k);l[k.key]=k,O.hasData()||r<this._source.maxzoom&&(C[k.key]=k)}this._retainLoadedChildren(C,r,E,l);for(let k of e){let O=this._tiles[k.key];if(O.hasData())continue;if(r+1>this._source.maxzoom){let B=k.children(this._source.maxzoom)[0],H=this.getTile(B);if(H&&H.hasData()){l[B.key]=B;continue}}else{let B=k.children(this._source.maxzoom);if(l[B[0].key]&&l[B[1].key]&&l[B[2].key]&&l[B[3].key])continue}let j=O.wasRequested();for(let B=k.overscaledZ-1;B>=b;--B){let H=k.scaledTo(B);if(d[H.key])break;if(d[H.key]=!0,O=this.getTile(H),!O&&j&&(O=this._addTile(H)),O){let X=O.hasData();if((X||!(!((o=this.map)===null||o===void 0)&&o.cancelPendingTileRequestsWhileZooming)||j)&&(l[H.key]=H),j=O.wasRequested(),X)break}}}return l}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let e in this._tiles){let r=[],o,l=this._tiles[e].tileID;for(;l.overscaledZ>0;){if(l.key in this._loadedParentTiles){o=this._loadedParentTiles[l.key];break}r.push(l.key);let d=l.scaledTo(l.overscaledZ-1);if(o=this._getLoadedTile(d),o)break;l=d}for(let d of r)this._loadedParentTiles[d]=o}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let e in this._tiles){let r=this._tiles[e].tileID,o=this._getLoadedTile(r);this._loadedSiblingTiles[r.key]=o}}_addTile(e){let r=this._tiles[e.key];if(r)return r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));let o=r;return r||(r=new Ka(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(r,e.key,r.state)),r.uses++,this._tiles[e.key]=r,o||this._source.fire(new u.l("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r}_setTileReloadTimer(e,r){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);let o=r.getExpiryTimeout();o&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},o))}refreshTiles(e){for(let r in this._tiles)this._isIdRenderable(r)&&e.some(o=>o.equals(this._tiles[r].tileID.canonical))&&this._reloadTile(r,"expired")}_removeTile(e){let r=this._tiles[e];r&&(r.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),r.uses>0||(r.hasData()&&r.state!=="reloading"?this._cache.add(r.tileID,r,r.getExpiryTimeout()):(r.aborted=!0,this._abortTile(r),this._unloadTile(r))))}_dataHandler(e){let r=e.sourceDataType;e.dataType==="source"&&r==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&r==="content"&&(this.reload(e.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,r,o){let l=[],d=this.transform;if(!d)return l;let b=o?d.getCameraQueryGeometry(e):e,E=e.map(X=>d.screenPointToMercatorCoordinate(X,this.terrain)),C=b.map(X=>d.screenPointToMercatorCoordinate(X,this.terrain)),k=this.getIds(),O=1/0,j=1/0,B=-1/0,H=-1/0;for(let X of C)O=Math.min(O,X.x),j=Math.min(j,X.y),B=Math.max(B,X.x),H=Math.max(H,X.y);for(let X=0;X<k.length;X++){let le=this._tiles[k[X]];if(le.holdingForFade())continue;let oe=d.getCoveringTilesDetailsProvider().allowWorldCopies()?le.tileID:le.tileID.unwrapTo(0),ce=Math.pow(2,d.zoom-le.tileID.overscaledZ),fe=r*le.queryPadding*u.Z/le.tileSize/ce,xe=[oe.getTilePoint(new u.$(O,j)),oe.getTilePoint(new u.$(B,H))];if(xe[0].x-fe<u.Z&&xe[0].y-fe<u.Z&&xe[1].x+fe>=0&&xe[1].y+fe>=0){let be=E.map(Ce=>oe.getTilePoint(Ce)),Ee=C.map(Ce=>oe.getTilePoint(Ce));l.push({tile:le,tileID:oe,queryGeometry:be,cameraQueryGeometry:Ee,scale:ce})}}return l}getVisibleCoordinates(e){let r=this.getRenderableIds(e).map(o=>this._tiles[o].tileID);return this.transform&&this.transform.populateCache(r),r}hasTransition(){if(this._source.hasTransition())return!0;if(je(this._source.type)){let e=Vt.now();for(let r in this._tiles)if(this._tiles[r].fadeEndTime>=e)return!0}return!1}setFeatureState(e,r,o){this._state.updateState(e=e||"_geojsonTileLayer",r,o)}removeFeatureState(e,r,o){this._state.removeFeatureState(e=e||"_geojsonTileLayer",r,o)}getFeatureState(e,r){return this._state.getState(e=e||"_geojsonTileLayer",r)}setDependencies(e,r,o){let l=this._tiles[e];l&&l.setDependencies(r,o)}reloadTilesForDependencies(e,r){for(let o in this._tiles)this._tiles[o].hasDependency(e,r)&&this._reloadTile(o,"reloading");this._cache.filter(o=>!o.hasDependency(e,r))}}function at(h,e){let r=Math.abs(2*h.wrap)-+(h.wrap<0),o=Math.abs(2*e.wrap)-+(e.wrap<0);return h.overscaledZ-e.overscaledZ||o-r||e.canonical.y-h.canonical.y||e.canonical.x-h.canonical.x}function je(h){return h==="raster"||h==="image"||h==="video"}ke.maxOverzooming=10,ke.maxUnderzooming=3;class Yt{constructor(e,r){this.reset(e,r)}reset(e,r){this.points=e||[],this._distances=[0];for(let o=1;o<this.points.length;o++)this._distances[o]=this._distances[o-1]+this.points[o].dist(this.points[o-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(r||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=u.ae(e,0,1);let r=1,o=this._distances[r],l=e*this.paddedLength+this.padding;for(;o<l&&r<this._distances.length;)o=this._distances[++r];let d=r-1,b=this._distances[d],E=o-b,C=E>0?(l-b)/E:0;return this.points[d].mult(1-C).add(this.points[r].mult(C))}}function Ti(h,e){let r=!0;return h==="always"||h!=="never"&&e!=="never"||(r=!1),r}class Di{constructor(e,r,o){let l=this.boxCells=[],d=this.circleCells=[];this.xCellCount=Math.ceil(e/o),this.yCellCount=Math.ceil(r/o);for(let b=0;b<this.xCellCount*this.yCellCount;b++)l.push([]),d.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=r,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/r,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,r,o,l,d){this._forEachCell(r,o,l,d,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(r),this.bboxes.push(o),this.bboxes.push(l),this.bboxes.push(d)}insertCircle(e,r,o,l){this._forEachCell(r-l,o-l,r+l,o+l,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(r),this.circles.push(o),this.circles.push(l)}_insertBoxCell(e,r,o,l,d,b){this.boxCells[d].push(b)}_insertCircleCell(e,r,o,l,d,b){this.circleCells[d].push(b)}_query(e,r,o,l,d,b,E){if(o<0||e>this.width||l<0||r>this.height)return[];let C=[];if(e<=0&&r<=0&&this.width<=o&&this.height<=l){if(d)return[{key:null,x1:e,y1:r,x2:o,y2:l}];for(let k=0;k<this.boxKeys.length;k++)C.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){let O=this.circles[3*k],j=this.circles[3*k+1],B=this.circles[3*k+2];C.push({key:this.circleKeys[k],x1:O-B,y1:j-B,x2:O+B,y2:j+B})}}else this._forEachCell(e,r,o,l,this._queryCell,C,{hitTest:d,overlapMode:b,seenUids:{box:{},circle:{}}},E);return C}query(e,r,o,l){return this._query(e,r,o,l,!1,null)}hitTest(e,r,o,l,d,b){return this._query(e,r,o,l,!0,d,b).length>0}hitTestCircle(e,r,o,l,d){let b=e-o,E=e+o,C=r-o,k=r+o;if(E<0||b>this.width||k<0||C>this.height)return!1;let O=[];return this._forEachCell(b,C,E,k,this._queryCellCircle,O,{hitTest:!0,overlapMode:l,circle:{x:e,y:r,radius:o},seenUids:{box:{},circle:{}}},d),O.length>0}_queryCell(e,r,o,l,d,b,E,C){let{seenUids:k,hitTest:O,overlapMode:j}=E,B=this.boxCells[d];if(B!==null){let X=this.bboxes;for(let le of B)if(!k.box[le]){k.box[le]=!0;let oe=4*le,ce=this.boxKeys[le];if(e<=X[oe+2]&&r<=X[oe+3]&&o>=X[oe+0]&&l>=X[oe+1]&&(!C||C(ce))&&(!O||!Ti(j,ce.overlapMode))&&(b.push({key:ce,x1:X[oe],y1:X[oe+1],x2:X[oe+2],y2:X[oe+3]}),O))return!0}}let H=this.circleCells[d];if(H!==null){let X=this.circles;for(let le of H)if(!k.circle[le]){k.circle[le]=!0;let oe=3*le,ce=this.circleKeys[le];if(this._circleAndRectCollide(X[oe],X[oe+1],X[oe+2],e,r,o,l)&&(!C||C(ce))&&(!O||!Ti(j,ce.overlapMode))){let fe=X[oe],xe=X[oe+1],be=X[oe+2];if(b.push({key:ce,x1:fe-be,y1:xe-be,x2:fe+be,y2:xe+be}),O)return!0}}}return!1}_queryCellCircle(e,r,o,l,d,b,E,C){let{circle:k,seenUids:O,overlapMode:j}=E,B=this.boxCells[d];if(B!==null){let X=this.bboxes;for(let le of B)if(!O.box[le]){O.box[le]=!0;let oe=4*le,ce=this.boxKeys[le];if(this._circleAndRectCollide(k.x,k.y,k.radius,X[oe+0],X[oe+1],X[oe+2],X[oe+3])&&(!C||C(ce))&&!Ti(j,ce.overlapMode))return b.push(!0),!0}}let H=this.circleCells[d];if(H!==null){let X=this.circles;for(let le of H)if(!O.circle[le]){O.circle[le]=!0;let oe=3*le,ce=this.circleKeys[le];if(this._circlesCollide(X[oe],X[oe+1],X[oe+2],k.x,k.y,k.radius)&&(!C||C(ce))&&!Ti(j,ce.overlapMode))return b.push(!0),!0}}}_forEachCell(e,r,o,l,d,b,E,C){let k=this._convertToXCellCoord(e),O=this._convertToYCellCoord(r),j=this._convertToXCellCoord(o),B=this._convertToYCellCoord(l);for(let H=k;H<=j;H++)for(let X=O;X<=B;X++)if(d.call(this,e,r,o,l,this.xCellCount*X+H,b,E,C))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,r,o,l,d,b){let E=l-e,C=d-r,k=o+b;return k*k>E*E+C*C}_circleAndRectCollide(e,r,o,l,d,b,E){let C=(b-l)/2,k=Math.abs(e-(l+C));if(k>C+o)return!1;let O=(E-d)/2,j=Math.abs(r-(d+O));if(j>O+o)return!1;if(k<=C||j<=O)return!0;let B=k-C,H=j-O;return B*B+H*H<=o*o}}function Hi(h,e,r){let o=u.K();if(!h){let{vecSouth:j,vecEast:B}=_r(e),H=Nt();H[0]=B[0],H[1]=B[1],H[2]=j[0],H[3]=j[1],l=H,(O=(b=(d=H)[0])*(k=d[3])-(C=d[2])*(E=d[1]))&&(l[0]=k*(O=1/O),l[1]=-E*O,l[2]=-C*O,l[3]=b*O),o[0]=H[0],o[1]=H[1],o[4]=H[2],o[5]=H[3]}var l,d,b,E,C,k,O;return u.M(o,o,[1/r,1/r,1]),o}function Tr(h,e,r,o){if(h){let l=u.K();if(!e){let{vecSouth:d,vecEast:b}=_r(r);l[0]=b[0],l[1]=b[1],l[4]=d[0],l[5]=d[1]}return u.M(l,l,[o,o,1]),l}return r.pixelsToClipSpaceMatrix}function _r(h){let e=Math.cos(h.rollInRadians),r=Math.sin(h.rollInRadians),o=Math.cos(h.pitchInRadians),l=Math.cos(h.bearingInRadians),d=Math.sin(h.bearingInRadians),b=u.ao();b[0]=-l*o*r-d*e,b[1]=-d*o*r+l*e;let E=u.ap(b);E<1e-9?u.aq(b):u.ar(b,b,1/E);let C=u.ao();C[0]=l*o*e-d*r,C[1]=d*o*e+l*r;let k=u.ap(C);return k<1e-9?u.aq(C):u.ar(C,C,1/k),{vecEast:C,vecSouth:b}}function It(h,e,r,o){let l;o?(l=[h,e,o(h,e),1],u.at(l,l,r)):(l=[h,e,0,1],D(l,l,r));let d=l[3];return{point:new u.P(l[0]/d,l[1]/d),signedDistanceFromCamera:d,isOccluded:!1}}function Yr(h,e){return .5+h/e*.5}function Lr(h,e){return h.x>=-e[0]&&h.x<=e[0]&&h.y>=-e[1]&&h.y<=e[1]}function Wr(h,e,r,o,l,d,b,E,C,k,O,j,B){let H=r?h.textSizeData:h.iconSizeData,X=u.ak(H,e.transform.zoom),le=[256/e.width*2+1,256/e.height*2+1],oe=r?h.text.dynamicLayoutVertexArray:h.icon.dynamicLayoutVertexArray;oe.clear();let ce=h.lineVertexArray,fe=r?h.text.placedSymbolArray:h.icon.placedSymbolArray,xe=e.transform.width/e.transform.height,be=!1;for(let Ee=0;Ee<fe.length;Ee++){let Ce=fe.get(Ee);if(Ce.hidden||Ce.writingMode===u.al.vertical&&!be){P(Ce.numGlyphs,oe);continue}be=!1;let we=new u.P(Ce.anchorX,Ce.anchorY),Je={getElevation:B,pitchedLabelPlaneMatrix:o,lineVertexArray:ce,pitchWithMap:d,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:e.transform,tileAnchorPoint:we,unwrappedTileID:C,width:k,height:O,translation:j},Bt=_(Ce.anchorX,Ce.anchorY,Je);if(!Lr(Bt.point,le)){P(Ce.numGlyphs,oe);continue}let gt=Yr(e.transform.cameraToCenterDistance,Bt.signedDistanceFromCamera),wt=u.am(H,X,Ce),bt=d?wt*e.transform.getPitchedTextCorrection(Ce.anchorX,Ce.anchorY,C)/gt:wt*gt,Ei=li({projectionContext:Je,pitchedLabelPlaneMatrixInverse:l,symbol:Ce,fontSize:bt,flip:!1,keepUpright:b,glyphOffsetArray:h.glyphOffsetArray,dynamicLayoutVertexArray:oe,aspectRatio:xe,rotateToLine:E});be=Ei.useVertical,(Ei.notEnoughRoom||be||Ei.needsFlipping&&li({projectionContext:Je,pitchedLabelPlaneMatrixInverse:l,symbol:Ce,fontSize:bt,flip:!0,keepUpright:b,glyphOffsetArray:h.glyphOffsetArray,dynamicLayoutVertexArray:oe,aspectRatio:xe,rotateToLine:E}).notEnoughRoom)&&P(Ce.numGlyphs,oe)}r?h.text.dynamicLayoutVertexBuffer.updateData(oe):h.icon.dynamicLayoutVertexBuffer.updateData(oe)}function cr(h,e,r,o,l,d,b,E){let C=d.glyphStartIndex+d.numGlyphs,k=d.lineStartIndex,O=d.lineStartIndex+d.lineLength,j=e.getoffsetX(d.glyphStartIndex),B=e.getoffsetX(C-1),H=v(h*j,r,o,l,d.segment,k,O,E,b);if(!H)return null;let X=v(h*B,r,o,l,d.segment,k,O,E,b);return X?E.projectionCache.anyProjectionOccluded?null:{first:H,last:X}:null}function Gt(h,e,r,o){return h===u.al.horizontal&&Math.abs(r.y-e.y)>Math.abs(r.x-e.x)*o?{useVertical:!0}:(h===u.al.vertical?e.y<r.y:e.x>r.x)?{needsFlipping:!0}:null}function li(h){let{projectionContext:e,pitchedLabelPlaneMatrixInverse:r,symbol:o,fontSize:l,flip:d,keepUpright:b,glyphOffsetArray:E,dynamicLayoutVertexArray:C,aspectRatio:k,rotateToLine:O}=h,j=l/24,B=o.lineOffsetX*j,H=o.lineOffsetY*j,X;if(o.numGlyphs>1){let le=o.glyphStartIndex+o.numGlyphs,oe=o.lineStartIndex,ce=o.lineStartIndex+o.lineLength,fe=cr(j,E,B,H,d,o,O,e);if(!fe)return{notEnoughRoom:!0};let xe=i(fe.first.point.x,fe.first.point.y,e,r),be=i(fe.last.point.x,fe.last.point.y,e,r);if(b&&!d){let Ee=Gt(o.writingMode,xe,be,k);if(Ee)return Ee}X=[fe.first];for(let Ee=o.glyphStartIndex+1;Ee<le-1;Ee++)X.push(v(j*E.getoffsetX(Ee),B,H,d,o.segment,oe,ce,e,O));X.push(fe.last)}else{if(b&&!d){let oe=hn(e.tileAnchorPoint.x,e.tileAnchorPoint.y,e).point,ce=o.lineStartIndex+o.segment+1,fe=new u.P(e.lineVertexArray.getx(ce),e.lineVertexArray.gety(ce)),xe=hn(fe.x,fe.y,e),be=xe.signedDistanceFromCamera>0?xe.point:br(e.tileAnchorPoint,fe,oe,1,e),Ee=i(oe.x,oe.y,e,r),Ce=i(be.x,be.y,e,r),we=Gt(o.writingMode,Ee,Ce,k);if(we)return we}let le=v(j*E.getoffsetX(o.glyphStartIndex),B,H,d,o.segment,o.lineStartIndex,o.lineStartIndex+o.lineLength,e,O);if(!le||e.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};X=[le]}for(let le of X)u.as(C,le.point,le.angle);return{}}function br(h,e,r,o,l){let d=h.add(h.sub(e)._unit()),b=hn(d.x,d.y,l).point,E=r.sub(b);return r.add(E._mult(o/E.mag()))}function kr(h,e,r){let o=e.projectionCache;if(o.projections[h])return o.projections[h];let l=new u.P(e.lineVertexArray.getx(h),e.lineVertexArray.gety(h)),d=hn(l.x,l.y,e);if(d.signedDistanceFromCamera>0)return o.projections[h]=d.point,o.anyProjectionOccluded=o.anyProjectionOccluded||d.isOccluded,d.point;let b=h-r.direction;return br(r.distanceFromAnchor===0?e.tileAnchorPoint:new u.P(e.lineVertexArray.getx(b),e.lineVertexArray.gety(b)),l,r.previousVertex,r.absOffsetX-r.distanceFromAnchor+1,e)}function hn(h,e,r){let o=h+r.translation[0],l=e+r.translation[1],d;return r.pitchWithMap?(d=It(o,l,r.pitchedLabelPlaneMatrix,r.getElevation),d.isOccluded=!1):(d=r.transform.projectTileCoordinates(o,l,r.unwrappedTileID,r.getElevation),d.point.x=(.5*d.point.x+.5)*r.width,d.point.y=(.5*-d.point.y+.5)*r.height),d}function i(h,e,r,o){if(r.pitchWithMap){let l=[h,e,0,1];return u.at(l,l,o),r.transform.projectTileCoordinates(l[0]/l[3],l[1]/l[3],r.unwrappedTileID,r.getElevation).point}return{x:h/r.width*2-1,y:e/r.height*2-1}}function _(h,e,r){return r.transform.projectTileCoordinates(h,e,r.unwrappedTileID,r.getElevation)}function p(h,e,r){return h._unit()._perp()._mult(e*r)}function f(h,e,r,o,l,d,b,E,C){if(E.projectionCache.offsets[h])return E.projectionCache.offsets[h];let k=r.add(e);if(h+C.direction<o||h+C.direction>=l)return E.projectionCache.offsets[h]=k,k;let O=kr(h+C.direction,E,C),j=p(O.sub(r),b,C.direction),B=r.add(j),H=O.add(j);return E.projectionCache.offsets[h]=u.au(d,k,B,H)||k,E.projectionCache.offsets[h]}function v(h,e,r,o,l,d,b,E,C){let k=o?h-e:h+e,O=k>0?1:-1,j=0;o&&(O*=-1,j=Math.PI),O<0&&(j+=Math.PI);let B,H=O>0?d+l:d+l+1;E.projectionCache.cachedAnchorPoint?B=E.projectionCache.cachedAnchorPoint:(B=hn(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=B);let X,le,oe=B,ce=B,fe=0,xe=0,be=Math.abs(k),Ee=[],Ce;for(;fe+xe<=be;){if(H+=O,H<d||H>=b)return null;fe+=xe,ce=oe,le=X;let Bt={absOffsetX:be,direction:O,distanceFromAnchor:fe,previousVertex:ce};if(oe=kr(H,E,Bt),r===0)Ee.push(ce),Ce=oe.sub(ce);else{let gt,wt=oe.sub(ce);gt=wt.mag()===0?p(kr(H+O,E,Bt).sub(oe),r,O):p(wt,r,O),le||(le=ce.add(gt)),X=f(H,gt,oe,d,b,le,r,E,Bt),Ee.push(le),Ce=X.sub(le)}xe=Ce.mag()}let we=Ce._mult((be-fe)/xe)._add(le||ce),Je=j+Math.atan2(oe.y-ce.y,oe.x-ce.x);return Ee.push(we),{point:we,angle:C?Je:0,path:Ee}}let T=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function P(h,e){for(let r=0;r<h;r++){let o=e.length;e.resize(o+4),e.float32.set(T,3*o)}}function D(h,e,r){let o=e[0],l=e[1];return h[0]=r[0]*o+r[4]*l+r[12],h[1]=r[1]*o+r[5]*l+r[13],h[3]=r[3]*o+r[7]*l+r[15],h}let V=100;class ae{constructor(e,r=new Di(e.width+200,e.height+200,25),o=new Di(e.width+200,e.height+200,25)){this.transform=e,this.grid=r,this.ignoredGrid=o,this.pitchFactor=Math.cos(e.pitch*Math.PI/180)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+V,this.screenBottomBoundary=e.height+V,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,r,o,l,d,b,E,C,k,O,j,B){let H=this.projectAndGetPerspectiveRatio(e.anchorPointX+C[0],e.anchorPointY+C[1],d,O,B),X=o*H.perspectiveRatio,le;if(b||E)le=this._projectCollisionBox(e,X,l,d,b,E,C,H,O,j,B);else{let Ce=H.x+(j?j.x*X:0),we=H.y+(j?j.y*X:0);le={allPointsOccluded:!1,box:[Ce+e.x1*X,we+e.y1*X,Ce+e.x2*X,we+e.y2*X]}}let[oe,ce,fe,xe]=le.box,be=b?le.allPointsOccluded:H.isOccluded,Ee=be;return Ee||(Ee=H.perspectiveRatio<this.perspectiveRatioCutoff),Ee||(Ee=!this.isInsideGrid(oe,ce,fe,xe)),Ee||r!=="always"&&this.grid.hitTest(oe,ce,fe,xe,r,k)?{box:[oe,ce,fe,xe],placeable:!1,offscreen:!1,occluded:be}:{box:[oe,ce,fe,xe],placeable:!0,offscreen:this.isOffscreen(oe,ce,fe,xe),occluded:be}}placeCollisionCircles(e,r,o,l,d,b,E,C,k,O,j,B,H,X){let le=[],oe=new u.P(r.anchorX,r.anchorY),ce=this.getPerspectiveRatio(oe.x,oe.y,b,X),fe=(k?d*this.transform.getPitchedTextCorrection(r.anchorX,r.anchorY,b)/ce:d*ce)/u.ay,xe={getElevation:X,pitchedLabelPlaneMatrix:E,lineVertexArray:o,pitchWithMap:k,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:oe,unwrappedTileID:b,width:this.transform.width,height:this.transform.height,translation:H},be=cr(fe,l,r.lineOffsetX*fe,r.lineOffsetY*fe,!1,r,!1,xe),Ee=!1,Ce=!1,we=!0;if(be){let Je=.5*j*ce+B,Bt=new u.P(-100,-100),gt=new u.P(this.screenRightBoundary,this.screenBottomBoundary),wt=new Yt,bt=be.first,Ei=be.last,ti=[];for(let Ir=bt.path.length-1;Ir>=1;Ir--)ti.push(bt.path[Ir]);for(let Ir=1;Ir<Ei.path.length;Ir++)ti.push(Ei.path[Ir]);let Jt=2.5*Je;if(k){let Ir=this.projectPathToScreenSpace(ti,xe);ti=Ir.some(Dr=>Dr.signedDistanceFromCamera<=0)?[]:Ir.map(Dr=>Dr.point)}let Zi=[];if(ti.length>0){let Ir=ti[0].clone(),Dr=ti[0].clone();for(let vn=1;vn<ti.length;vn++)Ir.x=Math.min(Ir.x,ti[vn].x),Ir.y=Math.min(Ir.y,ti[vn].y),Dr.x=Math.max(Dr.x,ti[vn].x),Dr.y=Math.max(Dr.y,ti[vn].y);Zi=Ir.x>=Bt.x&&Dr.x<=gt.x&&Ir.y>=Bt.y&&Dr.y<=gt.y?[ti]:Dr.x<Bt.x||Ir.x>gt.x||Dr.y<Bt.y||Ir.y>gt.y?[]:u.av([ti],Bt.x,Bt.y,gt.x,gt.y)}for(let Ir of Zi){wt.reset(Ir,.25*Je);let Dr=0;Dr=wt.length<=.5*Je?1:Math.ceil(wt.paddedLength/Jt)+1;for(let vn=0;vn<Dr;vn++){let Qr=vn/Math.max(Dr-1,1),En=wt.lerp(Qr),Tn=En.x+V,mn=En.y+V;le.push(Tn,mn,Je,0);let Jr=Tn-Je,cs=mn-Je,gs=Tn+Je,_s=mn+Je;if(we=we&&this.isOffscreen(Jr,cs,gs,_s),Ce=Ce||this.isInsideGrid(Jr,cs,gs,_s),e!=="always"&&this.grid.hitTestCircle(Tn,mn,Je,e,O)&&(Ee=!0,!C))return{circles:[],offscreen:!1,collisionDetected:Ee}}}}return{circles:!C&&Ee||!Ce||ce<this.perspectiveRatioCutoff?[]:le,offscreen:we,collisionDetected:Ee}}projectPathToScreenSpace(e,r){let o=function(l,d){let b=u.K();return u.an(b,d.pitchedLabelPlaneMatrix),l.map(E=>{let C=It(E.x,E.y,b,d.getElevation),k=d.transform.projectTileCoordinates(C.point.x,C.point.y,d.unwrappedTileID,d.getElevation);return k.point.x=(.5*k.point.x+.5)*d.width,k.point.y=(.5*-k.point.y+.5)*d.height,k})}(e,r);return function(l){let d=0,b=0,E=0,C=0;for(let k=0;k<l.length;k++)l[k].isOccluded?(E=k+1,C=0):(C++,C>b&&(b=C,d=E));return l.slice(d,d+b)}(o)}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let r=[],o=1/0,l=1/0,d=-1/0,b=-1/0;for(let O of e){let j=new u.P(O.x+V,O.y+V);o=Math.min(o,j.x),l=Math.min(l,j.y),d=Math.max(d,j.x),b=Math.max(b,j.y),r.push(j)}let E=this.grid.query(o,l,d,b).concat(this.ignoredGrid.query(o,l,d,b)),C={},k={};for(let O of E){let j=O.key;if(C[j.bucketInstanceId]===void 0&&(C[j.bucketInstanceId]={}),C[j.bucketInstanceId][j.featureIndex])continue;let B=[new u.P(O.x1,O.y1),new u.P(O.x2,O.y1),new u.P(O.x2,O.y2),new u.P(O.x1,O.y2)];u.aw(r,B)&&(C[j.bucketInstanceId][j.featureIndex]=!0,k[j.bucketInstanceId]===void 0&&(k[j.bucketInstanceId]=[]),k[j.bucketInstanceId].push(j.featureIndex))}return k}insertCollisionBox(e,r,o,l,d,b){(o?this.ignoredGrid:this.grid).insert({bucketInstanceId:l,featureIndex:d,collisionGroupID:b,overlapMode:r},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,r,o,l,d,b){let E=o?this.ignoredGrid:this.grid,C={bucketInstanceId:l,featureIndex:d,collisionGroupID:b,overlapMode:r};for(let k=0;k<e.length;k+=4)E.insertCircle(C,e[k],e[k+1],e[k+2])}projectAndGetPerspectiveRatio(e,r,o,l,d){if(d){let b;l?(b=[e,r,l(e,r),1],u.at(b,b,d)):(b=[e,r,0,1],D(b,b,d));let E=b[3];return{x:(b[0]/E+1)/2*this.transform.width+V,y:(-b[1]/E+1)/2*this.transform.height+V,perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}{let b=this.transform.projectTileCoordinates(e,r,o,l);return{x:(b.point.x+1)/2*this.transform.width+V,y:(1-b.point.y)/2*this.transform.height+V,perspectiveRatio:.5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5,isOccluded:b.isOccluded,signedDistanceFromCamera:b.signedDistanceFromCamera}}}getPerspectiveRatio(e,r,o,l){let d=this.transform.projectTileCoordinates(e,r,o,l);return .5+this.transform.cameraToCenterDistance/d.signedDistanceFromCamera*.5}isOffscreen(e,r,o,l){return o<V||e>=this.screenRightBoundary||l<V||r>this.screenBottomBoundary}isInsideGrid(e,r,o,l){return o>=0&&e<this.gridRightBoundary&&l>=0&&r<this.gridBottomBoundary}getViewportMatrix(){let e=u.ad([]);return u.L(e,e,[-100,-100,0]),e}_projectCollisionBox(e,r,o,l,d,b,E,C,k,O,j){let B=1,H=0,X=0,le=1,oe=e.anchorPointX+E[0],ce=e.anchorPointY+E[1];if(b&&!d){let ti=this.projectAndGetPerspectiveRatio(oe+1,ce,l,k,j),Jt=ti.x-C.x,Zi=Math.atan((ti.y-C.y)/Jt)+(Jt<0?Math.PI:0),Ir=Math.sin(Zi),Dr=Math.cos(Zi);B=Dr,H=Ir,X=-Ir,le=Dr}else if(!b&&d){let ti=_r(this.transform);B=ti.vecEast[0],H=ti.vecEast[1],X=ti.vecSouth[0],le=ti.vecSouth[1]}let fe=C.x,xe=C.y,be=r;d&&(fe=oe,xe=ce,be=Math.pow(2,-(this.transform.zoom-o.overscaledZ)),be*=this.transform.getPitchedTextCorrection(oe,ce,l),O||(be*=u.ae(.5+C.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),O&&(fe+=B*O.x*be+X*O.y*be,xe+=H*O.x*be+le*O.y*be);let Ee=e.x1*be,Ce=e.x2*be,we=(Ee+Ce)/2,Je=e.y1*be,Bt=e.y2*be,gt=(Je+Bt)/2,wt=[{offsetX:Ee,offsetY:Je},{offsetX:we,offsetY:Je},{offsetX:Ce,offsetY:Je},{offsetX:Ce,offsetY:gt},{offsetX:Ce,offsetY:Bt},{offsetX:we,offsetY:Bt},{offsetX:Ee,offsetY:Bt},{offsetX:Ee,offsetY:gt}],bt=[];for(let{offsetX:ti,offsetY:Jt}of wt)bt.push(new u.P(fe+B*ti+X*Jt,xe+H*ti+le*Jt));let Ei=!1;if(d){let ti=bt.map(Jt=>this.projectAndGetPerspectiveRatio(Jt.x,Jt.y,l,k,j));Ei=ti.some(Jt=>!Jt.isOccluded),bt=ti.map(Jt=>new u.P(Jt.x,Jt.y))}else Ei=!0;return{box:u.ax(bt),allPointsOccluded:!Ei}}}class ie{constructor(e,r,o,l){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?r:-r))):l&&o?1:0,this.placed=o}isHidden(){return this.opacity===0&&!this.placed}}class Q{constructor(e,r,o,l,d){this.text=new ie(e?e.text:null,r,o,d),this.icon=new ie(e?e.icon:null,r,l,d)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ${constructor(e,r,o){this.text=e,this.icon=r,this.skipFade=o}}class F{constructor(e,r,o,l,d){this.bucketInstanceId=e,this.featureIndex=r,this.sourceLayerIndex=o,this.bucketIndex=l,this.tileID=d}}class _e{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){let r=++this.maxGroupID;this.collisionGroups[e]={ID:r,predicate:o=>o.collisionGroupID===r}}return this.collisionGroups[e]}}function ue(h,e,r,o,l){let{horizontalAlign:d,verticalAlign:b}=u.aE(h);return new u.P(-(d-.5)*e+o[0]*l,-(b-.5)*r+o[1]*l)}class ze{constructor(e,r,o,l,d){this.transform=e.clone(),this.terrain=r,this.collisionIndex=new ae(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=o,this.retainedQueryData={},this.collisionGroups=new _e(l),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=d,d&&(d.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){let r=this.terrain;return r?(o,l)=>r.getElevation(e,o,l):null}getBucketParts(e,r,o,l){let d=o.getBucket(r),b=o.latestFeatureIndex;if(!d||!b||r.id!==d.layerIds[0])return;let E=o.collisionBoxArray,C=d.layers[0].layout,k=d.layers[0].paint,O=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),j=o.tileSize/u.Z,B=o.tileID.toUnwrapped(),H=C.get("text-rotation-alignment")==="map",X=u.az(o,1,this.transform.zoom),le=u.aA(this.collisionIndex.transform,o,k.get("text-translate"),k.get("text-translate-anchor")),oe=u.aA(this.collisionIndex.transform,o,k.get("icon-translate"),k.get("icon-translate-anchor")),ce=Hi(H,this.transform,X);this.retainedQueryData[d.bucketInstanceId]=new F(d.bucketInstanceId,b,d.sourceLayerIndex,d.index,o.tileID);let fe={bucket:d,layout:C,translationText:le,translationIcon:oe,unwrappedTileID:B,pitchedLabelPlaneMatrix:ce,scale:O,textPixelRatio:j,holdingForFade:o.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:u.ak(d.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(d.sourceID)};if(l)for(let xe of d.sortKeyRanges){let{sortKey:be,symbolInstanceStart:Ee,symbolInstanceEnd:Ce}=xe;e.push({sortKey:be,symbolInstanceStart:Ee,symbolInstanceEnd:Ce,parameters:fe})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:d.symbolInstances.length,parameters:fe})}attemptAnchorPlacement(e,r,o,l,d,b,E,C,k,O,j,B,H,X,le,oe,ce,fe,xe,be){let Ee=u.aB[e.textAnchor],Ce=[e.textOffset0,e.textOffset1],we=ue(Ee,o,l,Ce,d),Je=this.collisionIndex.placeCollisionBox(r,B,C,k,O,E,b,oe,j.predicate,xe,we,be);if((!fe||this.collisionIndex.placeCollisionBox(fe,B,C,k,O,E,b,ce,j.predicate,xe,we,be).placeable)&&Je.placeable){let Bt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID].text&&(Bt=this.prevPlacement.variableOffsets[H.crossTileID].anchor),H.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[H.crossTileID]={textOffset:Ce,width:o,height:l,anchor:Ee,textBoxScale:d,prevAnchor:Bt},this.markUsedJustification(X,Ee,H,le),X.allowVerticalPlacement&&(this.markUsedOrientation(X,le,H),this.placedOrientations[H.crossTileID]=le),{shift:we,placedGlyphBoxes:Je}}}placeLayerBucketPart(e,r,o){let{bucket:l,layout:d,translationText:b,translationIcon:E,unwrappedTileID:C,pitchedLabelPlaneMatrix:k,textPixelRatio:O,holdingForFade:j,collisionBoxArray:B,partiallyEvaluatedTextSize:H,collisionGroup:X}=e.parameters,le=d.get("text-optional"),oe=d.get("icon-optional"),ce=u.aC(d,"text-overlap","text-allow-overlap"),fe=ce==="always",xe=u.aC(d,"icon-overlap","icon-allow-overlap"),be=xe==="always",Ee=d.get("text-rotation-alignment")==="map",Ce=d.get("text-pitch-alignment")==="map",we=d.get("icon-text-fit")!=="none",Je=d.get("symbol-z-order")==="viewport-y",Bt=fe&&(be||!l.hasIconData()||oe),gt=be&&(fe||!l.hasTextData()||le);!l.collisionArrays&&B&&l.deserializeCollisionBoxes(B);let wt=this.retainedQueryData[l.bucketInstanceId].tileID,bt=this._getTerrainElevationFunc(wt),Ei=this.transform.getFastPathSimpleProjectionMatrix(wt),ti=(Jt,Zi,Ir)=>{var Dr,vn;if(r[Jt.crossTileID])return;if(j)return void(this.placements[Jt.crossTileID]=new $(!1,!1,!1));let Qr=!1,En=!1,Tn=!0,mn=null,Jr={box:null,placeable:!1,offscreen:null,occluded:!1},cs={placeable:!1},gs=null,_s=null,Zr=null,ko=0,ys=0,Do=0;Zi.textFeatureIndex?ko=Zi.textFeatureIndex:Jt.useRuntimeCollisionCircles&&(ko=Jt.featureIndex),Zi.verticalTextFeatureIndex&&(ys=Zi.verticalTextFeatureIndex);let nl=Zi.textBox;if(nl){let Ra=On=>{let Nn=u.al.horizontal;if(l.allowVerticalPlacement&&!On&&this.prevPlacement){let bs=this.prevPlacement.placedOrientations[Jt.crossTileID];bs&&(this.placedOrientations[Jt.crossTileID]=bs,Nn=bs,this.markUsedOrientation(l,Nn,Jt))}return Nn},mo=(On,Nn)=>{if(l.allowVerticalPlacement&&Jt.numVerticalGlyphVertices>0&&Zi.verticalTextBox){for(let bs of l.writingModes)if(bs===u.al.vertical?(Jr=Nn(),cs=Jr):Jr=On(),Jr&&Jr.placeable)break}else Jr=On()},to=Jt.textAnchorOffsetStartIndex,go=Jt.textAnchorOffsetEndIndex;if(go===to){let On=(Nn,bs)=>{let an=this.collisionIndex.placeCollisionBox(Nn,ce,O,wt,C,Ce,Ee,b,X.predicate,bt,void 0,Ei);return an&&an.placeable&&(this.markUsedOrientation(l,bs,Jt),this.placedOrientations[Jt.crossTileID]=bs),an};mo(()=>On(nl,u.al.horizontal),()=>{let Nn=Zi.verticalTextBox;return l.allowVerticalPlacement&&Jt.numVerticalGlyphVertices>0&&Nn?On(Nn,u.al.vertical):{box:null,offscreen:null}}),Ra(Jr&&Jr.placeable)}else{let On=u.aB[(vn=(Dr=this.prevPlacement)===null||Dr===void 0?void 0:Dr.variableOffsets[Jt.crossTileID])===null||vn===void 0?void 0:vn.anchor],Nn=(an,al,ql)=>{let Gl=an.x2-an.x1,q1=an.y2-an.y1,ol=Jt.textBoxScale,ll=we&&xe==="never"?al:null,zn=null,_o=ce==="never"?1:2,ja="never";On&&_o++;for(let Jn=0;Jn<_o;Jn++){for(let cl=to;cl<go;cl++){let ha=l.textAnchorOffsets.get(cl);if(On&&ha.textAnchor!==On)continue;let G1=this.attemptAnchorPlacement(ha,an,Gl,q1,ol,Ee,Ce,O,wt,C,X,ja,Jt,l,ql,b,E,ll,bt);if(G1&&(zn=G1.placedGlyphBoxes,zn&&zn.placeable))return Qr=!0,mn=G1.shift,zn}On?On=null:ja=ce}return o&&!zn&&(zn={box:this.collisionIndex.placeCollisionBox(nl,"always",O,wt,C,Ce,Ee,b,X.predicate,bt,void 0,Ei).box,offscreen:!1,placeable:!1,occluded:!1}),zn};mo(()=>Nn(nl,Zi.iconBox,u.al.horizontal),()=>{let an=Zi.verticalTextBox;return l.allowVerticalPlacement&&(!Jr||!Jr.placeable)&&Jt.numVerticalGlyphVertices>0&&an?Nn(an,Zi.verticalIconBox,u.al.vertical):{box:null,occluded:!0,offscreen:null}}),Jr&&(Qr=Jr.placeable,Tn=Jr.offscreen);let bs=Ra(Jr&&Jr.placeable);if(!Qr&&this.prevPlacement){let an=this.prevPlacement.variableOffsets[Jt.crossTileID];an&&(this.variableOffsets[Jt.crossTileID]=an,this.markUsedJustification(l,an.anchor,Jt,bs))}}}if(gs=Jr,Qr=gs&&gs.placeable,Tn=gs&&gs.offscreen,Jt.useRuntimeCollisionCircles){let Ra=l.text.placedSymbolArray.get(Jt.centerJustifiedTextSymbolIndex),mo=u.am(l.textSizeData,H,Ra),to=d.get("text-padding");_s=this.collisionIndex.placeCollisionCircles(ce,Ra,l.lineVertexArray,l.glyphOffsetArray,mo,C,k,o,Ce,X.predicate,Jt.collisionCircleDiameter,to,b,bt),_s.circles.length&&_s.collisionDetected&&!o&&u.w("Collisions detected, but collision boxes are not shown"),Qr=fe||_s.circles.length>0&&!_s.collisionDetected,Tn=Tn&&_s.offscreen}if(Zi.iconFeatureIndex&&(Do=Zi.iconFeatureIndex),Zi.iconBox){let Ra=mo=>this.collisionIndex.placeCollisionBox(mo,xe,O,wt,C,Ce,Ee,E,X.predicate,bt,we&&mn?mn:void 0,Ei);cs&&cs.placeable&&Zi.verticalIconBox?(Zr=Ra(Zi.verticalIconBox),En=Zr.placeable):(Zr=Ra(Zi.iconBox),En=Zr.placeable),Tn=Tn&&Zr.offscreen}let Vn=le||Jt.numHorizontalGlyphVertices===0&&Jt.numVerticalGlyphVertices===0,Pn=oe||Jt.numIconVertices===0;Vn||Pn?Pn?Vn||(En=En&&Qr):Qr=En&&Qr:En=Qr=En&&Qr;let sl=En&&Zr.placeable;if(Qr&&gs.placeable&&this.collisionIndex.insertCollisionBox(gs.box,ce,d.get("text-ignore-placement"),l.bucketInstanceId,cs&&cs.placeable&&ys?ys:ko,X.ID),sl&&this.collisionIndex.insertCollisionBox(Zr.box,xe,d.get("icon-ignore-placement"),l.bucketInstanceId,Do,X.ID),_s&&Qr&&this.collisionIndex.insertCollisionCircles(_s.circles,ce,d.get("text-ignore-placement"),l.bucketInstanceId,ko,X.ID),o&&this.storeCollisionData(l.bucketInstanceId,Ir,Zi,gs,Zr,_s),Jt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(l.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Jt.crossTileID]=new $((Qr||Bt)&&!gs?.occluded,(En||gt)&&!Zr?.occluded,Tn||l.justReloaded),r[Jt.crossTileID]=!0};if(Je){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let Jt=l.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Zi=Jt.length-1;Zi>=0;--Zi){let Ir=Jt[Zi];ti(l.symbolInstances.get(Ir),l.collisionArrays[Ir],Ir)}}else for(let Jt=e.symbolInstanceStart;Jt<e.symbolInstanceEnd;Jt++)ti(l.symbolInstances.get(Jt),l.collisionArrays[Jt],Jt);l.justReloaded=!1}storeCollisionData(e,r,o,l,d,b){if(o.textBox||o.iconBox){let E,C;this.collisionBoxArrays.has(e)?E=this.collisionBoxArrays.get(e):(E=new Map,this.collisionBoxArrays.set(e,E)),E.has(r)?C=E.get(r):(C={text:null,icon:null},E.set(r,C)),o.textBox&&(C.text=l.box),o.iconBox&&(C.icon=d.box)}if(b){let E=this.collisionCircleArrays[e];E===void 0&&(E=this.collisionCircleArrays[e]=[]);for(let C=0;C<b.circles.length;C+=4)E.push(b.circles[C+0]-V),E.push(b.circles[C+1]-V),E.push(b.circles[C+2]),E.push(b.collisionDetected?1:0)}}markUsedJustification(e,r,o,l){let d;d=l===u.al.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[u.aD(r)];let b=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];for(let E of b)E>=0&&(e.text.placedSymbolArray.get(E).crossTileID=d>=0&&E!==d?0:o.crossTileID)}markUsedOrientation(e,r,o){let l=r===u.al.horizontal||r===u.al.horizontalOnly?r:0,d=r===u.al.vertical?r:0,b=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];for(let E of b)e.text.placedSymbolArray.get(E).placedOrientation=l;o.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=d)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;let r=this.prevPlacement,o=!1;this.prevZoomAdjustment=r?r.zoomAdjustment(this.transform.zoom):0;let l=r?r.symbolFadeChange(e):1,d=r?r.opacities:{},b=r?r.variableOffsets:{},E=r?r.placedOrientations:{};for(let C in this.placements){let k=this.placements[C],O=d[C];O?(this.opacities[C]=new Q(O,l,k.text,k.icon),o=o||k.text!==O.text.placed||k.icon!==O.icon.placed):(this.opacities[C]=new Q(null,l,k.text,k.icon,k.skipFade),o=o||k.text||k.icon)}for(let C in d){let k=d[C];if(!this.opacities[C]){let O=new Q(k,l,!1,!1);O.isHidden()||(this.opacities[C]=O,o=o||k.text.placed||k.icon.placed)}}for(let C in b)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=b[C]);for(let C in E)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=E[C]);if(r&&r.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");o?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=r?r.lastPlacementChangeTime:e)}updateLayerOpacities(e,r){let o={};for(let l of r){let d=l.getBucket(e);d&&l.latestFeatureIndex&&e.id===d.layerIds[0]&&this.updateBucketOpacities(d,l.tileID,o,l.collisionBoxArray)}}updateBucketOpacities(e,r,o,l){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();let d=e.layers[0],b=d.layout,E=new Q(null,0,!1,!1,!0),C=b.get("text-allow-overlap"),k=b.get("icon-allow-overlap"),O=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),j=b.get("text-rotation-alignment")==="map",B=b.get("text-pitch-alignment")==="map",H=b.get("icon-text-fit")!=="none",X=new Q(null,0,C&&(k||!e.hasIconData()||b.get("icon-optional")),k&&(C||!e.hasTextData()||b.get("text-optional")),!0);!e.collisionArrays&&l&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(l);let le=(ce,fe,xe)=>{for(let be=0;be<fe/4;be++)ce.opacityVertexArray.emplaceBack(xe);ce.hasVisibleVertices=ce.hasVisibleVertices||xe!==Mi},oe=this.collisionBoxArrays.get(e.bucketInstanceId);for(let ce=0;ce<e.symbolInstances.length;ce++){let fe=e.symbolInstances.get(ce),{numHorizontalGlyphVertices:xe,numVerticalGlyphVertices:be,crossTileID:Ee}=fe,Ce=this.opacities[Ee];o[Ee]?Ce=E:Ce||(Ce=X,this.opacities[Ee]=Ce),o[Ee]=!0;let we=fe.numIconVertices>0,Je=this.placedOrientations[fe.crossTileID],Bt=Je===u.al.vertical,gt=Je===u.al.horizontal||Je===u.al.horizontalOnly;if(xe>0||be>0){let bt=Ci(Ce.text);le(e.text,xe,Bt?Mi:bt),le(e.text,be,gt?Mi:bt);let Ei=Ce.text.isHidden();[fe.rightJustifiedTextSymbolIndex,fe.centerJustifiedTextSymbolIndex,fe.leftJustifiedTextSymbolIndex].forEach(Zi=>{Zi>=0&&(e.text.placedSymbolArray.get(Zi).hidden=Ei||Bt?1:0)}),fe.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(fe.verticalPlacedTextSymbolIndex).hidden=Ei||gt?1:0);let ti=this.variableOffsets[fe.crossTileID];ti&&this.markUsedJustification(e,ti.anchor,fe,Je);let Jt=this.placedOrientations[fe.crossTileID];Jt&&(this.markUsedJustification(e,"left",fe,Jt),this.markUsedOrientation(e,Jt,fe))}if(we){let bt=Ci(Ce.icon),Ei=!(H&&fe.verticalPlacedIconSymbolIndex&&Bt);fe.placedIconSymbolIndex>=0&&(le(e.icon,fe.numIconVertices,Ei?bt:Mi),e.icon.placedSymbolArray.get(fe.placedIconSymbolIndex).hidden=Ce.icon.isHidden()),fe.verticalPlacedIconSymbolIndex>=0&&(le(e.icon,fe.numVerticalIconVertices,Ei?Mi:bt),e.icon.placedSymbolArray.get(fe.verticalPlacedIconSymbolIndex).hidden=Ce.icon.isHidden())}let wt=oe&&oe.has(ce)?oe.get(ce):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){let bt=e.collisionArrays[ce];if(bt){let Ei=new u.P(0,0);if(bt.textBox||bt.verticalTextBox){let ti=!0;if(O){let Jt=this.variableOffsets[Ee];Jt?(Ei=ue(Jt.anchor,Jt.width,Jt.height,Jt.textOffset,Jt.textBoxScale),j&&Ei._rotate(B?-this.transform.bearingInRadians:this.transform.bearingInRadians)):ti=!1}if(bt.textBox||bt.verticalTextBox){let Jt;bt.textBox&&(Jt=Bt),bt.verticalTextBox&&(Jt=gt),ve(e.textCollisionBox.collisionVertexArray,Ce.text.placed,!ti||Jt,wt.text,Ei.x,Ei.y)}}if(bt.iconBox||bt.verticalIconBox){let ti=!!(!gt&&bt.verticalIconBox),Jt;bt.iconBox&&(Jt=ti),bt.verticalIconBox&&(Jt=!ti),ve(e.iconCollisionBox.collisionVertexArray,Ce.icon.placed,Jt,wt.icon,H?Ei.x:0,H?Ei.y:0)}}}}if(e.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);e.bucketInstanceId in this.collisionCircleArrays&&(e.collisionCircleArray=this.collisionCircleArrays[e.bucketInstanceId],delete this.collisionCircleArrays[e.bucketInstanceId])}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,r){let o=this.zoomAtLastRecencyCheck===r?1-this.zoomAdjustment(r):1;return this.zoomAtLastRecencyCheck=r,this.commitTime+this.fadeDuration*o>e}setStale(){this.stale=!0}}function ve(h,e,r,o,l,d){o&&o.length!==0||(o=[0,0,0,0]);let b=o[0]-V,E=o[1]-V,C=o[2]-V,k=o[3]-V;h.emplaceBack(e?1:0,r?1:0,l||0,d||0,b,E),h.emplaceBack(e?1:0,r?1:0,l||0,d||0,C,E),h.emplaceBack(e?1:0,r?1:0,l||0,d||0,C,k),h.emplaceBack(e?1:0,r?1:0,l||0,d||0,b,k)}let Ie=Math.pow(2,25),Me=Math.pow(2,24),Ut=Math.pow(2,17),jt=Math.pow(2,16),Zt=Math.pow(2,9),ei=Math.pow(2,8),xi=Math.pow(2,1);function Ci(h){if(h.opacity===0&&!h.placed)return 0;if(h.opacity===1&&h.placed)return 4294967295;let e=h.placed?1:0,r=Math.floor(127*h.opacity);return r*Ie+e*Me+r*Ut+e*jt+r*Zt+e*ei+r*xi+e}let Mi=0;class We{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,r,o,l,d){let b=this._bucketParts;for(;this._currentTileIndex<e.length;)if(r.getBucketParts(b,l,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,d())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort((E,C)=>E.sortKey-C.sortKey));this._currentPartIndex<b.length;)if(r.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,o),this._currentPartIndex++,d())return!0;return!1}}class Wi{constructor(e,r,o,l,d,b,E,C){this.placement=new ze(e,r,b,E,C),this._currentPlacementIndex=o.length-1,this._forceFullPlacement=l,this._showCollisionBoxes=d,this._done=!1}isDone(){return this._done}continuePlacement(e,r,o){let l=Vt.now(),d=()=>!this._forceFullPlacement&&Vt.now()-l>2;for(;this._currentPlacementIndex>=0;){let b=r[e[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=E)&&(!b.maxzoom||b.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new We(b)),this._inProgressLayer.continuePlacement(o[b.source],this.placement,this._showCollisionBoxes,b,d))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}let Li=512/u.Z/2;class Ht{constructor(e,r,o){this.tileID=e,this.bucketInstanceId=o,this._symbolsByKey={};let l=new Map;for(let d=0;d<r.length;d++){let b=r.get(d),E=b.key,C=l.get(E);C?C.push(b):l.set(E,[b])}for(let[d,b]of l){let E={positions:b.map(C=>({x:Math.floor(C.anchorX*Li),y:Math.floor(C.anchorY*Li)})),crossTileIDs:b.map(C=>C.crossTileID)};if(E.positions.length>128){let C=new u.aF(E.positions.length,16,Uint16Array);for(let{x:k,y:O}of E.positions)C.add(k,O);C.finish(),delete E.positions,E.index=C}this._symbolsByKey[d]=E}}getScaledCoordinates(e,r){let{x:o,y:l,z:d}=this.tileID.canonical,{x:b,y:E,z:C}=r.canonical,k=Li/Math.pow(2,C-d),O=(E*u.Z+e.anchorY)*k,j=l*u.Z*Li;return{x:Math.floor((b*u.Z+e.anchorX)*k-o*u.Z*Li),y:Math.floor(O-j)}}findMatches(e,r,o){let l=this.tileID.canonical.z<r.canonical.z?1:Math.pow(2,this.tileID.canonical.z-r.canonical.z);for(let d=0;d<e.length;d++){let b=e.get(d);if(b.crossTileID)continue;let E=this._symbolsByKey[b.key];if(!E)continue;let C=this.getScaledCoordinates(b,r);if(E.index){let k=E.index.range(C.x-l,C.y-l,C.x+l,C.y+l).sort();for(let O of k){let j=E.crossTileIDs[O];if(!o[j]){o[j]=!0,b.crossTileID=j;break}}}else if(E.positions)for(let k=0;k<E.positions.length;k++){let O=E.positions[k],j=E.crossTileIDs[k];if(Math.abs(O.x-C.x)<=l&&Math.abs(O.y-C.y)<=l&&!o[j]){o[j]=!0,b.crossTileID=j;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:e})=>e)}}class or{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class vr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){let r=Math.round((e-this.lng)/360);if(r!==0)for(let o in this.indexes){let l=this.indexes[o],d={};for(let b in l){let E=l[b];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+r),d[E.tileID.key]=E}this.indexes[o]=d}this.lng=e}addBucket(e,r,o){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===r.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let d=0;d<r.symbolInstances.length;d++)r.symbolInstances.get(d).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});let l=this.usedCrossTileIDs[e.overscaledZ];for(let d in this.indexes){let b=this.indexes[d];if(Number(d)>e.overscaledZ)for(let E in b){let C=b[E];C.tileID.isChildOf(e)&&C.findMatches(r.symbolInstances,e,l)}else{let E=b[e.scaledTo(Number(d)).key];E&&E.findMatches(r.symbolInstances,e,l)}}for(let d=0;d<r.symbolInstances.length;d++){let b=r.symbolInstances.get(d);b.crossTileID||(b.crossTileID=o.generate(),l[b.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Ht(e,r.symbolInstances,r.bucketInstanceId),!0}removeBucketCrossTileIDs(e,r){for(let o of r.getCrossTileIDsLists())for(let l of o)delete this.usedCrossTileIDs[e][l]}removeStaleBuckets(e){let r=!1;for(let o in this.indexes){let l=this.indexes[o];for(let d in l)e[l[d].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,l[d]),delete l[d],r=!0)}return r}}class dn{constructor(){this.layerIndexes={},this.crossTileIDs=new or,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,r,o){let l=this.layerIndexes[e.id];l===void 0&&(l=this.layerIndexes[e.id]=new vr);let d=!1,b={};l.handleWrapJump(o);for(let E of r){let C=E.getBucket(e);C&&e.id===C.layerIds[0]&&(C.bucketInstanceId||(C.bucketInstanceId=++this.maxBucketInstanceId),l.addBucket(E.tileID,C,this.crossTileIDs)&&(d=!0),b[C.bucketInstanceId]=!0)}return l.removeStaleBuckets(b)&&(d=!0),d}pruneUnusedLayers(e){let r={};e.forEach(o=>{r[o]=!0});for(let o in this.layerIndexes)r[o]||delete this.layerIndexes[o]}}var qr="void main() {fragColor=vec4(1.0);}";let hr={prelude:lr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:lr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:lr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:lr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:lr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:lr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:lr(qr,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:lr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:lr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:lr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:lr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:lr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:lr(qr,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:lr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:lr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:lr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:lr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:lr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:lr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:lr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:lr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:lr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:lr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:lr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:lr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:lr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:lr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:lr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:lr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:lr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:lr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:lr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:lr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function lr(h,e){let r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,o=e.match(/in ([\w]+) ([\w]+)/g),l=h.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),d=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=d?d.concat(l):l,E={};return{fragmentSource:h=h.replace(r,(C,k,O,j,B)=>(E[B]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${B}
in ${O} ${j} ${B};
#else
uniform ${O} ${j} u_${B};
#endif
`:`
#ifdef HAS_UNIFORM_u_${B}
    ${O} ${j} ${B} = u_${B};
#endif
`)),vertexSource:e=e.replace(r,(C,k,O,j,B)=>{let H=j==="float"?"vec2":"vec4",X=B.match(/color/)?"color":H;return E[B]?k==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
in ${O} ${H} a_${B};
out ${O} ${j} ${B};
#else
uniform ${O} ${j} u_${B};
#endif
`:X==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = a_${B};
#else
    ${O} ${j} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = unpack_mix_${X}(a_${B}, u_${B}_t);
#else
    ${O} ${j} ${B} = u_${B};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
in ${O} ${H} a_${B};
#else
uniform ${O} ${j} u_${B};
#endif
`:X==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${O} ${j} ${B} = a_${B};
#else
    ${O} ${j} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${O} ${j} ${B} = unpack_mix_${X}(a_${B}, u_${B}_t);
#else
    ${O} ${j} ${B} = u_${B};
#endif
`}),staticAttributes:o,staticUniforms:b}}class pn{constructor(e,r,o){this.vertexBuffer=e,this.indexBuffer=r,this.segments=o}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Rr=u.aG([{name:"a_pos",type:"Int16",components:2}]);let Sr="#define PROJECTION_MERCATOR",sr="mercator";class Br{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return sr}get shaderDefine(){return Sr}get shaderPreludeCode(){return hr.projectionMercator}get vertexShaderPreludeCode(){return hr.projectionMercator.vertexSource}get subdivisionGranularity(){return u.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(e){}getMeshFromTileID(e,r,o,l,d){if(this._cachedMesh)return this._cachedMesh;let b=new u.aI;b.emplaceBack(0,0),b.emplaceBack(u.Z,0),b.emplaceBack(0,u.Z),b.emplaceBack(u.Z,u.Z);let E=e.createVertexBuffer(b,Rr.members),C=u.aJ.simpleSegment(0,0,4,2),k=new u.aK;k.emplaceBack(1,0,2),k.emplaceBack(1,2,3);let O=e.createIndexBuffer(k);return this._cachedMesh=new pn(E,O,C),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(e){}}class nn{constructor(e=0,r=0,o=0,l=0){if(isNaN(e)||e<0||isNaN(r)||r<0||isNaN(o)||o<0||isNaN(l)||l<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=r,this.left=o,this.right=l}interpolate(e,r,o){return r.top!=null&&e.top!=null&&(this.top=u.B.number(e.top,r.top,o)),r.bottom!=null&&e.bottom!=null&&(this.bottom=u.B.number(e.bottom,r.bottom,o)),r.left!=null&&e.left!=null&&(this.left=u.B.number(e.left,r.left,o)),r.right!=null&&e.right!=null&&(this.right=u.B.number(e.right,r.right,o)),this}getCenter(e,r){let o=u.ae((this.left+e-this.right)/2,0,e),l=u.ae((this.top+r-this.bottom)/2,0,r);return new u.P(o,l)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new nn(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fn(h,e){if(!h.renderWorldCopies||h.lngRange)return;let r=e.lng-h.center.lng;e.lng+=r>180?-360:r<-180?360:0}function ds(h){return Math.max(0,Math.floor(h))}class es{constructor(e,r,o,l,d,b){this._callbacks=e,this._tileSize=512,this._renderWorldCopies=b===void 0||!!b,this._minZoom=r||0,this._maxZoom=o||22,this._minPitch=l??0,this._maxPitch=d??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new u.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ds(this._zoom),this._scale=u.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new nn,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(e,r,o){this._latRange=e.latRange,this._lngRange=e.lngRange,this._width=e.width,this._height=e.height,this._center=e.center,this._elevation=e.elevation,this._minElevationForCurrentTile=e.minElevationForCurrentTile,this._zoom=e.zoom,this._tileZoom=ds(this._zoom),this._scale=u.ac(this._zoom),this._bearingInRadians=e.bearingInRadians,this._fovInRadians=e.fovInRadians,this._pitchInRadians=e.pitchInRadians,this._rollInRadians=e.rollInRadians,this._unmodified=e.unmodified,this._edgeInsets=new nn(e.padding.top,e.padding.bottom,e.padding.left,e.padding.right),this._minZoom=e.minZoom,this._maxZoom=e.maxZoom,this._minPitch=e.minPitch,this._maxPitch=e.maxPitch,this._renderWorldCopies=e.renderWorldCopies,this._cameraToCenterDistance=e.cameraToCenterDistance,this._nearZ=e.nearZ,this._farZ=e.farZ,this._autoCalculateNearFarZ=!o&&e.autoCalculateNearFarZ,r&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(e){this._minElevationForCurrentTile=e}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(e){this._minZoom!==e&&(this._minZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(e){this._minPitch!==e&&(this._minPitch=e,this.setPitch(Math.max(this.pitch,e)))}get maxPitch(){return this._maxPitch}setMaxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.setPitch(Math.min(this.pitch,e)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(e){let r=u.aL(e,-180,180)*Math.PI/180;var o,l,d,b,E,C,k,O,j;this._bearingInRadians!==r&&(this._unmodified=!1,this._bearingInRadians=r,this._calcMatrices(),this._rotationMatrix=Nt(),o=this._rotationMatrix,d=-this._bearingInRadians,b=(l=this._rotationMatrix)[0],E=l[1],C=l[2],k=l[3],O=Math.sin(d),j=Math.cos(d),o[0]=b*j+C*O,o[1]=E*j+k*O,o[2]=b*-O+C*j,o[3]=E*-O+k*j)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(e){let r=u.ae(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==r&&(this._unmodified=!1,this._pitchInRadians=r,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(e){let r=e/180*Math.PI;this._rollInRadians!==r&&(this._unmodified=!1,this._rollInRadians=r,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return u.aM(this._fovInRadians)}setFov(e){e=u.ae(e,.1,150),this.fov!==e&&(this._unmodified=!1,this._fovInRadians=u.ab(e),this._calcMatrices())}get zoom(){return this._zoom}setZoom(e){let r=this.getConstrained(this._center,e).zoom;this._zoom!==r&&(this._unmodified=!1,this._zoom=r,this._tileZoom=Math.max(0,Math.floor(r)),this._scale=u.ac(r),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(e,r){this._autoCalculateNearFarZ=!1,this._nearZ=e,this._farZ=r,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,r,o){this._unmodified=!1,this._edgeInsets.interpolate(e,r,o),this._constrain(),this._calcMatrices()}resize(e,r,o=!0){this._width=e,this._height=r,o&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new on([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(e){e?(this._lngRange=[e.getWest(),e.getEast()],this._latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,u.af])}getConstrained(e,r){return this._callbacks.getConstrained(e,r)}getCameraQueryGeometry(e,r){if(r.length===1)return[r[0],e];{let o=e.x,l=e.y,d=e.x,b=e.y;for(let E of r)o=Math.min(o,E.x),l=Math.min(l,E.y),d=Math.max(d,E.x),b=Math.max(b,E.y);return[new u.P(o,l),new u.P(d,l),new u.P(d,b),new u.P(o,b),new u.P(o,l)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let e=this._unmodified,{center:r,zoom:o}=this.getConstrained(this.center,this.zoom);this.setCenter(r),this.setZoom(o),this._unmodified=e,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let e=u.ad(new Float64Array(16));u.M(e,e,[this._width/2,-this._height/2,1]),u.L(e,e,[1,-1,0]),this._clipSpaceToPixelsMatrix=e,e=u.ad(new Float64Array(16)),u.M(e,e,[1,-1,1]),u.L(e,e,[-1,-1,0]),u.M(e,e,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=e,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(e,r,o,l){let d=o!==void 0?o:this.bearing,b=l=l!==void 0?l:this.pitch,E=u.$.fromLngLat(e,r),C=-Math.cos(u.ab(b)),k=Math.sin(u.ab(b)),O=k*Math.sin(u.ab(d)),j=-k*Math.cos(u.ab(d)),B=this.elevation,H=r-B,X;C*H>=0||Math.abs(C)<.1?(X=1e4,B=r+X*C):X=-H/C;let le,oe,ce=u.aN(1,E.y),fe=0;do{if(fe+=1,fe>10)break;oe=X/ce,le=new u.$(E.x+O*oe,E.y+j*oe),ce=1/le.meterInMercatorCoordinateUnits()}while(Math.abs(X-oe*ce)>1e-12);return{center:le.toLngLat(),elevation:B,zoom:u.ah(this.height/2/Math.tan(this.fovInRadians/2)/oe/this.tileSize)}}recalculateZoomAndCenter(e){if(this.elevation-e==0)return;let r=u.ag(1,this.center.lat)*this.worldSize,o=this.cameraToCenterDistance/r,l=u.$.fromLngLat(this.center,this.elevation),d=K(this.center,this.elevation,this.pitch,this.bearing,o);this._elevation=e;let b=this.calculateCenterFromCameraLngLatAlt(d.toLngLat(),u.aN(d.z,l.y),this.bearing,this.pitch);this._elevation=b.elevation,this._center=b.center,this.setZoom(b.zoom)}getCameraPoint(){let e=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(e*Math.sin(this.rollInRadians),e*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let e=u.ag(1,this.center.lat)*this.worldSize;return K(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/e).toLngLat()}getMercatorTileCoordinates(e){if(!e)return[0,0,1,1];let r=e.canonical.z>=0?1<<e.canonical.z:Math.pow(2,e.canonical.z);return[e.canonical.x/r,e.canonical.y/r,1/r/u.Z,1/r/u.Z]}}class ln{constructor(e,r){this.min=e,this.max=r,this.center=u.aO([],u.aP([],this.min,this.max),.5)}quadrant(e){let r=[e%2==0,e<2],o=u.aQ(this.min),l=u.aQ(this.max);for(let d=0;d<r.length;d++)o[d]=r[d]?this.min[d]:this.center[d],l[d]=r[d]?this.center[d]:this.max[d];return l[2]=this.max[2],new ln(o,l)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersectsFrustum(e){let r=!0;for(let o=0;o<e.planes.length;o++){let l=this.intersectsPlane(e.planes[o]);if(l===0)return 0;l===1&&(r=!1)}return r?2:e.aabb.min[0]>this.max[0]||e.aabb.min[1]>this.max[1]||e.aabb.min[2]>this.max[2]||e.aabb.max[0]<this.min[0]||e.aabb.max[1]<this.min[1]||e.aabb.max[2]<this.min[2]?0:1}intersectsPlane(e){let r=e[3],o=e[3];for(let l=0;l<3;l++)e[l]>0?(r+=e[l]*this.min[l],o+=e[l]*this.max[l]):(o+=e[l]*this.min[l],r+=e[l]*this.max[l]);return r>=0?2:o<0?0:1}}class $e{distanceToTile2d(e,r,o,l){let d=l.distanceX([e,r]),b=l.distanceY([e,r]);return Math.hypot(d,b)}getWrap(e,r,o){return o}getTileAABB(e,r,o,l){var d,b;let E=o,C=o;if(l.terrain){let O=new u.Y(e.z,r,e.z,e.x,e.y),j=l.terrain.getMinMaxElevation(O);E=(d=j.minElevation)!==null&&d!==void 0?d:o,C=(b=j.maxElevation)!==null&&b!==void 0?b:o}let k=1<<e.z;return new ln([r+e.x/k,e.y/k,E],[r+(e.x+1)/k,(e.y+1)/k,C])}allowVariableZoom(e,r){let o=e.fov*(Math.abs(Math.cos(e.rollInRadians))*e.height+Math.abs(Math.sin(e.rollInRadians))*e.width)/e.height,l=u.ae(78.5-o/2,0,60);return!!r.terrain||e.pitch>l}allowWorldCopies(){return!0}recalculateCache(){}}class Le{constructor(e,r,o){this.points=e,this.planes=r,this.aabb=o}static fromInvProjectionMatrix(e,r=1,o=0){let l=Math.pow(2,o),d=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{let O=1/(k=u.at([],k,e))[3]/r*l;return u.aR(k,k,[O,O,1/k[3],O])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{let O=u.aS([],d[k[0]],d[k[1]]),j=u.aS([],d[k[2]],d[k[1]]),B=u.aT([],u.aU([],O,j)),H=-u.aV(B,d[k[1]]);return B.concat(H)}),E=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],C=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let k of d)for(let O=0;O<3;O++)E[O]=Math.min(E[O],k[O]),C[O]=Math.max(C[O],k[O]);return new Le(d,b,new ln(E,C))}}class wn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,r,o){return this._helper.interpolatePadding(e,r,o)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,r,o=!0){this._helper.resize(e,r,o)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,r){this._helper.overrideNearFarZ(e,r)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e,r){}constructor(e,r,o,l,d){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new es({calcMatrices:()=>{this._calcMatrices()},getConstrained:(b,E)=>this.getConstrained(b,E)},e,r,o,l,d),this._coveringTilesDetailsProvider=new $e}clone(){let e=new wn;return e.apply(this),e}apply(e,r,o){this._helper.apply(e,r,o)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(e){let r=[new u.aW(0,e)];if(this._helper._renderWorldCopies){let o=this.screenPointToMercatorCoordinate(new u.P(0,0)),l=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,0)),d=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,this._helper._height)),b=this.screenPointToMercatorCoordinate(new u.P(0,this._helper._height)),E=Math.floor(Math.min(o.x,l.x,d.x,b.x)),C=Math.floor(Math.max(o.x,l.x,d.x,b.x)),k=1;for(let O=E-k;O<=C+k;O++)O!==0&&r.push(new u.aW(O,e))}return r}getCameraFrustum(){return Le.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){let r=this.screenPointToLocation(this.centerPoint,e),o=e?e.getElevationForLngLatZoom(r,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(o)}setLocationAtPoint(e,r){let o=u.ag(this.elevation,this.center.lat),l=this.screenPointToMercatorCoordinateAtZ(r,o),d=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,o),b=u.$.fromLngLat(e),E=new u.$(b.x-(l.x-d.x),b.y-(l.y-d.y));this.setCenter(E?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(e,r){return r?this.coordinatePoint(u.$.fromLngLat(e),r.getElevationForLngLatZoom(e,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(u.$.fromLngLat(e))}screenPointToLocation(e,r){var o;return(o=this.screenPointToMercatorCoordinate(e,r))===null||o===void 0?void 0:o.toLngLat()}screenPointToMercatorCoordinate(e,r){if(r){let o=r.pointCoordinate(e);if(o!=null)return o}return this.screenPointToMercatorCoordinateAtZ(e)}screenPointToMercatorCoordinateAtZ(e,r){let o=r||0,l=[e.x,e.y,0,1],d=[e.x,e.y,1,1];u.at(l,l,this._pixelMatrixInverse),u.at(d,d,this._pixelMatrixInverse);let b=l[3],E=d[3],C=l[1]/b,k=d[1]/E,O=l[2]/b,j=d[2]/E,B=O===j?0:(o-O)/(j-O);return new u.$(u.B.number(l[0]/b,d[0]/E,B)/this.worldSize,u.B.number(C,k,B)/this.worldSize,o)}coordinatePoint(e,r=0,o=this._pixelMatrix){let l=[e.x*this.worldSize,e.y*this.worldSize,r,1];return u.at(l,l,o),new u.P(l[0]/l[3],l[1]/l[3])}getBounds(){let e=Math.max(0,this._helper._height/2-Be(this));return new on().extend(this.screenPointToLocation(new u.P(0,e))).extend(this.screenPointToLocation(new u.P(this._helper._width,e))).extend(this.screenPointToLocation(new u.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new u.P(0,this._helper._height)))}isPointOnMapSurface(e,r){return r?r.pointCoordinate(e)!=null:e.y>this.height/2-Be(this)}calculatePosMatrix(e,r=!1,o){var l;let d=(l=e.key)!==null&&l!==void 0?l:u.aX(e.wrap,e.canonical.z,e.canonical.z,e.canonical.x,e.canonical.y),b=r?this._alignedPosMatrixCache:this._posMatrixCache;if(b.has(d)){let k=b.get(d);return o?k.f32:k.f64}let E=Y(e,this.worldSize);u.N(E,r?this._alignedProjMatrix:this._viewProjMatrix,E);let C={f64:E,f32:new Float32Array(E)};return b.set(d,C),o?C.f32:C.f64}calculateFogMatrix(e){let r=e.key,o=this._fogMatrixCacheF32;if(o.has(r))return o.get(r);let l=Y(e,this.worldSize);return u.N(l,this._fogMatrix,l),o.set(r,new Float32Array(l)),o.get(r)}getConstrained(e,r){r=u.ae(+r,this.minZoom,this.maxZoom);let o={center:new u.Q(e.lng,e.lat),zoom:r},l=this._helper._lngRange;this._helper._renderWorldCopies||l!==null||(l=[-179.9999999999,180-1e-10]);let d=this.tileSize*u.ac(o.zoom),b=0,E=d,C=0,k=d,O=0,j=0,{x:B,y:H}=this.size;if(this._helper._latRange){let xe=this._helper._latRange;b=u.S(xe[1])*d,E=u.S(xe[0])*d,E-b<H&&(O=H/(E-b))}l&&(C=u.aL(u.U(l[0])*d,0,d),k=u.aL(u.U(l[1])*d,0,d),k<C&&(k+=d),k-C<B&&(j=B/(k-C)));let{x:X,y:le}=ba(d,e),oe,ce,fe=Math.max(j||0,O||0);if(fe){let xe=new u.P(j?(k+C)/2:X,O?(E+b)/2:le);return o.center=co(d,xe).wrap(),o.zoom+=u.ah(fe),o}if(this._helper._latRange){let xe=H/2;le-xe<b&&(ce=b+xe),le+xe>E&&(ce=E-xe)}if(l){let xe=(C+k)/2,be=X;this._helper._renderWorldCopies&&(be=u.aL(X,xe-d/2,xe+d/2));let Ee=B/2;be-Ee<C&&(oe=C+Ee),be+Ee>k&&(oe=k-Ee)}if(oe!==void 0||ce!==void 0){let xe=new u.P(oe??X,ce??le);o.center=co(d,xe).wrap()}return o}calculateCenterFromCameraLngLatAlt(e,r,o,l){return this._helper.calculateCenterFromCameraLngLatAlt(e,r,o,l)}_calculateNearFarZIfNeeded(e,r,o){if(!this._helper.autoCalculateNearFarZ)return;let l=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),d=e-l*this._helper._pixelPerMeter/Math.cos(r),b=l<0?d:e,E=Math.PI/2+this.pitchInRadians,C=u.ab(this.fov)*(Math.abs(Math.cos(u.ab(this.roll)))*this.height+Math.abs(Math.sin(u.ab(this.roll)))*this.width)/this.height*(.5+o.y/this.height),k=Math.sin(C)*b/Math.sin(u.ae(Math.PI-E-C,.01,Math.PI-.01)),O=Be(this),j=Math.atan(O/this._helper.cameraToCenterDistance),B=u.ab(.75),H=j>B?2*j*(.5+o.y/(2*O)):B,X=Math.sin(H)*b/Math.sin(u.ae(Math.PI-E-H,.01,Math.PI-.01)),le=Math.min(k,X);this._helper._farZ=1.01*(Math.cos(Math.PI/2-r)*le+b),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let e=this.centerOffset,r=ba(this.worldSize,this.center),o=r.x,l=r.y;this._helper._pixelPerMeter=u.ag(1,this.center.lat)*this.worldSize;let d=u.ab(Math.min(this.pitch,za)),b=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(d)),E;this._calculateNearFarZIfNeeded(b,d,e),E=new Float64Array(16),u.aY(E,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),u.an(this._invProjMatrix,E),E[8]=2*-e.x/this._helper._width,E[9]=2*e.y/this._helper._height,this._projectionMatrix=u.aZ(E),u.M(E,E,[1,-1,1]),u.L(E,E,[0,0,-this._helper.cameraToCenterDistance]),u.a_(E,E,-this.rollInRadians),u.a$(E,E,this.pitchInRadians),u.a_(E,E,-this.bearingInRadians),u.L(E,E,[-o,-l,0]),this._mercatorMatrix=u.M([],E,[this.worldSize,this.worldSize,this.worldSize]),u.M(E,E,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=u.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,E),u.L(E,E,[0,0,-this.elevation]),this._viewProjMatrix=E,this._invViewProjMatrix=u.an([],E);let C=[0,0,-1,1];u.at(C,C,this._invViewProjMatrix),this._cameraPosition=[C[0]/C[3],C[1]/C[3],C[2]/C[3]],this._fogMatrix=new Float64Array(16),u.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,b,this._helper._farZ),this._fogMatrix[8]=2*-e.x/this.width,this._fogMatrix[9]=2*e.y/this.height,u.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),u.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),u.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),u.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),u.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),u.L(this._fogMatrix,this._fogMatrix,[-o,-l,0]),u.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),u.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=u.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,E);let k=this._helper._width%2/2,O=this._helper._height%2/2,j=Math.cos(this.bearingInRadians),B=Math.sin(-this.bearingInRadians),H=o-Math.round(o)+j*k+B*O,X=l-Math.round(l)+j*O+B*k,le=new Float64Array(E);if(u.L(le,le,[H>.5?H-1:H,X>.5?X-1:X,0]),this._alignedProjMatrix=le,E=u.an(new Float64Array(16),this._pixelMatrix),!E)throw new Error("failed to invert matrix");this._pixelMatrixInverse=E,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let e=this.screenPointToMercatorCoordinate(new u.P(0,0)),r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return u.at(r,r,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let e=u.ag(1,this.center.lat)*this.worldSize;return K(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/e).toLngLat()}lngLatToCameraDepth(e,r){let o=u.$.fromLngLat(e),l=[o.x*this.worldSize,o.y*this.worldSize,r,1];return u.at(l,l,this._viewProjMatrix),l[2]/l[3]}getProjectionData(e){let{overscaledTileID:r,aligned:o,applyTerrainMatrix:l}=e,d=this._helper.getMercatorTileCoordinates(r),b=r?this.calculatePosMatrix(r,o,!0):null,E;return E=r&&r.terrainRttPosMatrix32f&&l?r.terrainRttPosMatrix32f:b||u.b0(),{mainMatrix:E,tileMercatorCoords:d,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:E}}isLocationOccluded(e){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(e,r,o){return 1}transformLightDirection(e){return u.aQ(e)}getRayDirectionFromPixel(e){throw new Error("Not implemented.")}projectTileCoordinates(e,r,o,l){let d=this.calculatePosMatrix(o),b;l?(b=[e,r,l(e,r),1],u.at(b,b,d)):(b=[e,r,0,1],D(b,b,d));let E=b[3];return{point:new u.P(b[0]/E,b[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}populateCache(e){for(let r of e)this.calculatePosMatrix(r)}getMatrixForModel(e,r){let o=u.$.fromLngLat(e,r),l=o.meterInMercatorCoordinateUnits(),d=u.b1();return u.L(d,d,[o.x,o.y,o.z]),u.a_(d,d,Math.PI),u.a$(d,d,Math.PI/2),u.M(d,d,[-l,l,l]),d}getProjectionDataForCustomLayer(e=!0){let r=new u.Y(0,0,0,0,0),o=this.getProjectionData({overscaledTileID:r,applyGlobeMatrix:e}),l=Y(r,this.worldSize);u.N(l,this._viewProjMatrix,l),o.tileMercatorCoords=[0,0,1,1];let d=[u.Z,u.Z,this.worldSize/this._helper.pixelsPerMeter],b=u.b2();return u.M(b,l,d),o.fallbackMatrix=b,o.mainMatrix=b,o}getFastPathSimpleProjectionMatrix(e){return this.calculatePosMatrix(e)}}function Ue(){u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Ze(h){if(h.useSlerp)if(h.k<1){let e=u.b3(h.startEulerAngles.roll,h.startEulerAngles.pitch,h.startEulerAngles.bearing),r=u.b3(h.endEulerAngles.roll,h.endEulerAngles.pitch,h.endEulerAngles.bearing),o=new Float64Array(4);u.b4(o,e,r,h.k);let l=u.b5(o);h.tr.setRoll(l.roll),h.tr.setPitch(l.pitch),h.tr.setBearing(l.bearing)}else h.tr.setRoll(h.endEulerAngles.roll),h.tr.setPitch(h.endEulerAngles.pitch),h.tr.setBearing(h.endEulerAngles.bearing);else h.tr.setRoll(u.B.number(h.startEulerAngles.roll,h.endEulerAngles.roll,h.k)),h.tr.setPitch(u.B.number(h.startEulerAngles.pitch,h.endEulerAngles.pitch,h.k)),h.tr.setBearing(u.B.number(h.startEulerAngles.bearing,h.endEulerAngles.bearing,h.k))}function qe(h,e,r,o,l){let d=l.padding,b=ba(l.worldSize,r.getNorthWest()),E=ba(l.worldSize,r.getNorthEast()),C=ba(l.worldSize,r.getSouthEast()),k=ba(l.worldSize,r.getSouthWest()),O=u.ab(-o),j=b.rotate(O),B=E.rotate(O),H=C.rotate(O),X=k.rotate(O),le=new u.P(Math.max(j.x,B.x,X.x,H.x),Math.max(j.y,B.y,X.y,H.y)),oe=new u.P(Math.min(j.x,B.x,X.x,H.x),Math.min(j.y,B.y,X.y,H.y)),ce=le.sub(oe),fe=(l.width-(d.left+d.right+e.left+e.right))/ce.x,xe=(l.height-(d.top+d.bottom+e.top+e.bottom))/ce.y;if(xe<0||fe<0)return void Ue();let be=Math.min(u.ah(l.scale*Math.min(fe,xe)),h.maxZoom),Ee=u.P.convert(h.offset),Ce=new u.P((e.left-e.right)/2,(e.top-e.bottom)/2).rotate(u.ab(o)),we=Ee.add(Ce).mult(l.scale/u.ac(be));return{center:co(l.worldSize,b.add(C).div(2).sub(we)),zoom:be,bearing:o}}class et{get useGlobeControls(){return!1}handlePanInertia(e,r){return{easingOffset:e,easingCenter:r.center}}handleMapControlsRollPitchBearingZoom(e,r){e.bearingDelta&&r.setBearing(r.bearing+e.bearingDelta),e.pitchDelta&&r.setPitch(r.pitch+e.pitchDelta),e.rollDelta&&r.setRoll(r.roll+e.rollDelta),e.zoomDelta&&r.setZoom(r.zoom+e.zoomDelta)}handleMapControlsPan(e,r,o){e.around.distSqr(r.centerPoint)<.01||r.setLocationAtPoint(o,e.around)}cameraForBoxAndBearing(e,r,o,l,d){return qe(e,r,o,l,d)}handleJumpToCenterZoom(e,r){e.zoom!==(r.zoom!==void 0?+r.zoom:e.zoom)&&e.setZoom(+r.zoom),r.center!==void 0&&e.setCenter(u.Q.convert(r.center))}handleEaseTo(e,r){let o=e.zoom,l=e.padding,d={roll:e.roll,pitch:e.pitch,bearing:e.bearing},b={roll:r.roll===void 0?e.roll:r.roll,pitch:r.pitch===void 0?e.pitch:r.pitch,bearing:r.bearing===void 0?e.bearing:r.bearing},E=r.zoom!==void 0,C=!e.isPaddingEqual(r.padding),k=!1,O=E?+r.zoom:e.zoom,j=e.centerPoint.add(r.offsetAsPoint),B=e.screenPointToLocation(j),{center:H,zoom:X}=e.getConstrained(u.Q.convert(r.center||B),O??o);Fn(e,H);let le=ba(e.worldSize,B),oe=ba(e.worldSize,H).sub(le),ce=u.ac(X-o);return k=X!==o,{easeFunc:fe=>{if(k&&e.setZoom(u.B.number(o,X,fe)),u.b6(d,b)||Ze({startEulerAngles:d,endEulerAngles:b,tr:e,k:fe,useSlerp:d.roll!=b.roll}),C&&(e.interpolatePadding(l,r.padding,fe),j=e.centerPoint.add(r.offsetAsPoint)),r.around)e.setLocationAtPoint(r.around,r.aroundPoint);else{let xe=u.ac(e.zoom-o),be=X>o?Math.min(2,ce):Math.max(.5,ce),Ee=Math.pow(be,1-fe),Ce=co(e.worldSize,le.add(oe.mult(fe*Ee)).mult(xe));e.setLocationAtPoint(e.renderWorldCopies?Ce.wrap():Ce,j)}},isZooming:k,elevationCenter:H}}handleFlyTo(e,r){let o=r.zoom!==void 0,l=e.zoom,d=e.getConstrained(u.Q.convert(r.center||r.locationAtOffset),o?+r.zoom:l),b=d.center,E=d.zoom;Fn(e,b);let C=ba(e.worldSize,r.locationAtOffset),k=ba(e.worldSize,b).sub(C),O=k.mag(),j=u.ac(E-l),B;if(r.minZoom!==void 0){let H=Math.min(+r.minZoom,l,E),X=e.getConstrained(b,H).zoom;B=u.ac(X-l)}return{easeFunc:(H,X,le,oe)=>{e.setZoom(H===1?E:l+u.ah(X));let ce=H===1?b:co(e.worldSize,C.add(k.mult(le)).mult(X));e.setLocationAtPoint(e.renderWorldCopies?ce.wrap():ce,oe)},scaleOfZoom:j,targetCenter:b,scaleOfMinZoom:B,pixelPathLength:O}}}class Pe{constructor(e,r,o){this.blendFunction=e,this.blendColor=r,this.mask=o}}Pe.Replace=[1,0],Pe.disabled=new Pe(Pe.Replace,u.b7.transparent,[!1,!1,!1,!1]),Pe.unblended=new Pe(Pe.Replace,u.b7.transparent,[!0,!0,!0,!0]),Pe.alphaBlended=new Pe([1,771],u.b7.transparent,[!0,!0,!0,!0]);let Rn=2305;class Or{constructor(e,r,o){this.enable=e,this.mode=r,this.frontFace=o}}Or.disabled=new Or(!1,1029,Rn),Or.backCCW=new Or(!0,1029,Rn),Or.frontCCW=new Or(!0,1028,Rn);class xr{constructor(e,r,o){this.func=e,this.mask=r,this.range=o}}xr.ReadOnly=!1,xr.ReadWrite=!0,xr.disabled=new xr(519,xr.ReadOnly,[0,1]);let _l=7680;class Fe{constructor(e,r,o,l,d,b){this.test=e,this.ref=r,this.mask=o,this.fail=l,this.depthFail=d,this.pass=b}}Fe.disabled=new Fe({func:519,mask:0},0,0,_l,_l,_l);let rt=new WeakMap;function Ve(h){var e;if(rt.has(h))return rt.get(h);{let r=(e=h.getParameter(h.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return rt.set(h,r),r}}class Lt{get awaitingQuery(){return!!this._readbackQueue}constructor(e){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=e;let r=e.context,o=r.gl;this._texFormat=o.RGBA,this._texType=o.UNSIGNED_BYTE;let l=new u.aI;l.emplaceBack(-1,-1),l.emplaceBack(2,-1),l.emplaceBack(-1,2);let d=new u.aK;d.emplaceBack(0,1,2),this._fullscreenTriangle=new pn(r.createVertexBuffer(l,Rr.members),r.createIndexBuffer(d),u.aJ.simpleSegment(0,0,l.length,d.length)),this._resultBuffer=new Uint8Array(4),r.activeTexture.set(o.TEXTURE1);let b=o.createTexture();o.bindTexture(o.TEXTURE_2D,b),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texImage2D(o.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=r.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(b),Ve(o)&&(this._pbo=o.createBuffer(),o.bindBuffer(o.PIXEL_PACK_BUFFER,this._pbo),o.bufferData(o.PIXEL_PACK_BUFFER,4,o.STREAM_READ),o.bindBuffer(o.PIXEL_PACK_BUFFER,null))}destroy(){let e=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),e.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(e,r){let o=this._updateCount;return this._readbackQueue?o>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():o>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(e,r),this._updateCount++,this._measuredError}_bindFramebuffer(){let e=this._cachedRenderContext.context,r=e.gl;e.activeTexture.set(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,this._fbo.colorAttachment.get()),e.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(e,r){let o=this._cachedRenderContext.context,l=o.gl;if(this._bindFramebuffer(),o.viewport.set([0,0,this._texWidth,this._texHeight]),o.clear({color:u.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(o,l.TRIANGLES,xr.disabled,Fe.disabled,Pe.unblended,Or.disabled,((d,b)=>({u_input:d,u_output_expected:b}))(e,r),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ve(l)){l.bindBuffer(l.PIXEL_PACK_BUFFER,this._pbo),l.readBuffer(l.COLOR_ATTACHMENT0),l.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),l.bindBuffer(l.PIXEL_PACK_BUFFER,null);let d=l.fenceSync(l.SYNC_GPU_COMMANDS_COMPLETE,0);l.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:d}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let e=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ve(e)){let r=e.clientWaitSync(this._readbackQueue.sync,0,0);if(r===e.WAIT_FAILED)return u.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(r===e.TIMEOUT_EXPIRED)return;e.bindBuffer(e.PIXEL_PACK_BUFFER,this._pbo),e.getBufferSubData(e.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),e.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Lt._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(e){let r=0;return r+=e[0]/256,r+=e[1]/65536,r+=e[2]/16777216,e[3]<127&&(r=-r),r/128}}let Xe=u.Z/128;function yt(h,e){let r=h.granularity!==void 0?Math.max(h.granularity,1):1,o=r+(h.generateBorders?2:0),l=r+(h.extendToNorthPole||h.generateBorders?1:0)+(h.extendToSouthPole||h.generateBorders?1:0),d=o+1,b=l+1,E=h.generateBorders?-1:0,C=h.generateBorders||h.extendToNorthPole?-1:0,k=r+(h.generateBorders?1:0),O=r+(h.generateBorders||h.extendToSouthPole?1:0),j=d*b,B=o*l*6,H=d*b>65536;if(H&&e==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let X=H||e==="32bit",le=new Int16Array(2*j),oe=0;for(let xe=C;xe<=O;xe++)for(let be=E;be<=k;be++){let Ee=be/r*u.Z;be===-1&&(Ee=-64),be===r+1&&(Ee=u.Z+Xe);let Ce=xe/r*u.Z;xe===-1&&(Ce=h.extendToNorthPole?u.b9:-64),xe===r+1&&(Ce=h.extendToSouthPole?u.ba:u.Z+Xe),le[oe++]=Ee,le[oe++]=Ce}let ce=X?new Uint32Array(B):new Uint16Array(B),fe=0;for(let xe=0;xe<l;xe++)for(let be=0;be<o;be++){let Ee=be+1+xe*d,Ce=be+(xe+1)*d,we=be+1+(xe+1)*d;ce[fe++]=be+xe*d,ce[fe++]=Ce,ce[fe++]=Ee,ce[fe++]=Ee,ce[fe++]=Ce,ce[fe++]=we}return{vertices:le.buffer.slice(0),indices:ce.buffer.slice(0),uses32bitIndices:X}}let Tt=new u.aH({fill:new u.bb(128,2),line:new u.bb(512,0),tile:new u.bb(128,32),stencil:new u.bb(128,1),circle:3});class He{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return hr.projectionGlobe}get vertexShaderPreludeCode(){return hr.projectionMercator.vertexSource}get subdivisionGranularity(){return Tt}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(e){this._errorMeasurement||(this._errorMeasurement=new Lt(e));let r=u.S(this._errorQueryLatitudeDegrees),o=2*Math.atan(Math.exp(Math.PI-r*Math.PI*2))-.5*Math.PI,l=this._errorMeasurement.updateErrorLoop(r,o),d=Vt.now();l!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=l,this._errorMeasurementLastChangeTime=d);let b=Math.min(Math.max((d-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=u.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,u.bd(b))}_getMeshKey(e){return`${e.granularity.toString(36)}_${e.generateBorders?"b":""}${e.extendToNorthPole?"n":""}${e.extendToSouthPole?"s":""}`}getMeshFromTileID(e,r,o,l,d){let b=(d==="stencil"?Tt.stencil:Tt.tile).getGranularityForZoomLevel(r.z);return this._getMesh(e,{granularity:b,generateBorders:o,extendToNorthPole:r.y===0&&l,extendToSouthPole:r.y===(1<<r.z)-1&&l})}_getMesh(e,r){let o=this._getMeshKey(r);if(o in this._tileMeshCache)return this._tileMeshCache[o];let l=function(d,b){let E=yt(b,"16bit"),C=u.aI.deserialize({arrayBuffer:E.vertices,length:E.vertices.byteLength/2/2}),k=u.aK.deserialize({arrayBuffer:E.indices,length:E.indices.byteLength/2/3});return new pn(d.createVertexBuffer(C,Rr.members),d.createIndexBuffer(k),u.aJ.simpleSegment(0,0,C.length,k.length))}(e,r);return this._tileMeshCache[o]=l,l}recalculate(e){}hasTransition(){let e=Vt.now(),r=!1;return r=r||(e-this._errorMeasurementLastChangeTime)/1e3<.7,r=r||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,r}setErrorQueryLatitudeDegrees(e){this._errorQueryLatitudeDegrees=e}}let Ot=new u.r({type:new u.D(u.v.projection.type)});class Mt extends u.E{constructor(e){super(),this._transitionable=new u.T(Ot),this.setProjection(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.C(0)),this._mercatorProjection=new Br,this._verticalPerspectiveProjection=new He}get transitionState(){let e=this.properties.get("type");if(typeof e=="string"&&e==="mercator")return 0;if(typeof e=="string"&&e==="vertical-perspective")return 1;if(e instanceof u.be){if(e.from==="vertical-perspective"&&e.to==="mercator")return 1-e.transition;if(e.from==="mercator"&&e.to==="vertical-perspective")return e.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(e){this._mercatorProjection.updateGPUdependent(e),this._verticalPerspectiveProjection.updateGPUdependent(e)}getMeshFromTileID(e,r,o,l,d){return this.currentProjection.getMeshFromTileID(e,r,o,l,d)}setProjection(e){this._transitionable.setValue("type",e?.type||"mercator")}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}setErrorQueryLatitudeDegrees(e){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(e),this._mercatorProjection.setErrorQueryLatitudeDegrees(e)}}function At(h){let e=ot(h.worldSize,h.center.lat);return 2*Math.PI*e}function Ge(h,e,r,o,l){let d=1/(1<<l),b=e/u.Z*d+o*d,E=u.bg((h/u.Z*d+r*d)*Math.PI*2+Math.PI,2*Math.PI),C=2*Math.atan(Math.exp(Math.PI-b*Math.PI*2))-.5*Math.PI,k=Math.cos(C),O=new Float64Array(3);return O[0]=Math.sin(E)*k,O[1]=Math.sin(C),O[2]=Math.cos(E)*k,O}function Ye(h){return function(e,r){let o=Math.cos(r),l=new Float64Array(3);return l[0]=Math.sin(e)*o,l[1]=Math.sin(r),l[2]=Math.cos(e)*o,l}(h.lng*Math.PI/180,h.lat*Math.PI/180)}function ot(h,e){return h/(2*Math.PI)/Math.cos(e*Math.PI/180)}function Ct(h){let e=Math.asin(h[1])/Math.PI*180,r=Math.sqrt(h[0]*h[0]+h[2]*h[2]);if(r>1e-6){let o=h[0]/r,l=Math.acos(h[2]/r),d=(o>0?l:-l)/Math.PI*180;return new u.Q(u.aL(d,-180,180),e)}return new u.Q(0,e)}function Et(h){return Math.cos(h*Math.PI/180)}function dt(h,e){let r=Et(h),o=Et(e);return u.ah(o/r)}function Pt(h,e){let r=h.rotate(e.bearingInRadians),o=e.zoom+dt(e.center.lat,0),l=u.bc(1/Et(e.center.lat),1/Et(Math.min(Math.abs(e.center.lat),60)),u.bf(o,7,3,0,1)),d=360/At({worldSize:e.worldSize,center:{lat:e.center.lat}});return new u.Q(e.center.lng-r.x*d*l,u.ae(e.center.lat+r.y*d,-85.051129,u.af))}function Rt(h){let e=.5*h,r=Math.sin(e),o=Math.cos(e);return Math.log(r+o)-Math.log(o-r)}function ft(h,e,r,o){let l=h.lat+r*o;if(Math.abs(r)>1){let d=(Math.sign(h.lat+r)!==Math.sign(h.lat)?-Math.abs(h.lat):Math.abs(h.lat))*Math.PI/180,b=Math.abs(h.lat+r)*Math.PI/180,E=Rt(d+o*(b-d)),C=Rt(d),k=Rt(b);return new u.Q(h.lng+e*((E-C)/(k-C)),l)}return new u.Q(h.lng+e*o,l)}class mt{constructor(e){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=e}recalculateCache(){if(!this._hadAnyChanges)return;let e=this._cachePrevious;this._cachePrevious=this._cache,this._cache=e,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(e,r,o,l){let d=`${e.z}_${e.x}_${e.y}`,b=this._cache.get(d);if(b)return b;let E=this._cachePrevious.get(d);if(E)return this._cache.set(d,E),E;let C=this._aabbFactory(e,r,o,l);return this._cache.set(d,C),this._hadAnyChanges=!0,C}}function Qe(h,e,r){let o=h-e;return o<0?-o:Math.max(0,o-r)}function ut(h,e,r,o,l){let d=h-r,b;return b=d<0?Math.min(-d,1+d-l):d>1?Math.min(Math.max(d-l,0),1-d):0,Math.max(b,Qe(e,o,l))}class st{constructor(){this._aabbCache=new mt(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(e,r,o,l){let d=1<<o.z,b=1/d,E=o.x/d,C=o.y/d,k=2;return k=Math.min(k,ut(e,r,E,C,b)),k=Math.min(k,ut(e,r,E+.5,-C-b,b)),k=Math.min(k,ut(e,r,E+.5,2-C-b,b)),k}getWrap(e,r,o){let l=1<<r.z,d=1/l,b=r.x/l,E=Qe(e.x,b,d),C=Qe(e.x,b-1,d),k=Qe(e.x,b+1,d),O=Math.min(E,C,k);return O===k?1:O===C?-1:0}allowVariableZoom(e,r){return Re(e,r)>4}allowWorldCopies(){return!1}getTileAABB(e,r,o,l){return this._aabbCache.getTileAABB(e,r,o,l)}_computeTileAABB(e,r,o,l){if(e.z<=0)return new ln([-1,-1,-1],[1,1,1]);if(e.z===1)return new ln([e.x===0?-1:0,e.y===0?0:-1,-1],[e.x===0?0:1,e.y===0?1:0,1]);{let d=[Ge(0,0,e.x,e.y,e.z),Ge(u.Z,0,e.x,e.y,e.z),Ge(u.Z,u.Z,e.x,e.y,e.z),Ge(0,u.Z,e.x,e.y,e.z)],b=[1,1,1],E=[-1,-1,-1];for(let C of d)for(let k=0;k<3;k++)b[k]=Math.min(b[k],C[k]),E[k]=Math.max(E[k],C[k]);if(e.y===0||e.y===(1<<e.z)-1){let C=[0,e.y===0?1:-1,0];for(let k=0;k<3;k++)b[k]=Math.min(b[k],C[k]),E[k]=Math.max(E[k],C[k])}return new ln(b,E)}}}class lt{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,r,o){return this._helper.interpolatePadding(e,r,o)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,r){this._helper.resize(e,r)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,r){this._helper.overrideNearFarZ(e,r)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(e){}constructor(){this._cachedClippingPlane=u.bk(),this._projectionMatrix=u.b1(),this._globeViewProjMatrix32f=u.b0(),this._globeViewProjMatrixNoCorrection=u.b1(),this._globeViewProjMatrixNoCorrectionInverted=u.b1(),this._globeProjMatrixInverted=u.b1(),this._cameraPosition=u.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new es({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,r)=>this.getConstrained(e,r)}),this._coveringTilesDetailsProvider=new st}clone(){let e=new lt;return e.apply(this),e}apply(e,r){this._globeLatitudeErrorCorrectionRadians=r||0,this._helper.apply(e)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let e=u.bh();return e[0]=this._cameraPosition[0],e[1]=this._cameraPosition[1],e[2]=this._cameraPosition[2],e}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(e){let{overscaledTileID:r,applyGlobeMatrix:o}=e,l=this._helper.getMercatorTileCoordinates(r);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:l,clippingPlane:this._cachedClippingPlane,projectionTransition:o?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(e){let r=this.pitchInRadians,o=this.cameraToCenterDistance/e,l=Math.sin(r)*o,d=Math.cos(r)*o+1,b=1/Math.sqrt(l*l+d*d)*1,E=-l,C=d,k=Math.sqrt(E*E+C*C);E/=k,C/=k;let O=[0,E,C];u.bl(O,O,[0,0,0],-this.bearingInRadians),u.bm(O,O,[0,0,0],-1*this.center.lat*Math.PI/180),u.bn(O,O,[0,0,0],this.center.lng*Math.PI/180);let j=1/u.bo(O);return u.aO(O,O,j),[...O,-b*j]}isLocationOccluded(e){return!this.isSurfacePointVisible(Ye(e))}transformLightDirection(e){let r=this._helper._center.lng*Math.PI/180,o=this._helper._center.lat*Math.PI/180,l=Math.cos(o),d=[Math.sin(r)*l,Math.sin(o),Math.cos(r)*l],b=[d[2],0,-d[0]],E=[0,0,0];u.aU(E,b,d),u.aT(b,b),u.aT(E,E);let C=[0,0,0];return u.aT(C,[b[0]*e[0]+E[0]*e[1]+d[0]*e[2],b[1]*e[0]+E[1]*e[1]+d[1]*e[2],b[2]*e[0]+E[2]*e[1]+d[2]*e[2]]),C}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(e,r,o){let l=function(E,C,k){let O=1/(1<<k.z);return new u.$(E/u.Z*O+k.x*O,C/u.Z*O+k.y*O)}(e,r,o.canonical),d=(b=l.y,[u.bg(l.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-b*Math.PI*2))-.5*Math.PI]);var b;return this.getCircleRadiusCorrection()/Math.cos(d[1])}projectTileCoordinates(e,r,o,l){let d=o.canonical,b=Ge(e,r,d.x,d.y,d.z),E=1+(l?l(e,r):0)/u.bu,C=[b[0]*E,b[1]*E,b[2]*E,1];u.at(C,C,this._globeViewProjMatrixNoCorrection);let k=this._cachedClippingPlane,O=k[0]*b[0]+k[1]*b[1]+k[2]*b[2]+k[3]<0;return{point:new u.P(C[0]/C[3],C[1]/C[3]),signedDistanceFromCamera:C[3],isOccluded:O}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let e=ot(this.worldSize,this.center.lat),r=u.b2(),o=u.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*e),u.aY(r,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let l=this.centerOffset;r[8]=2*-l.x/this._helper._width,r[9]=2*l.y/this._helper._height,this._projectionMatrix=u.aZ(r),this._globeProjMatrixInverted=u.b2(),u.an(this._globeProjMatrixInverted,r),u.L(r,r,[0,0,-this.cameraToCenterDistance]),u.a_(r,r,this.rollInRadians),u.a$(r,r,-this.pitchInRadians),u.a_(r,r,this.bearingInRadians),u.L(r,r,[0,0,-e]);let d=u.bh();d[0]=e,d[1]=e,d[2]=e,u.a$(o,r,this.center.lat*Math.PI/180),u.bp(o,o,-this.center.lng*Math.PI/180),u.M(o,o,d),this._globeViewProjMatrixNoCorrection=o,u.a$(r,r,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),u.bp(r,r,-this.center.lng*Math.PI/180),u.M(r,r,d),this._globeViewProjMatrix32f=new Float32Array(r),this._globeViewProjMatrixNoCorrectionInverted=u.b2(),u.an(this._globeViewProjMatrixNoCorrectionInverted,o);let b=u.bh();this._cameraPosition=u.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/e,u.bl(this._cameraPosition,this._cameraPosition,b,-this.rollInRadians),u.bm(this._cameraPosition,this._cameraPosition,b,this.pitchInRadians),u.bl(this._cameraPosition,this._cameraPosition,b,-this.bearingInRadians),u.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),u.bm(this._cameraPosition,this._cameraPosition,b,-this.center.lat*Math.PI/180),u.bn(this._cameraPosition,this._cameraPosition,b,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(e);let E=u.aZ(this._globeViewProjMatrixNoCorrectionInverted);u.M(E,E,[1,1,-1]),this._cachedFrustum=Le.fromInvProjectionMatrix(E)}calculateFogMatrix(e){u.w("calculateFogMatrix is not supported on globe projection.");let r=u.b2();return u.ad(r),r}getVisibleUnwrappedCoordinates(e){return[new u.aW(0,e)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(e){e&&u.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,r){if(!this._globeViewProjMatrixNoCorrection)return 1;let o=Ye(e);u.aO(o,o,1+r/u.bu);let l=u.bk();return u.at(l,[o[0],o[1],o[2],1],this._globeViewProjMatrixNoCorrection),l[2]/l[3]}populateCache(e){}getBounds(){let e=.5*this.width,r=.5*this.height,o=[new u.P(0,0),new u.P(e,0),new u.P(this.width,0),new u.P(this.width,r),new u.P(this.width,this.height),new u.P(e,this.height),new u.P(0,this.height),new u.P(0,r)],l=[];for(let j of o)l.push(this.unprojectScreenPoint(j));let d=0,b=0,E=0,C=0,k=this.center;for(let j of l){let B=u.bq(k.lng,j.lng),H=u.bq(k.lat,j.lat);B<b&&(b=B),B>d&&(d=B),H<C&&(C=H),H>E&&(E=H)}let O=[k.lng+b,k.lat+C,k.lng+d,k.lat+E];return this.isSurfacePointOnScreen([0,1,0])&&(O[3]=90,O[0]=-180,O[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(O[1]=-90,O[0]=-180,O[2]=180),new on(O)}getConstrained(e,r){let o=u.ae(e.lat,-85.051129,u.af),l=u.ae(+r,this.minZoom+dt(0,o),this.maxZoom);return{center:new u.Q(e.lng,o),zoom:l}}calculateCenterFromCameraLngLatAlt(e,r,o,l){return this._helper.calculateCenterFromCameraLngLatAlt(e,r,o,l)}setLocationAtPoint(e,r){let o=Ye(this.unprojectScreenPoint(r)),l=Ye(e),d=u.bh();u.br(d);let b=u.bh();u.bn(b,o,d,-this.center.lng*Math.PI/180),u.bm(b,b,d,this.center.lat*Math.PI/180);let E=l[0]*l[0]+l[2]*l[2],C=b[0]*b[0];if(E<C)return;let k=Math.sqrt(E-C),O=-k,j=u.bs(l[0],l[2],b[0],k),B=u.bs(l[0],l[2],b[0],O),H=u.bh();u.bn(H,l,d,-j);let X=u.bs(H[1],H[2],b[1],b[2]),le=u.bh();u.bn(le,l,d,-B);let oe=u.bs(le[1],le[2],b[1],b[2]),ce=.5*Math.PI,fe=X>=-ce&&X<=ce,xe=oe>=-ce&&oe<=ce,be,Ee;if(fe&&xe){let Bt=this.center.lng*Math.PI/180,gt=this.center.lat*Math.PI/180;u.bv(j,Bt)+u.bv(X,gt)<u.bv(B,Bt)+u.bv(oe,gt)?(be=j,Ee=X):(be=B,Ee=oe)}else if(fe)be=j,Ee=X;else{if(!xe)return;be=B,Ee=oe}let Ce=be/Math.PI*180,we=Ee/Math.PI*180,Je=this.center.lat;this.setCenter(new u.Q(Ce,u.ae(we,-90,90))),this.setZoom(this.zoom+dt(Je,this.center.lat))}locationToScreenPoint(e,r){let o=Ye(e);if(r){let l=r.getElevationForLngLatZoom(e,this._helper._tileZoom);u.aO(o,o,1+l/u.bu)}return this._projectSurfacePointToScreen(o)}_projectSurfacePointToScreen(e){let r=u.bk();return u.at(r,[...e,1],this._globeViewProjMatrixNoCorrection),r[0]/=r[3],r[1]/=r[3],new u.P((.5*r[0]+.5)*this.width,(.5*-r[1]+.5)*this.height)}screenPointToMercatorCoordinate(e,r){if(r){let o=r.pointCoordinate(e);if(o)return o}return u.$.fromLngLat(this.unprojectScreenPoint(e))}screenPointToLocation(e,r){var o;return(o=this.screenPointToMercatorCoordinate(e,r))===null||o===void 0?void 0:o.toLngLat()}isPointOnMapSurface(e,r){let o=this._cameraPosition,l=this.getRayDirectionFromPixel(e);return!!this.rayPlanetIntersection(o,l)}getRayDirectionFromPixel(e){let r=u.bk();r[0]=e.x/this.width*2-1,r[1]=-1*(e.y/this.height*2-1),r[2]=1,r[3]=1,u.at(r,r,this._globeViewProjMatrixNoCorrectionInverted),r[0]/=r[3],r[1]/=r[3],r[2]/=r[3];let o=u.bh();o[0]=r[0]-this._cameraPosition[0],o[1]=r[1]-this._cameraPosition[1],o[2]=r[2]-this._cameraPosition[2];let l=u.bh();return u.aT(l,o),l}isSurfacePointVisible(e){let r=this._cachedClippingPlane;return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]>=0}isSurfacePointOnScreen(e){if(!this.isSurfacePointVisible(e))return!1;let r=u.bk();return u.at(r,[...e,1],this._globeViewProjMatrixNoCorrection),r[0]/=r[3],r[1]/=r[3],r[2]/=r[3],r[0]>-1&&r[0]<1&&r[1]>-1&&r[1]<1&&r[2]>-1&&r[2]<1}rayPlanetIntersection(e,r){let o=u.aV(e,r),l=u.bh(),d=u.bh();u.aO(d,r,o),u.aS(l,e,d);let b=1-u.aV(l,l);if(b<0)return null;let E=u.aV(e,e)-1,C=-o+(o<0?1:-1)*Math.sqrt(b),k=E/C,O=C;return{tMin:Math.min(k,O),tMax:Math.max(k,O)}}unprojectScreenPoint(e){let r=this._cameraPosition,o=this.getRayDirectionFromPixel(e),l=this.rayPlanetIntersection(r,o);if(l){let O=u.bh();u.aP(O,r,[o[0]*l.tMin,o[1]*l.tMin,o[2]*l.tMin]);let j=u.bh();return u.aT(j,O),Ct(j)}let d=this._cachedClippingPlane,b=d[0]*o[0]+d[1]*o[1]+d[2]*o[2],E=-u.bt(d,r)/b,C=u.bh();if(E>0)u.aP(C,r,[o[0]*E,o[1]*E,o[2]*E]);else{let O=u.bh();u.aP(O,r,[2*o[0],2*o[1],2*o[2]]);let j=u.bt(this._cachedClippingPlane,O);u.aS(C,O,[this._cachedClippingPlane[0]*j,this._cachedClippingPlane[1]*j,this._cachedClippingPlane[2]*j])}let k=function(O){let j=u.bh();return j[0]=O[0]*-O[3],j[1]=O[1]*-O[3],j[2]=O[2]*-O[3],{center:j,radius:Math.sqrt(1-O[3]*O[3])}}(d);return Ct(function(O,j,B){let H=u.bh();u.aS(H,B,O);let X=u.bh();return u.bi(X,O,H,j/u.bj(H)),X}(k.center,k.radius,C))}getMatrixForModel(e,r){let o=u.Q.convert(e),l=1/u.bu,d=u.b1();return u.bp(d,d,o.lng/180*Math.PI),u.a$(d,d,-o.lat/180*Math.PI),u.L(d,d,[0,0,1+r/u.bu]),u.a$(d,d,.5*Math.PI),u.M(d,d,[l,l,l]),d}getProjectionDataForCustomLayer(e=!0){let r=this.getProjectionData({overscaledTileID:new u.Y(0,0,0,0,0),applyGlobeMatrix:e});return r.tileMercatorCoords=[0,0,1,1],r}getFastPathSimpleProjectionMatrix(e){}}class ht{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(e){this._helper.setMinZoom(e)}setMaxZoom(e){this._helper.setMaxZoom(e)}setMinPitch(e){this._helper.setMinPitch(e)}setMaxPitch(e){this._helper.setMaxPitch(e)}setRenderWorldCopies(e){this._helper.setRenderWorldCopies(e)}setBearing(e){this._helper.setBearing(e)}setPitch(e){this._helper.setPitch(e)}setRoll(e){this._helper.setRoll(e)}setFov(e){this._helper.setFov(e)}setZoom(e){this._helper.setZoom(e)}setCenter(e){this._helper.setCenter(e)}setElevation(e){this._helper.setElevation(e)}setMinElevationForCurrentTile(e){this._helper.setMinElevationForCurrentTile(e)}setPadding(e){this._helper.setPadding(e)}interpolatePadding(e,r,o){return this._helper.interpolatePadding(e,r,o)}isPaddingEqual(e){return this._helper.isPaddingEqual(e)}resize(e,r,o=!0){this._helper.resize(e,r,o)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(e){this._helper.setMaxBounds(e)}overrideNearFarZ(e,r){this._helper.overrideNearFarZ(e,r)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(e){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),e)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(e,r){this._globeness=e,this._globeLatitudeErrorCorrectionRadians=r,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new es({calcMatrices:()=>{this._calcMatrices()},getConstrained:(e,r)=>this.getConstrained(e,r)}),this._globeness=1,this._mercatorTransform=new wn,this._verticalPerspectiveTransform=new lt}clone(){let e=new ht;return e._globeness=this._globeness,e._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,e.apply(this),e}apply(e){this._helper.apply(e),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(e){let r=this._mercatorTransform.getProjectionData(e),o=this._verticalPerspectiveTransform.getProjectionData(e);return{mainMatrix:this.isGlobeRendering?o.mainMatrix:r.mainMatrix,clippingPlane:o.clippingPlane,tileMercatorCoords:o.tileMercatorCoords,projectionTransition:e.applyGlobeMatrix?this._globeness:0,fallbackMatrix:r.fallbackMatrix}}isLocationOccluded(e){return this.currentTransform.isLocationOccluded(e)}transformLightDirection(e){return this.currentTransform.transformLightDirection(e)}getPixelScale(){return u.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return u.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(e,r,o){let l=this._mercatorTransform.getPitchedTextCorrection(e,r,o),d=this._verticalPerspectiveTransform.getPitchedTextCorrection(e,r,o);return u.bc(l,d,this._globeness)}projectTileCoordinates(e,r,o,l){return this.currentTransform.projectTileCoordinates(e,r,o,l)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(e){return this.currentTransform.calculateFogMatrix(e)}getVisibleUnwrappedCoordinates(e){return this.currentTransform.getVisibleUnwrappedCoordinates(e)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(e){this._mercatorTransform.recalculateZoomAndCenter(e),this._verticalPerspectiveTransform.recalculateZoomAndCenter(e)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(e,r){return this.currentTransform.lngLatToCameraDepth(e,r)}populateCache(e){this._mercatorTransform.populateCache(e),this._verticalPerspectiveTransform.populateCache(e)}getBounds(){return this.currentTransform.getBounds()}getConstrained(e,r){return this.currentTransform.getConstrained(e,r)}calculateCenterFromCameraLngLatAlt(e,r,o,l){return this._helper.calculateCenterFromCameraLngLatAlt(e,r,o,l)}setLocationAtPoint(e,r){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(e,r),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(e,r),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(e,r){return this.currentTransform.locationToScreenPoint(e,r)}screenPointToMercatorCoordinate(e,r){return this.currentTransform.screenPointToMercatorCoordinate(e,r)}screenPointToLocation(e,r){return this.currentTransform.screenPointToLocation(e,r)}isPointOnMapSurface(e,r){return this.currentTransform.isPointOnMapSurface(e,r)}getRayDirectionFromPixel(e){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(e)}getMatrixForModel(e,r){return this.currentTransform.getMatrixForModel(e,r)}getProjectionDataForCustomLayer(e=!0){let r=this._mercatorTransform.getProjectionDataForCustomLayer(e);if(!this.isGlobeRendering)return r;let o=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(e);return o.fallbackMatrix=r.mainMatrix,o}getFastPathSimpleProjectionMatrix(e){return this.currentTransform.getFastPathSimpleProjectionMatrix(e)}}class it{get useGlobeControls(){return!0}handlePanInertia(e,r){let o=Pt(e,r);return Math.abs(o.lng-r.center.lng)>180&&(o.lng=r.center.lng+179.5*Math.sign(o.lng-r.center.lng)),{easingCenter:o,easingOffset:new u.P(0,0)}}handleMapControlsRollPitchBearingZoom(e,r){let o=e.around,l=r.screenPointToLocation(o);e.bearingDelta&&r.setBearing(r.bearing+e.bearingDelta),e.pitchDelta&&r.setPitch(r.pitch+e.pitchDelta),e.rollDelta&&r.setRoll(r.roll+e.rollDelta);let d=r.zoom;e.zoomDelta&&r.setZoom(r.zoom+e.zoomDelta);let b=r.zoom-d;if(b===0)return;let E=u.bq(r.center.lng,l.lng),C=E/(Math.abs(E/180)+1),k=u.bq(r.center.lat,l.lat),O=r.getRayDirectionFromPixel(o),j=r.cameraPosition,B=-1*u.aV(j,O),H=u.bh();u.aP(H,j,[O[0]*B,O[1]*B,O[2]*B]);let X=u.bo(H)-1,le=Math.exp(.5*-Math.max(X-.3,0)),oe=ot(r.worldSize,r.center.lat)/Math.min(r.width,r.height),ce=u.bf(oe,.9,.5,1,.25),fe=(1-u.ac(-b))*Math.min(le,ce),xe=r.center.lat,be=r.zoom,Ee=new u.Q(r.center.lng+C*fe,u.ae(r.center.lat+k*fe,-85.051129,u.af));r.setLocationAtPoint(l,o);let Ce=r.center,we=u.bf(Math.abs(E),45,85,0,1),Je=u.bf(oe,.75,.35,0,1),Bt=Math.pow(Math.max(we,Je),.25),gt=u.bq(Ce.lng,Ee.lng),wt=u.bq(Ce.lat,Ee.lat);r.setCenter(new u.Q(Ce.lng+gt*Bt,Ce.lat+wt*Bt).wrap()),r.setZoom(be+dt(xe,r.center.lat))}handleMapControlsPan(e,r,o){if(!e.panDelta)return;let l=r.center.lat,d=r.zoom;r.setCenter(Pt(e.panDelta,r).wrap()),r.setZoom(d+dt(l,r.center.lat))}cameraForBoxAndBearing(e,r,o,l,d){let b=qe(e,r,o,l,d),E=r.left/d.width*2-1,C=(d.width-r.right)/d.width*2-1,k=r.top/d.height*-2+1,O=(d.height-r.bottom)/d.height*-2+1,j=u.bq(o.getWest(),o.getEast())<0,B=j?o.getEast():o.getWest(),H=j?o.getWest():o.getEast(),X=Math.max(o.getNorth(),o.getSouth()),le=Math.min(o.getNorth(),o.getSouth()),oe=B+.5*u.bq(B,H),ce=X+.5*u.bq(X,le),fe=d.clone();fe.setCenter(b.center),fe.setBearing(b.bearing),fe.setPitch(0),fe.setRoll(0),fe.setZoom(b.zoom);let xe=fe.modelViewProjectionMatrix,be=[Ye(o.getNorthWest()),Ye(o.getNorthEast()),Ye(o.getSouthWest()),Ye(o.getSouthEast()),Ye(new u.Q(H,ce)),Ye(new u.Q(B,ce)),Ye(new u.Q(oe,X)),Ye(new u.Q(oe,le))],Ee=Ye(b.center),Ce=Number.POSITIVE_INFINITY;for(let we of be)E<0&&(Ce=it.getLesserNonNegativeNonNull(Ce,it.solveVectorScale(we,Ee,xe,"x",E))),C>0&&(Ce=it.getLesserNonNegativeNonNull(Ce,it.solveVectorScale(we,Ee,xe,"x",C))),k>0&&(Ce=it.getLesserNonNegativeNonNull(Ce,it.solveVectorScale(we,Ee,xe,"y",k))),O<0&&(Ce=it.getLesserNonNegativeNonNull(Ce,it.solveVectorScale(we,Ee,xe,"y",O)));if(Number.isFinite(Ce)&&Ce!==0)return b.zoom=fe.zoom+u.ah(Ce),b;Ue()}handleJumpToCenterZoom(e,r){let o=e.center.lat,l=e.getConstrained(r.center?u.Q.convert(r.center):e.center,e.zoom).center;e.setCenter(l.wrap());let d=r.zoom!==void 0?+r.zoom:e.zoom+dt(o,l.lat);e.zoom!==d&&e.setZoom(d)}handleEaseTo(e,r){let o=e.zoom,l=e.center,d=e.padding,b={roll:e.roll,pitch:e.pitch,bearing:e.bearing},E={roll:r.roll===void 0?e.roll:r.roll,pitch:r.pitch===void 0?e.pitch:r.pitch,bearing:r.bearing===void 0?e.bearing:r.bearing},C=r.zoom!==void 0,k=!e.isPaddingEqual(r.padding),O=!1,j=r.center?u.Q.convert(r.center):l,B=e.getConstrained(j,o).center;Fn(e,B);let H=e.clone();H.setCenter(B),H.setZoom(C?+r.zoom:o+dt(l.lat,j.lat)),H.setBearing(r.bearing);let X=new u.P(u.ae(e.centerPoint.x+r.offsetAsPoint.x,0,e.width),u.ae(e.centerPoint.y+r.offsetAsPoint.y,0,e.height));H.setLocationAtPoint(B,X);let le=(r.offset&&r.offsetAsPoint.mag())>0?H.center:B,oe=C?+r.zoom:o+dt(l.lat,le.lat),ce=o+dt(l.lat,0),fe=oe+dt(le.lat,0),xe=u.bq(l.lng,le.lng),be=u.bq(l.lat,le.lat),Ee=u.ac(fe-ce);return O=oe!==o,{easeFunc:Ce=>{if(u.b6(b,E)||Ze({startEulerAngles:b,endEulerAngles:E,tr:e,k:Ce,useSlerp:b.roll!=E.roll}),k&&e.interpolatePadding(d,r.padding,Ce),r.around)u.w("Easing around a point is not supported under globe projection."),e.setLocationAtPoint(r.around,r.aroundPoint);else{let we=fe>ce?Math.min(2,Ee):Math.max(.5,Ee),Je=Math.pow(we,1-Ce),Bt=ft(l,xe,be,Ce*Je);e.setCenter(Bt.wrap())}if(O){let we=u.B.number(ce,fe,Ce)+dt(0,e.center.lat);e.setZoom(we)}},isZooming:O,elevationCenter:le}}handleFlyTo(e,r){let o=r.zoom!==void 0,l=e.center,d=e.zoom,b=e.padding,E=!e.isPaddingEqual(r.padding),C=e.getConstrained(u.Q.convert(r.center||r.locationAtOffset),d).center,k=o?+r.zoom:e.zoom+dt(e.center.lat,C.lat),O=e.clone();O.setCenter(C),O.setZoom(k),O.setBearing(r.bearing);let j=new u.P(u.ae(e.centerPoint.x+r.offsetAsPoint.x,0,e.width),u.ae(e.centerPoint.y+r.offsetAsPoint.y,0,e.height));O.setLocationAtPoint(C,j);let B=O.center;Fn(e,B);let H=function(be,Ee,Ce){let we=Ye(Ee),Je=Ye(Ce),Bt=u.aV(we,Je),gt=Math.acos(Bt),wt=At(be);return gt/(2*Math.PI)*wt}(e,l,B),X=d+dt(l.lat,0),le=k+dt(B.lat,0),oe=u.ac(le-X),ce;if(typeof r.minZoom=="number"){let be=+r.minZoom+dt(B.lat,0),Ee=Math.min(be,X,le)+dt(0,B.lat),Ce=e.getConstrained(B,Ee).zoom+dt(B.lat,0);ce=u.ac(Ce-X)}let fe=u.bq(l.lng,B.lng),xe=u.bq(l.lat,B.lat);return{easeFunc:(be,Ee,Ce,we)=>{let Je=ft(l,fe,xe,Ce);E&&e.interpolatePadding(b,r.padding,be);let Bt=be===1?B:Je;e.setCenter(Bt.wrap());let gt=X+u.ah(Ee);e.setZoom(be===1?k:gt+dt(0,Bt.lat))},scaleOfZoom:oe,targetCenter:B,scaleOfMinZoom:ce,pixelPathLength:H}}static solveVectorScale(e,r,o,l,d){let b=l==="x"?[o[0],o[4],o[8],o[12]]:[o[1],o[5],o[9],o[13]],E=[o[3],o[7],o[11],o[15]],C=e[0]*b[0]+e[1]*b[1]+e[2]*b[2],k=e[0]*E[0]+e[1]*E[1]+e[2]*E[2],O=r[0]*b[0]+r[1]*b[1]+r[2]*b[2],j=r[0]*E[0]+r[1]*E[1]+r[2]*E[2];return O+d*k===C+d*j||E[3]*(C-O)+b[3]*(j-k)+C*j==O*k?null:(O+b[3]-d*j-d*E[3])/(O-C-d*j+d*k)}static getLesserNonNegativeNonNull(e,r){return r!==null&&r>=0&&r<e?r:e}}class pt{constructor(e){this._globe=e,this._mercatorCameraHelper=new et,this._verticalPerspectiveCameraHelper=new it}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(e,r){return this.currentHelper.handlePanInertia(e,r)}handleMapControlsRollPitchBearingZoom(e,r){return this.currentHelper.handleMapControlsRollPitchBearingZoom(e,r)}handleMapControlsPan(e,r,o){this.currentHelper.handleMapControlsPan(e,r,o)}cameraForBoxAndBearing(e,r,o,l,d){return this.currentHelper.cameraForBoxAndBearing(e,r,o,l,d)}handleJumpToCenterZoom(e,r){this.currentHelper.handleJumpToCenterZoom(e,r)}handleEaseTo(e,r){return this.currentHelper.handleEaseTo(e,r)}handleFlyTo(e,r){return this.currentHelper.handleFlyTo(e,r)}}let _t=(h,e)=>u.x(h,e&&e.filter(r=>r.identifier!=="source.canvas")),nt=u.bw();class xt extends u.E{constructor(e,r={}){super(),this._rtlPluginLoaded=()=>{for(let o in this.sourceCaches){let l=this.sourceCaches[o].getSource().type;l!=="vector"&&l!=="geojson"||this.sourceCaches[o].reload()}},this.map=e,this.dispatcher=new Hn(Ma(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",(o,l)=>this.getGlyphs(o,l)),this.dispatcher.registerMessageHandler("GI",(o,l)=>this.getImages(o,l)),this.imageManager=new qn,this.imageManager.setEventedParent(this),this.glyphManager=new un(e._requestManager,r.localIdeographFontFamily),this.lineAtlas=new Ps(256,512),this.crossTileSymbolIndex=new dn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.by()),Ya().on(So,this._rtlPluginLoaded),this.on("data",o=>{if(o.dataType!=="source"||o.sourceDataType!=="metadata")return;let l=this.sourceCaches[o.sourceId];if(!l)return;let d=l.getSource();if(d&&d.vectorLayerIds)for(let b in this._layers){let E=this._layers[b];E.source===d.id&&this._validateLayer(E)}})}loadURL(e,r={},o){this.fire(new u.l("dataloading",{dataType:"style"})),r.validate=typeof r.validate!="boolean"||r.validate;let l=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;let d=this._loadStyleRequest;u.j(l,this._loadStyleRequest).then(b=>{this._loadStyleRequest=null,this._load(b.data,r,o)}).catch(b=>{this._loadStyleRequest=null,b&&!d.signal.aborted&&this.fire(new u.k(b))})}loadJSON(e,r={},o){this.fire(new u.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,Vt.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,r.validate=r.validate!==!1,this._load(e,r,o)}).catch(()=>{})}loadEmpty(){this.fire(new u.l("dataloading",{dataType:"style"})),this._load(nt,{validate:!1})}_load(e,r,o){var l,d;let b=r.transformStyle?r.transformStyle(o,e):e;if(!r.validate||!_t(this,u.y(b))){this._loaded=!0,this.stylesheet=b;for(let E in b.sources)this.addSource(E,b.sources[E],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new Na(this.stylesheet.light),this._setProjectionInternal(((l=this.stylesheet.projection)===null||l===void 0?void 0:l.type)||"mercator"),this.sky=new An(this.stylesheet.sky),this.map.setTerrain((d=this.stylesheet.terrain)!==null&&d!==void 0?d:null),this.fire(new u.l("data",{dataType:"style"})),this.fire(new u.l("style.load"))}}_createLayers(){let e=u.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map(r=>r.id),this._layers={},this._serializedLayers=null;for(let r of e){let o=u.bA(r);o.setEventedParent(this,{layer:{id:r.id}}),this._layers[r.id]=o}}_loadSprite(e,r=!1,o=void 0){let l;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(d,b,E,C){return u._(this,void 0,void 0,function*(){let k=ur(d),O=E>1?"@2x":"",j={},B={};for(let{id:H,url:X}of k){let le=b.transformRequest(zr(X,O,".json"),"SpriteJSON");j[H]=u.j(le,C);let oe=b.transformRequest(zr(X,O,".png"),"SpriteImage");B[H]=Nr.getImage(oe,C)}return yield Promise.all([...Object.values(j),...Object.values(B)]),function(H,X){return u._(this,void 0,void 0,function*(){let le={};for(let oe in H){le[oe]={};let ce=Vt.getImageCanvasContext((yield X[oe]).data),fe=(yield H[oe]).data;for(let xe in fe){let{width:be,height:Ee,x:Ce,y:we,sdf:Je,pixelRatio:Bt,stretchX:gt,stretchY:wt,content:bt,textFitWidth:Ei,textFitHeight:ti}=fe[xe];le[oe][xe]={data:null,pixelRatio:Bt,sdf:Je,stretchX:gt,stretchY:wt,content:bt,textFitWidth:Ei,textFitHeight:ti,spriteData:{width:be,height:Ee,x:Ce,y:we,context:ce}}}}return le})}(j,B)})}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(d=>{if(this._spriteRequest=null,d)for(let b in d){this._spritesImagesIds[b]=[];let E=this._spritesImagesIds[b]?this._spritesImagesIds[b].filter(C=>!(C in d)):[];for(let C of E)this.imageManager.removeImage(C),this._changedImages[C]=!0;for(let C in d[b]){let k=b==="default"?C:`${b}:${C}`;this._spritesImagesIds[b].push(k),k in this.imageManager.images?this.imageManager.updateImage(k,d[b][C],!1):this.imageManager.addImage(k,d[b][C]),r&&(this._changedImages[k]=!0)}}}).catch(d=>{this._spriteRequest=null,l=d,this.fire(new u.k(l))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),r&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"})),o&&o(l)})}_unloadSprite(){for(let e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}_validateLayer(e){let r=this.sourceCaches[e.source];if(!r)return;let o=e.sourceLayer;if(!o)return;let l=r.getSource();(l.type==="geojson"||l.vectorLayerIds&&l.vectorLayerIds.indexOf(o)===-1)&&this.fire(new u.k(new Error(`Source layer "${o}" does not exist on source "${l.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,r=!1){let o=this._serializedAllLayers();if(!e||e.length===0)return Object.values(r?u.bB(o):o);let l=[];for(let d of e)if(o[d]){let b=r?u.bB(o[d]):o[d];l.push(b)}return l}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};let r=Object.keys(this._layers);for(let o of r){let l=this._layers[o];l.type!=="custom"&&(e[o]=l.serialize())}return e}hasTransitions(){var e,r,o;if(!((e=this.light)===null||e===void 0)&&e.hasTransition()||!((r=this.sky)===null||r===void 0)&&r.hasTransition()||!((o=this.projection)===null||o===void 0)&&o.hasTransition())return!0;for(let l in this.sourceCaches)if(this.sourceCaches[l].hasTransition())return!0;for(let l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;let r=this._changed;if(r){let l=Object.keys(this._updatedLayers),d=Object.keys(this._removedLayers);(l.length||d.length)&&this._updateWorkerLayers(l,d);for(let b in this._updatedSources){let E=this._updatedSources[b];if(E==="reload")this._reloadSource(b);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(b)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let b in this._updatedPaintProps)this._layers[b].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}let o={};for(let l in this.sourceCaches){let d=this.sourceCaches[l];o[l]=d.used,d.used=!1}for(let l of this._order){let d=this._layers[l];d.recalculate(e,this._availableImages),!d.isHidden(e.zoom)&&d.source&&(this.sourceCaches[d.source].used=!0)}for(let l in o){let d=this.sourceCaches[l];!!o[l]!=!!d.used&&d.fire(new u.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:l}))}this.light.recalculate(e),this.sky.recalculate(e),this.projection.recalculate(e),this.z=e.zoom,r&&this.fire(new u.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let e=Object.keys(this._changedImages);if(e.length){for(let r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,r){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:r})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,r={}){var o;this._checkLoaded();let l=this.serialize();if(e=r.transformStyle?r.transformStyle(l,e):e,((o=r.validate)===null||o===void 0||o)&&_t(this,u.y(e)))return!1;(e=u.bB(e)).layers=u.bz(e.layers);let d=u.bC(l,e),b=this._getOperationsToPerform(d);if(b.unimplemented.length>0)throw new Error(`Unimplemented: ${b.unimplemented.join(", ")}.`);if(b.operations.length===0)return!1;for(let E of b.operations)E();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){let r=[],o=[];for(let l of e)switch(l.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":r.push(()=>this.addLayer.apply(this,l.args));break;case"removeLayer":r.push(()=>this.removeLayer.apply(this,l.args));break;case"setPaintProperty":r.push(()=>this.setPaintProperty.apply(this,l.args));break;case"setLayoutProperty":r.push(()=>this.setLayoutProperty.apply(this,l.args));break;case"setFilter":r.push(()=>this.setFilter.apply(this,l.args));break;case"addSource":r.push(()=>this.addSource.apply(this,l.args));break;case"removeSource":r.push(()=>this.removeSource.apply(this,l.args));break;case"setLayerZoomRange":r.push(()=>this.setLayerZoomRange.apply(this,l.args));break;case"setLight":r.push(()=>this.setLight.apply(this,l.args));break;case"setGeoJSONSourceData":r.push(()=>this.setGeoJSONSourceData.apply(this,l.args));break;case"setGlyphs":r.push(()=>this.setGlyphs.apply(this,l.args));break;case"setSprite":r.push(()=>this.setSprite.apply(this,l.args));break;case"setTerrain":r.push(()=>this.map.setTerrain.apply(this,l.args));break;case"setSky":r.push(()=>this.setSky.apply(this,l.args));break;case"setProjection":this.setProjection.apply(this,l.args);break;case"setTransition":r.push(()=>{});break;default:o.push(l.command)}return{operations:r,unimplemented:o}}addImage(e,r){if(this.getImage(e))return this.fire(new u.k(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,r),this._afterImageUpdated(e)}updateImage(e,r){this.imageManager.updateImage(e,r)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new u.k(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,r,o={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!r.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(r).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(u.y.source,`sources.${e}`,r,null,o))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);let l=this.sourceCaches[e]=new ke(e,r,this.dispatcher);l.style=this,l.setEventedParent(this,()=>({isSourceLoaded:l.loaded(),source:l.serialize(),sourceId:e})),l.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(let o in this._layers)if(this._layers[o].source===e)return this.fire(new u.k(new Error(`Source "${e}" cannot be removed while layer "${o}" is using it.`)));let r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new u.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,r){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);let o=this.sourceCaches[e].getSource();if(o.type!=="geojson")throw new Error(`geojsonSource.type is ${o.type}, which is !== 'geojson`);o.setData(r),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,r,o={}){this._checkLoaded();let l=e.id;if(this.getLayer(l))return void this.fire(new u.k(new Error(`Layer "${l}" already exists on this map.`)));let d;if(e.type==="custom"){if(_t(this,u.bD(e)))return;d=u.bA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(l,e.source),e=u.bB(e),e=u.e(e,{source:l})),this._validate(u.y.layer,`layers.${l}`,e,{arrayIndex:-1},o))return;d=u.bA(e),this._validateLayer(d),d.setEventedParent(this,{layer:{id:l}})}let b=r?this._order.indexOf(r):this._order.length;if(r&&b===-1)this.fire(new u.k(new Error(`Cannot add layer "${l}" before non-existing layer "${r}".`)));else{if(this._order.splice(b,0,l),this._layerOrderChanged=!0,this._layers[l]=d,this._removedLayers[l]&&d.source&&d.type!=="custom"){let E=this._removedLayers[l];delete this._removedLayers[l],E.type!==d.type?this._updatedSources[d.source]="clear":(this._updatedSources[d.source]="reload",this.sourceCaches[d.source].pause())}this._updateLayer(d),d.onAdd&&d.onAdd(this.map)}}moveLayer(e,r){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new u.k(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===r)return;let o=this._order.indexOf(e);this._order.splice(o,1);let l=r?this._order.indexOf(r):this._order.length;r&&l===-1?this.fire(new u.k(new Error(`Cannot move layer "${e}" before non-existing layer "${r}".`))):(this._order.splice(l,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();let r=this._layers[e];if(!r)return void this.fire(new u.k(new Error(`Cannot remove non-existing layer "${e}".`)));r.setEventedParent(null);let o=this._order.indexOf(e);this._order.splice(o,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=r,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],r.onRemove&&r.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,r,o){this._checkLoaded();let l=this.getLayer(e);l?l.minzoom===r&&l.maxzoom===o||(r!=null&&(l.minzoom=r),o!=null&&(l.maxzoom=o),this._updateLayer(l)):this.fire(new u.k(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,r,o={}){this._checkLoaded();let l=this.getLayer(e);if(l){if(!u.bE(l.filter,r))return r==null?(l.filter=void 0,void this._updateLayer(l)):void(this._validate(u.y.filter,`layers.${l.id}.filter`,r,null,o)||(l.filter=u.bB(r),this._updateLayer(l)))}else this.fire(new u.k(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return u.bB(this.getLayer(e).filter)}setLayoutProperty(e,r,o,l={}){this._checkLoaded();let d=this.getLayer(e);d?u.bE(d.getLayoutProperty(r),o)||(d.setLayoutProperty(r,o,l),this._updateLayer(d)):this.fire(new u.k(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,r){let o=this.getLayer(e);if(o)return o.getLayoutProperty(r);this.fire(new u.k(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,r,o,l={}){this._checkLoaded();let d=this.getLayer(e);d?u.bE(d.getPaintProperty(r),o)||(d.setPaintProperty(r,o,l)&&this._updateLayer(d),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new u.k(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,r){return this.getLayer(e).getPaintProperty(r)}setFeatureState(e,r){this._checkLoaded();let o=e.source,l=e.sourceLayer,d=this.sourceCaches[o];if(d===void 0)return void this.fire(new u.k(new Error(`The source '${o}' does not exist in the map's style.`)));let b=d.getSource().type;b==="geojson"&&l?this.fire(new u.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||l?(e.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),d.setFeatureState(l,e.id,r)):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,r){this._checkLoaded();let o=e.source,l=this.sourceCaches[o];if(l===void 0)return void this.fire(new u.k(new Error(`The source '${o}' does not exist in the map's style.`)));let d=l.getSource().type,b=d==="vector"?e.sourceLayer:void 0;d!=="vector"||b?r&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new u.k(new Error("A feature id is required to remove its specific state property."))):l.removeFeatureState(b,e.id,r):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();let r=e.source,o=e.sourceLayer,l=this.sourceCaches[r];if(l!==void 0)return l.getSource().type!=="vector"||o?(e.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),l.getFeatureState(o,e.id)):void this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.k(new Error(`The source '${r}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let e=u.bF(this.sourceCaches,d=>d.serialize()),r=this._serializeByIds(this._order,!0),o=this.map.getTerrain()||void 0,l=this.stylesheet;return u.bG({version:l.version,name:l.name,metadata:l.metadata,light:l.light,sky:l.sky,center:l.center,zoom:l.zoom,bearing:l.bearing,pitch:l.pitch,sprite:l.sprite,glyphs:l.glyphs,transition:l.transition,projection:l.projection,sources:e,layers:r,terrain:o},d=>d!==void 0)}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){let r=b=>this._layers[b].type==="fill-extrusion",o={},l=[];for(let b=this._order.length-1;b>=0;b--){let E=this._order[b];if(r(E)){o[E]=b;for(let C of e){let k=C[E];if(k)for(let O of k)l.push(O)}}}l.sort((b,E)=>E.intersectionZ-b.intersectionZ);let d=[];for(let b=this._order.length-1;b>=0;b--){let E=this._order[b];if(r(E))for(let C=l.length-1;C>=0;C--){let k=l[C].feature;if(o[k.layer.id]<b)break;d.push(k),l.pop()}else for(let C of e){let k=C[E];if(k)for(let O of k)d.push(O.feature)}}return d}queryRenderedFeatures(e,r,o){r&&r.filter&&this._validate(u.y.filter,"queryRenderedFeatures.filter",r.filter,null,r);let l={};if(r&&r.layers){if(!(Array.isArray(r.layers)||r.layers instanceof Set))return this.fire(new u.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let k of r.layers){let O=this._layers[k];if(!O)return this.fire(new u.k(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];l[O.source]=!0}}let d=[];r.availableImages=this._availableImages;let b=this._serializedAllLayers(),E=r.layers instanceof Set?r.layers:Array.isArray(r.layers)?new Set(r.layers):null,C=Object.assign(Object.assign({},r),{layers:E});for(let k in this.sourceCaches)r.layers&&!l[k]||d.push(Rs(this.sourceCaches[k],this._layers,b,e,C,o,this.map.terrain?(O,j,B)=>this.map.terrain.getElevation(O,j,B):void 0));return this.placement&&d.push(function(k,O,j,B,H,X,le){let oe={},ce=X.queryRenderedSymbols(B),fe=[];for(let xe of Object.keys(ce).map(Number))fe.push(le[xe]);fe.sort(xs);for(let xe of fe){let be=xe.featureIndex.lookupSymbolFeatures(ce[xe.bucketInstanceId],O,xe.bucketIndex,xe.sourceLayerIndex,H.filter,H.layers,H.availableImages,k);for(let Ee in be){let Ce=oe[Ee]=oe[Ee]||[],we=be[Ee];we.sort((Je,Bt)=>{let gt=xe.featureSortOrder;if(gt){let wt=gt.indexOf(Je.featureIndex);return gt.indexOf(Bt.featureIndex)-wt}return Bt.featureIndex-Je.featureIndex});for(let Je of we)Ce.push(Je)}}return function(xe,be,Ee){for(let Ce in xe)for(let we of xe[Ce])Js(we,Ee[be[Ce].source]);return xe}(oe,k,j)}(this._layers,b,this.sourceCaches,e,C,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(d)}querySourceFeatures(e,r){r&&r.filter&&this._validate(u.y.filter,"querySourceFeatures.filter",r.filter,null,r);let o=this.sourceCaches[e];return o?function(l,d){let b=l.getRenderableIds().map(k=>l.getTileByID(k)),E=[],C={};for(let k=0;k<b.length;k++){let O=b[k],j=O.tileID.canonical.key;C[j]||(C[j]=!0,O.querySourceFeatures(E,d))}return E}(o,r):[]}getLight(){return this.light.getLight()}setLight(e,r={}){this._checkLoaded();let o=this.light.getLight(),l=!1;for(let b in e)if(!u.bE(e[b],o[b])){l=!0;break}if(!l)return;let d={now:Vt.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,r),this.light.updateTransitions(d)}getProjection(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.projection}setProjection(e){if(this._checkLoaded(),this.projection){if(this.projection.name===e.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=e,this._setProjectionInternal(e.type)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,r={}){this._checkLoaded();let o=this.getSky(),l=!1;if(!e&&!o)return;if(e&&!o)l=!0;else if(!e&&o)l=!0;else for(let b in e)if(!u.bE(e[b],o[b])){l=!0;break}if(!l)return;let d={now:Vt.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,r),this.sky.updateTransitions(d)}_setProjectionInternal(e){let r=function(o){if(Array.isArray(o)){let l=new Mt({type:o});return{projection:l,transform:new ht,cameraHelper:new pt(l)}}switch(o){case"mercator":return{projection:new Br,transform:new wn,cameraHelper:new et};case"globe":{let l=new Mt({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:l,transform:new ht,cameraHelper:new pt(l)}}case"vertical-perspective":return{projection:new He,transform:new lt,cameraHelper:new it};default:return u.w(`Unknown projection name: ${o}. Falling back to mercator projection.`),{projection:new Br,transform:new wn,cameraHelper:new et}}}(e);this.projection=r.projection,this.map.migrateProjection(r.transform,r.cameraHelper);for(let o in this.sourceCaches)this.sourceCaches[o].reload()}_validate(e,r,o,l,d={}){return(!d||d.validate!==!1)&&_t(this,e.call(u.y,u.e({key:r,style:this.serialize(),value:o,styleSpec:u.v},l)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ya().off(So,this._rtlPluginLoaded);for(let r in this._layers)this._layers[r].setEventedParent(null);for(let r in this.sourceCaches){let o=this.sourceCaches[r];o.setEventedParent(null),o.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(let r in this.sourceCaches)this.sourceCaches[r].update(e,this.map.terrain)}_generateCollisionBoxes(){for(let e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,r,o,l,d=!1){let b=!1,E=!1,C={};for(let k of this._order){let O=this._layers[k];if(O.type!=="symbol")continue;if(!C[O.source]){let B=this.sourceCaches[O.source];C[O.source]=B.getRenderableIds(!0).map(H=>B.getTileByID(H)).sort((H,X)=>X.tileID.overscaledZ-H.tileID.overscaledZ||(H.tileID.isLessThan(X.tileID)?-1:1))}let j=this.crossTileSymbolIndex.addLayer(O,C[O.source],e.center.lng);b=b||j}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((d=d||this._layerOrderChanged||o===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(Vt.now(),e.zoom))&&(this.pauseablePlacement=new Wi(e,this.map.terrain,this._order,d,r,o,l,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(Vt.now()),E=!0),b&&this.pauseablePlacement.placement.setStale()),E||b)for(let k of this._order){let O=this._layers[k];O.type==="symbol"&&this.placement.updateLayerOpacities(O,C[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(Vt.now())}_releaseSymbolFadeTiles(){for(let e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,r){return u._(this,void 0,void 0,function*(){let o=yield this.imageManager.getImages(r.icons);this._updateTilesForChangedImages();let l=this.sourceCaches[r.source];return l&&l.setDependencies(r.tileID.key,r.type,r.icons),o})}getGlyphs(e,r){return u._(this,void 0,void 0,function*(){let o=yield this.glyphManager.getGlyphs(r.stacks),l=this.sourceCaches[r.source];return l&&l.setDependencies(r.tileID.key,r.type,[""]),o})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,r={}){this._checkLoaded(),e&&this._validate(u.y.glyphs,"glyphs",e,null,r)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,r,o={},l){this._checkLoaded();let d=[{id:e,url:r}],b=[...ur(this.stylesheet.sprite),...d];this._validate(u.y.sprite,"sprite",b,null,o)||(this.stylesheet.sprite=b,this._loadSprite(d,!0,l))}removeSprite(e){this._checkLoaded();let r=ur(this.stylesheet.sprite);if(r.find(o=>o.id===e)){if(this._spritesImagesIds[e])for(let o of this._spritesImagesIds[e])this.imageManager.removeImage(o),this._changedImages[o]=!0;r.splice(r.findIndex(o=>o.id===e),1),this.stylesheet.sprite=r.length>0?r:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}else this.fire(new u.k(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return ur(this.stylesheet.sprite)}setSprite(e,r={},o){this._checkLoaded(),e&&this._validate(u.y.sprite,"sprite",e,null,r)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,o):(this._unloadSprite(),o&&o(null)))}}var zt=u.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class $t{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,r,o,l,d,b,E,C,k){this.context=e;let O=this.boundPaintVertexBuffers.length!==l.length;for(let j=0;!O&&j<l.length;j++)this.boundPaintVertexBuffers[j]!==l[j]&&(O=!0);!this.vao||this.boundProgram!==r||this.boundLayoutVertexBuffer!==o||O||this.boundIndexBuffer!==d||this.boundVertexOffset!==b||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==C||this.boundDynamicVertexBuffer3!==k?this.freshBind(r,o,l,d,b,E,C,k):(e.bindVertexArray.set(this.vao),E&&E.bind(),d&&d.dynamicDraw&&d.bind(),C&&C.bind(),k&&k.bind())}freshBind(e,r,o,l,d,b,E,C){let k=e.numAttributes,O=this.context,j=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=r,this.boundPaintVertexBuffers=o,this.boundIndexBuffer=l,this.boundVertexOffset=d,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=C,r.enableAttributes(j,e);for(let B of o)B.enableAttributes(j,e);b&&b.enableAttributes(j,e),E&&E.enableAttributes(j,e),C&&C.enableAttributes(j,e),r.bind(),r.setVertexAttribPointers(j,e,d);for(let B of o)B.bind(),B.setVertexAttribPointers(j,e,d);b&&(b.bind(),b.setVertexAttribPointers(j,e,d)),l&&l.bind(),E&&(E.bind(),E.setVertexAttribPointers(j,e,d)),C&&(C.bind(),C.setVertexAttribPointers(j,e,d)),O.currentNumAttributes=k}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let Ke=(h,e,r,o,l)=>({u_texture:0,u_ele_delta:h,u_fog_matrix:e,u_fog_color:r?r.properties.get("fog-color"):u.b7.white,u_fog_ground_blend:r?r.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:l?0:r?r.calculateFogBlendOpacity(o):0,u_horizon_color:r?r.properties.get("horizon-color"):u.b7.white,u_horizon_fog_blend:r?r.properties.get("horizon-fog-blend"):1,u_is_globe_mode:l?1:0}),kt={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function St(h){let e=[];for(let r=0;r<h.length;r++){if(h[r]===null)continue;let o=h[r].split(" ");e.push(o.pop())}return e}class Dt{constructor(e,r,o,l,d,b,E,C,k=[]){let O=e.gl;this.program=O.createProgram();let j=St(r.staticAttributes),B=o?o.getBinderAttributes():[],H=j.concat(B),X=hr.prelude.staticUniforms?St(hr.prelude.staticUniforms):[],le=E.staticUniforms?St(E.staticUniforms):[],oe=r.staticUniforms?St(r.staticUniforms):[],ce=o?o.getBinderUniforms():[],fe=X.concat(le).concat(oe).concat(ce),xe=[];for(let gt of fe)xe.indexOf(gt)<0&&xe.push(gt);let be=o?o.defines():[];Ve(O)&&be.unshift("#version 300 es"),d&&be.push("#define OVERDRAW_INSPECTOR;"),b&&be.push("#define TERRAIN3D;"),C&&be.push(C),k&&be.push(...k);let Ee=be.concat(hr.prelude.fragmentSource,E.fragmentSource,r.fragmentSource).join(`
`),Ce=be.concat(hr.prelude.vertexSource,E.vertexSource,r.vertexSource).join(`
`);Ve(O)||(Ee=function(gt){return gt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Ee),Ce=function(gt){return gt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Ce));let we=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(we,Ee),O.compileShader(we),!O.getShaderParameter(we,O.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${O.getShaderInfoLog(we)}`);O.attachShader(this.program,we);let Je=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(Je,Ce),O.compileShader(Je),!O.getShaderParameter(Je,O.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${O.getShaderInfoLog(Je)}`);O.attachShader(this.program,Je),this.attributes={};let Bt={};this.numAttributes=H.length;for(let gt=0;gt<this.numAttributes;gt++)H[gt]&&(O.bindAttribLocation(this.program,gt,H[gt]),this.attributes[H[gt]]=gt);if(O.linkProgram(this.program),!O.getProgramParameter(this.program,O.LINK_STATUS))throw new Error(`Program failed to link: ${O.getProgramInfoLog(this.program)}`);O.deleteShader(Je),O.deleteShader(we);for(let gt=0;gt<xe.length;gt++){let wt=xe[gt];if(wt&&!Bt[wt]){let bt=O.getUniformLocation(this.program,wt);bt&&(Bt[wt]=bt)}}this.fixedUniforms=l(e,Bt),this.terrainUniforms=((gt,wt)=>({u_depth:new u.bH(gt,wt.u_depth),u_terrain:new u.bH(gt,wt.u_terrain),u_terrain_dim:new u.b8(gt,wt.u_terrain_dim),u_terrain_matrix:new u.bJ(gt,wt.u_terrain_matrix),u_terrain_unpack:new u.bK(gt,wt.u_terrain_unpack),u_terrain_exaggeration:new u.b8(gt,wt.u_terrain_exaggeration)}))(e,Bt),this.projectionUniforms=((gt,wt)=>({u_projection_matrix:new u.bJ(gt,wt.u_projection_matrix),u_projection_tile_mercator_coords:new u.bK(gt,wt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new u.bK(gt,wt.u_projection_clipping_plane),u_projection_transition:new u.b8(gt,wt.u_projection_transition),u_projection_fallback_matrix:new u.bJ(gt,wt.u_projection_fallback_matrix)}))(e,Bt),this.binderUniforms=o?o.getUniforms(e,Bt):[]}draw(e,r,o,l,d,b,E,C,k,O,j,B,H,X,le,oe,ce,fe,xe){let be=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(o),e.setStencilMode(l),e.setColorMode(d),e.setCullFace(b),C){e.activeTexture.set(be.TEXTURE2),be.bindTexture(be.TEXTURE_2D,C.depthTexture),e.activeTexture.set(be.TEXTURE3),be.bindTexture(be.TEXTURE_2D,C.texture);for(let Ce in this.terrainUniforms)this.terrainUniforms[Ce].set(C[Ce])}if(k)for(let Ce in k)this.projectionUniforms[kt[Ce]].set(k[Ce]);if(E)for(let Ce in this.fixedUniforms)this.fixedUniforms[Ce].set(E[Ce]);oe&&oe.setUniforms(e,this.binderUniforms,X,{zoom:le});let Ee=0;switch(r){case be.LINES:Ee=2;break;case be.TRIANGLES:Ee=3;break;case be.LINE_STRIP:Ee=1}for(let Ce of H.get()){let we=Ce.vaos||(Ce.vaos={});(we[O]||(we[O]=new $t)).bind(e,this,j,oe?oe.getPaintVertexBuffers():[],B,Ce.vertexOffset,ce,fe,xe),be.drawElements(r,Ce.primitiveLength*Ee,be.UNSIGNED_SHORT,Ce.primitiveOffset*Ee*2)}}}function Oe(h,e,r){let o=1/u.az(r,1,e.transform.tileZoom),l=Math.pow(2,r.tileID.overscaledZ),d=r.tileSize*Math.pow(2,e.transform.tileZoom)/l,b=d*(r.tileID.canonical.x+r.tileID.wrap*l),E=d*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[o,h.fromScale,h.toScale],u_fade:h.t,u_pixel_coord_upper:[b>>16,E>>16],u_pixel_coord_lower:[65535&b,65535&E]}}let De=(h,e,r,o)=>{let l=h.style.light,d=l.properties.get("position"),b=[d.x,d.y,d.z],E=u.bN();l.properties.get("anchor")==="viewport"&&u.bO(E,h.transform.bearingInRadians),u.bP(b,b,E);let C=h.transform.transformLightDirection(b),k=l.properties.get("color");return{u_lightpos:b,u_lightpos_globe:C,u_lightintensity:l.properties.get("intensity"),u_lightcolor:[k.r,k.g,k.b],u_vertical_gradient:+e,u_opacity:r,u_fill_translate:o}},kn=(h,e,r,o,l,d,b)=>u.e(De(h,e,r,o),Oe(d,h,b),{u_height_factor:-Math.pow(2,l.overscaledZ)/b.tileSize/8}),i1=(h,e,r,o)=>u.e(Oe(e,h,r),{u_fill_translate:o}),Rl=(h,e)=>({u_world:h,u_fill_translate:e}),$o=(h,e,r,o,l)=>u.e(i1(h,e,r,l),{u_world:o}),uo=(h,e,r,o,l)=>{let d=h.transform,b,E,C=0;if(r.paint.get("circle-pitch-alignment")==="map"){let k=u.az(e,1,d.zoom);b=!0,E=[k,k],C=k/(u.Z*Math.pow(2,e.tileID.overscaledZ))*2*Math.PI*l}else b=!1,E=d.pixelsToGLUnits;return{u_camera_to_center_distance:d.cameraToCenterDistance,u_scale_with_map:+(r.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+b,u_device_pixel_ratio:h.pixelRatio,u_extrude_scale:E,u_globe_extrude_scale:C,u_translate:o}},yl=h=>({u_pixel_extrude_scale:[1/h.width,1/h.height]}),kl=h=>({u_viewport_size:[h.width,h.height]}),dc=(h,e=1)=>({u_color:h,u_overlay:0,u_overlay_scale:e}),Fi=(h,e,r,o)=>{let l=u.az(h,1,e)/(u.Z*Math.pow(2,h.tileID.overscaledZ))*2*Math.PI*o;return{u_extrude_scale:u.az(h,1,e),u_intensity:r,u_globe_extrude_scale:l}},Bn=(h,e,r,o)=>{let l=u.K();u.bQ(l,0,h.width,h.height,0,0,1);let d=h.context.gl;return{u_matrix:l,u_world:[d.drawingBufferWidth,d.drawingBufferHeight],u_image:r,u_color_ramp:o,u_opacity:e.paint.get("heatmap-opacity")}},P1=(h,e,r)=>{let o=r.paint.get("hillshade-accent-color"),l;switch(r.paint.get("hillshade-method")){case"basic":l=4;break;case"combined":l=1;break;case"igor":l=2;break;case"multidirectional":l=3;break;default:l=0}let d=r.getIlluminationProperties();for(let b=0;b<d.directionRadians.length;b++)r.paint.get("hillshade-illumination-anchor")==="viewport"&&(d.directionRadians[b]+=h.transform.bearingInRadians);return{u_image:0,u_latrange:fc(0,e.tileID),u_exaggeration:r.paint.get("hillshade-exaggeration"),u_altitudes:d.altitudeRadians,u_azimuths:d.directionRadians,u_accent:o,u_method:l,u_highlights:d.highlightColor,u_shadows:d.shadowColor}},pc=(h,e)=>{let r=e.stride,o=u.K();return u.bQ(o,0,u.Z,-8192,0,0,1),u.L(o,o,[0,-8192,0]),{u_matrix:o,u_image:1,u_dimension:[r,r],u_zoom:h.overscaledZ,u_unpack:e.getUnpackVector()}};function fc(h,e){let r=Math.pow(2,e.canonical.z),o=e.canonical.y;return[new u.$(0,o/r).toLngLat().lat,new u.$(0,(o+1)/r).toLngLat().lat]}let $a=(h,e,r,o)=>{let l=h.transform;return{u_translation:Fo(h,e,r),u_ratio:o/u.az(e,1,l.zoom),u_device_pixel_ratio:h.pixelRatio,u_units_to_pixels:[1/l.pixelsToGLUnits[0],1/l.pixelsToGLUnits[1]]}},Ao=(h,e,r,o,l)=>u.e($a(h,e,r,o),{u_image:0,u_image_height:l}),Dl=(h,e,r,o,l)=>{let d=h.transform,b=Ll(e,d);return{u_translation:Fo(h,e,r),u_texsize:e.imageAtlasTexture.size,u_ratio:o/u.az(e,1,d.zoom),u_device_pixel_ratio:h.pixelRatio,u_image:0,u_scale:[b,l.fromScale,l.toScale],u_fade:l.t,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},r1=(h,e,r,o,l,d)=>{let b=h.lineAtlas,E=Ll(e,h.transform),C=r.layout.get("line-cap")==="round",k=b.getDash(l.from,C),O=b.getDash(l.to,C),j=k.width*d.fromScale,B=O.width*d.toScale;return u.e($a(h,e,r,o),{u_patternscale_a:[E/j,-k.height/2],u_patternscale_b:[E/B,-O.height/2],u_sdfgamma:b.width/(256*Math.min(j,B)*h.pixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:O.y,u_mix:d.t})};function Ll(h,e){return 1/u.az(h,1,e.tileZoom)}function Fo(h,e,r){return u.aA(h.transform,e,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}let pe=(h,e,r,o,l)=>{return{u_tl_parent:h,u_scale_parent:e,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*o.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:o.paint.get("raster-brightness-min"),u_brightness_high:o.paint.get("raster-brightness-max"),u_saturation_factor:(b=o.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(d=o.paint.get("raster-contrast"),d>0?1/(1-d):1+d),u_spin_weights:mc(o.paint.get("raster-hue-rotate")),u_coords_top:[l[0].x,l[0].y,l[1].x,l[1].y],u_coords_bottom:[l[3].x,l[3].y,l[2].x,l[2].y]};var d,b};function mc(h){h*=Math.PI/180;let e=Math.sin(h),r=Math.cos(h);return[(2*r+1)/3,(-Math.sqrt(3)*e-r+1)/3,(Math.sqrt(3)*e-r+1)/3]}let Qa=(h,e,r,o,l,d,b,E,C,k,O,j,B)=>{let H=b.transform;return{u_is_size_zoom_constant:+(h==="constant"||h==="source"),u_is_size_feature_constant:+(h==="constant"||h==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:H.cameraToCenterDistance,u_pitch:H.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:H.width/H.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_label_plane_matrix:E,u_coord_matrix:C,u_is_text:+O,u_pitch_with_map:+o,u_is_along_line:l,u_is_variable_anchor:d,u_texsize:j,u_texture:0,u_translation:k,u_pitched_scale:B}},gc=(h,e,r,o,l,d,b,E,C,k,O,j,B,H)=>{let X=b.transform;return u.e(Qa(h,e,r,o,l,d,b,E,C,k,O,j,H),{u_gamma_scale:o?Math.cos(X.pitch*Math.PI/180)*X.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:1})},Ol=(h,e,r,o,l,d,b,E,C,k,O,j,B)=>u.e(gc(h,e,r,o,l,d,b,E,C,k,!0,O,0,B),{u_texsize_icon:j,u_texture_icon:1}),R1=(h,e)=>({u_opacity:h,u_color:e}),k1=(h,e,r,o,l)=>u.e(function(d,b,E,C){let k=E.imageManager.getPattern(d.from.toString()),O=E.imageManager.getPattern(d.to.toString()),{width:j,height:B}=E.imageManager.getPixelSize(),H=Math.pow(2,C.tileID.overscaledZ),X=C.tileSize*Math.pow(2,E.transform.tileZoom)/H,le=X*(C.tileID.canonical.x+C.tileID.wrap*H),oe=X*C.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:k.tl,u_pattern_br_a:k.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[j,B],u_mix:b.t,u_pattern_size_a:k.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:b.fromScale,u_scale_b:b.toScale,u_tile_units_to_pixels:1/u.az(C,1,E.transform.tileZoom),u_pixel_coord_upper:[le>>16,oe>>16],u_pixel_coord_lower:[65535&le,65535&oe]}}(r,l,e,o),{u_opacity:h}),Bo=(h,e)=>{},Co={fillExtrusion:(h,e)=>({u_lightpos:new u.bL(h,e.u_lightpos),u_lightpos_globe:new u.bL(h,e.u_lightpos_globe),u_lightintensity:new u.b8(h,e.u_lightintensity),u_lightcolor:new u.bL(h,e.u_lightcolor),u_vertical_gradient:new u.b8(h,e.u_vertical_gradient),u_opacity:new u.b8(h,e.u_opacity),u_fill_translate:new u.bM(h,e.u_fill_translate)}),fillExtrusionPattern:(h,e)=>({u_lightpos:new u.bL(h,e.u_lightpos),u_lightpos_globe:new u.bL(h,e.u_lightpos_globe),u_lightintensity:new u.b8(h,e.u_lightintensity),u_lightcolor:new u.bL(h,e.u_lightcolor),u_vertical_gradient:new u.b8(h,e.u_vertical_gradient),u_height_factor:new u.b8(h,e.u_height_factor),u_opacity:new u.b8(h,e.u_opacity),u_fill_translate:new u.bM(h,e.u_fill_translate),u_image:new u.bH(h,e.u_image),u_texsize:new u.bM(h,e.u_texsize),u_pixel_coord_upper:new u.bM(h,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(h,e.u_pixel_coord_lower),u_scale:new u.bL(h,e.u_scale),u_fade:new u.b8(h,e.u_fade)}),fill:(h,e)=>({u_fill_translate:new u.bM(h,e.u_fill_translate)}),fillPattern:(h,e)=>({u_image:new u.bH(h,e.u_image),u_texsize:new u.bM(h,e.u_texsize),u_pixel_coord_upper:new u.bM(h,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(h,e.u_pixel_coord_lower),u_scale:new u.bL(h,e.u_scale),u_fade:new u.b8(h,e.u_fade),u_fill_translate:new u.bM(h,e.u_fill_translate)}),fillOutline:(h,e)=>({u_world:new u.bM(h,e.u_world),u_fill_translate:new u.bM(h,e.u_fill_translate)}),fillOutlinePattern:(h,e)=>({u_world:new u.bM(h,e.u_world),u_image:new u.bH(h,e.u_image),u_texsize:new u.bM(h,e.u_texsize),u_pixel_coord_upper:new u.bM(h,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(h,e.u_pixel_coord_lower),u_scale:new u.bL(h,e.u_scale),u_fade:new u.b8(h,e.u_fade),u_fill_translate:new u.bM(h,e.u_fill_translate)}),circle:(h,e)=>({u_camera_to_center_distance:new u.b8(h,e.u_camera_to_center_distance),u_scale_with_map:new u.bH(h,e.u_scale_with_map),u_pitch_with_map:new u.bH(h,e.u_pitch_with_map),u_extrude_scale:new u.bM(h,e.u_extrude_scale),u_device_pixel_ratio:new u.b8(h,e.u_device_pixel_ratio),u_globe_extrude_scale:new u.b8(h,e.u_globe_extrude_scale),u_translate:new u.bM(h,e.u_translate)}),collisionBox:(h,e)=>({u_pixel_extrude_scale:new u.bM(h,e.u_pixel_extrude_scale)}),collisionCircle:(h,e)=>({u_viewport_size:new u.bM(h,e.u_viewport_size)}),debug:(h,e)=>({u_color:new u.bI(h,e.u_color),u_overlay:new u.bH(h,e.u_overlay),u_overlay_scale:new u.b8(h,e.u_overlay_scale)}),depth:Bo,clippingMask:Bo,heatmap:(h,e)=>({u_extrude_scale:new u.b8(h,e.u_extrude_scale),u_intensity:new u.b8(h,e.u_intensity),u_globe_extrude_scale:new u.b8(h,e.u_globe_extrude_scale)}),heatmapTexture:(h,e)=>({u_matrix:new u.bJ(h,e.u_matrix),u_world:new u.bM(h,e.u_world),u_image:new u.bH(h,e.u_image),u_color_ramp:new u.bH(h,e.u_color_ramp),u_opacity:new u.b8(h,e.u_opacity)}),hillshade:(h,e)=>({u_image:new u.bH(h,e.u_image),u_latrange:new u.bM(h,e.u_latrange),u_exaggeration:new u.b8(h,e.u_exaggeration),u_altitudes:new u.bS(h,e.u_altitudes),u_azimuths:new u.bS(h,e.u_azimuths),u_accent:new u.bI(h,e.u_accent),u_method:new u.bH(h,e.u_method),u_shadows:new u.bR(h,e.u_shadows),u_highlights:new u.bR(h,e.u_highlights)}),hillshadePrepare:(h,e)=>({u_matrix:new u.bJ(h,e.u_matrix),u_image:new u.bH(h,e.u_image),u_dimension:new u.bM(h,e.u_dimension),u_zoom:new u.b8(h,e.u_zoom),u_unpack:new u.bK(h,e.u_unpack)}),line:(h,e)=>({u_translation:new u.bM(h,e.u_translation),u_ratio:new u.b8(h,e.u_ratio),u_device_pixel_ratio:new u.b8(h,e.u_device_pixel_ratio),u_units_to_pixels:new u.bM(h,e.u_units_to_pixels)}),lineGradient:(h,e)=>({u_translation:new u.bM(h,e.u_translation),u_ratio:new u.b8(h,e.u_ratio),u_device_pixel_ratio:new u.b8(h,e.u_device_pixel_ratio),u_units_to_pixels:new u.bM(h,e.u_units_to_pixels),u_image:new u.bH(h,e.u_image),u_image_height:new u.b8(h,e.u_image_height)}),linePattern:(h,e)=>({u_translation:new u.bM(h,e.u_translation),u_texsize:new u.bM(h,e.u_texsize),u_ratio:new u.b8(h,e.u_ratio),u_device_pixel_ratio:new u.b8(h,e.u_device_pixel_ratio),u_image:new u.bH(h,e.u_image),u_units_to_pixels:new u.bM(h,e.u_units_to_pixels),u_scale:new u.bL(h,e.u_scale),u_fade:new u.b8(h,e.u_fade)}),lineSDF:(h,e)=>({u_translation:new u.bM(h,e.u_translation),u_ratio:new u.b8(h,e.u_ratio),u_device_pixel_ratio:new u.b8(h,e.u_device_pixel_ratio),u_units_to_pixels:new u.bM(h,e.u_units_to_pixels),u_patternscale_a:new u.bM(h,e.u_patternscale_a),u_patternscale_b:new u.bM(h,e.u_patternscale_b),u_sdfgamma:new u.b8(h,e.u_sdfgamma),u_image:new u.bH(h,e.u_image),u_tex_y_a:new u.b8(h,e.u_tex_y_a),u_tex_y_b:new u.b8(h,e.u_tex_y_b),u_mix:new u.b8(h,e.u_mix)}),raster:(h,e)=>({u_tl_parent:new u.bM(h,e.u_tl_parent),u_scale_parent:new u.b8(h,e.u_scale_parent),u_buffer_scale:new u.b8(h,e.u_buffer_scale),u_fade_t:new u.b8(h,e.u_fade_t),u_opacity:new u.b8(h,e.u_opacity),u_image0:new u.bH(h,e.u_image0),u_image1:new u.bH(h,e.u_image1),u_brightness_low:new u.b8(h,e.u_brightness_low),u_brightness_high:new u.b8(h,e.u_brightness_high),u_saturation_factor:new u.b8(h,e.u_saturation_factor),u_contrast_factor:new u.b8(h,e.u_contrast_factor),u_spin_weights:new u.bL(h,e.u_spin_weights),u_coords_top:new u.bK(h,e.u_coords_top),u_coords_bottom:new u.bK(h,e.u_coords_bottom)}),symbolIcon:(h,e)=>({u_is_size_zoom_constant:new u.bH(h,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(h,e.u_is_size_feature_constant),u_size_t:new u.b8(h,e.u_size_t),u_size:new u.b8(h,e.u_size),u_camera_to_center_distance:new u.b8(h,e.u_camera_to_center_distance),u_pitch:new u.b8(h,e.u_pitch),u_rotate_symbol:new u.bH(h,e.u_rotate_symbol),u_aspect_ratio:new u.b8(h,e.u_aspect_ratio),u_fade_change:new u.b8(h,e.u_fade_change),u_label_plane_matrix:new u.bJ(h,e.u_label_plane_matrix),u_coord_matrix:new u.bJ(h,e.u_coord_matrix),u_is_text:new u.bH(h,e.u_is_text),u_pitch_with_map:new u.bH(h,e.u_pitch_with_map),u_is_along_line:new u.bH(h,e.u_is_along_line),u_is_variable_anchor:new u.bH(h,e.u_is_variable_anchor),u_texsize:new u.bM(h,e.u_texsize),u_texture:new u.bH(h,e.u_texture),u_translation:new u.bM(h,e.u_translation),u_pitched_scale:new u.b8(h,e.u_pitched_scale)}),symbolSDF:(h,e)=>({u_is_size_zoom_constant:new u.bH(h,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(h,e.u_is_size_feature_constant),u_size_t:new u.b8(h,e.u_size_t),u_size:new u.b8(h,e.u_size),u_camera_to_center_distance:new u.b8(h,e.u_camera_to_center_distance),u_pitch:new u.b8(h,e.u_pitch),u_rotate_symbol:new u.bH(h,e.u_rotate_symbol),u_aspect_ratio:new u.b8(h,e.u_aspect_ratio),u_fade_change:new u.b8(h,e.u_fade_change),u_label_plane_matrix:new u.bJ(h,e.u_label_plane_matrix),u_coord_matrix:new u.bJ(h,e.u_coord_matrix),u_is_text:new u.bH(h,e.u_is_text),u_pitch_with_map:new u.bH(h,e.u_pitch_with_map),u_is_along_line:new u.bH(h,e.u_is_along_line),u_is_variable_anchor:new u.bH(h,e.u_is_variable_anchor),u_texsize:new u.bM(h,e.u_texsize),u_texture:new u.bH(h,e.u_texture),u_gamma_scale:new u.b8(h,e.u_gamma_scale),u_device_pixel_ratio:new u.b8(h,e.u_device_pixel_ratio),u_is_halo:new u.bH(h,e.u_is_halo),u_translation:new u.bM(h,e.u_translation),u_pitched_scale:new u.b8(h,e.u_pitched_scale)}),symbolTextAndIcon:(h,e)=>({u_is_size_zoom_constant:new u.bH(h,e.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(h,e.u_is_size_feature_constant),u_size_t:new u.b8(h,e.u_size_t),u_size:new u.b8(h,e.u_size),u_camera_to_center_distance:new u.b8(h,e.u_camera_to_center_distance),u_pitch:new u.b8(h,e.u_pitch),u_rotate_symbol:new u.bH(h,e.u_rotate_symbol),u_aspect_ratio:new u.b8(h,e.u_aspect_ratio),u_fade_change:new u.b8(h,e.u_fade_change),u_label_plane_matrix:new u.bJ(h,e.u_label_plane_matrix),u_coord_matrix:new u.bJ(h,e.u_coord_matrix),u_is_text:new u.bH(h,e.u_is_text),u_pitch_with_map:new u.bH(h,e.u_pitch_with_map),u_is_along_line:new u.bH(h,e.u_is_along_line),u_is_variable_anchor:new u.bH(h,e.u_is_variable_anchor),u_texsize:new u.bM(h,e.u_texsize),u_texsize_icon:new u.bM(h,e.u_texsize_icon),u_texture:new u.bH(h,e.u_texture),u_texture_icon:new u.bH(h,e.u_texture_icon),u_gamma_scale:new u.b8(h,e.u_gamma_scale),u_device_pixel_ratio:new u.b8(h,e.u_device_pixel_ratio),u_is_halo:new u.bH(h,e.u_is_halo),u_translation:new u.bM(h,e.u_translation),u_pitched_scale:new u.b8(h,e.u_pitched_scale)}),background:(h,e)=>({u_opacity:new u.b8(h,e.u_opacity),u_color:new u.bI(h,e.u_color)}),backgroundPattern:(h,e)=>({u_opacity:new u.b8(h,e.u_opacity),u_image:new u.bH(h,e.u_image),u_pattern_tl_a:new u.bM(h,e.u_pattern_tl_a),u_pattern_br_a:new u.bM(h,e.u_pattern_br_a),u_pattern_tl_b:new u.bM(h,e.u_pattern_tl_b),u_pattern_br_b:new u.bM(h,e.u_pattern_br_b),u_texsize:new u.bM(h,e.u_texsize),u_mix:new u.b8(h,e.u_mix),u_pattern_size_a:new u.bM(h,e.u_pattern_size_a),u_pattern_size_b:new u.bM(h,e.u_pattern_size_b),u_scale_a:new u.b8(h,e.u_scale_a),u_scale_b:new u.b8(h,e.u_scale_b),u_pixel_coord_upper:new u.bM(h,e.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(h,e.u_pixel_coord_lower),u_tile_units_to_pixels:new u.b8(h,e.u_tile_units_to_pixels)}),terrain:(h,e)=>({u_texture:new u.bH(h,e.u_texture),u_ele_delta:new u.b8(h,e.u_ele_delta),u_fog_matrix:new u.bJ(h,e.u_fog_matrix),u_fog_color:new u.bI(h,e.u_fog_color),u_fog_ground_blend:new u.b8(h,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.b8(h,e.u_fog_ground_blend_opacity),u_horizon_color:new u.bI(h,e.u_horizon_color),u_horizon_fog_blend:new u.b8(h,e.u_horizon_fog_blend),u_is_globe_mode:new u.b8(h,e.u_is_globe_mode)}),terrainDepth:(h,e)=>({u_ele_delta:new u.b8(h,e.u_ele_delta)}),terrainCoords:(h,e)=>({u_texture:new u.bH(h,e.u_texture),u_terrain_coords_id:new u.b8(h,e.u_terrain_coords_id),u_ele_delta:new u.b8(h,e.u_ele_delta)}),projectionErrorMeasurement:(h,e)=>({u_input:new u.b8(h,e.u_input),u_output_expected:new u.b8(h,e.u_output_expected)}),atmosphere:(h,e)=>({u_sun_pos:new u.bL(h,e.u_sun_pos),u_atmosphere_blend:new u.b8(h,e.u_atmosphere_blend),u_globe_position:new u.bL(h,e.u_globe_position),u_globe_radius:new u.b8(h,e.u_globe_radius),u_inv_proj_matrix:new u.bJ(h,e.u_inv_proj_matrix)}),sky:(h,e)=>({u_sky_color:new u.bI(h,e.u_sky_color),u_horizon_color:new u.bI(h,e.u_horizon_color),u_horizon:new u.bM(h,e.u_horizon),u_horizon_normal:new u.bM(h,e.u_horizon_normal),u_sky_horizon_blend:new u.b8(h,e.u_sky_horizon_blend),u_sky_blend:new u.b8(h,e.u_sky_blend)})};class ho{constructor(e,r,o){this.context=e;let l=e.gl;this.buffer=l.createBuffer(),this.dynamicDraw=!!o,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),l.bufferData(l.ELEMENT_ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?l.DYNAMIC_DRAW:l.STATIC_DRAW),this.dynamicDraw||delete r.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){let r=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),r.bufferSubData(r.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let D1={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class va{constructor(e,r,o,l){this.length=r.length,this.attributes=o,this.itemSize=r.bytesPerElement,this.dynamicDraw=l,this.context=e;let d=e.gl;this.buffer=d.createBuffer(),e.bindVertexBuffer.set(this.buffer),d.bufferData(d.ARRAY_BUFFER,r.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete r.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);let r=this.context.gl;this.bind(),r.bufferSubData(r.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,r){for(let o=0;o<this.attributes.length;o++){let l=r.attributes[this.attributes[o].name];l!==void 0&&e.enableVertexAttribArray(l)}}setVertexAttribPointers(e,r,o){for(let l=0;l<this.attributes.length;l++){let d=this.attributes[l],b=r.attributes[d.name];b!==void 0&&e.vertexAttribPointer(b,d.components,e[D1[d.type]],!1,this.itemSize,d.offset+this.itemSize*(o||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class jr{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class eo extends jr{getDefault(){return u.b7.transparent}set(e){let r=this.current;(e.r!==r.r||e.g!==r.g||e.b!==r.b||e.a!==r.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Nl extends jr{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class Ui extends jr{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class Ri extends jr{getDefault(){return[!0,!0,!0,!0]}set(e){let r=this.current;(e[0]!==r[0]||e[1]!==r[1]||e[2]!==r[2]||e[3]!==r[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Xt extends jr{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Wt extends jr{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class ii extends jr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){let r=this.current;(e.func!==r.func||e.ref!==r.ref||e.mask!==r.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class L1 extends jr{getDefault(){let e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){let r=this.current;(e[0]!==r[0]||e[1]!==r[1]||e[2]!==r[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class di extends jr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let r=this.gl;e?r.enable(r.STENCIL_TEST):r.disable(r.STENCIL_TEST),this.current=e,this.dirty=!1}}class ui extends jr{getDefault(){return[0,1]}set(e){let r=this.current;(e[0]!==r[0]||e[1]!==r[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class pi extends jr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let r=this.gl;e?r.enable(r.DEPTH_TEST):r.disable(r.DEPTH_TEST),this.current=e,this.dirty=!1}}class Ki extends jr{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Xi extends jr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let r=this.gl;e?r.enable(r.BLEND):r.disable(r.BLEND),this.current=e,this.dirty=!1}}class Ai extends jr{getDefault(){let e=this.gl;return[e.ONE,e.ZERO]}set(e){let r=this.current;(e[0]!==r[0]||e[1]!==r[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Si extends jr{getDefault(){return u.b7.transparent}set(e){let r=this.current;(e.r!==r.r||e.g!==r.g||e.b!==r.b||e.a!==r.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Gi extends jr{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class tr extends jr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let r=this.gl;e?r.enable(r.CULL_FACE):r.disable(r.CULL_FACE),this.current=e,this.dirty=!1}}class ir extends jr{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class mi extends jr{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class oi extends jr{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class Ii extends jr{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class ri extends jr{getDefault(){let e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){let r=this.current;(e[0]!==r[0]||e[1]!==r[1]||e[2]!==r[2]||e[3]!==r[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class yi extends jr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;let r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class ki extends jr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;let r=this.gl;r.bindRenderbuffer(r.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class si extends jr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;let r=this.gl;r.bindTexture(r.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class gi extends jr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;let r=this.gl;r.bindBuffer(r.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class _i extends jr{getDefault(){return null}set(e){let r=this.gl;r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class wi extends jr{getDefault(){return null}set(e){var r;if(e===this.current&&!this.dirty)return;let o=this.gl;Ve(o)?o.bindVertexArray(e):(r=o.getExtension("OES_vertex_array_object"))===null||r===void 0||r.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Bi extends jr{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;let r=this.gl;r.pixelStorei(r.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class $i extends jr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let r=this.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class ji extends jr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;let r=this.gl;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Vi extends jr{constructor(e,r){super(e),this.context=e,this.parent=r}getDefault(){return null}}class Oi extends Vi{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let r=this.gl;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Ni extends Vi{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let r=this.gl;r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class qi extends Vi{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let r=this.gl;r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,e),this.current=e,this.dirty=!1}}let Ji="Framebuffer is not complete";class ni{constructor(e,r,o,l,d){this.context=e,this.width=r,this.height=o;let b=e.gl,E=this.framebuffer=b.createFramebuffer();if(this.colorAttachment=new Oi(e,E),l)this.depthAttachment=d?new qi(e,E):new Ni(e,E);else if(d)throw new Error("Stencil cannot be set without depth");if(b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE)throw new Error(Ji)}destroy(){let e=this.context.gl,r=this.colorAttachment.get();if(r&&e.deleteTexture(r),this.depthAttachment){let o=this.depthAttachment.get();o&&e.deleteRenderbuffer(o)}e.deleteFramebuffer(this.framebuffer)}}class Pi{constructor(e){var r,o;if(this.gl=e,this.clearColor=new eo(this),this.clearDepth=new Nl(this),this.clearStencil=new Ui(this),this.colorMask=new Ri(this),this.depthMask=new Xt(this),this.stencilMask=new Wt(this),this.stencilFunc=new ii(this),this.stencilOp=new L1(this),this.stencilTest=new di(this),this.depthRange=new ui(this),this.depthTest=new pi(this),this.depthFunc=new Ki(this),this.blend=new Xi(this),this.blendFunc=new Ai(this),this.blendColor=new Si(this),this.blendEquation=new Gi(this),this.cullFace=new tr(this),this.cullFaceSide=new ir(this),this.frontFace=new mi(this),this.program=new oi(this),this.activeTexture=new Ii(this),this.viewport=new ri(this),this.bindFramebuffer=new yi(this),this.bindRenderbuffer=new ki(this),this.bindTexture=new si(this),this.bindVertexBuffer=new gi(this),this.bindElementBuffer=new _i(this),this.bindVertexArray=new wi(this),this.pixelStoreUnpack=new Bi(this),this.pixelStoreUnpackPremultiplyAlpha=new $i(this),this.pixelStoreUnpackFlipY=new ji(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Ve(e)){this.HALF_FLOAT=e.HALF_FLOAT;let l=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(r=e.RGBA16F)!==null&&r!==void 0?r:l?.RGBA16F_EXT,this.RGB16F=(o=e.RGB16F)!==null&&o!==void 0?o:l?.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");let l=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=l?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,r){return new ho(this,e,r)}createVertexBuffer(e,r,o){return new va(this,e,r,o)}createRenderbuffer(e,r,o){let l=this.gl,d=l.createRenderbuffer();return this.bindRenderbuffer.set(d),l.renderbufferStorage(l.RENDERBUFFER,e,r,o),this.bindRenderbuffer.set(null),d}createFramebuffer(e,r,o,l){return new ni(this,e,r,o,l)}clear({color:e,depth:r,stencil:o}){let l=this.gl,d=0;e&&(d|=l.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),r!==void 0&&(d|=l.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),o!==void 0&&(d|=l.STENCIL_BUFFER_BIT,this.clearStencil.set(o),this.stencilMask.set(255)),l.clear(d)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){u.bE(e.blendFunction,Pe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Ve(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var r;return Ve(this.gl)?this.gl.deleteVertexArray(e):(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}let Qi;function zl(h,e,r,o,l){let d=h.context,b=h.transform,E=d.gl,C=h.useProgram("collisionBox"),k=[],O=0,j=0;for(let ce=0;ce<o.length;ce++){let fe=o[ce],xe=e.getTile(fe).getBucket(r);if(!xe)continue;let be=l?xe.textCollisionBox:xe.iconCollisionBox,Ee=xe.collisionCircleArray;Ee.length>0&&(k.push({circleArray:Ee,circleOffset:j,coord:fe}),O+=Ee.length/4,j=O),be&&C.draw(d,E.LINES,xr.disabled,Fe.disabled,h.colorModeForRenderPass(),Or.disabled,yl(h.transform),h.style.map.terrain&&h.style.map.terrain.getTerrainData(fe),b.getProjectionData({overscaledTileID:fe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),r.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,null,h.transform.zoom,null,null,be.collisionVertexBuffer)}if(!l||!k.length)return;let B=h.useProgram("collisionCircle"),H=new u.bT;H.resize(4*O),H._trim();let X=0;for(let ce of k)for(let fe=0;fe<ce.circleArray.length/4;fe++){let xe=4*fe,be=ce.circleArray[xe+0],Ee=ce.circleArray[xe+1],Ce=ce.circleArray[xe+2],we=ce.circleArray[xe+3];H.emplace(X++,be,Ee,Ce,we,0),H.emplace(X++,be,Ee,Ce,we,1),H.emplace(X++,be,Ee,Ce,we,2),H.emplace(X++,be,Ee,Ce,we,3)}(!Qi||Qi.length<2*O)&&(Qi=function(ce){let fe=2*ce,xe=new u.bV;xe.resize(fe),xe._trim();for(let be=0;be<fe;be++){let Ee=6*be;xe.uint16[Ee+0]=4*be+0,xe.uint16[Ee+1]=4*be+1,xe.uint16[Ee+2]=4*be+2,xe.uint16[Ee+3]=4*be+2,xe.uint16[Ee+4]=4*be+3,xe.uint16[Ee+5]=4*be+0}return xe}(O));let le=d.createIndexBuffer(Qi,!0),oe=d.createVertexBuffer(H,u.bU.members,!0);for(let ce of k){let fe=kl(h.transform);B.draw(d,E.TRIANGLES,xr.disabled,Fe.disabled,h.colorModeForRenderPass(),Or.disabled,fe,h.style.map.terrain&&h.style.map.terrain.getTerrainData(ce.coord),null,r.id,oe,le,u.aJ.simpleSegment(0,2*ce.circleOffset,ce.circleArray.length,ce.circleArray.length/2),null,h.transform.zoom,null,null,null)}oe.destroy(),le.destroy()}let bl=u.ad(new Float32Array(16));function Wn(h,e,r,o,l,d){let{horizontalAlign:b,verticalAlign:E}=u.aE(h);return new u.P((-(b-.5)*e/l+o[0])*d,(-(E-.5)*r/l+o[1])*d)}function Gc(h,e,r,o,l,d){let b=e.tileAnchorPoint.add(new u.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let E=o.mult(d);r||(E=E.rotate(-l));let C=b.add(E);return It(C.x,C.y,e.pitchedLabelPlaneMatrix,e.getElevation).point}if(r){let E=hn(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(h),C=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return h.add(o.rotate(C))}return h.add(o)}function O1(h,e,r,o,l,d,b,E,C,k,O,j){let B=h.text.placedSymbolArray,H=h.text.dynamicLayoutVertexArray,X=h.icon.dynamicLayoutVertexArray,le={};H.clear();for(let oe=0;oe<B.length;oe++){let ce=B.get(oe),fe=ce.hidden||!ce.crossTileID||h.allowVerticalPlacement&&!ce.placedOrientation?null:o[ce.crossTileID];if(fe){let xe=new u.P(ce.anchorX,ce.anchorY),be={getElevation:j,width:l.width,height:l.height,pitchedLabelPlaneMatrix:d,pitchWithMap:r,transform:l,tileAnchorPoint:xe,translation:k,unwrappedTileID:O},Ee=r?_(xe.x,xe.y,be):hn(xe.x,xe.y,be),Ce=Yr(l.cameraToCenterDistance,Ee.signedDistanceFromCamera),we=u.am(h.textSizeData,E,ce)*Ce/u.ay;r&&(we*=h.tilePixelRatio/b);let{width:Je,height:Bt,anchor:gt,textOffset:wt,textBoxScale:bt}=fe,Ei=Wn(gt,Je,Bt,wt,bt,we),ti=l.getPitchedTextCorrection(xe.x+k[0],xe.y+k[1],O),Jt=Gc(Ee.point,be,e,Ei,-l.bearingInRadians,ti),Zi=h.allowVerticalPlacement&&ce.placedOrientation===u.al.vertical?Math.PI/2:0;for(let Ir=0;Ir<ce.numGlyphs;Ir++)u.as(H,Jt,Zi);C&&ce.associatedIconIndex>=0&&(le[ce.associatedIconIndex]={shiftedAnchor:Jt,angle:Zi})}else P(ce.numGlyphs,H)}if(C){X.clear();let oe=h.icon.placedSymbolArray;for(let ce=0;ce<oe.length;ce++){let fe=oe.get(ce);if(fe.hidden)P(fe.numGlyphs,X);else{let xe=le[ce];if(xe)for(let be=0;be<fe.numGlyphs;be++)u.as(X,xe.shiftedAnchor,xe.angle);else P(fe.numGlyphs,X)}}h.icon.dynamicLayoutVertexBuffer.updateData(X)}h.text.dynamicLayoutVertexBuffer.updateData(H)}function N1(h,e,r){return r.iconsInText&&e?"symbolTextAndIcon":h?"symbolSDF":"symbolIcon"}function Ds(h,e,r,o,l,d,b,E,C,k,O,j,B){let H=h.context,X=H.gl,le=h.transform,oe=E==="map",ce=C==="map",fe=E!=="viewport"&&r.layout.get("symbol-placement")!=="point",xe=oe&&!ce&&!fe,be=!r.layout.get("symbol-sort-key").isConstant(),Ee=!1,Ce=h.getDepthModeForSublayer(0,xr.ReadOnly),we=r._unevaluatedLayout.hasValue("text-variable-anchor")||r._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Je=[],Bt=le.getCircleRadiusCorrection();for(let gt of o){let wt=e.getTile(gt),bt=wt.getBucket(r);if(!bt)continue;let Ei=l?bt.text:bt.icon;if(!Ei||!Ei.segments.get().length||!Ei.hasVisibleVertices)continue;let ti=Ei.programConfigurations.get(r.id),Jt=l||bt.sdfIcons,Zi=l?bt.textSizeData:bt.iconSizeData,Ir=ce||le.pitch!==0,Dr=h.useProgram(N1(Jt,l,bt),ti),vn=u.ak(Zi,le.zoom),Qr=h.style.map.terrain&&h.style.map.terrain.getTerrainData(gt),En,Tn,mn,Jr,cs=[0,0],gs=null;if(l)Tn=wt.glyphAtlasTexture,mn=X.LINEAR,En=wt.glyphAtlasTexture.size,bt.iconsInText&&(cs=wt.imageAtlasTexture.size,gs=wt.imageAtlasTexture,Jr=Ir||h.options.rotating||h.options.zooming||Zi.kind==="composite"||Zi.kind==="camera"?X.LINEAR:X.NEAREST);else{let On=r.layout.get("icon-size").constantOr(0)!==1||bt.iconsNeedLinear;Tn=wt.imageAtlasTexture,mn=Jt||h.options.rotating||h.options.zooming||On||Ir?X.LINEAR:X.NEAREST,En=wt.imageAtlasTexture.size}let _s=u.az(wt,1,h.transform.zoom),Zr=Hi(oe,h.transform,_s),ko=u.K();u.an(ko,Zr);let ys=Tr(ce,oe,h.transform,_s),Do=u.aA(le,wt,d,b),nl=le.getProjectionData({overscaledTileID:gt,applyGlobeMatrix:!B,applyTerrainMatrix:!0}),Vn=we&&bt.hasTextData(),Pn=r.layout.get("icon-text-fit")!=="none"&&Vn&&bt.hasIconData();if(fe){let On=h.style.map.terrain?(bs,an)=>h.style.map.terrain.getElevation(gt,bs,an):null,Nn=r.layout.get("text-rotation-alignment")==="map";Wr(bt,h,l,Zr,ko,ce,k,Nn,gt.toUnwrapped(),le.width,le.height,Do,On)}let sl=l&&we||Pn,Ra=fe||sl?bl:ce?Zr:h.transform.clipSpaceToPixelsMatrix,mo=Jt&&r.paint.get(l?"text-halo-width":"icon-halo-width").constantOr(1)!==0,to;to=Jt?bt.iconsInText?Ol(Zi.kind,vn,xe,ce,fe,sl,h,Ra,ys,Do,En,cs,Bt):gc(Zi.kind,vn,xe,ce,fe,sl,h,Ra,ys,Do,l,En,0,Bt):Qa(Zi.kind,vn,xe,ce,fe,sl,h,Ra,ys,Do,l,En,Bt);let go={program:Dr,buffers:Ei,uniformValues:to,projectionData:nl,atlasTexture:Tn,atlasTextureIcon:gs,atlasInterpolation:mn,atlasInterpolationIcon:Jr,isSDF:Jt,hasHalo:mo};if(be&&bt.canOverlap){Ee=!0;let On=Ei.segments.get();for(let Nn of On)Je.push({segments:new u.aJ([Nn]),sortKey:Nn.sortKey,state:go,terrainData:Qr})}else Je.push({segments:Ei.segments,sortKey:0,state:go,terrainData:Qr})}Ee&&Je.sort((gt,wt)=>gt.sortKey-wt.sortKey);for(let gt of Je){let wt=gt.state;if(H.activeTexture.set(X.TEXTURE0),wt.atlasTexture.bind(wt.atlasInterpolation,X.CLAMP_TO_EDGE),wt.atlasTextureIcon&&(H.activeTexture.set(X.TEXTURE1),wt.atlasTextureIcon&&wt.atlasTextureIcon.bind(wt.atlasInterpolationIcon,X.CLAMP_TO_EDGE)),wt.isSDF){let bt=wt.uniformValues;wt.hasHalo&&(bt.u_is_halo=1,jo(wt.buffers,gt.segments,r,h,wt.program,Ce,O,j,bt,wt.projectionData,gt.terrainData)),bt.u_is_halo=0}jo(wt.buffers,gt.segments,r,h,wt.program,Ce,O,j,wt.uniformValues,wt.projectionData,gt.terrainData)}}function jo(h,e,r,o,l,d,b,E,C,k,O){let j=o.context;l.draw(j,j.gl.TRIANGLES,d,b,E,Or.backCCW,C,O,k,r.id,h.layoutVertexBuffer,h.indexBuffer,e,r.paint,o.transform.zoom,h.programConfigurations.get(r.id),h.dynamicLayoutVertexBuffer,h.opacityVertexBuffer)}function n1(h,e,r,o,l){let d=h.context,b=d.gl,E=Fe.disabled,C=new Pe([b.ONE,b.ONE],u.b7.transparent,[!0,!0,!0,!0]),k=e.getBucket(r);if(!k)return;let O=o.key,j=r.heatmapFbos.get(O);j||(j=s1(d,e.tileSize,e.tileSize),r.heatmapFbos.set(O,j)),d.bindFramebuffer.set(j.framebuffer),d.viewport.set([0,0,e.tileSize,e.tileSize]),d.clear({color:u.b7.transparent});let B=k.programConfigurations.get(r.id),H=h.useProgram("heatmap",B,!l),X=h.transform.getProjectionData({overscaledTileID:e.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),le=h.style.map.terrain.getTerrainData(o);H.draw(d,b.TRIANGLES,xr.disabled,E,C,Or.disabled,Fi(e,h.transform.zoom,r.paint.get("heatmap-intensity"),1),le,X,r.id,k.layoutVertexBuffer,k.indexBuffer,k.segments,r.paint,h.transform.zoom,B)}function z1(h,e,r,o,l){let d=h.context,b=d.gl,E=h.transform;d.setColorMode(h.colorModeForRenderPass());let C=Cn(d,e),k=r.key,O=e.heatmapFbos.get(k);if(!O)return;d.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,O.colorAttachment.get()),d.activeTexture.set(b.TEXTURE1),C.bind(b.LINEAR,b.CLAMP_TO_EDGE);let j=E.getProjectionData({overscaledTileID:r,applyTerrainMatrix:l,applyGlobeMatrix:!o});h.useProgram("heatmapTexture").draw(d,b.TRIANGLES,xr.disabled,Fe.disabled,h.colorModeForRenderPass(),Or.disabled,Bn(h,e,0,1),null,j,e.id,h.rasterBoundsBuffer,h.quadTriangleIndexBuffer,h.rasterBoundsSegments,e.paint,E.zoom),O.destroy(),e.heatmapFbos.delete(k)}function s1(h,e,r){var o,l;let d=h.gl,b=d.createTexture();d.bindTexture(d.TEXTURE_2D,b),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);let E=(o=h.HALF_FLOAT)!==null&&o!==void 0?o:d.UNSIGNED_BYTE,C=(l=h.RGBA16F)!==null&&l!==void 0?l:d.RGBA;d.texImage2D(d.TEXTURE_2D,0,C,e,r,0,d.RGBA,E,null);let k=h.createFramebuffer(e,r,!1,!1);return k.colorAttachment.set(b),k}function Cn(h,e){return e.colorRampTexture||(e.colorRampTexture=new yr(h,e.colorRamp,h.gl.RGBA)),e.colorRampTexture}function $l(h,e,r,o,l){if(!r||!o||!o.imageAtlas)return;let d=o.imageAtlas.patternPositions,b=d[r.to.toString()],E=d[r.from.toString()];if(!b&&E&&(b=E),!E&&b&&(E=b),!b||!E){let C=l.getPaintProperty(e);b=d[C],E=d[C]}b&&E&&h.setConstantPatternPositions(b,E)}function Fl(h,e,r,o,l,d,b,E){let C=h.context.gl,k="fill-pattern",O=r.paint.get(k),j=O&&O.constantOr(1),B=r.getCrossfadeParameters(),H,X,le,oe,ce,fe=h.transform,xe=r.paint.get("fill-translate"),be=r.paint.get("fill-translate-anchor");b?(X=j&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",H=C.LINES):(X=j?"fillPattern":"fill",H=C.TRIANGLES);let Ee=O.constantOr(null);for(let Ce of o){let we=e.getTile(Ce);if(j&&!we.patternsLoaded())continue;let Je=we.getBucket(r);if(!Je)continue;let Bt=Je.programConfigurations.get(r.id),gt=h.useProgram(X,Bt),wt=h.style.map.terrain&&h.style.map.terrain.getTerrainData(Ce);j&&(h.context.activeTexture.set(C.TEXTURE0),we.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Bt.updatePaintBuffers(B)),$l(Bt,k,Ee,we,r);let bt=fe.getProjectionData({overscaledTileID:Ce,applyGlobeMatrix:!E,applyTerrainMatrix:!0}),Ei=u.aA(fe,we,xe,be);if(b){oe=Je.indexBuffer2,ce=Je.segments2;let Jt=[C.drawingBufferWidth,C.drawingBufferHeight];le=X==="fillOutlinePattern"&&j?$o(h,B,we,Jt,Ei):Rl(Jt,Ei)}else oe=Je.indexBuffer,ce=Je.segments,le=j?i1(h,B,we,Ei):{u_fill_translate:Ei};let ti=h.stencilModeForClipping(Ce);gt.draw(h.context,H,l,ti,d,Or.backCCW,le,wt,bt,r.id,Je.layoutVertexBuffer,oe,ce,r.paint,h.transform.zoom,Bt)}}function Io(h,e,r,o,l,d,b,E){let C=h.context,k=C.gl,O="fill-extrusion-pattern",j=r.paint.get(O),B=j.constantOr(1),H=r.getCrossfadeParameters(),X=r.paint.get("fill-extrusion-opacity"),le=j.constantOr(null),oe=h.transform;for(let ce of o){let fe=e.getTile(ce),xe=fe.getBucket(r);if(!xe)continue;let be=h.style.map.terrain&&h.style.map.terrain.getTerrainData(ce),Ee=xe.programConfigurations.get(r.id),Ce=h.useProgram(B?"fillExtrusionPattern":"fillExtrusion",Ee);B&&(h.context.activeTexture.set(k.TEXTURE0),fe.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Ee.updatePaintBuffers(H));let we=oe.getProjectionData({overscaledTileID:ce,applyGlobeMatrix:!E,applyTerrainMatrix:!0});$l(Ee,O,le,fe,r);let Je=u.aA(oe,fe,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),Bt=r.paint.get("fill-extrusion-vertical-gradient"),gt=B?kn(h,Bt,X,Je,ce,H,fe):De(h,Bt,X,Je);Ce.draw(C,C.gl.TRIANGLES,l,d,b,Or.backCCW,gt,be,we,r.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,r.paint,h.transform.zoom,Ee,h.style.map.terrain&&xe.centroidVertexBuffer)}}function $1(h,e,r,o,l,d,b,E,C){var k;let O=h.style.projection,j=h.context,B=h.transform,H=j.gl,X=[`#define NUM_ILLUMINATION_SOURCES ${r.paint.get("hillshade-highlight-color").values.length}`],le=h.useProgram("hillshade",null,!1,X),oe=!h.options.moving;for(let ce of o){let fe=e.getTile(ce),xe=fe.fbo;if(!xe)continue;let be=O.getMeshFromTileID(j,ce.canonical,E,!0,"raster"),Ee=(k=h.style.map.terrain)===null||k===void 0?void 0:k.getTerrainData(ce);j.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,xe.colorAttachment.get());let Ce=B.getProjectionData({overscaledTileID:ce,aligned:oe,applyGlobeMatrix:!C,applyTerrainMatrix:!0});le.draw(j,H.TRIANGLES,d,l[ce.overscaledZ],b,Or.backCCW,P1(h,fe,r),Ee,Ce,r.id,be.vertexBuffer,be.indexBuffer,be.segments)}}let Bl=[new u.P(0,0),new u.P(u.Z,0),new u.P(u.Z,u.Z),new u.P(0,u.Z)];function a1(h,e,r,o,l,d,b,E,C=!1,k=!1){let O=o[o.length-1].overscaledZ,j=h.context,B=j.gl,H=h.useProgram("raster"),X=h.transform,le=h.style.projection,oe=h.colorModeForRenderPass(),ce=!h.options.moving;for(let fe of o){let xe=h.getDepthModeForSublayer(fe.overscaledZ-O,r.paint.get("raster-opacity")===1?xr.ReadWrite:xr.ReadOnly,B.LESS),be=e.getTile(fe);be.registerFadeDuration(r.paint.get("raster-fade-duration"));let Ee=e.findLoadedParent(fe,0),Ce=e.findLoadedSibling(fe),we=Ks(be,Ee||Ce||null,e,r,h.transform,h.style.map.terrain),Je,Bt,gt=r.paint.get("raster-resampling")==="nearest"?B.NEAREST:B.LINEAR;j.activeTexture.set(B.TEXTURE0),be.texture.bind(gt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),j.activeTexture.set(B.TEXTURE1),Ee?(Ee.texture.bind(gt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),Je=Math.pow(2,Ee.tileID.overscaledZ-be.tileID.overscaledZ),Bt=[be.tileID.canonical.x*Je%1,be.tileID.canonical.y*Je%1]):be.texture.bind(gt,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),be.texture.useMipmap&&j.extTextureFilterAnisotropic&&h.transform.pitch>20&&B.texParameterf(B.TEXTURE_2D,j.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,j.extTextureFilterAnisotropicMax);let wt=h.style.map.terrain&&h.style.map.terrain.getTerrainData(fe),bt=X.getProjectionData({overscaledTileID:fe,aligned:ce,applyGlobeMatrix:!k,applyTerrainMatrix:!0}),Ei=pe(Bt||[0,0],Je||1,we,r,E),ti=le.getMeshFromTileID(j,fe.canonical,d,b,"raster");H.draw(j,B.TRIANGLES,xe,l?l[fe.overscaledZ]:Fe.disabled,oe,C?Or.frontCCW:Or.backCCW,Ei,wt,bt,r.id,ti.vertexBuffer,ti.indexBuffer,ti.segments)}}function Ks(h,e,r,o,l,d){let b=o.paint.get("raster-fade-duration");if(!d&&b>0){let E=Vt.now(),C=(E-h.timeAdded)/b,k=e?(E-e.timeAdded)/b:-1,O=r.getSource(),j=Re(l,{tileSize:O.tileSize,roundZoom:O.roundZoom}),B=!e||Math.abs(e.tileID.overscaledZ-j)>Math.abs(h.tileID.overscaledZ-j),H=B&&h.refreshedUponExpiration?1:u.ae(B?C:1-k,0,1);return h.refreshedUponExpiration&&C>=1&&(h.refreshedUponExpiration=!1),e?{opacity:1,mix:1-H}:{opacity:H,mix:0}}return{opacity:1,mix:0}}let ws=new u.b7(1,0,0,1),Ls=new u.b7(0,1,0,1),Qs=new u.b7(0,0,1,1),ea=new u.b7(1,0,1,1),Es=new u.b7(0,1,1,1);function Ts(h,e,r,o){ps(h,0,e+r/2,h.transform.width,r,o)}function ta(h,e,r,o){ps(h,e-r/2,0,r,h.transform.height,o)}function ps(h,e,r,o,l,d){let b=h.context,E=b.gl;E.enable(E.SCISSOR_TEST),E.scissor(e*h.pixelRatio,r*h.pixelRatio,o*h.pixelRatio,l*h.pixelRatio),b.clear({color:d}),E.disable(E.SCISSOR_TEST)}function Ur(h,e,r){let o=h.context,l=o.gl,d=h.useProgram("debug"),b=xr.disabled,E=Fe.disabled,C=h.colorModeForRenderPass(),k="$debug",O=h.style.map.terrain&&h.style.map.terrain.getTerrainData(r);o.activeTexture.set(l.TEXTURE0);let j=e.getTileByID(r.key).latestRawTileData,B=Math.floor((j&&j.byteLength||0)/1024),H=e.getTile(r).tileSize,X=512/Math.min(H,512)*(r.overscaledZ/h.transform.zoom)*.5,le=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(le+=` => ${r.overscaledZ}`),function(ce,fe){ce.initDebugOverlayCanvas();let xe=ce.debugOverlayCanvas,be=ce.context.gl,Ee=ce.debugOverlayCanvas.getContext("2d");Ee.clearRect(0,0,xe.width,xe.height),Ee.shadowColor="white",Ee.shadowBlur=2,Ee.lineWidth=1.5,Ee.strokeStyle="white",Ee.textBaseline="top",Ee.font="bold 36px Open Sans, sans-serif",Ee.fillText(fe,5,5),Ee.strokeText(fe,5,5),ce.debugOverlayTexture.update(xe),ce.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)}(h,`${le} ${B}kB`);let oe=h.transform.getProjectionData({overscaledTileID:r,applyGlobeMatrix:!0,applyTerrainMatrix:!0});d.draw(o,l.TRIANGLES,b,E,Pe.alphaBlended,Or.disabled,dc(u.b7.transparent,X),null,oe,k,h.debugBuffer,h.quadTriangleIndexBuffer,h.debugSegments),d.draw(o,l.LINE_STRIP,b,E,C,Or.disabled,dc(u.b7.red),O,oe,k,h.debugBuffer,h.tileBorderIndexBuffer,h.debugSegments)}function jn(h,e,r,o){let{isRenderingGlobe:l}=o,d=h.context,b=d.gl,E=h.transform,C=h.colorModeForRenderPass(),k=h.getDepthModeFor3D(),O=h.useProgram("terrain");d.bindFramebuffer.set(null),d.viewport.set([0,0,h.width,h.height]);for(let j of r){let B=e.getTerrainMesh(j.tileID),H=h.renderToTexture.getTexture(j),X=e.getTerrainData(j.tileID);d.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,H.texture);let le=e.getMeshFrameDelta(E.zoom),oe=E.calculateFogMatrix(j.tileID.toUnwrapped()),ce=Ke(le,oe,h.style.sky,E.pitch,l),fe=E.getProjectionData({overscaledTileID:j.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});O.draw(d,b.TRIANGLES,k,Fe.disabled,C,Or.backCCW,ce,X,fe,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}}function _n(h,e){if(!e.mesh){let r=new u.aI;r.emplaceBack(-1,-1),r.emplaceBack(1,-1),r.emplaceBack(1,1),r.emplaceBack(-1,1);let o=new u.aK;o.emplaceBack(0,1,2),o.emplaceBack(0,2,3),e.mesh=new pn(h.createVertexBuffer(r,Rr.members),h.createIndexBuffer(o),u.aJ.simpleSegment(0,0,r.length,o.length))}return e.mesh}class Os{constructor(e,r){this.context=new Pi(e),this.transform=r,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ke.maxUnderzooming+ke.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new dn}resize(e,r,o){if(this.width=Math.floor(e*o),this.height=Math.floor(r*o),this.pixelRatio=o,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let l of this.style._order)this.style._layers[l].resize()}setup(){let e=this.context,r=new u.aI;r.emplaceBack(0,0),r.emplaceBack(u.Z,0),r.emplaceBack(0,u.Z),r.emplaceBack(u.Z,u.Z),this.tileExtentBuffer=e.createVertexBuffer(r,Rr.members),this.tileExtentSegments=u.aJ.simpleSegment(0,0,4,2);let o=new u.aI;o.emplaceBack(0,0),o.emplaceBack(u.Z,0),o.emplaceBack(0,u.Z),o.emplaceBack(u.Z,u.Z),this.debugBuffer=e.createVertexBuffer(o,Rr.members),this.debugSegments=u.aJ.simpleSegment(0,0,4,5);let l=new u.b_;l.emplaceBack(0,0,0,0),l.emplaceBack(u.Z,0,u.Z,0),l.emplaceBack(0,u.Z,0,u.Z),l.emplaceBack(u.Z,u.Z,u.Z,u.Z),this.rasterBoundsBuffer=e.createVertexBuffer(l,zt.members),this.rasterBoundsSegments=u.aJ.simpleSegment(0,0,4,2);let d=new u.aI;d.emplaceBack(0,0),d.emplaceBack(u.Z,0),d.emplaceBack(0,u.Z),d.emplaceBack(u.Z,u.Z),this.rasterBoundsBufferPosOnly=e.createVertexBuffer(d,Rr.members),this.rasterBoundsSegmentsPosOnly=u.aJ.simpleSegment(0,0,4,5);let b=new u.aI;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(b,Rr.members),this.viewportSegments=u.aJ.simpleSegment(0,0,4,2);let E=new u.b$;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(E);let C=new u.aK;C.emplaceBack(1,0,2),C.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(C);let k=this.context.gl;this.stencilClearMode=new Fe({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO),this.tileExtentMesh=new pn(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let e=this.context,r=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let o=u.K();u.bQ(o,0,this.width,this.height,0,0,1),u.M(o,o,[r.drawingBufferWidth,r.drawingBufferHeight,0]);let l={mainMatrix:o,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:o};this.useProgram("clippingMask",null,!0).draw(e,r.TRIANGLES,xr.disabled,this.stencilClearMode,Pe.disabled,Or.disabled,null,null,l,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,r,o){if(this.currentStencilSource===e.source||!e.isTileClipped()||!r||!r.length)return;this.currentStencilSource=e.source,this.nextStencilID+r.length>256&&this.clearStencil();let l=this.context;l.setColorMode(Pe.disabled),l.setDepthMode(xr.disabled);let d={};for(let b of r)d[b.key]=this.nextStencilID++;this._renderTileMasks(d,r,o,!0),this._renderTileMasks(d,r,o,!1),this._tileClippingMaskIDs=d}_renderTileMasks(e,r,o,l){let d=this.context,b=d.gl,E=this.style.projection,C=this.transform,k=this.useProgram("clippingMask");for(let O of r){let j=e[O.key],B=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O),H=E.getMeshFromTileID(this.context,O.canonical,l,!0,"stencil"),X=C.getProjectionData({overscaledTileID:O,applyGlobeMatrix:!o,applyTerrainMatrix:!0});k.draw(d,b.TRIANGLES,xr.disabled,new Fe({func:b.ALWAYS,mask:0},j,255,b.KEEP,b.KEEP,b.REPLACE),Pe.disabled,o?Or.disabled:Or.backCCW,null,B,X,"$clipping",H.vertexBuffer,H.indexBuffer,H.segments)}}_renderTilesDepthBuffer(){let e=this.context,r=e.gl,o=this.style.projection,l=this.transform,d=this.useProgram("depth"),b=this.getDepthModeFor3D(),E=Ae(l,{tileSize:l.tileSize});for(let C of E){let k=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C),O=o.getMeshFromTileID(this.context,C.canonical,!0,!0,"raster"),j=l.getProjectionData({overscaledTileID:C,applyGlobeMatrix:!0,applyTerrainMatrix:!0});d.draw(e,r.TRIANGLES,b,Fe.disabled,Pe.disabled,Or.backCCW,null,k,j,"$clipping",O.vertexBuffer,O.indexBuffer,O.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let e=this.nextStencilID++,r=this.context.gl;return new Fe({func:r.NOTEQUAL,mask:255},e,255,r.KEEP,r.KEEP,r.REPLACE)}stencilModeForClipping(e){let r=this.context.gl;return new Fe({func:r.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,r.KEEP,r.KEEP,r.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(e){let r=this.context.gl,o=e.sort((b,E)=>E.overscaledZ-b.overscaledZ),l=o[o.length-1].overscaledZ,d=o[0].overscaledZ-l+1;if(d>1){this.currentStencilSource=void 0,this.nextStencilID+d>256&&this.clearStencil();let b={};for(let E=0;E<d;E++)b[E+l]=new Fe({func:r.GEQUAL,mask:255},E+this.nextStencilID,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID+=d,[b,o]}return[{[l]:Fe.disabled},o]}stencilConfigForOverlapTwoPass(e){let r=this.context.gl,o=e.sort((b,E)=>E.overscaledZ-b.overscaledZ),l=o[o.length-1].overscaledZ,d=o[0].overscaledZ-l+1;if(this.clearStencil(),d>1){let b={},E={};for(let C=0;C<d;C++)b[C+l]=new Fe({func:r.GREATER,mask:255},d+1+C,255,r.KEEP,r.KEEP,r.REPLACE),E[C+l]=new Fe({func:r.GREATER,mask:255},1+C,255,r.KEEP,r.KEEP,r.REPLACE);return this.nextStencilID=2*d+1,[b,E,o]}return this.nextStencilID=3,[{[l]:new Fe({func:r.GREATER,mask:255},2,255,r.KEEP,r.KEEP,r.REPLACE)},{[l]:new Fe({func:r.GREATER,mask:255},1,255,r.KEEP,r.KEEP,r.REPLACE)},o]}colorModeForRenderPass(){let e=this.context.gl;return this._showOverdrawInspector?new Pe([e.CONSTANT_COLOR,e.ONE],new u.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Pe.unblended:Pe.alphaBlended}getDepthModeForSublayer(e,r,o){if(!this.opaquePassEnabledForLayer())return xr.disabled;let l=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new xr(o||this.context.gl.LEQUAL,r,[l,l])}getDepthModeFor3D(){return new xr(this.context.gl.LEQUAL,xr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,r){var o,l;this.style=e,this.options=r,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(Vt.now()),this.imageManager.beginFrame();let d=this.style._order,b=this.style.sourceCaches,E={},C={},k={},O={isRenderingToTexture:!1,isRenderingGlobe:((o=e.projection)===null||o===void 0?void 0:o.transitionState)>0};for(let B in b){let H=b[B];H.used&&H.prepare(this.context),E[B]=H.getVisibleCoordinates(!1),C[B]=E[B].slice().reverse(),k[B]=H.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let B=0;B<d.length;B++)if(this.style._layers[d[B]].is3D()){this.opaquePassCutoff=B;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let B of d){let H=this.style._layers[B];if(!H.hasOffscreenPass()||H.isHidden(this.transform.zoom))continue;let X=C[H.source];(H.type==="custom"||X.length)&&this.renderLayer(this,b[H.source],H,X,O)}if((l=this.style.projection)===null||l===void 0||l.updateGPUdependent({context:this.context,useProgram:B=>this.useProgram(B)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:r.showOverdrawInspector?u.b7.black:u.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(B,H){let X=B.context,le=X.gl,oe=((Ce,we,Je)=>{let Bt=Math.cos(we.rollInRadians),gt=Math.sin(we.rollInRadians),wt=Be(we),bt=we.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ce.properties.get("sky-color"),u_horizon_color:Ce.properties.get("horizon-color"),u_horizon:[(we.width/2-wt*gt)*Je,(we.height/2+wt*Bt)*Je],u_horizon_normal:[-gt,Bt],u_sky_horizon_blend:Ce.properties.get("sky-horizon-blend")*we.height/2*Je,u_sky_blend:bt}})(H,B.style.map.transform,B.pixelRatio),ce=new xr(le.LEQUAL,xr.ReadWrite,[0,1]),fe=Fe.disabled,xe=B.colorModeForRenderPass(),be=B.useProgram("sky"),Ee=_n(X,H);be.draw(X,le.TRIANGLES,ce,fe,xe,Or.disabled,oe,null,void 0,"sky",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)}(this,this.style.sky),this._showOverdrawInspector=r.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){let B=this.style._layers[d[this.currentLayer]],H=b[B.source],X=E[B.source];this._renderTileClippingMasks(B,X,!1),this.renderLayer(this,H,B,X,O)}this.renderPass="translucent";let j=!1;for(this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){let B=this.style._layers[d[this.currentLayer]],H=b[B.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(B,O))continue;this.opaquePassEnabledForLayer()||j||(j=!0,O.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let X=(B.type==="symbol"?k:C)[B.source];this._renderTileClippingMasks(B,E[B.source],!!this.renderToTexture),this.renderLayer(this,H,B,X,O)}if(O.isRenderingGlobe&&function(B,H,X){let le=B.context,oe=le.gl,ce=B.useProgram("atmosphere"),fe=new xr(oe.LEQUAL,xr.ReadOnly,[0,1]),xe=B.transform,be=function(bt,Ei){let ti=bt.properties.get("position"),Jt=[-ti.x,-ti.y,-ti.z],Zi=u.ad(new Float64Array(16));return bt.properties.get("anchor")==="map"&&(u.a_(Zi,Zi,Ei.rollInRadians),u.a$(Zi,Zi,-Ei.pitchInRadians),u.a_(Zi,Zi,Ei.bearingInRadians),u.a$(Zi,Zi,Ei.center.lat*Math.PI/180),u.bp(Zi,Zi,-Ei.center.lng*Math.PI/180)),u.bZ(Jt,Jt,Zi),Jt}(X,B.transform),Ee=xe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ce=H.properties.get("atmosphere-blend")*Ee.projectionTransition;if(Ce===0)return;let we=ot(xe.worldSize,xe.center.lat),Je=xe.inverseProjectionMatrix,Bt=new Float64Array(4);Bt[3]=1,u.at(Bt,Bt,xe.modelViewProjectionMatrix),Bt[0]/=Bt[3],Bt[1]/=Bt[3],Bt[2]/=Bt[3],Bt[3]=1,u.at(Bt,Bt,Je),Bt[0]/=Bt[3],Bt[1]/=Bt[3],Bt[2]/=Bt[3],Bt[3]=1;let gt=((bt,Ei,ti,Jt,Zi)=>({u_sun_pos:bt,u_atmosphere_blend:Ei,u_globe_position:ti,u_globe_radius:Jt,u_inv_proj_matrix:Zi}))(be,Ce,[Bt[0],Bt[1],Bt[2]],we,Je),wt=_n(le,H);ce.draw(le,oe.TRIANGLES,fe,Fe.disabled,Pe.alphaBlended,Or.disabled,gt,null,null,"atmosphere",wt.vertexBuffer,wt.indexBuffer,wt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let B=function(H,X){let le=null,oe=Object.values(H._layers).flatMap(be=>be.source&&!be.isHidden(X)?[H.sourceCaches[be.source]]:[]),ce=oe.filter(be=>be.getSource().type==="vector"),fe=oe.filter(be=>be.getSource().type!=="vector"),xe=be=>{(!le||le.getSource().maxzoom<be.getSource().maxzoom)&&(le=be)};return ce.forEach(be=>xe(be)),le||fe.forEach(be=>xe(be)),le}(this.style,this.transform.zoom);B&&function(H,X,le){for(let oe=0;oe<le.length;oe++)Ur(H,X,le[oe])}(this,B,B.getVisibleCoordinates())}this.options.showPadding&&function(B){let H=B.transform.padding;Ts(B,B.transform.height-(H.top||0),3,ws),Ts(B,H.bottom||0,3,Ls),ta(B,H.left||0,3,Qs),ta(B,B.transform.width-(H.right||0),3,ea);let X=B.transform.centerPoint;(function(le,oe,ce,fe){ps(le,oe-1,ce-10,2,20,fe),ps(le,oe-10,ce-1,20,2,fe)})(B,X.x,B.transform.height-X.y,Es)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;let r=this.terrainFacilitator.matrix,o=this.transform.modelViewProjectionMatrix,l=this.terrainFacilitator.dirty;l||(l=e?!u.c0(r,o):!u.c1(r,o)),l||(l=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),l&&(u.c2(r,o),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(d,b){let E=d.context,C=E.gl,k=d.transform,O=Pe.unblended,j=new xr(C.LEQUAL,xr.ReadWrite,[0,1]),B=b.sourceCache.getRenderableTiles(),H=d.useProgram("terrainDepth");E.bindFramebuffer.set(b.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,d.width/devicePixelRatio,d.height/devicePixelRatio]),E.clear({color:u.b7.transparent,depth:1});for(let X of B){let le=b.getTerrainMesh(X.tileID),oe=b.getTerrainData(X.tileID),ce=k.getProjectionData({overscaledTileID:X.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),fe={u_ele_delta:b.getMeshFrameDelta(k.zoom)};H.draw(E,C.TRIANGLES,j,Fe.disabled,O,Or.backCCW,fe,oe,ce,"terrain",le.vertexBuffer,le.indexBuffer,le.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,d.width,d.height])}(this,this.style.map.terrain),function(d,b){let E=d.context,C=E.gl,k=d.transform,O=Pe.unblended,j=new xr(C.LEQUAL,xr.ReadWrite,[0,1]),B=b.getCoordsTexture(),H=b.sourceCache.getRenderableTiles(),X=d.useProgram("terrainCoords");E.bindFramebuffer.set(b.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,d.width/devicePixelRatio,d.height/devicePixelRatio]),E.clear({color:u.b7.transparent,depth:1}),b.coordsIndex=[];for(let le of H){let oe=b.getTerrainMesh(le.tileID),ce=b.getTerrainData(le.tileID);E.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,B.texture);let fe={u_terrain_coords_id:(255-b.coordsIndex.length)/255,u_texture:0,u_ele_delta:b.getMeshFrameDelta(k.zoom)},xe=k.getProjectionData({overscaledTileID:le.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});X.draw(E,C.TRIANGLES,j,Fe.disabled,O,Or.backCCW,fe,ce,xe,"terrain",oe.vertexBuffer,oe.indexBuffer,oe.segments),b.coordsIndex.push(le.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,d.width,d.height])}(this,this.style.map.terrain))}renderLayer(e,r,o,l,d){o.isHidden(this.transform.zoom)||(o.type==="background"||o.type==="custom"||(l||[]).length)&&(this.id=o.id,u.c3(o)?function(b,E,C,k,O,j){if(b.renderPass!=="translucent")return;let{isRenderingToTexture:B}=j,H=Fe.disabled,X=b.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(le,oe,ce,fe,xe,be,Ee,Ce,we){let Je=oe.transform,Bt=oe.style.map.terrain,gt=xe==="map",wt=be==="map";for(let bt of le){let Ei=fe.getTile(bt),ti=Ei.getBucket(ce);if(!ti||!ti.text||!ti.text.segments.get().length)continue;let Jt=u.ak(ti.textSizeData,Je.zoom),Zi=u.az(Ei,1,oe.transform.zoom),Ir=Hi(gt,oe.transform,Zi),Dr=ce.layout.get("icon-text-fit")!=="none"&&ti.hasIconData();if(Jt){let vn=Math.pow(2,Je.zoom-Ei.tileID.overscaledZ),Qr=Bt?(En,Tn)=>Bt.getElevation(bt,En,Tn):null;O1(ti,gt,wt,we,Je,Ir,vn,Jt,Dr,u.aA(Je,Ei,Ee,Ce),bt.toUnwrapped(),Qr)}}}(k,b,C,E,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),O),C.paint.get("icon-opacity").constantOr(1)!==0&&Ds(b,E,C,k,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),H,X,B),C.paint.get("text-opacity").constantOr(1)!==0&&Ds(b,E,C,k,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),H,X,B),E.map.showCollisionBoxes&&(zl(b,E,C,k,!0),zl(b,E,C,k,!1))}(e,r,o,l,this.style.placement.variableOffsets,d):u.c4(o)?function(b,E,C,k,O){if(b.renderPass!=="translucent")return;let{isRenderingToTexture:j}=O,B=C.paint.get("circle-opacity"),H=C.paint.get("circle-stroke-width"),X=C.paint.get("circle-stroke-opacity"),le=!C.layout.get("circle-sort-key").isConstant();if(B.constantOr(1)===0&&(H.constantOr(1)===0||X.constantOr(1)===0))return;let oe=b.context,ce=oe.gl,fe=b.transform,xe=b.getDepthModeForSublayer(0,xr.ReadOnly),be=Fe.disabled,Ee=b.colorModeForRenderPass(),Ce=[],we=fe.getCircleRadiusCorrection();for(let Je=0;Je<k.length;Je++){let Bt=k[Je],gt=E.getTile(Bt),wt=gt.getBucket(C);if(!wt)continue;let bt=C.paint.get("circle-translate"),Ei=C.paint.get("circle-translate-anchor"),ti=u.aA(fe,gt,bt,Ei),Jt=wt.programConfigurations.get(C.id),Zi=b.useProgram("circle",Jt),Ir=wt.layoutVertexBuffer,Dr=wt.indexBuffer,vn=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Bt),Qr={programConfiguration:Jt,program:Zi,layoutVertexBuffer:Ir,indexBuffer:Dr,uniformValues:uo(b,gt,C,ti,we),terrainData:vn,projectionData:fe.getProjectionData({overscaledTileID:Bt,applyGlobeMatrix:!j,applyTerrainMatrix:!0})};if(le){let En=wt.segments.get();for(let Tn of En)Ce.push({segments:new u.aJ([Tn]),sortKey:Tn.sortKey,state:Qr})}else Ce.push({segments:wt.segments,sortKey:0,state:Qr})}le&&Ce.sort((Je,Bt)=>Je.sortKey-Bt.sortKey);for(let Je of Ce){let{programConfiguration:Bt,program:gt,layoutVertexBuffer:wt,indexBuffer:bt,uniformValues:Ei,terrainData:ti,projectionData:Jt}=Je.state;gt.draw(oe,ce.TRIANGLES,xe,be,Ee,Or.backCCW,Ei,ti,Jt,C.id,wt,bt,Je.segments,C.paint,b.transform.zoom,Bt)}}(e,r,o,l,d):u.c5(o)?function(b,E,C,k,O){if(C.paint.get("heatmap-opacity")===0)return;let j=b.context,{isRenderingToTexture:B,isRenderingGlobe:H}=O;if(b.style.map.terrain){for(let X of k){let le=E.getTile(X);E.hasRenderableParent(X)||(b.renderPass==="offscreen"?n1(b,le,C,X,H):b.renderPass==="translucent"&&z1(b,C,X,B,H))}j.viewport.set([0,0,b.width,b.height])}else b.renderPass==="offscreen"?function(X,le,oe,ce){let fe=X.context,xe=fe.gl,be=X.transform,Ee=Fe.disabled,Ce=new Pe([xe.ONE,xe.ONE],u.b7.transparent,[!0,!0,!0,!0]);(function(we,Je,Bt){let gt=we.gl;we.activeTexture.set(gt.TEXTURE1),we.viewport.set([0,0,Je.width/4,Je.height/4]);let wt=Bt.heatmapFbos.get(u.bW);wt?(gt.bindTexture(gt.TEXTURE_2D,wt.colorAttachment.get()),we.bindFramebuffer.set(wt.framebuffer)):(wt=s1(we,Je.width/4,Je.height/4),Bt.heatmapFbos.set(u.bW,wt))})(fe,X,oe),fe.clear({color:u.b7.transparent});for(let we=0;we<ce.length;we++){let Je=ce[we];if(le.hasRenderableParent(Je))continue;let Bt=le.getTile(Je),gt=Bt.getBucket(oe);if(!gt)continue;let wt=gt.programConfigurations.get(oe.id),bt=X.useProgram("heatmap",wt),Ei=be.getProjectionData({overscaledTileID:Je,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),ti=be.getCircleRadiusCorrection();bt.draw(fe,xe.TRIANGLES,xr.disabled,Ee,Ce,Or.backCCW,Fi(Bt,be.zoom,oe.paint.get("heatmap-intensity"),ti),null,Ei,oe.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,oe.paint,be.zoom,wt)}fe.viewport.set([0,0,X.width,X.height])}(b,E,C,k):b.renderPass==="translucent"&&function(X,le){let oe=X.context,ce=oe.gl;oe.setColorMode(X.colorModeForRenderPass());let fe=le.heatmapFbos.get(u.bW);fe&&(oe.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_2D,fe.colorAttachment.get()),oe.activeTexture.set(ce.TEXTURE1),Cn(oe,le).bind(ce.LINEAR,ce.CLAMP_TO_EDGE),X.useProgram("heatmapTexture").draw(oe,ce.TRIANGLES,xr.disabled,Fe.disabled,X.colorModeForRenderPass(),Or.disabled,Bn(X,le,0,1),null,null,le.id,X.viewportBuffer,X.quadTriangleIndexBuffer,X.viewportSegments,le.paint,X.transform.zoom))}(b,C)}(e,r,o,l,d):u.c6(o)?function(b,E,C,k,O){if(b.renderPass!=="translucent")return;let{isRenderingToTexture:j}=O,B=C.paint.get("line-opacity"),H=C.paint.get("line-width");if(B.constantOr(1)===0||H.constantOr(1)===0)return;let X=b.getDepthModeForSublayer(0,xr.ReadOnly),le=b.colorModeForRenderPass(),oe=C.paint.get("line-dasharray"),ce=C.paint.get("line-pattern"),fe=ce.constantOr(1),xe=C.paint.get("line-gradient"),be=C.getCrossfadeParameters(),Ee=fe?"linePattern":oe?"lineSDF":xe?"lineGradient":"line",Ce=b.context,we=Ce.gl,Je=b.transform,Bt=!0;for(let gt of k){let wt=E.getTile(gt);if(fe&&!wt.patternsLoaded())continue;let bt=wt.getBucket(C);if(!bt)continue;let Ei=bt.programConfigurations.get(C.id),ti=b.context.program.get(),Jt=b.useProgram(Ee,Ei),Zi=Bt||Jt.program!==ti,Ir=b.style.map.terrain&&b.style.map.terrain.getTerrainData(gt),Dr=ce.constantOr(null);if(Dr&&wt.imageAtlas){let mn=wt.imageAtlas,Jr=mn.patternPositions[Dr.to.toString()],cs=mn.patternPositions[Dr.from.toString()];Jr&&cs&&Ei.setConstantPatternPositions(Jr,cs)}let vn=Je.getProjectionData({overscaledTileID:gt,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),Qr=Je.getPixelScale(),En=fe?Dl(b,wt,C,Qr,be):oe?r1(b,wt,C,Qr,oe,be):xe?Ao(b,wt,C,Qr,bt.lineClipsArray.length):$a(b,wt,C,Qr);if(fe)Ce.activeTexture.set(we.TEXTURE0),wt.imageAtlasTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE),Ei.updatePaintBuffers(be);else if(oe&&(Zi||b.lineAtlas.dirty))Ce.activeTexture.set(we.TEXTURE0),b.lineAtlas.bind(Ce);else if(xe){let mn=bt.gradients[C.id],Jr=mn.texture;if(C.gradientVersion!==mn.version){let cs=256;if(C.stepInterpolant){let gs=E.getSource().maxzoom,_s=gt.canonical.z===gs?Math.ceil(1<<b.transform.maxZoom-gt.canonical.z):1;cs=u.ae(u.bX(bt.maxLineLength/u.Z*1024*_s),256,Ce.maxTextureSize)}mn.gradient=u.bY({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:cs,image:mn.gradient||void 0,clips:bt.lineClipsArray}),mn.texture?mn.texture.update(mn.gradient):mn.texture=new yr(Ce,mn.gradient,we.RGBA),mn.version=C.gradientVersion,Jr=mn.texture}Ce.activeTexture.set(we.TEXTURE0),Jr.bind(C.stepInterpolant?we.NEAREST:we.LINEAR,we.CLAMP_TO_EDGE)}let Tn=b.stencilModeForClipping(gt);Jt.draw(Ce,we.TRIANGLES,X,Tn,le,Or.disabled,En,Ir,vn,C.id,bt.layoutVertexBuffer,bt.indexBuffer,bt.segments,C.paint,b.transform.zoom,Ei,bt.layoutVertexBuffer2),Bt=!1}}(e,r,o,l,d):u.c7(o)?function(b,E,C,k,O){let j=C.paint.get("fill-color"),B=C.paint.get("fill-opacity");if(B.constantOr(1)===0)return;let{isRenderingToTexture:H}=O,X=b.colorModeForRenderPass(),le=C.paint.get("fill-pattern"),oe=b.opaquePassEnabledForLayer()&&!le.constantOr(1)&&j.constantOr(u.b7.transparent).a===1&&B.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===oe){let ce=b.getDepthModeForSublayer(1,b.renderPass==="opaque"?xr.ReadWrite:xr.ReadOnly);Fl(b,E,C,k,ce,X,!1,H)}if(b.renderPass==="translucent"&&C.paint.get("fill-antialias")){let ce=b.getDepthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,xr.ReadOnly);Fl(b,E,C,k,ce,X,!0,H)}}(e,r,o,l,d):u.c8(o)?function(b,E,C,k,O){let j=C.paint.get("fill-extrusion-opacity");if(j===0)return;let{isRenderingToTexture:B}=O;if(b.renderPass==="translucent"){let H=new xr(b.context.gl.LEQUAL,xr.ReadWrite,b.depthRangeFor3D);if(j!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))Io(b,E,C,k,H,Fe.disabled,Pe.disabled,B),Io(b,E,C,k,H,b.stencilModeFor3D(),b.colorModeForRenderPass(),B);else{let X=b.colorModeForRenderPass();Io(b,E,C,k,H,Fe.disabled,X,B)}}}(e,r,o,l,d):u.c9(o)?function(b,E,C,k,O){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;let{isRenderingToTexture:j}=O,B=b.context,H=b.style.projection.useSubdivision,X=b.getDepthModeForSublayer(0,xr.ReadOnly),le=b.colorModeForRenderPass();if(b.renderPass==="offscreen")(function(oe,ce,fe,xe,be,Ee,Ce){let we=oe.context,Je=we.gl;for(let Bt of fe){let gt=ce.getTile(Bt),wt=gt.dem;if(!wt||!wt.data||!gt.needsHillshadePrepare)continue;let bt=wt.dim,Ei=wt.stride,ti=wt.getPixels();if(we.activeTexture.set(Je.TEXTURE1),we.pixelStoreUnpackPremultiplyAlpha.set(!1),gt.demTexture=gt.demTexture||oe.getTileTexture(Ei),gt.demTexture){let Zi=gt.demTexture;Zi.update(ti,{premultiply:!1}),Zi.bind(Je.NEAREST,Je.CLAMP_TO_EDGE)}else gt.demTexture=new yr(we,ti,Je.RGBA,{premultiply:!1}),gt.demTexture.bind(Je.NEAREST,Je.CLAMP_TO_EDGE);we.activeTexture.set(Je.TEXTURE0);let Jt=gt.fbo;if(!Jt){let Zi=new yr(we,{width:bt,height:bt,data:null},Je.RGBA);Zi.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),Jt=gt.fbo=we.createFramebuffer(bt,bt,!0,!1),Jt.colorAttachment.set(Zi.texture)}we.bindFramebuffer.set(Jt.framebuffer),we.viewport.set([0,0,bt,bt]),oe.useProgram("hillshadePrepare").draw(we,Je.TRIANGLES,be,Ee,Ce,Or.disabled,pc(gt.tileID,wt),null,null,xe.id,oe.rasterBoundsBuffer,oe.quadTriangleIndexBuffer,oe.rasterBoundsSegments),gt.needsHillshadePrepare=!1}})(b,E,k,C,X,Fe.disabled,le),B.viewport.set([0,0,b.width,b.height]);else if(b.renderPass==="translucent")if(H){let[oe,ce,fe]=b.stencilConfigForOverlapTwoPass(k);$1(b,E,C,fe,oe,X,le,!1,j),$1(b,E,C,fe,ce,X,le,!0,j)}else{let[oe,ce]=b.getStencilConfigForOverlapAndUpdateStencilID(k);$1(b,E,C,ce,oe,X,le,!1,j)}}(e,r,o,l,d):u.ca(o)?function(b,E,C,k,O){if(b.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!k.length)return;let{isRenderingToTexture:j}=O,B=E.getSource(),H=b.style.projection.useSubdivision;if(B instanceof ya)a1(b,E,C,k,null,!1,!1,B.tileCoords,B.flippedWindingOrder,j);else if(H){let[X,le,oe]=b.stencilConfigForOverlapTwoPass(k);a1(b,E,C,oe,X,!1,!0,Bl,!1,j),a1(b,E,C,oe,le,!0,!0,Bl,!1,j)}else{let[X,le]=b.getStencilConfigForOverlapAndUpdateStencilID(k);a1(b,E,C,le,X,!1,!0,Bl,!1,j)}}(e,r,o,l,d):u.cb(o)?function(b,E,C,k,O){let j=C.paint.get("background-color"),B=C.paint.get("background-opacity");if(B===0)return;let{isRenderingToTexture:H}=O,X=b.context,le=X.gl,oe=b.style.projection,ce=b.transform,fe=ce.tileSize,xe=C.paint.get("background-pattern");if(b.isPatternMissing(xe))return;let be=!xe&&j.a===1&&B===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==be)return;let Ee=Fe.disabled,Ce=b.getDepthModeForSublayer(0,be==="opaque"?xr.ReadWrite:xr.ReadOnly),we=b.colorModeForRenderPass(),Je=b.useProgram(xe?"backgroundPattern":"background"),Bt=k||Ae(ce,{tileSize:fe,terrain:b.style.map.terrain});xe&&(X.activeTexture.set(le.TEXTURE0),b.imageManager.bind(b.context));let gt=C.getCrossfadeParameters();for(let wt of Bt){let bt=ce.getProjectionData({overscaledTileID:wt,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),Ei=xe?k1(B,b,xe,{tileID:wt,tileSize:fe},gt):R1(B,j),ti=b.style.map.terrain&&b.style.map.terrain.getTerrainData(wt),Jt=oe.getMeshFromTileID(X,wt.canonical,!1,!0,"raster");Je.draw(X,le.TRIANGLES,Ce,Ee,we,Or.backCCW,Ei,ti,bt,C.id,Jt.vertexBuffer,Jt.indexBuffer,Jt.segments)}}(e,0,o,l,d):u.cc(o)&&function(b,E,C,k){let{isRenderingGlobe:O}=k,j=b.context,B=C.implementation,H=b.style.projection,X=b.transform,le=X.getProjectionDataForCustomLayer(O),oe={farZ:X.farZ,nearZ:X.nearZ,fov:X.fov*Math.PI/180,modelViewProjectionMatrix:X.modelViewProjectionMatrix,projectionMatrix:X.projectionMatrix,shaderData:{variantName:H.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${H.shaderPreludeCode.vertexSource}`,define:H.shaderDefine},defaultProjectionData:le},ce=B.renderingMode?B.renderingMode:"2d";if(b.renderPass==="offscreen"){let fe=B.prerender;fe&&(b.setCustomLayerDefaults(),j.setColorMode(b.colorModeForRenderPass()),fe.call(B,j.gl,oe),j.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),j.setColorMode(b.colorModeForRenderPass()),j.setStencilMode(Fe.disabled);let fe=ce==="3d"?b.getDepthModeFor3D():b.getDepthModeForSublayer(0,xr.ReadOnly);j.setDepthMode(fe),B.render(j.gl,oe),j.setDirty(),b.setBaseState(),j.bindFramebuffer.set(null)}}(e,0,o,d))}saveTileTexture(e){let r=this._tileTextures[e.size[0]];r?r.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){let r=this._tileTextures[e];return r&&r.length>0?r.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;let r=this.imageManager.getPattern(e.from.toString()),o=this.imageManager.getPattern(e.to.toString());return!r||!o}useProgram(e,r,o=!1,l=[]){this.cache=this.cache||{};let d=!!this.style.map.terrain,b=this.style.projection,E=o?hr.projectionMercator:b.shaderPreludeCode,C=o?Sr:b.shaderDefine,k=e+(r?r.cacheKey:"")+`/${o?sr:b.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(d?"/terrain":"")+(l?`/${l.join("/")}`:"");return this.cache[k]||(this.cache[k]=new Dt(this.context,hr[e],r,Co[e],this._showOverdrawInspector,d,E,C,l)),this.cache[k]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new yr(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:e,drawingBufferHeight:r}=this.context.gl;return this.width!==e||this.height!==r}}function fs(h,e){let r,o=!1,l=null,d=null,b=()=>{l=null,o&&(h.apply(d,r),l=setTimeout(b,e),o=!1)};return(...E)=>(o=!0,d=this,r=E,l||b(),l)}class Ns{constructor(e){this._getCurrentHash=()=>{let r=window.location.hash.replace("#","");if(this._hashName){let o;return r.split("&").map(l=>l.split("=")).forEach(l=>{l[0]===this._hashName&&(o=l)}),(o&&o[1]||"").split("/")}return r.split("/")},this._onHashChange=()=>{let r=this._getCurrentHash();if(!this._isValidHash(r))return!1;let o=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(r[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+r[2],+r[1]],zoom:+r[0],bearing:o,pitch:+(r[4]||0)}),!0},this._updateHashUnthrottled=()=>{let r=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,r)},this._removeHash=()=>{let r=this._getCurrentHash();if(r.length===0)return;let o=r.join("/"),l=o;l.split("&").length>0&&(l=l.split("&")[0]),this._hashName&&(l=`${this._hashName}=${o}`);let d=window.location.hash.replace(l,"");d.startsWith("#&")?d=d.slice(0,1)+d.slice(2):d==="#"&&(d="");let b=window.location.href.replace(/(#.+)?$/,d);b=b.replace("&&","&"),window.history.replaceState(window.history.state,null,b)},this._updateHash=fs(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){let r=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,l=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),d=Math.pow(10,l),b=Math.round(r.lng*d)/d,E=Math.round(r.lat*d)/d,C=this._map.getBearing(),k=this._map.getPitch(),O="";if(O+=e?`/${b}/${E}/${o}`:`${o}/${E}/${b}`,(C||k)&&(O+="/"+Math.round(10*C)/10),k&&(O+=`/${Math.round(k)}`),this._hashName){let j=this._hashName,B=!1,H=window.location.hash.slice(1).split("&").map(X=>{let le=X.split("=")[0];return le===j?(B=!0,`${le}=${O}`):X}).filter(X=>X);return B||H.push(`${j}=${O}`),`#${H.join("&")}`}return`#${O}`}_isValidHash(e){if(e.length<3||e.some(isNaN))return!1;try{new u.Q(+e[2],+e[1])}catch{return!1}let r=+e[0],o=+(e[3]||0),l=+(e[4]||0);return r>=this._map.getMinZoom()&&r<=this._map.getMaxZoom()&&o>=-180&&o<=180&&l>=this._map.getMinPitch()&&l<=this._map.getMaxPitch()}}let Dn={linearity:.3,easing:u.cd(0,0,.3,1)},zs=u.e({deceleration:2500,maxSpeed:1400},Dn),ms=u.e({deceleration:20,maxSpeed:1400},Dn),$s=u.e({deceleration:1e3,maxSpeed:360},Dn),ia=u.e({deceleration:1e3,maxSpeed:90},Dn),ra=u.e({deceleration:1e3,maxSpeed:360},Dn);class na{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:Vt.now(),settings:e})}_drainInertiaBuffer(){let e=this._inertiaBuffer,r=Vt.now();for(;e.length>0&&r-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let r={zoom:0,bearing:0,pitch:0,roll:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:d}of this._inertiaBuffer)r.zoom+=d.zoomDelta||0,r.bearing+=d.bearingDelta||0,r.pitch+=d.pitchDelta||0,r.roll+=d.rollDelta||0,d.panDelta&&r.pan._add(d.panDelta),d.around&&(r.around=d.around),d.pinchAround&&(r.pinchAround=d.pinchAround);let o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,l={};if(r.pan.mag()){let d=is(r.pan.mag(),o,u.e({},zs,e||{})),b=r.pan.mult(d.amount/r.pan.mag()),E=this._map.cameraHelper.handlePanInertia(b,this._map.transform);l.center=E.easingCenter,l.offset=E.easingOffset,ts(l,d)}if(r.zoom){let d=is(r.zoom,o,ms);l.zoom=this._map.transform.zoom+d.amount,ts(l,d)}if(r.bearing){let d=is(r.bearing,o,$s);l.bearing=this._map.transform.bearing+u.ae(d.amount,-179,179),ts(l,d)}if(r.pitch){let d=is(r.pitch,o,ia);l.pitch=this._map.transform.pitch+d.amount,ts(l,d)}if(r.roll){let d=is(r.roll,o,ra);l.roll=this._map.transform.roll+u.ae(d.amount,-179,179),ts(l,d)}if(l.zoom||l.bearing){let d=r.pinchAround===void 0?r.around:r.pinchAround;l.around=d?this._map.unproject(d):this._map.getCenter()}return this.clear(),u.e(l,{noMoveStart:!0})}}function ts(h,e){(!h.duration||h.duration<e.duration)&&(h.duration=e.duration,h.easing=e.easing)}function is(h,e,r){let{maxSpeed:o,linearity:l,deceleration:d}=r,b=u.ae(h*l/(e/1e3),-o,o),E=Math.abs(b)/(d*l);return{easing:r.easing,duration:1e3*E,amount:b*(E/2)}}class Kr extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,o,l={}){o=o instanceof MouseEvent?o:new MouseEvent(e,o);let d=Ne.mousePos(r.getCanvas(),o),b=r.unproject(d);super(e,u.e({point:d,lngLat:b,originalEvent:o},l)),this._defaultPrevented=!1,this.target=r}}class rs extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,o){let l=e==="touchend"?o.changedTouches:o.touches,d=Ne.touchPos(r.getCanvasContainer(),l),b=d.map(C=>r.unproject(C)),E=d.reduce((C,k,O,j)=>C.add(k.div(j.length)),new u.P(0,0));super(e,{points:d,point:E,lngLats:b,lngLat:r.unproject(E),originalEvent:o}),this._defaultPrevented=!1}}class Fs extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,o){super(e,{originalEvent:o}),this._defaultPrevented=!1}}class sa{constructor(e,r){this._map=e,this._clickTolerance=r.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Fs(e.type,this._map,e))}mousedown(e,r){return this._mousedownPos=r,this._firePreventable(new Kr(e.type,this._map,e))}mouseup(e){this._map.fire(new Kr(e.type,this._map,e))}click(e,r){this._mousedownPos&&this._mousedownPos.dist(r)>=this._clickTolerance||this._map.fire(new Kr(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Kr(e.type,this._map,e))}mouseover(e){this._map.fire(new Kr(e.type,this._map,e))}mouseout(e){this._map.fire(new Kr(e.type,this._map,e))}touchstart(e){return this._firePreventable(new rs(e.type,this._map,e))}touchmove(e){this._map.fire(new rs(e.type,this._map,e))}touchend(e){this._map.fire(new rs(e.type,this._map,e))}touchcancel(e){this._map.fire(new rs(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class aa{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Kr(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Kr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Kr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ns{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.screenPointToLocation(u.P.convert(e),this._map.terrain)}}class Bs{constructor(e,r){this._map=e,this._tr=new ns(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=r.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,r){this.isEnabled()&&e.shiftKey&&e.button===0&&(Ne.disableDrag(),this._startPos=this._lastPos=r,this._active=!0)}mousemoveWindow(e,r){if(!this._active)return;let o=r;if(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)return;let l=this._startPos;this._lastPos=o,this._box||(this._box=Ne.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));let d=Math.min(l.x,o.x),b=Math.max(l.x,o.x),E=Math.min(l.y,o.y),C=Math.max(l.y,o.y);Ne.setTransform(this._box,`translate(${d}px,${E}px)`),this._box.style.width=b-d+"px",this._box.style.height=C-E+"px"}mouseupWindow(e,r){if(!this._active||e.button!==0)return;let o=this._startPos,l=r;if(this.reset(),Ne.suppressClick(),o.x!==l.x||o.y!==l.y)return this._map.fire(new u.l("boxzoomend",{originalEvent:e})),{cameraAnimation:d=>d.fitScreenCoordinates(o,l,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(Ne.remove(this._box),this._box=null),Ne.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,r){return this._map.fire(new u.l(e,{originalEvent:r}))}}function Ss(h,e){if(h.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${h.length}, points ${e.length}`);let r={};for(let o=0;o<h.length;o++)r[h[o].identifier]=e[o];return r}class oa{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,r,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),o.length===this.numTouches&&(this.centroid=function(l){let d=new u.P(0,0);for(let b of l)d._add(b);return d.div(l.length)}(r),this.touches=Ss(o,r)))}touchmove(e,r,o){if(this.aborted||!this.centroid)return;let l=Ss(o,r);for(let d in this.touches){let b=l[d];(!b||b.dist(this.touches[d])>30)&&(this.aborted=!0)}}touchend(e,r,o){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),o.length===0){let l=!this.aborted&&this.centroid;if(this.reset(),l)return l}}}class ss{constructor(e){this.singleTap=new oa(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,r,o){this.singleTap.touchstart(e,r,o)}touchmove(e,r,o){this.singleTap.touchmove(e,r,o)}touchend(e,r,o){let l=this.singleTap.touchend(e,r,o);if(l){let d=e.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(l)<30;if(d&&b||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=l,this.count===this.numTaps)return this.reset(),l}}}class la{constructor(e){this._tr=new ns(e),this._zoomIn=new ss({numTouches:1,numTaps:2}),this._zoomOut=new ss({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,r,o){this._zoomIn.touchstart(e,r,o),this._zoomOut.touchstart(e,r,o)}touchmove(e,r,o){this._zoomIn.touchmove(e,r,o),this._zoomOut.touchmove(e,r,o)}touchend(e,r,o){let l=this._zoomIn.touchend(e,r,o),d=this._zoomOut.touchend(e,r,o),b=this._tr;return l?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:b.zoom+1,around:b.unproject(l)},{originalEvent:e})}):d?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:b.zoom-1,around:b.unproject(d)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sn{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){let r=this._moveFunction(...e);if(r.bearingDelta||r.pitchDelta||r.rollDelta||r.around||r.panDelta)return this._active=!0,r}dragStart(e,r){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=Array.isArray(r)?r[0]:r,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,r){if(!this.isEnabled())return;let o=this._lastPoint;if(!o)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);let l=Array.isArray(r)?r[0]:r;return!this._moved&&l.dist(o)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=l,this._move(o,l))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&Ne.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let In={0:1,2:2};class as{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){let r=Ne.mouseButton(e);this._eventButton=r}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(r,o){let l=In[o];return r.buttons===void 0||(r.buttons&l)!==l}(e,this._eventButton)}isValidEndEvent(e){return Ne.mouseButton(e)===this._eventButton}}class Mn{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}class os{constructor(e=new as({checkCorrectEvent:()=>!0}),r=new Mn){this.mouseMoveStateManager=e,this.oneFingerTouchMoveStateManager=r}_executeRelevantHandler(e,r,o){return e instanceof MouseEvent?r(e):typeof TouchEvent<"u"&&e instanceof TouchEvent?o(e):void 0}startMove(e){this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.startMove(r),r=>this.oneFingerTouchMoveStateManager.startMove(r))}endMove(e){this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.endMove(r),r=>this.oneFingerTouchMoveStateManager.endMove(r))}isValidStartEvent(e){return this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.isValidStartEvent(r),r=>this.oneFingerTouchMoveStateManager.isValidStartEvent(r))}isValidMoveEvent(e){return this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.isValidMoveEvent(r),r=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(r))}isValidEndEvent(e){return this._executeRelevantHandler(e,r=>this.mouseMoveStateManager.isValidEndEvent(r),r=>this.oneFingerTouchMoveStateManager.isValidEndEvent(r))}}let As=h=>{h.mousedown=h.dragStart,h.mousemoveWindow=h.dragMove,h.mouseup=h.dragEnd,h.contextmenu=e=>{e.preventDefault()}};class xa{constructor(e,r){this._clickTolerance=e.clickTolerance||1,this._map=r,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,r,o){return this._calculateTransform(e,r,o)}touchmove(e,r,o){if(this._active){if(!this._shouldBePrevented(o.length))return e.preventDefault(),this._calculateTransform(e,r,o);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,r,o){this._calculateTransform(e,r,o),this._active&&this._shouldBePrevented(o.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,r,o){o.length>0&&(this._active=!0);let l=Ss(o,r),d=new u.P(0,0),b=new u.P(0,0),E=0;for(let k in l){let O=l[k],j=this._touches[k];j&&(d._add(O),b._add(O.sub(j)),E++,l[k]=O)}if(this._touches=l,this._shouldBePrevented(E)||!b.mag())return;let C=b.div(E);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:d.div(E),panDelta:C}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class js{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,r,o){this._firstTwoTouches||o.length<2||(this._firstTwoTouches=[o[0].identifier,o[1].identifier],this._start([r[0],r[1]]))}touchmove(e,r,o){if(!this._firstTwoTouches)return;e.preventDefault();let[l,d]=this._firstTwoTouches,b=Cs(o,r,l),E=Cs(o,r,d);if(!b||!E)return;let C=this._aroundCenter?null:b.add(E).div(2);return this._move([b,E],C,e)}touchend(e,r,o){if(!this._firstTwoTouches)return;let[l,d]=this._firstTwoTouches,b=Cs(o,r,l),E=Cs(o,r,d);b&&E||(this._active&&Ne.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Cs(h,e,r){for(let o=0;o<h.length;o++)if(h[o].identifier===r)return e[o]}function o1(h,e){return Math.log(h/e)/Math.LN2}class Gr extends js{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,r){let o=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(o1(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:o1(this._distance,o),pinchAround:r}}}function Ln(h,e){return 180*h.angleWith(e)/Math.PI}class zi extends js{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,r,o){let l=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ln(this._vector,l),pinchAround:r}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());let r=25/(Math.PI*this._minDiameter)*360,o=Ln(e,this._startVector);return Math.abs(o)<r}}function Yi(h){return Math.abs(h.y)>Math.abs(h.x)}class l1 extends js{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,r,o){super.touchstart(e,r,o),this._currentTouchCount=o.length}_start(e){this._lastPoints=e,Yi(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,r,o){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let l=e[0].sub(this._lastPoints[0]),d=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(l,d,o.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(l.y+d.y)/2*-.5}):void 0}gestureBeginsVertically(e,r,o){if(this._valid!==void 0)return this._valid;let l=e.mag()>=2,d=r.mag()>=2;if(!l&&!d)return;if(!l||!d)return this._firstMove===void 0&&(this._firstMove=o),o-this._firstMove<100&&void 0;let b=e.y>0==r.y>0;return Yi(e)&&Yi(r)&&b}}let _c={panStep:100,bearingStep:15,pitchStep:10};class Ko{constructor(e){this._tr=new ns(e);let r=_c;this._panStep=r.panStep,this._bearingStep=r.bearingStep,this._pitchStep=r.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let r=0,o=0,l=0,d=0,b=0;switch(e.keyCode){case 61:case 107:case 171:case 187:r=1;break;case 189:case 109:case 173:r=-1;break;case 37:e.shiftKey?o=-1:(e.preventDefault(),d=-1);break;case 39:e.shiftKey?o=1:(e.preventDefault(),d=1);break;case 38:e.shiftKey?l=1:(e.preventDefault(),b=-1);break;case 40:e.shiftKey?l=-1:(e.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(o=0,l=0),{cameraAnimation:E=>{let C=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:Xr,zoom:r?Math.round(C.zoom)+r*(e.shiftKey?2:1):C.zoom,bearing:C.bearing+o*this._bearingStep,pitch:C.pitch+l*this._pitchStep,offset:[-d*this._panStep,-b*this._panStep],center:C.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Xr(h){return h*(2-h)}let Vo=4.000244140625;class Cr{constructor(e,r){this._onTimeout=o=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)},this._map=e,this._tr=new ns(e),this._triggerRenderFrame=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let r=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,o=Vt.now(),l=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,r!==0&&r%Vo==0?this._type="wheel":r!==0&&Math.abs(r)<4?this._type="trackpad":l>400?(this._type=null,this._lastValue=r,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(l*r)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,r+=this._lastValue)),e.shiftKey&&r&&(r/=4),this._type&&(this._lastWheelEvent=e,this._delta-=r,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let r=Ne.mousePos(this._map.getCanvas(),e),o=this._tr;this._aroundPoint=this._aroundCenter?o.transform.locationToScreenPoint(u.Q.convert(o.center)):r,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let e=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let E=e.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=E),typeof this._targetZoom=="number"&&(this._targetZoom+=E)}if(this._delta!==0){let E=this._type==="wheel"&&Math.abs(this._delta)>Vo?this._wheelZoomRate:this._defaultZoomRate,C=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&C!==0&&(C=1/C);let k=typeof this._targetZoom!="number"?e.scale:u.ac(this._targetZoom);this._targetZoom=e.getConstrained(e.getCameraLngLat(),u.ah(k*C)).zoom,this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let r=typeof this._targetZoom!="number"?e.zoom:this._targetZoom,o=this._startZoom,l=this._easing,d,b=!1;if(this._type==="wheel"&&o&&l){let E=Vt.now()-this._lastWheelEventTime,C=Math.min((E+5)/200,1),k=l(C);d=u.B.number(o,r,k),C<1?this._frameId||(this._frameId=!0):b=!0}else d=r,b=!0;return this._active=!0,b&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=d,{noInertia:!0,needsRenderFrame:!b,zoomDelta:d-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let r=u.cf;if(this._prevEase){let o=this._prevEase,l=(Vt.now()-o.start)/o.duration,d=o.easing(l+.01)-o.easing(l),b=.27/Math.sqrt(d*d+1e-4)*.01,E=Math.sqrt(.0729-b*b);r=u.cd(b,E,.25,1)}return this._prevEase={start:Vt.now(),duration:e,easing:r},r}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Mo{constructor(e,r){this._clickZoom=e,this._tapZoom=r}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class F1{constructor(e){this._tr=new ns(e),this.reset()}reset(){this._active=!1}dblclick(e,r){return e.preventDefault(),{cameraAnimation:o=>{o.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(r)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class B1{constructor(){this._tap=new ss({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,r,o){if(!this._swipePoint)if(this._tapTime){let l=r[0],d=e.timeStamp-this._tapTime<500,b=this._tapPoint.dist(l)<30;d&&b?o.length>0&&(this._swipePoint=l,this._swipeTouch=o[0].identifier):this.reset()}else this._tap.touchstart(e,r,o)}touchmove(e,r,o){if(this._tapTime){if(this._swipePoint){if(o[0].identifier!==this._swipeTouch)return;let l=r[0],d=l.y-this._swipePoint.y;return this._swipePoint=l,e.preventDefault(),this._active=!0,{zoomDelta:d/128}}}else this._tap.touchmove(e,r,o)}touchend(e,r,o){if(this._tapTime)this._swipePoint&&o.length===0&&this.reset();else{let l=this._tap.touchend(e,r,o);l&&(this._tapTime=e.timeStamp,this._tapPoint=l)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yc{constructor(e,r,o){this._el=e,this._mousePan=r,this._touchPan=o}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class j1{constructor(e,r,o,l){this._pitchWithRotate=e.pitchWithRotate,this._rollEnabled=e.rollEnabled,this._mouseRotate=r,this._mousePitch=o,this._mouseRoll=l}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class jl{constructor(e,r,o,l){this._el=e,this._touchZoom=r,this._touchRotate=o,this._tapDragZoom=l,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class c1{constructor(e,r){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=r,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=Ne.create("div","maplibregl-cooperative-gesture-screen",e);let r=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(r=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let o=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),l=document.createElement("div");l.className="maplibregl-desktop-message",l.textContent=r,this._container.appendChild(l);let d=document.createElement("div");d.className="maplibregl-mobile-message",d.textContent=o,this._container.appendChild(d),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(Ne.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,r){this._enabled&&(this._map.fire(new u.l("cooperativegestureprevented",{gestureType:e,originalEvent:r})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let Qo=h=>h.zoom||h.drag||h.roll||h.pitch||h.rotate;class po extends u.l{}function u1(h){return h.panDelta&&h.panDelta.mag()||h.zoomDelta||h.bearingDelta||h.pitchDelta||h.rollDelta}class bc{constructor(e,r){this.handleWindowEvent=l=>{this.handleEvent(l,`${l.type}Window`)},this.handleEvent=(l,d)=>{if(l.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let b=l.type==="renderFrame"?void 0:l,E={needsRenderFrame:!1},C={},k={};for(let{handlerName:B,handler:H,allowed:X}of this._handlers){if(!H.isEnabled())continue;let le;if(this._blockedByActive(k,X,B))H.reset();else if(H[d||l.type]){if(u.cg(l,d||l.type)){let oe=Ne.mousePos(this._map.getCanvas(),l);le=H[d||l.type](l,oe)}else if(u.ch(l,d||l.type)){let oe=this._getMapTouches(l.touches),ce=Ne.touchPos(this._map.getCanvas(),oe);le=H[d||l.type](l,ce,oe)}else u.ci(d||l.type)||(le=H[d||l.type](l));this.mergeHandlerResult(E,C,le,B,b),le&&le.needsRenderFrame&&this._triggerRenderFrame()}(le||H.isActive())&&(k[B]=H)}let O={};for(let B in this._previousActiveHandlers)k[B]||(O[B]=b);this._previousActiveHandlers=k,(Object.keys(O).length||u1(E))&&(this._changes.push([E,C,O]),this._triggerRenderFrame()),(Object.keys(k).length||u1(E))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:j}=E;j&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],j(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new na(e),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r);let o=this._el;this._listeners=[[o,"touchstart",{passive:!0}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[window,"blur",void 0]];for(let[l,d,b]of this._listeners)Ne.addEventListener(l,d,l===document?this.handleWindowEvent:this.handleEvent,b)}destroy(){for(let[e,r,o]of this._listeners)Ne.removeEventListener(e,r,e===document?this.handleWindowEvent:this.handleEvent,o)}_addDefaultHandlers(e){let r=this._map,o=r.getCanvasContainer();this._add("mapEvent",new sa(r,e));let l=r.boxZoom=new Bs(r,e);this._add("boxZoom",l),e.interactive&&e.boxZoom&&l.enable();let d=r.cooperativeGestures=new c1(r,e.cooperativeGestures);this._add("cooperativeGestures",d),e.cooperativeGestures&&d.enable();let b=new la(r),E=new F1(r);r.doubleClickZoom=new Mo(E,b),this._add("tapZoom",b),this._add("clickZoom",E),e.interactive&&e.doubleClickZoom&&r.doubleClickZoom.enable();let C=new B1;this._add("tapDragZoom",C);let k=r.touchPitch=new l1(r);this._add("touchPitch",k),e.interactive&&e.touchPitch&&r.touchPitch.enable(e.touchPitch);let O=()=>r.project(r.getCenter()),j=function({enable:be,clickTolerance:Ee,aroundCenter:Ce=!0,minPixelCenterThreshold:we=100,rotateDegreesPerPixelMoved:Je=.8},Bt){let gt=new as({checkCorrectEvent:wt=>Ne.mouseButton(wt)===0&&wt.ctrlKey||Ne.mouseButton(wt)===2&&!wt.ctrlKey});return new sn({clickTolerance:Ee,move:(wt,bt)=>{let Ei=Bt();if(Ce&&Math.abs(Ei.y-wt.y)>we)return{bearingDelta:u.ce(new u.P(wt.x,bt.y),bt,Ei)};let ti=(bt.x-wt.x)*Je;return Ce&&bt.y<Ei.y&&(ti=-ti),{bearingDelta:ti}},moveStateManager:gt,enable:be,assignEvents:As})}(e,O),B=function({enable:be,clickTolerance:Ee,pitchDegreesPerPixelMoved:Ce=-.5}){let we=new as({checkCorrectEvent:Je=>Ne.mouseButton(Je)===0&&Je.ctrlKey||Ne.mouseButton(Je)===2});return new sn({clickTolerance:Ee,move:(Je,Bt)=>({pitchDelta:(Bt.y-Je.y)*Ce}),moveStateManager:we,enable:be,assignEvents:As})}(e),H=function({enable:be,clickTolerance:Ee,rollDegreesPerPixelMoved:Ce=.3},we){let Je=new as({checkCorrectEvent:Bt=>Ne.mouseButton(Bt)===2&&Bt.ctrlKey});return new sn({clickTolerance:Ee,move:(Bt,gt)=>{let wt=we(),bt=(gt.x-Bt.x)*Ce;return gt.y<wt.y&&(bt=-bt),{rollDelta:bt}},moveStateManager:Je,enable:be,assignEvents:As})}(e,O);r.dragRotate=new j1(e,j,B,H),this._add("mouseRotate",j,["mousePitch"]),this._add("mousePitch",B,["mouseRotate","mouseRoll"]),this._add("mouseRoll",H,["mousePitch"]),e.interactive&&e.dragRotate&&r.dragRotate.enable();let X=function({enable:be,clickTolerance:Ee}){let Ce=new as({checkCorrectEvent:we=>Ne.mouseButton(we)===0&&!we.ctrlKey});return new sn({clickTolerance:Ee,move:(we,Je)=>({around:Je,panDelta:Je.sub(we)}),activateOnStart:!0,moveStateManager:Ce,enable:be,assignEvents:As})}(e),le=new xa(e,r);r.dragPan=new yc(o,X,le),this._add("mousePan",X),this._add("touchPan",le,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&r.dragPan.enable(e.dragPan);let oe=new zi,ce=new Gr;r.touchZoomRotate=new jl(o,ce,oe,C),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&r.touchZoomRotate.enable(e.touchZoomRotate);let fe=r.scrollZoom=new Cr(r,()=>this._triggerRenderFrame());this._add("scrollZoom",fe,["mousePan"]),e.interactive&&e.scrollZoom&&r.scrollZoom.enable(e.scrollZoom);let xe=r.keyboard=new Ko(r);this._add("keyboard",xe),e.interactive&&e.keyboard&&r.keyboard.enable(),this._add("blockableMapEvent",new aa(r))}_add(e,r,o){this._handlers.push({handlerName:e,handler:r,allowed:o}),this._handlersById[e]=r}stop(e){if(!this._updatingCamera){for(let{handler:r}of this._handlers)r.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(let{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Qo(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,r,o){for(let l in e)if(l!==o&&(!r||r.indexOf(l)<0))return!0;return!1}_getMapTouches(e){let r=[];for(let o of e)this._el.contains(o.target)&&r.push(o);return r}mergeHandlerResult(e,r,o,l,d){if(!o)return;u.e(e,o);let b={handlerName:l,originalEvent:o.originalEvent||d};o.zoomDelta!==void 0&&(r.zoom=b),o.panDelta!==void 0&&(r.drag=b),o.rollDelta!==void 0&&(r.roll=b),o.pitchDelta!==void 0&&(r.pitch=b),o.bearingDelta!==void 0&&(r.rotate=b)}_applyChanges(){let e={},r={},o={};for(let[l,d,b]of this._changes)l.panDelta&&(e.panDelta=(e.panDelta||new u.P(0,0))._add(l.panDelta)),l.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+l.zoomDelta),l.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+l.bearingDelta),l.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+l.pitchDelta),l.rollDelta&&(e.rollDelta=(e.rollDelta||0)+l.rollDelta),l.around!==void 0&&(e.around=l.around),l.pinchAround!==void 0&&(e.pinchAround=l.pinchAround),l.noInertia&&(e.noInertia=l.noInertia),u.e(r,d),u.e(o,b);this._updateMapTransform(e,r,o),this._changes=[]}_updateMapTransform(e,r,o){let l=this._map,d=l._getTransformForUpdate(),b=l.terrain;if(!(u1(e)||b&&this._terrainMovement))return this._fireEvents(r,o,!0);l._stop(!0);let{panDelta:E,zoomDelta:C,bearingDelta:k,pitchDelta:O,rollDelta:j,around:B,pinchAround:H}=e;H!==void 0&&(B=H),B=B||l.transform.centerPoint,b&&!d.isPointOnMapSurface(B)&&(B=d.centerPoint);let X={panDelta:E,zoomDelta:C,rollDelta:j,pitchDelta:O,bearingDelta:k,around:B};this._map.cameraHelper.useGlobeControls&&!d.isPointOnMapSurface(B)&&(B=d.centerPoint);let le=B.distSqr(d.centerPoint)<.01?d.center:d.screenPointToLocation(E?B.sub(E):B);b?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(X,d),this._terrainMovement||!r.drag&&!r.zoom?r.drag&&this._terrainMovement?d.setCenter(d.screenPointToLocation(d.centerPoint.sub(E))):this._map.cameraHelper.handleMapControlsPan(X,d,le):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(X,d,le))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(X,d),this._map.cameraHelper.handleMapControlsPan(X,d,le)),l._applyUpdatedTransform(d),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(r,o,!0)}_fireEvents(e,r,o){let l=Qo(this._eventsInProgress),d=Qo(e),b={};for(let j in e){let{originalEvent:B}=e[j];this._eventsInProgress[j]||(b[`${j}start`]=B),this._eventsInProgress[j]=e[j]}!l&&d&&this._fireEvent("movestart",d.originalEvent);for(let j in b)this._fireEvent(j,b[j]);d&&this._fireEvent("move",d.originalEvent);for(let j in e){let{originalEvent:B}=e[j];this._fireEvent(j,B)}let E={},C;for(let j in this._eventsInProgress){let{handlerName:B,originalEvent:H}=this._eventsInProgress[j];this._handlersById[B].isActive()||(delete this._eventsInProgress[j],C=r[B]||H,E[`${j}end`]=C)}for(let j in E)this._fireEvent(j,E[j]);let k=Qo(this._eventsInProgress),O=(l||d)&&!k;if(O&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let j=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&j.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(j)}if(o&&O){this._updatingCamera=!0;let j=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),B=H=>H!==0&&-this._bearingSnap<H&&H<this._bearingSnap;!j||!j.essential&&Vt.prefersReducedMotion?(this._map.fire(new u.l("moveend",{originalEvent:C})),B(this._map.getBearing())&&this._map.resetNorth()):(B(j.bearing||this._map.getBearing())&&(j.bearing=0),j.freezeElevation=!0,this._map.easeTo(j,{originalEvent:C})),this._updatingCamera=!1}}_fireEvent(e,r){this._map.fire(new u.l(e,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new po("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Vl extends u.E{constructor(e,r,o){super(),this._renderFrameCallback=()=>{let l=Math.min((Vt.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(l)),l<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=o.bearingSnap,this.cameraHelper=r,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(e,r){e.apply(this.transform),this.transform=e,this.cameraHelper=r}getCenter(){return new u.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(e,r){return this.jumpTo({center:e},r)}getCenterElevation(){return this.transform.elevation}setCenterElevation(e,r){return this.jumpTo({elevation:e},r),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(e){this._centerClampedToGround=e}panBy(e,r,o){return e=u.P.convert(e).mult(-1),this.panTo(this.transform.center,u.e({offset:e},r),o)}panTo(e,r,o){return this.easeTo(u.e({center:e},r),o)}getZoom(){return this.transform.zoom}setZoom(e,r){return this.jumpTo({zoom:e},r),this}zoomTo(e,r,o){return this.easeTo(u.e({zoom:e},r),o)}zoomIn(e,r){return this.zoomTo(this.getZoom()+1,e,r),this}zoomOut(e,r){return this.zoomTo(this.getZoom()-1,e,r),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(e,r){return e!=this.transform.fov&&(this.transform.setFov(e),this.fire(new u.l("movestart",r)).fire(new u.l("move",r)).fire(new u.l("moveend",r))),this}getBearing(){return this.transform.bearing}setBearing(e,r){return this.jumpTo({bearing:e},r),this}getPadding(){return this.transform.padding}setPadding(e,r){return this.jumpTo({padding:e},r),this}rotateTo(e,r,o){return this.easeTo(u.e({bearing:e},r),o)}resetNorth(e,r){return this.rotateTo(0,u.e({duration:1e3},e),r),this}resetNorthPitch(e,r){return this.easeTo(u.e({bearing:0,pitch:0,roll:0,duration:1e3},e),r),this}snapToNorth(e,r){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,r):this}getPitch(){return this.transform.pitch}setPitch(e,r){return this.jumpTo({pitch:e},r),this}getRoll(){return this.transform.roll}setRoll(e,r){return this.jumpTo({roll:e},r),this}cameraForBounds(e,r){e=on.convert(e).adjustAntiMeridian();let o=r&&r.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),o,r)}_cameraForBoxAndBearing(e,r,o,l){let d={top:0,bottom:0,right:0,left:0};if(typeof(l=u.e({padding:d,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=="number"){let k=l.padding;l.padding={top:k,bottom:k,right:k,left:k}}let b=u.e(d,l.padding);l.padding=b;let E=this.transform,C=new on(e,r);return this.cameraHelper.cameraForBoxAndBearing(l,b,C,o,E)}fitBounds(e,r,o){return this._fitInternal(this.cameraForBounds(e,r),r,o)}fitScreenCoordinates(e,r,o,l,d){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(u.P.convert(e)),this.transform.screenPointToLocation(u.P.convert(r)),o,l),l,d)}_fitInternal(e,r,o){return e?(delete(r=u.e(e,r)).padding,r.linear?this.easeTo(r,o):this.flyTo(r,o)):this}jumpTo(e,r){this.stop();let o=this._getTransformForUpdate(),l=!1,d=!1,b=!1,E=o.zoom;this.cameraHelper.handleJumpToCenterZoom(o,e);let C=o.zoom!==E;return"elevation"in e&&o.elevation!==+e.elevation&&o.setElevation(+e.elevation),"bearing"in e&&o.bearing!==+e.bearing&&(l=!0,o.setBearing(+e.bearing)),"pitch"in e&&o.pitch!==+e.pitch&&(d=!0,o.setPitch(+e.pitch)),"roll"in e&&o.roll!==+e.roll&&(b=!0,o.setRoll(+e.roll)),e.padding==null||o.isPaddingEqual(e.padding)||o.setPadding(e.padding),this._applyUpdatedTransform(o),this.fire(new u.l("movestart",r)).fire(new u.l("move",r)),C&&this.fire(new u.l("zoomstart",r)).fire(new u.l("zoom",r)).fire(new u.l("zoomend",r)),l&&this.fire(new u.l("rotatestart",r)).fire(new u.l("rotate",r)).fire(new u.l("rotateend",r)),d&&this.fire(new u.l("pitchstart",r)).fire(new u.l("pitch",r)).fire(new u.l("pitchend",r)),b&&this.fire(new u.l("rollstart",r)).fire(new u.l("roll",r)).fire(new u.l("rollend",r)),this.fire(new u.l("moveend",r))}calculateCameraOptionsFromTo(e,r,o,l=0){let d=u.$.fromLngLat(e,r),b=u.$.fromLngLat(o,l),E=b.x-d.x,C=b.y-d.y,k=b.z-d.z,O=Math.hypot(E,C,k);if(O===0)throw new Error("Can't calculate camera options with same From and To");let j=Math.hypot(E,C),B=u.ah(this.transform.cameraToCenterDistance/O/this.transform.tileSize),H=180*Math.atan2(E,-C)/Math.PI,X=180*Math.acos(j/O)/Math.PI;return X=k<0?90-X:90+X,{center:b.toLngLat(),elevation:l,zoom:B,pitch:X,bearing:H}}calculateCameraOptionsFromCameraLngLatAltRotation(e,r,o,l,d){let b=this.transform.calculateCenterFromCameraLngLatAlt(e,r,o,l);return{center:b.center,elevation:b.elevation,zoom:b.zoom,bearing:o,pitch:l,roll:d}}easeTo(e,r){this._stop(!1,e.easeId),((e=u.e({offset:[0,0],duration:500,easing:u.cf},e)).animate===!1||!e.essential&&Vt.prefersReducedMotion)&&(e.duration=0);let o=this._getTransformForUpdate(),l=this.getBearing(),d=o.pitch,b=o.roll,E="bearing"in e?this._normalizeBearing(e.bearing,l):l,C="pitch"in e?+e.pitch:d,k="roll"in e?this._normalizeBearing(e.roll,b):b,O="padding"in e?e.padding:o.padding,j=u.P.convert(e.offset),B,H;e.around&&(B=u.Q.convert(e.around),H=o.locationToScreenPoint(B));let X={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},le=this.cameraHelper.handleEaseTo(o,{bearing:E,pitch:C,roll:k,padding:O,around:B,aroundPoint:H,offsetAsPoint:j,offset:e.offset,zoom:e.zoom,center:e.center});return this._rotating=this._rotating||l!==E,this._pitching=this._pitching||C!==d,this._rolling=this._rolling||k!==b,this._padding=!o.isPaddingEqual(O),this._zooming=this._zooming||le.isZooming,this._easeId=e.easeId,this._prepareEase(r,e.noMoveStart,X),this.terrain&&this._prepareElevation(le.elevationCenter),this._ease(oe=>{le.easeFunc(oe),this.terrain&&!e.freezeElevation&&this._updateElevation(oe),this._applyUpdatedTransform(o),this._fireMoveEvents(r)},oe=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(r,oe)},e),this}_prepareEase(e,r,o={}){this._moving=!0,r||o.moving||this.fire(new u.l("movestart",e)),this._zooming&&!o.zooming&&this.fire(new u.l("zoomstart",e)),this._rotating&&!o.rotating&&this.fire(new u.l("rotatestart",e)),this._pitching&&!o.pitching&&this.fire(new u.l("pitchstart",e)),this._rolling&&!o.rolling&&this.fire(new u.l("rollstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let r=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&r!==this._elevationTarget){let o=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(o-(r-(o*e+this._elevationStart))/(1-e)),this._elevationTarget=r}this.transform.setElevation(u.B.number(this._elevationStart,this._elevationTarget,e))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){if(!this.terrain&&e.elevation>=0&&e.pitch<=90)return{};let r=e.getCameraLngLat(),o=e.getCameraAltitude(),l=this.terrain?this.terrain.getElevationForLngLatZoom(r,e.zoom):0;if(o<l){let d=this.calculateCameraOptionsFromTo(r,l,e.center,e.elevation);return{pitch:d.pitch,zoom:d.zoom}}return{}}_applyUpdatedTransform(e){let r=[];if(r.push(l=>this._elevateCameraIfInsideTerrain(l)),this.transformCameraUpdate&&r.push(l=>this.transformCameraUpdate(l)),!r.length)return;let o=e.clone();for(let l of r){let d=o.clone(),{center:b,zoom:E,roll:C,pitch:k,bearing:O,elevation:j}=l(d);b&&d.setCenter(b),j!==void 0&&d.setElevation(j),E!==void 0&&d.setZoom(E),C!==void 0&&d.setRoll(C),k!==void 0&&d.setPitch(k),O!==void 0&&d.setBearing(O),o.apply(d)}this.transform.apply(o)}_fireMoveEvents(e){this.fire(new u.l("move",e)),this._zooming&&this.fire(new u.l("zoom",e)),this._rotating&&this.fire(new u.l("rotate",e)),this._pitching&&this.fire(new u.l("pitch",e)),this._rolling&&this.fire(new u.l("roll",e))}_afterEase(e,r){if(this._easeId&&r&&this._easeId===r)return;delete this._easeId;let o=this._zooming,l=this._rotating,d=this._pitching,b=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,o&&this.fire(new u.l("zoomend",e)),l&&this.fire(new u.l("rotateend",e)),d&&this.fire(new u.l("pitchend",e)),b&&this.fire(new u.l("rollend",e)),this.fire(new u.l("moveend",e))}flyTo(e,r){if(!e.essential&&Vt.prefersReducedMotion){let bt=u.O(e,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(bt,r)}this.stop(),e=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.cf},e);let o=this._getTransformForUpdate(),l=o.bearing,d=o.pitch,b=o.roll,E=o.padding,C="bearing"in e?this._normalizeBearing(e.bearing,l):l,k="pitch"in e?+e.pitch:d,O="roll"in e?this._normalizeBearing(e.roll,b):b,j="padding"in e?e.padding:o.padding,B=u.P.convert(e.offset),H=o.centerPoint.add(B),X=o.screenPointToLocation(H),le=this.cameraHelper.handleFlyTo(o,{bearing:C,pitch:k,roll:O,padding:j,locationAtOffset:X,offsetAsPoint:B,center:e.center,minZoom:e.minZoom,zoom:e.zoom}),oe=e.curve,ce=Math.max(o.width,o.height),fe=ce/le.scaleOfZoom,xe=le.pixelPathLength;typeof le.scaleOfMinZoom=="number"&&(oe=Math.sqrt(ce/le.scaleOfMinZoom/xe*2));let be=oe*oe;function Ee(bt){let Ei=(fe*fe-ce*ce+(bt?-1:1)*be*be*xe*xe)/(2*(bt?fe:ce)*be*xe);return Math.log(Math.sqrt(Ei*Ei+1)-Ei)}function Ce(bt){return(Math.exp(bt)-Math.exp(-bt))/2}function we(bt){return(Math.exp(bt)+Math.exp(-bt))/2}let Je=Ee(!1),Bt=function(bt){return we(Je)/we(Je+oe*bt)},gt=function(bt){return ce*((we(Je)*(Ce(Ei=Je+oe*bt)/we(Ei))-Ce(Je))/be)/xe;var Ei},wt=(Ee(!0)-Je)/oe;if(Math.abs(xe)<2e-6||!isFinite(wt)){if(Math.abs(ce-fe)<1e-6)return this.easeTo(e,r);let bt=fe<ce?-1:1;wt=Math.abs(Math.log(fe/ce))/oe,gt=()=>0,Bt=Ei=>Math.exp(bt*oe*Ei)}return e.duration="duration"in e?+e.duration:1e3*wt/("screenSpeed"in e?+e.screenSpeed/oe:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=l!==C,this._pitching=k!==d,this._rolling=O!==b,this._padding=!o.isPaddingEqual(j),this._prepareEase(r,!1),this.terrain&&this._prepareElevation(le.targetCenter),this._ease(bt=>{let Ei=bt*wt,ti=1/Bt(Ei),Jt=gt(Ei);this._rotating&&o.setBearing(u.B.number(l,C,bt)),this._pitching&&o.setPitch(u.B.number(d,k,bt)),this._rolling&&o.setRoll(u.B.number(b,O,bt)),this._padding&&(o.interpolatePadding(E,j,bt),H=o.centerPoint.add(B)),le.easeFunc(bt,ti,Jt,H),this.terrain&&!e.freezeElevation&&this._updateElevation(bt),this._applyUpdatedTransform(o),this._fireMoveEvents(r)},()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(r)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,r){var o;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let l=this._onEaseEnd;delete this._onEaseEnd,l.call(this,r)}return e||(o=this.handlers)===null||o===void 0||o.stop(!1),this}_ease(e,r,o){o.animate===!1||o.duration===0?(e(1),r()):(this._easeStart=Vt.now(),this._easeOptions=o,this._onEaseFrame=e,this._onEaseEnd=r,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,r){e=u.aL(e,-180,180);let o=Math.abs(e-r);return Math.abs(e-360-r)<o&&(e-=360),Math.abs(e+360-r)<o&&(e+=360),e}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(u.Q.convert(e),this.transform.tileZoom):null}}let Po={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class yn{constructor(e=Po){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=r=>{!r||r.sourceDataType!=="metadata"&&r.sourceDataType!=="visibility"&&r.dataType!=="style"&&r.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=Ne.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=Ne.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Ne.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){Ne.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,r){let o=this._map._getUIString(`AttributionControl.${r}`);e.title=o,e.setAttribute("aria-label",o)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(l=>typeof l!="string"?"":l)):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){let l=this._map.style.stylesheet;this.styleOwner=l.owner,this.styleId=l.id}let r=this._map.style.sourceCaches;for(let l in r){let d=r[l];if(d.used||d.usedForTerrain){let b=d.getSource();b.attribution&&e.indexOf(b.attribution)<0&&e.push(b.attribution)}}e=e.filter(l=>String(l).trim()),e.sort((l,d)=>l.length-d.length),e=e.filter((l,d)=>{for(let b=d+1;b<e.length;b++)if(e[b].indexOf(l)>=0)return!1;return!0});let o=e.join(" | ");o!==this._attribHTML&&(this._attribHTML=o,e.length?(this._innerContainer.innerHTML=Ne.sanitize(o),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ul{constructor(e={}){this._updateCompact=()=>{let r=this._container.children;if(r.length){let o=r[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&o.classList.add("maplibregl-compact"):o.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=Ne.create("div","maplibregl-ctrl");let r=Ne.create("a","maplibregl-ctrl-logo");return r.target="_blank",r.rel="noopener nofollow",r.href="https://maplibre.org/",r.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),r.setAttribute("rel","noopener nofollow"),this._container.appendChild(r),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){Ne.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class V1{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){let r=++this._id;return this._queue.push({callback:e,id:r,cancelled:!1}),r}remove(e){let r=this._currentlyRunning,o=r?this._queue.concat(r):this._queue;for(let l of o)if(l.id===e)return void(l.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let r=this._currentlyRunning=this._queue;this._queue=[];for(let o of r)if(!o.cancelled&&(o.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var vc=u.aG([{name:"a_pos3d",type:"Int16",components:3}]);class vl extends u.E{constructor(e){super(),this._lastTilesetChange=Vt.now(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=e._source.tileSize*2**this.deltaZoom,e.usedForTerrain=!0,e.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,r){this.sourceCache.update(e,r),this._renderableTilesKeys=[];let o={};for(let l of Ae(e,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:r,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))o[l.key]=!0,this._renderableTilesKeys.push(l.key),this._tiles[l.key]||(l.terrainRttPosMatrix32f=new Float64Array(16),u.bQ(l.terrainRttPosMatrix32f,0,u.Z,u.Z,0,0,1),this._tiles[l.key]=new Ka(l,this.tileSize),this._lastTilesetChange=Vt.now());for(let l in this._tiles)o[l]||delete this._tiles[l]}freeRtt(e){for(let r in this._tiles){let o=this._tiles[r];(!e||o.tileID.equals(e)||o.tileID.isChildOf(e)||e.isChildOf(o.tileID))&&(o.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(e=>this.getTileByID(e))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e,r){return r?this._getTerrainCoordsForTileRanges(e,r):this._getTerrainCoordsForRegularTile(e)}_getTerrainCoordsForRegularTile(e){let r={};for(let o of this._renderableTilesKeys){let l=this._tiles[o].tileID,d=e.clone(),b=u.b2();if(l.canonical.equals(e.canonical))u.bQ(b,0,u.Z,u.Z,0,0,1);else if(l.canonical.isChildOf(e.canonical)){let E=l.canonical.z-e.canonical.z,C=l.canonical.x-(l.canonical.x>>E<<E),k=l.canonical.y-(l.canonical.y>>E<<E),O=u.Z>>E;u.bQ(b,0,O,O,0,0,1),u.L(b,b,[-C*O,-k*O,0])}else{if(!e.canonical.isChildOf(l.canonical))continue;{let E=e.canonical.z-l.canonical.z,C=e.canonical.x-(e.canonical.x>>E<<E),k=e.canonical.y-(e.canonical.y>>E<<E),O=u.Z>>E;u.bQ(b,0,u.Z,u.Z,0,0,1),u.L(b,b,[C*O,k*O,0]),u.M(b,b,[1/2**E,1/2**E,0])}}d.terrainRttPosMatrix32f=new Float32Array(b),r[o]=d}return r}_getTerrainCoordsForTileRanges(e,r){let o={};for(let l of this._renderableTilesKeys){let d=this._tiles[l].tileID;if(!this._isWithinTileRanges(d,r))continue;let b=e.clone(),E=u.b2();if(d.canonical.z===e.canonical.z){let C=e.canonical.x-d.canonical.x,k=e.canonical.y-d.canonical.y;u.bQ(E,0,u.Z,u.Z,0,0,1),u.L(E,E,[C*u.Z,k*u.Z,0])}else if(d.canonical.z>e.canonical.z){let C=d.canonical.z-e.canonical.z,k=d.canonical.x-(d.canonical.x>>C<<C),O=d.canonical.y-(d.canonical.y>>C<<C),j=e.canonical.x-(d.canonical.x>>C),B=e.canonical.y-(d.canonical.y>>C),H=u.Z>>C;u.bQ(E,0,H,H,0,0,1),u.L(E,E,[-k*H+j*u.Z,-O*H+B*u.Z,0])}else{let C=e.canonical.z-d.canonical.z,k=e.canonical.x-(e.canonical.x>>C<<C),O=e.canonical.y-(e.canonical.y>>C<<C),j=(e.canonical.x>>C)-d.canonical.x,B=(e.canonical.y>>C)-d.canonical.y,H=u.Z<<C;u.bQ(E,0,H,H,0,0,1),u.L(E,E,[k*u.Z+j*H,O*u.Z+B*H,0])}b.terrainRttPosMatrix32f=new Float32Array(E),o[l]=b}return o}getSourceTile(e,r){let o=this.sourceCache._source,l=e.overscaledZ-this.deltaZoom;if(l>o.maxzoom&&(l=o.maxzoom),l<o.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(l).key);let d=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!d||!d.dem)&&r)for(;l>=o.minzoom&&(!d||!d.dem);)d=this.sourceCache.getTileByID(e.scaledTo(l--).key);return d}anyTilesAfterTime(e=Date.now()){return this._lastTilesetChange>=e}_isWithinTileRanges(e,r){return r[e.canonical.z]&&e.canonical.x>=r[e.canonical.z].minTileX&&e.canonical.x<=r[e.canonical.z].maxTileX&&e.canonical.y>=r[e.canonical.z].minTileY&&e.canonical.y<=r[e.canonical.z].maxTileY}}class xl{constructor(e,r,o){this._meshCache={},this.painter=e,this.sourceCache=new vl(r),this.options=o,this.exaggeration=typeof o.exaggeration=="number"?o.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,r,o,l=u.Z){var d;if(!(r>=0&&r<l&&o>=0&&o<l))return 0;let b=this.getTerrainData(e),E=(d=b.tile)===null||d===void 0?void 0:d.dem;if(!E)return 0;let C=u.cj([],[r/l*u.Z,o/l*u.Z],b.u_terrain_matrix),k=[C[0]*E.dim,C[1]*E.dim],O=Math.floor(k[0]),j=Math.floor(k[1]),B=k[0]-O,H=k[1]-j;return E.get(O,j)*(1-B)*(1-H)+E.get(O+1,j)*B*(1-H)+E.get(O,j+1)*(1-B)*H+E.get(O+1,j+1)*B*H}getElevationForLngLatZoom(e,r){if(!u.ck(r,e.wrap()))return 0;let{tileID:o,mercatorX:l,mercatorY:d}=this._getOverscaledTileIDFromLngLatZoom(e,r);return this.getElevation(o,l%u.Z,d%u.Z,u.Z)}getElevation(e,r,o,l=u.Z){return this.getDEMElevation(e,r,o,l)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){let l=this.painter.context,d=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new yr(l,d,l.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new yr(l,new u.R({width:1,height:1}),l.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ad([])}let r=this.sourceCache.getSourceTile(e,!0);if(r&&r.dem&&(!r.demTexture||r.needsTerrainPrepare)){let l=this.painter.context;r.demTexture=this.painter.getTileTexture(r.dem.stride),r.demTexture?r.demTexture.update(r.dem.getPixels(),{premultiply:!1}):r.demTexture=new yr(l,r.dem.getPixels(),l.gl.RGBA,{premultiply:!1}),r.demTexture.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),r.needsTerrainPrepare=!1}let o=r&&r+r.tileID.key+e.key;if(o&&!this._demMatrixCache[o]){let l=this.sourceCache.sourceCache._source.maxzoom,d=e.canonical.z-r.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=l?d=e.canonical.z-l:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let b=e.canonical.x-(e.canonical.x>>d<<d),E=e.canonical.y-(e.canonical.y>>d<<d),C=u.cl(new Float64Array(16),[1/(u.Z<<d),1/(u.Z<<d),0]);u.L(C,C,[b*u.Z,E*u.Z,0]),this._demMatrixCache[e.key]={matrix:C,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:r&&r.dem&&r.dem.dim||1,u_terrain_matrix:o?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:r&&r.dem&&r.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(r&&r.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:r}}getFramebuffer(e){let r=this.painter,o=r.width/devicePixelRatio,l=r.height/devicePixelRatio;return!this._fbo||this._fbo.width===o&&this._fbo.height===l||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new yr(r.context,{width:o,height:l,data:null},r.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(r.context.gl.NEAREST,r.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new yr(r.context,{width:o,height:l,data:null},r.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(r.context.gl.NEAREST,r.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=r.context.createFramebuffer(o,l,!0,!1),this._fbo.depthAttachment.set(r.context.createRenderbuffer(r.context.gl.DEPTH_COMPONENT16,o,l))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let r=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let d=0,b=0;d<this._coordsTextureSize;d++)for(let E=0;E<this._coordsTextureSize;E++,b+=4)r[b+0]=255&E,r[b+1]=255&d,r[b+2]=E>>8<<4|d>>8,r[b+3]=0;let o=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(r.buffer)),l=new yr(e,o,e.gl.RGBA,{premultiply:!1});return l.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=l,l}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);let r=new Uint8Array(4),o=this.painter.context,l=o.gl,d=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),b=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);o.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),l.readPixels(d,E-b-1,1,1,l.RGBA,l.UNSIGNED_BYTE,r),o.bindFramebuffer.set(null);let C=r[0]+(r[2]>>4<<8),k=r[1]+((15&r[2])<<8),O=this.coordsIndex[255-r[3]],j=O&&this.sourceCache.getTileByID(O);if(!j)return null;let B=this._coordsTextureSize,H=(1<<j.tileID.canonical.z)*B;return new u.$((j.tileID.canonical.x*B+C)/H+j.tileID.wrap,(j.tileID.canonical.y*B+k)/H,this.getElevation(j.tileID,C,k,B))}depthAtPoint(e){let r=new Uint8Array(4),o=this.painter.context,l=o.gl;return o.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),l.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,l.RGBA,l.UNSIGNED_BYTE,r),o.bindFramebuffer.set(null),(r[0]/16777216+r[1]/65536+r[2]/256+r[3])/256}getTerrainMesh(e){var r;let o=((r=this.painter.style.projection)===null||r===void 0?void 0:r.transitionState)>0,l=o&&e.canonical.y===0,d=o&&e.canonical.y===(1<<e.canonical.z)-1,b=`m_${l?"n":""}_${d?"s":""}`;if(this._meshCache[b])return this._meshCache[b];let E=this.painter.context,C=new u.cm,k=new u.aK,O=this.meshSize,j=u.Z/O,B=O*O;for(let we=0;we<=O;we++)for(let Je=0;Je<=O;Je++)C.emplaceBack(Je*j,we*j,0);for(let we=0;we<B;we+=O+1)for(let Je=0;Je<O;Je++)k.emplaceBack(Je+we,O+Je+we+1,O+Je+we+2),k.emplaceBack(Je+we,O+Je+we+2,Je+we+1);let H=C.length,X=H+(O+1),le=(O+1)*O,oe=l?u.b9:0,ce=l?0:1,fe=d?u.ba:u.Z,xe=d?0:1;for(let we=0;we<=O;we++)C.emplaceBack(we*j,oe,ce);for(let we=0;we<=O;we++)C.emplaceBack(we*j,fe,xe);for(let we=0;we<O;we++)k.emplaceBack(le+we,X+we,X+we+1),k.emplaceBack(le+we,X+we+1,le+we+1),k.emplaceBack(0+we,H+we+1,H+we),k.emplaceBack(0+we,0+we+1,H+we+1);let be=C.length,Ee=be+2*(O+1);for(let we of[0,1])for(let Je=0;Je<=O;Je++)for(let Bt of[0,1])C.emplaceBack(we*u.Z,Je*j,Bt);for(let we=0;we<2*O;we+=2)k.emplaceBack(be+we,be+we+1,be+we+3),k.emplaceBack(be+we,be+we+3,be+we+2),k.emplaceBack(Ee+we,Ee+we+3,Ee+we+1),k.emplaceBack(Ee+we,Ee+we+2,Ee+we+3);let Ce=new pn(E.createVertexBuffer(C,vc.members),E.createIndexBuffer(k),u.aJ.simpleSegment(0,0,C.length,k.length));return this._meshCache[b]=Ce,Ce}getMeshFrameDelta(e){return 2*Math.PI*u.bu/Math.pow(2,Math.max(e,0))/5}getMinTileElevationForLngLatZoom(e,r){var o;let{tileID:l}=this._getOverscaledTileIDFromLngLatZoom(e,r);return(o=this.getMinMaxElevation(l).minElevation)!==null&&o!==void 0?o:0}getMinMaxElevation(e){let r=this.getTerrainData(e).tile,o={minElevation:null,maxElevation:null};return r&&r.dem&&(o.minElevation=r.dem.min*this.exaggeration,o.maxElevation=r.dem.max*this.exaggeration),o}_getOverscaledTileIDFromLngLatZoom(e,r){let o=u.$.fromLngLat(e.wrap()),l=(1<<r)*u.Z,d=o.x*l,b=o.y*l,E=Math.floor(d/u.Z),C=Math.floor(b/u.Z);return{tileID:new u.Y(r,0,r,E,C),mercatorX:d,mercatorY:b}}}class wl{constructor(e,r,o){this._context=e,this._size=r,this._tileSize=o,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){let r=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),o=new yr(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return o.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),r.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),r.colorAttachment.set(o.texture),{id:e,fbo:r,texture:o,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(r=>e.id!==r),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(let r of this._recentlyUsed)if(!this._objects[r].inUse)return this._objects[r];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(let e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(e=>!e.inUse)===!1}}let ca={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class h1{constructor(e,r){this.painter=e,this.terrain=r,this.pool=new wl(e.context,30,r.sourceCache.tileSize*r.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,r){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter(o=>!e._layers[o].isHidden(r)),this._coordsAscending={};for(let o in e.sourceCaches){this._coordsAscending[o]={};let l=e.sourceCaches[o].getVisibleCoordinates(),d=e.sourceCaches[o].getSource(),b=d instanceof ya?d.terrainTileRanges:null;for(let E of l){let C=this.terrain.sourceCache.getTerrainCoords(E,b);for(let k in C)this._coordsAscending[o][k]||(this._coordsAscending[o][k]=[]),this._coordsAscending[o][k].push(C[k])}}this._coordsAscendingStr={};for(let o of e._order){let l=e._layers[o],d=l.source;if(ca[l.type]&&!this._coordsAscendingStr[d]){this._coordsAscendingStr[d]={};for(let b in this._coordsAscending[d])this._coordsAscendingStr[d][b]=this._coordsAscending[d][b].map(E=>E.key).sort().join()}}for(let o of this._renderableTiles)for(let l in this._coordsAscendingStr){let d=this._coordsAscendingStr[l][o.tileID.key];d&&d!==o.rttCoords[l]&&(o.rtt=[])}}renderLayer(e,r){if(e.isHidden(this.painter.transform.zoom))return!1;let o=Object.assign(Object.assign({},r),{isRenderingToTexture:!0}),l=e.type,d=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(ca[l]&&(this._prevType&&ca[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(e.id),!b))return!0;if(ca[this._prevType]||ca[l]&&b){this._prevType=l;let E=this._stacks.length-1,C=this._stacks[E]||[];for(let k of this._renderableTiles){if(this.pool.isFull()&&(jn(this.painter,this.terrain,this._rttTiles,o),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[E]){let j=this.pool.getObjectForId(k.rtt[E].id);if(j.stamp===k.rtt[E].stamp){this.pool.useObject(j);continue}}let O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),k.rtt[E]={id:O.id,stamp:O.stamp},d.context.bindFramebuffer.set(O.fbo.framebuffer),d.context.clear({color:u.b7.transparent,stencil:0}),d.currentStencilSource=void 0;for(let j=0;j<C.length;j++){let B=d.style._layers[C[j]],H=B.source?this._coordsAscending[B.source][k.tileID.key]:[k.tileID];d.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),d._renderTileClippingMasks(B,H,!0),d.renderLayer(d,d.style.sourceCaches[B.source],B,H,o),B.source&&(k.rttCoords[B.source]=this._coordsAscendingStr[B.source][k.tileID.key])}}return jn(this.painter,this.terrain,this._rttTiles,o),this._rttTiles=[],this.pool.freeAllObjects(),ca[l]}return!1}}let nr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},pr=tt,el={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Po,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},d1={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class U1{constructor(e,r,o=!1){this.mousedown=d=>{this.startMove(d,Ne.mousePos(this.element,d)),Ne.addEventListener(window,"mousemove",this.mousemove),Ne.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=d=>{this.move(d,Ne.mousePos(this.element,d))},this.mouseup=d=>{this._rotatePitchHanlder.dragEnd(d),this.offTemp()},this.touchstart=d=>{d.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ne.touchPos(this.element,d.targetTouches)[0],this.startMove(d,this._startPos),Ne.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),Ne.addEventListener(window,"touchend",this.touchend))},this.touchmove=d=>{d.targetTouches.length!==1?this.reset():(this._lastPos=Ne.touchPos(this.element,d.targetTouches)[0],this.move(d,this._lastPos))},this.touchend=d=>{d.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=r;let l=new os;this._rotatePitchHanlder=new sn({clickTolerance:3,move:(d,b)=>{let E=r.getBoundingClientRect(),C=new u.P((E.bottom-E.top)/2,(E.right-E.left)/2);return{bearingDelta:u.ce(new u.P(d.x,b.y),b,C),pitchDelta:o?-.5*(b.y-d.y):void 0}},moveStateManager:l,enable:!0,assignEvents:()=>{}}),this.map=e,Ne.addEventListener(r,"mousedown",this.mousedown),Ne.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),Ne.addEventListener(r,"touchcancel",this.reset)}startMove(e,r){this._rotatePitchHanlder.dragStart(e,r),Ne.disableDrag()}move(e,r){let o=this.map,{bearingDelta:l,pitchDelta:d}=this._rotatePitchHanlder.dragMove(e,r)||{};l&&o.setBearing(o.getBearing()+l),d&&o.setPitch(o.getPitch()+d)}off(){let e=this.element;Ne.removeEventListener(e,"mousedown",this.mousedown),Ne.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),Ne.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Ne.removeEventListener(window,"touchend",this.touchend),Ne.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){Ne.enableDrag(),Ne.removeEventListener(window,"mousemove",this.mousemove),Ne.removeEventListener(window,"mouseup",this.mouseup),Ne.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Ne.removeEventListener(window,"touchend",this.touchend)}}let Xn;function p1(h,e,r,o=!1){if(o||!r.getCoveringTilesDetailsProvider().allowWorldCopies())return h?.wrap();let l=new u.Q(h.lng,h.lat);if(h=new u.Q(h.lng,h.lat),e){let d=new u.Q(h.lng-360,h.lat),b=new u.Q(h.lng+360,h.lat),E=r.locationToScreenPoint(h).distSqr(e);r.locationToScreenPoint(d).distSqr(e)<E?h=d:r.locationToScreenPoint(b).distSqr(e)<E&&(h=b)}for(;Math.abs(h.lng-r.center.lng)>180;){let d=r.locationToScreenPoint(h);if(d.x>=0&&d.y>=0&&d.x<=r.width&&d.y<=r.height)break;h.lng>r.center.lng?h.lng-=360:h.lng+=360}return h.lng!==l.lng&&r.isPointOnMapSurface(r.locationToScreenPoint(h))?h:l}let Fa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function fo(h,e,r){let o=h.classList;for(let l in Fa)o.remove(`maplibregl-${r}-anchor-${l}`);o.add(`maplibregl-${r}-anchor-${e}`)}class tl extends u.E{constructor(e){if(super(),this._onKeyPress=r=>{let o=r.code,l=r.charCode||r.keyCode;o!=="Space"&&o!=="Enter"&&l!==32&&l!==13||this.togglePopup()},this._onMapClick=r=>{let o=r.originalEvent.target,l=this._element;this._popup&&(o===l||l.contains(o))&&this.togglePopup()},this._update=r=>{if(!this._map)return;let o=this._map.loaded()&&!this._map.isMoving();(r?.type==="terrain"||r?.type==="render"&&!o)&&this._map.once("render",this._update),this._lngLat=p1(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let l="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?l=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(l=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let d="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?d="rotateX(0deg)":this._pitchAlignment==="map"&&(d=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||r&&r.type!=="moveend"||(this._pos=this._pos.round()),Ne.setTransform(this._element,`${Fa[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${d} ${l}`),Vt.frameAsync(new AbortController).then(()=>{this._updateOpacity(r&&r.type==="moveend")}).catch(()=>{})},this._onMove=r=>{if(!this._isDragging){let o=this._clickTolerance||this._map._clickTolerance;this._isDragging=r.point.dist(this._pointerdownPos)>=o}this._isDragging&&(this._pos=r.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.l("dragstart"))),this.fire(new u.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.l("dragend")),this._state="inactive"},this._addDragHandler=r=>{this._element.contains(r.originalEvent.target)&&(r.preventDefault(),this._positionDelta=r.point.sub(this._pos).add(this._offset),this._pointerdownPos=r.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(e?.opacity,e?.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=u.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=Ne.create("div");let r=Ne.createNS("http://www.w3.org/2000/svg","svg"),o=41,l=27;r.setAttributeNS(null,"display","block"),r.setAttributeNS(null,"height",`${o}px`),r.setAttributeNS(null,"width",`${l}px`),r.setAttributeNS(null,"viewBox",`0 0 ${l} ${o}`);let d=Ne.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"stroke","none"),d.setAttributeNS(null,"stroke-width","1"),d.setAttributeNS(null,"fill","none"),d.setAttributeNS(null,"fill-rule","evenodd");let b=Ne.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");let E=Ne.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");let C=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let ce of C){let fe=Ne.createNS("http://www.w3.org/2000/svg","ellipse");fe.setAttributeNS(null,"opacity","0.04"),fe.setAttributeNS(null,"cx","10.5"),fe.setAttributeNS(null,"cy","5.80029008"),fe.setAttributeNS(null,"rx",ce.rx),fe.setAttributeNS(null,"ry",ce.ry),E.appendChild(fe)}let k=Ne.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill",this._color);let O=Ne.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),k.appendChild(O);let j=Ne.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"opacity","0.25"),j.setAttributeNS(null,"fill","#000000");let B=Ne.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),j.appendChild(B);let H=Ne.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(6.0, 7.0)"),H.setAttributeNS(null,"fill","#FFFFFF");let X=Ne.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(8.0, 8.0)");let le=Ne.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");let oe=Ne.createNS("http://www.w3.org/2000/svg","circle");oe.setAttributeNS(null,"fill","#FFFFFF"),oe.setAttributeNS(null,"cx","5.5"),oe.setAttributeNS(null,"cy","5.5"),oe.setAttributeNS(null,"r","5.4999962"),X.appendChild(le),X.appendChild(oe),b.appendChild(E),b.appendChild(k),b.appendChild(j),b.appendChild(H),b.appendChild(X),r.appendChild(b),r.setAttributeNS(null,"height",o*this._scale+"px"),r.setAttributeNS(null,"width",l*this._scale+"px"),this._element.appendChild(r),this._offset=u.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",r=>{r.preventDefault()}),this._element.addEventListener("mousedown",r=>{r.preventDefault()}),fo(this._element,this._anchor,"marker"),e&&e.className)for(let r of e.className.split(" "))this._element.classList.add(r);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),e.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Ne.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=u.Q.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){let l=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[l,-1*(38.1-13.5+l)],"bottom-right":[-l,-1*(38.1-13.5+l)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){let e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var r,o;let l=(r=this._map)===null||r===void 0?void 0:r.terrain,d=this._map.transform.isLocationOccluded(this._lngLat);if(!l||d){let H=d?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==H&&(this._element.style.opacity=H))}if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let b=this._map,E=b.terrain.depthAtPoint(this._pos),C=b.terrain.getElevationForLngLatZoom(this._lngLat,b.transform.tileZoom);if(b.transform.lngLatToCameraDepth(this._lngLat,C)-E<.006)return void(this._element.style.opacity=this._opacity);let k=-this._offset.y/b.transform.pixelsPerMeter,O=Math.sin(b.getPitch()*Math.PI/180)*k,j=b.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),B=b.transform.lngLatToCameraDepth(this._lngLat,C+O)-j>.006;!((o=this._popup)===null||o===void 0)&&o.isOpen()&&B&&this._popup.remove(),this._element.style.opacity=B?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=u.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,r){return(this._opacity===void 0||e===void 0&&r===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),r!==void 0&&(this._opacityWhenCovered=r),this._map&&this._updateOpacity(!0),this}}let bn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},fn=0,Ro=!1,Ba={maxWidth:100,unit:"metric"};function il(h,e,r){let o=r&&r.maxWidth||100,l=h._container.clientHeight/2,d=h._container.clientWidth/2,b=h.unproject([d-o/2,l]),E=h.unproject([d+o/2,l]),C=Math.round(h.project(E).x-h.project(b).x),k=Math.min(o,C,h._container.clientWidth),O=b.distanceTo(E);if(r&&r.unit==="imperial"){let j=3.2808*O;j>5280?rl(e,k,j/5280,h._getUIString("ScaleControl.Miles")):rl(e,k,j,h._getUIString("ScaleControl.Feet"))}else r&&r.unit==="nautical"?rl(e,k,O/1852,h._getUIString("ScaleControl.NauticalMiles")):O>=1e3?rl(e,k,O/1e3,h._getUIString("ScaleControl.Kilometers")):rl(e,k,O,h._getUIString("ScaleControl.Meters"))}function rl(h,e,r,o){let l=function(d){let b=Math.pow(10,`${Math.floor(d)}`.length-1),E=d/b;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(C){let k=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*k)/k}(E),b*E}(r);h.style.width=e*(l/r)+"px",h.innerHTML=`${l}&nbsp;${o}`}let ua={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Vs=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ls(h){if(h){if(typeof h=="number"){let e=Math.round(Math.abs(h)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,h),"top-left":new u.P(e,e),"top-right":new u.P(-e,e),bottom:new u.P(0,-h),"bottom-left":new u.P(e,-e),"bottom-right":new u.P(-e,-e),left:new u.P(h,0),right:new u.P(-h,0)}}if(h instanceof u.P||Array.isArray(h)){let e=u.P.convert(h);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:u.P.convert(h.center||[0,0]),top:u.P.convert(h.top||[0,0]),"top-left":u.P.convert(h["top-left"]||[0,0]),"top-right":u.P.convert(h["top-right"]||[0,0]),bottom:u.P.convert(h.bottom||[0,0]),"bottom-left":u.P.convert(h["bottom-left"]||[0,0]),"bottom-right":u.P.convert(h["bottom-right"]||[0,0]),left:u.P.convert(h.left||[0,0]),right:u.P.convert(h.right||[0,0])}}return ls(new u.P(0,0))}let Us=tt;R.AJAXError=u.cq,R.Event=u.l,R.Evented=u.E,R.LngLat=u.Q,R.MercatorCoordinate=u.$,R.Point=u.P,R.addProtocol=u.cr,R.config=u.a,R.removeProtocol=u.cs,R.AttributionControl=yn,R.BoxZoomHandler=Bs,R.CanvasSource=de,R.CooperativeGesturesHandler=c1,R.DoubleClickZoomHandler=Mo,R.DragPanHandler=yc,R.DragRotateHandler=j1,R.EdgeInsets=nn,R.FullscreenControl=class extends u.E{constructor(h={}){super(),this._onFullscreenChange=()=>{var e;let r=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=r?.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)r=r.shadowRoot.fullscreenElement;r===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,h&&h.container&&(h.container instanceof HTMLElement?this._container=h.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(h){return this._map=h,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ne.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){Ne.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let h=this._fullscreenButton=Ne.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);Ne.create("span","maplibregl-ctrl-icon",h).setAttribute("aria-hidden","true"),h.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let h=this._getTitle();this._fullscreenButton.setAttribute("aria-label",h),this._fullscreenButton.title=h}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},R.GeoJSONSource=No,R.GeolocateControl=class extends u.E{constructor(h){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new u.l("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.l("geolocate",e)),this._finish()}},this._updateCamera=e=>{let r=new u.Q(e.coords.longitude,e.coords.latitude),o=e.coords.accuracy,l=this._map.getBearing(),d=u.e({bearing:l},this.options.fitBoundsOptions),b=on.fromLngLat(r,o);this._map.fitBounds(b,d,{geolocateSource:!0})},this._updateMarker=e=>{if(e){let r=new u.Q(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&Ro)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.l("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=Ne.create("button","maplibregl-ctrl-geolocate",this._container),Ne.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");let r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{let r=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Ne.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new tl({element:this._dotElement}),this._circleElement=Ne.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new tl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",r=>{r.geolocateSource||this._watchState!=="ACTIVE_LOCK"||r.originalEvent&&r.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.l("trackuserlocationend")),this.fire(new u.l("userlocationlostfocus")))})}},this.options=u.e({},bn,h)}onAdd(h){return this._map=h,this._container=Ne.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(e=!1){if(Xn!==void 0&&!e)return Xn;if(window.navigator.permissions===void 0)return Xn=!!window.navigator.geolocation,Xn;try{Xn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Xn=!!window.navigator.geolocation}return Xn})}().then(e=>this._finishSetupUI(e)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Ne.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,fn=0,Ro=!1}_isOutOfMapMaxBounds(h){let e=this._map.getMaxBounds(),r=h.coords;return e&&(r.longitude<e.getWest()||r.longitude>e.getEast()||r.latitude<e.getSouth()||r.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let h=this._map.getBounds(),e=h.getSouthEast(),r=h.getNorthEast(),o=e.distanceTo(r),l=Math.ceil(this._accuracy/(o/this._map._container.clientHeight)*2);this._circleElement.style.width=`${l}px`,this._circleElement.style.height=`${l}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":fn--,Ro=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.l("trackuserlocationstart")),this.fire(new u.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let h;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),fn++,fn>1?(h={maximumAge:6e5,timeout:0},Ro=!0):(h=this.options.positionOptions,Ro=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,h)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},R.GlobeControl=class{constructor(){this._toggleProjection=()=>{var h;let e=(h=this._map.getProjection())===null||h===void 0?void 0:h.type;this._map.setProjection(e!=="mercator"&&e?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var h;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((h=this._map.getProjection())===null||h===void 0?void 0:h.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(h){return this._map=h,this._container=Ne.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=Ne.create("button","maplibregl-ctrl-globe",this._container),Ne.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){Ne.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},R.Hash=Ns,R.ImageSource=ya,R.KeyboardHandler=Ko,R.LngLatBounds=on,R.LogoControl=Ul,R.Map=class extends Vl{constructor(h){var e,r;u.cn.mark(u.co.create);let o=Object.assign(Object.assign(Object.assign({},el),h),{canvasContextAttributes:Object.assign(Object.assign({},el.canvasContextAttributes),h.canvasContextAttributes)});if(o.minZoom!=null&&o.maxZoom!=null&&o.minZoom>o.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(o.minPitch!=null&&o.maxPitch!=null&&o.minPitch>o.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(o.minPitch!=null&&o.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(o.maxPitch!=null&&o.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let l=new wn,d=new et;if(o.minZoom!==void 0&&l.setMinZoom(o.minZoom),o.maxZoom!==void 0&&l.setMaxZoom(o.maxZoom),o.minPitch!==void 0&&l.setMinPitch(o.minPitch),o.maxPitch!==void 0&&l.setMaxPitch(o.maxPitch),o.renderWorldCopies!==void 0&&l.setRenderWorldCopies(o.renderWorldCopies),super(l,d,{bearingSnap:o.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new V1,this._controls=[],this._mapId=u.a4(),this._contextLost=E=>{E.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.l("webglcontextlost",{originalEvent:E}))},this._contextRestored=E=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.l("webglcontextrestored",{originalEvent:E}))},this._onMapScroll=E=>{if(E.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=o.interactive,this._maxTileCacheSize=o.maxTileCacheSize,this._maxTileCacheZoomLevels=o.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},o.canvasContextAttributes),this._trackResize=o.trackResize===!0,this._bearingSnap=o.bearingSnap,this._centerClampedToGround=o.centerClampedToGround,this._refreshExpiredTiles=o.refreshExpiredTiles===!0,this._fadeDuration=o.fadeDuration,this._crossSourceCollisions=o.crossSourceCollisions===!0,this._collectResourceTiming=o.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},nr),o.locale),this._clickTolerance=o.clickTolerance,this._overridePixelRatio=o.pixelRatio,this._maxCanvasSize=o.maxCanvasSize,this.transformCameraUpdate=o.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=o.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Nr.addThrottleControl(()=>this.isMoving()),this._requestManager=new Pr(o.transformRequest),typeof o.container=="string"){if(this._container=document.getElementById(o.container),!this._container)throw new Error(`Container '${o.container}' not found.`)}else{if(!(o.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=o.container}if(o.maxBounds&&this.setMaxBounds(o.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let E=!1,C=fs(k=>{this._trackResize&&!this._removed&&(this.resize(k),this.redraw())},50);this._resizeObserver=new ResizeObserver(k=>{E?C(k):E=!0}),this._resizeObserver.observe(this._container)}this.handlers=new bc(this,o),this._hash=o.hash&&new Ns(typeof o.hash=="string"&&o.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:o.center,elevation:o.elevation,zoom:o.zoom,bearing:o.bearing,pitch:o.pitch,roll:o.roll}),o.bounds&&(this.resize(),this.fitBounds(o.bounds,u.e({},o.fitBoundsOptions,{duration:0}))));let b=typeof o.style=="string"||((r=(e=o.style)===null||e===void 0?void 0:e.projection)===null||r===void 0?void 0:r.type)!=="globe";this.resize(null,b),this._localIdeographFontFamily=o.localIdeographFontFamily,this._validateStyle=o.validateStyle,o.style&&this.setStyle(o.style,{localIdeographFontFamily:o.localIdeographFontFamily}),o.attributionControl&&this.addControl(new yn(typeof o.attributionControl=="boolean"?void 0:o.attributionControl)),o.maplibreLogo&&this.addControl(new Ul,o.logoPosition),this.on("style.load",()=>{if(b||this._resizeTransform(),this.transform.unmodified){let E=u.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(E)}}),this.on("data",E=>{this._update(E.dataType==="style"),this.fire(new u.l(`${E.dataType}data`,E))}),this.on("dataloading",E=>{this.fire(new u.l(`${E.dataType}dataloading`,E))}),this.on("dataabort",E=>{this.fire(new u.l("sourcedataabort",E))})}_getMapId(){return this._mapId}addControl(h,e){if(e===void 0&&(e=h.getDefaultPosition?h.getDefaultPosition():"top-right"),!h||!h.onAdd)return this.fire(new u.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let r=h.onAdd(this);this._controls.push(h);let o=this._controlPositions[e];return e.indexOf("bottom")!==-1?o.insertBefore(r,o.firstChild):o.appendChild(r),this}removeControl(h){if(!h||!h.onRemove)return this.fire(new u.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let e=this._controls.indexOf(h);return e>-1&&this._controls.splice(e,1),h.onRemove(this),this}hasControl(h){return this._controls.indexOf(h)>-1}calculateCameraOptionsFromTo(h,e,r,o){return o==null&&this.terrain&&(o=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(h,e,r,o)}resize(h,e=!0){let[r,o]=this._containerDimensions(),l=this._getClampedPixelRatio(r,o);if(this._resizeCanvas(r,o,l),this.painter.resize(r,o,l),this.painter.overLimit()){let b=this.painter.context.gl;this._maxCanvasSize=[b.drawingBufferWidth,b.drawingBufferHeight];let E=this._getClampedPixelRatio(r,o);this._resizeCanvas(r,o,E),this.painter.resize(r,o,E)}this._resizeTransform(e);let d=!this._moving;return d&&(this.stop(),this.fire(new u.l("movestart",h)).fire(new u.l("move",h))),this.fire(new u.l("resize",h)),d&&this.fire(new u.l("moveend",h)),this}_resizeTransform(h=!0){var e;let[r,o]=this._containerDimensions();this.transform.resize(r,o,h),(e=this._requestedCameraState)===null||e===void 0||e.resize(r,o,h)}_getClampedPixelRatio(h,e){let{0:r,1:o}=this._maxCanvasSize,l=this.getPixelRatio(),d=h*l,b=e*l;return Math.min(d>r?r/d:1,b>o?o/b:1)*l}getPixelRatio(){var h;return(h=this._overridePixelRatio)!==null&&h!==void 0?h:devicePixelRatio}setPixelRatio(h){this._overridePixelRatio=h,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(h){return this.transform.setMaxBounds(on.convert(h)),this._update()}setMinZoom(h){if((h=h??-2)>=-2&&h<=this.transform.maxZoom)return this.transform.setMinZoom(h),this._update(),this.getZoom()<h&&this.setZoom(h),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(h){if((h=h??22)>=this.transform.minZoom)return this.transform.setMaxZoom(h),this._update(),this.getZoom()>h&&this.setZoom(h),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(h){if((h=h??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(h>=0&&h<=this.transform.maxPitch)return this.transform.setMinPitch(h),this._update(),this.getPitch()<h&&this.setPitch(h),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(h){if((h=h??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(h>=this.transform.minPitch)return this.transform.setMaxPitch(h),this._update(),this.getPitch()>h&&this.setPitch(h),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(h){return this.transform.setRenderWorldCopies(h),this._update()}project(h){return this.transform.locationToScreenPoint(u.Q.convert(h),this.style&&this.terrain)}unproject(h){return this.transform.screenPointToLocation(u.P.convert(h),this.terrain)}isMoving(){var h;return this._moving||((h=this.handlers)===null||h===void 0?void 0:h.isMoving())}isZooming(){var h;return this._zooming||((h=this.handlers)===null||h===void 0?void 0:h.isZooming())}isRotating(){var h;return this._rotating||((h=this.handlers)===null||h===void 0?void 0:h.isRotating())}_createDelegatedListener(h,e,r){if(h==="mouseenter"||h==="mouseover"){let o=!1;return{layers:e,listener:r,delegates:{mousemove:d=>{let b=e.filter(C=>this.getLayer(C)),E=b.length!==0?this.queryRenderedFeatures(d.point,{layers:b}):[];E.length?o||(o=!0,r.call(this,new Kr(h,this,d.originalEvent,{features:E}))):o=!1},mouseout:()=>{o=!1}}}}if(h==="mouseleave"||h==="mouseout"){let o=!1;return{layers:e,listener:r,delegates:{mousemove:b=>{let E=e.filter(C=>this.getLayer(C));(E.length!==0?this.queryRenderedFeatures(b.point,{layers:E}):[]).length?o=!0:o&&(o=!1,r.call(this,new Kr(h,this,b.originalEvent)))},mouseout:b=>{o&&(o=!1,r.call(this,new Kr(h,this,b.originalEvent)))}}}}{let o=l=>{let d=e.filter(E=>this.getLayer(E)),b=d.length!==0?this.queryRenderedFeatures(l.point,{layers:d}):[];b.length&&(l.features=b,r.call(this,l),delete l.features)};return{layers:e,listener:r,delegates:{[h]:o}}}}_saveDelegatedListener(h,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[h]=this._delegatedListeners[h]||[],this._delegatedListeners[h].push(e)}_removeDelegatedListener(h,e,r){if(!this._delegatedListeners||!this._delegatedListeners[h])return;let o=this._delegatedListeners[h];for(let l=0;l<o.length;l++){let d=o[l];if(d.listener===r&&d.layers.length===e.length&&d.layers.every(b=>e.includes(b))){for(let b in d.delegates)this.off(b,d.delegates[b]);return void o.splice(l,1)}}}on(h,e,r){if(r===void 0)return super.on(h,e);let o=typeof e=="string"?[e]:e,l=this._createDelegatedListener(h,o,r);this._saveDelegatedListener(h,l);for(let d in l.delegates)this.on(d,l.delegates[d]);return{unsubscribe:()=>{this._removeDelegatedListener(h,o,r)}}}once(h,e,r){if(r===void 0)return super.once(h,e);let o=typeof e=="string"?[e]:e,l=this._createDelegatedListener(h,o,r);for(let d in l.delegates){let b=l.delegates[d];l.delegates[d]=(...E)=>{this._removeDelegatedListener(h,o,r),b(...E)}}this._saveDelegatedListener(h,l);for(let d in l.delegates)this.once(d,l.delegates[d]);return this}off(h,e,r){return r===void 0?super.off(h,e):(this._removeDelegatedListener(h,typeof e=="string"?[e]:e,r),this)}queryRenderedFeatures(h,e){if(!this.style)return[];let r,o=h instanceof u.P||Array.isArray(h),l=o?h:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(o?{}:h)||{},l instanceof u.P||typeof l[0]=="number")r=[u.P.convert(l)];else{let d=u.P.convert(l[0]),b=u.P.convert(l[1]);r=[d,new u.P(b.x,d.y),b,new u.P(d.x,b.y),d]}return this.style.queryRenderedFeatures(r,e,this.transform)}querySourceFeatures(h,e){return this.style.querySourceFeatures(h,e)}setStyle(h,e){return(e=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&h?(this._diffStyle(h,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(h,e))}setTransformRequest(h){return this._requestManager.setTransformRequest(h),this}_getUIString(h){let e=this._locale[h];if(e==null)throw new Error(`Missing UI string '${h}'`);return e}_updateStyle(h,e){var r,o;if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(h,e));let l=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!h)),h?(this.style=new xt(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof h=="string"?this.style.loadURL(h,e,l):this.style.loadJSON(h,e,l),this):((o=(r=this.style)===null||r===void 0?void 0:r.projection)===null||o===void 0||o.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new xt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(h,e){if(typeof h=="string"){let r=this._requestManager.transformRequest(h,"Style");u.j(r,new AbortController).then(o=>{this._updateDiff(o.data,e)}).catch(o=>{o&&this.fire(new u.k(o))})}else typeof h=="object"&&this._updateDiff(h,e)}_updateDiff(h,e){try{this.style.setState(h,e)&&this._update(!0)}catch(r){u.w(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(h,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(h,e){return this._lazyInitEmptyStyle(),this.style.addSource(h,e),this._update(!0)}isSourceLoaded(h){let e=this.style&&this.style.sourceCaches[h];if(e!==void 0)return e.loaded();this.fire(new u.k(new Error(`There is no source with ID '${h}'`)))}setTerrain(h){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),h){let e=this.style.sourceCaches[h.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${h.source}`);this.terrain===null&&e.reload();for(let r in this.style._layers){let o=this.style._layers[r];o.type==="hillshade"&&o.source===h.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new xl(this.painter,e,h),this.painter.renderToTexture=new h1(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=r=>{var o;r.dataType==="style"?this.terrain.sourceCache.freeRtt():r.dataType==="source"&&r.tile&&(r.sourceId!==h.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((o=r.source)===null||o===void 0?void 0:o.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(r.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new u.l("terrain",{terrain:h})),this}getTerrain(){var h,e;return(e=(h=this.terrain)===null||h===void 0?void 0:h.options)!==null&&e!==void 0?e:null}areTilesLoaded(){let h=this.style&&this.style.sourceCaches;for(let e in h){let r=h[e]._tiles;for(let o in r){let l=r[o];if(l.state!=="loaded"&&l.state!=="errored")return!1}}return!0}removeSource(h){return this.style.removeSource(h),this._update(!0)}getSource(h){return this.style.getSource(h)}setSourceTileLodParams(h,e,r){if(r){let o=this.getSource(r);if(!o)throw new Error(`There is no source with ID "${r}", cannot set LOD parameters`);o.calculateTileZoom=Se(Math.max(1,h),Math.max(1,e))}else for(let o in this.style.sourceCaches)this.style.sourceCaches[o].getSource().calculateTileZoom=Se(Math.max(1,h),Math.max(1,e));return this._update(!0),this}refreshTiles(h,e){let r=this.style.sourceCaches[h];if(!r)throw new Error(`There is no source cache with ID "${h}", cannot refresh tile`);e===void 0?r.reload():r.refreshTiles(e.map(o=>new u.a1(o.z,o.x,o.y)))}addImage(h,e,r={}){let{pixelRatio:o=1,sdf:l=!1,stretchX:d,stretchY:b,content:E,textFitWidth:C,textFitHeight:k}=r;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||u.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:O,height:j,data:B}=e,H=e;return this.style.addImage(h,{data:new u.R({width:O,height:j},new Uint8Array(B)),pixelRatio:o,stretchX:d,stretchY:b,content:E,textFitWidth:C,textFitHeight:k,sdf:l,version:0,userImage:H}),H.onAdd&&H.onAdd(this,h),this}}{let{width:O,height:j,data:B}=Vt.getImageData(e);this.style.addImage(h,{data:new u.R({width:O,height:j},B),pixelRatio:o,stretchX:d,stretchY:b,content:E,textFitWidth:C,textFitHeight:k,sdf:l,version:0})}}updateImage(h,e){let r=this.style.getImage(h);if(!r)return this.fire(new u.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let o=e instanceof HTMLImageElement||u.b(e)?Vt.getImageData(e):e,{width:l,height:d,data:b}=o;if(l===void 0||d===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(l!==r.data.width||d!==r.data.height)return this.fire(new u.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let E=!(e instanceof HTMLImageElement||u.b(e));return r.data.replace(b,E),this.style.updateImage(h,r),this}getImage(h){return this.style.getImage(h)}hasImage(h){return h?!!this.style.getImage(h):(this.fire(new u.k(new Error("Missing required image id"))),!1)}removeImage(h){this.style.removeImage(h)}loadImage(h){return Nr.getImage(this._requestManager.transformRequest(h,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(h,e){return this._lazyInitEmptyStyle(),this.style.addLayer(h,e),this._update(!0)}moveLayer(h,e){return this.style.moveLayer(h,e),this._update(!0)}removeLayer(h){return this.style.removeLayer(h),this._update(!0)}getLayer(h){return this.style.getLayer(h)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(h,e,r){return this.style.setLayerZoomRange(h,e,r),this._update(!0)}setFilter(h,e,r={}){return this.style.setFilter(h,e,r),this._update(!0)}getFilter(h){return this.style.getFilter(h)}setPaintProperty(h,e,r,o={}){return this.style.setPaintProperty(h,e,r,o),this._update(!0)}getPaintProperty(h,e){return this.style.getPaintProperty(h,e)}setLayoutProperty(h,e,r,o={}){return this.style.setLayoutProperty(h,e,r,o),this._update(!0)}getLayoutProperty(h,e){return this.style.getLayoutProperty(h,e)}setGlyphs(h,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(h,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(h,e,r={}){return this._lazyInitEmptyStyle(),this.style.addSprite(h,e,r,o=>{o||this._update(!0)}),this}removeSprite(h){return this._lazyInitEmptyStyle(),this.style.removeSprite(h),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(h,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(h,e,r=>{r||this._update(!0)}),this}setLight(h,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(h,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(h,e={}){return this._lazyInitEmptyStyle(),this.style.setSky(h,e),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(h,e){return this.style.setFeatureState(h,e),this._update()}removeFeatureState(h,e){return this.style.removeFeatureState(h,e),this._update()}getFeatureState(h){return this.style.getFeatureState(h)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let h=0,e=0;return this._container&&(h=this._container.clientWidth||400,e=this._container.clientHeight||300),[h,e]}_setupContainer(){let h=this._container;h.classList.add("maplibregl-map");let e=this._canvasContainer=Ne.create("div","maplibregl-canvas-container",h);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=Ne.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let r=this._containerDimensions(),o=this._getClampedPixelRatio(r[0],r[1]);this._resizeCanvas(r[0],r[1],o);let l=this._controlContainer=Ne.create("div","maplibregl-control-container",h),d=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{d[b]=Ne.create("div",`maplibregl-ctrl-${b} `,l)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(h,e,r){this._canvas.width=Math.floor(r*h),this._canvas.height=Math.floor(r*e),this._canvas.style.width=`${h}px`,this._canvas.style.height=`${e}px`}_setupPainter(){let h=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),e=null;this._canvas.addEventListener("webglcontextcreationerror",o=>{e={requestedAttributes:h},o&&(e.statusMessage=o.statusMessage,e.type=o.type)},{once:!0});let r=null;if(r=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,h):this._canvas.getContext("webgl2",h)||this._canvas.getContext("webgl",h),!r){let o="Failed to initialize WebGL";throw e?(e.message=o,new Error(JSON.stringify(e))):new Error(o)}this.painter=new Os(r,this.transform),bi.testSupport(r)}migrateProjection(h,e){super.migrateProjection(h,e),this.painter.transform=h,this.fire(new u.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(h){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||h,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(h){return this._update(),this._renderTaskQueue.add(h)}_cancelRenderFrame(h){this._renderTaskQueue.remove(h)}_render(h){var e,r,o,l,d;let b=this._idleTriggered?this._fadeDuration:0,E=((e=this.style.projection)===null||e===void 0?void 0:e.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(h),this._removed)return;let C=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let j=this.transform.zoom,B=Vt.now();this.style.zoomHistory.update(j,B);let H=new u.C(j,{now:B,fadeDuration:b,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),X=H.crossFadingFactor();X===1&&X===this._crossFadingFactor||(C=!0,this._crossFadingFactor=X),this.style.update(H)}let k=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0!==E;(o=this.style.projection)===null||o===void 0||o.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((l=this.style.projection)===null||l===void 0?void 0:l.transitionState,(d=this.style.projection)===null||d===void 0?void 0:d.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||k)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,b,this._crossSourceCollisions,k),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:b,showPadding:this.showPadding}),this.fire(new u.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.cn.mark(u.co.load),this.fire(new u.l("load"))),this.style&&(this.style.hasTransitions()||C)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let O=this._sourcesDirty||this._styleDirty||this._placementDirty;return O||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.l("idle")),!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,u.cn.mark(u.co.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var h;this._hash&&this._hash.remove();for(let r of this._controls)r.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Nr.removeThrottleControl(this._imageQueueHandle),(h=this._resizeObserver)===null||h===void 0||h.disconnect();let e=this.painter.context.gl.getExtension("WEBGL_lose_context");e?.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),Ne.remove(this._canvasContainer),Ne.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),u.cn.clearMetrics(),this._removed=!0,this.fire(new u.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,Vt.frame(this._frameRequest,h=>{u.cn.frame(h),this._frameRequest=null;try{this._render(h)}catch(e){if(!u.cp(e)&&!function(r){return r.message===Ji}(e))throw e}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(h){this._showTileBoundaries!==h&&(this._showTileBoundaries=h,this._update())}get showPadding(){return!!this._showPadding}set showPadding(h){this._showPadding!==h&&(this._showPadding=h,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(h){this._showCollisionBoxes!==h&&(this._showCollisionBoxes=h,h?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(h){this._showOverdrawInspector!==h&&(this._showOverdrawInspector=h,this._update())}get repaint(){return!!this._repaint}set repaint(h){this._repaint!==h&&(this._repaint=h,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(h){this._vertices=h,this._update()}get version(){return pr}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(h){return this._lazyInitEmptyStyle(),this.style.setProjection(h),this._update(!0)}},R.MapMouseEvent=Kr,R.MapTouchEvent=rs,R.MapWheelEvent=Fs,R.Marker=tl,R.NavigationControl=class{constructor(h){this._updateZoomButtons=()=>{let e=this._map.getZoom(),r=e===this._map.getMaxZoom(),o=e===this._map.getMinZoom();this._zoomInButton.disabled=r,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",r.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(e,r)=>{let o=this._map._getUIString(`NavigationControl.${r}`);e.title=o,e.setAttribute("aria-label",o)},this.options=u.e({},d1,h),this._container=Ne.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),Ne.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),Ne.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=Ne.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(h){return this._map=h,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new U1(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){Ne.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(h,e){let r=Ne.create("button",h,this._container);return r.type="button",r.addEventListener("click",e),r}},R.Popup=class extends u.E{constructor(h){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&Ne.remove(this._content),this._container&&(Ne.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.l("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=Ne.create("div","maplibregl-popup",this._map.getContainer()),this._tip=Ne.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let b of this.options.className.split(" "))this._container.classList.add(b);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=p1(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!e)return;let r=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationToScreenPoint(this._lngLat));let o=this.options.anchor,l=ls(this.options.offset);if(!o){let b=this._container.offsetWidth,E=this._container.offsetHeight,C;C=r.y+l.bottom.y<E?["top"]:r.y>this._map.transform.height-E?["bottom"]:[],r.x<b/2?C.push("left"):r.x>this._map.transform.width-b/2&&C.push("right"),o=C.length===0?"bottom":C.join("-")}let d=r.add(l[o]);this.options.subpixelPositioning||(d=d.round()),Ne.setTransform(this._container,`${Fa[o]} translate(${d.x}px,${d.y}px)`),fo(this._container,o,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(ua),h)}addTo(h){return this._map&&this.remove(),this._map=h,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(h){return this._lngLat=u.Q.convert(h),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(h){return this.setDOMContent(document.createTextNode(h))}setHTML(h){let e=document.createDocumentFragment(),r=document.createElement("body"),o;for(r.innerHTML=h;o=r.firstChild,o;)e.appendChild(o);return this.setDOMContent(e)}getMaxWidth(){var h;return(h=this._container)===null||h===void 0?void 0:h.style.maxWidth}setMaxWidth(h){return this.options.maxWidth=h,this._update(),this}setDOMContent(h){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Ne.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(h),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(h){return this._container&&this._container.classList.add(h),this}removeClassName(h){return this._container&&this._container.classList.remove(h),this}setOffset(h){return this.options.offset=h,this._update(),this}toggleClassName(h){if(this._container)return this._container.classList.toggle(h)}setSubpixelPositioning(h){this.options.subpixelPositioning=h}_createCloseButton(){this.options.closeButton&&(this._closeButton=Ne.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let h=this._container.querySelector(Vs);h&&h.focus()}},R.RasterDEMTileSource=Yo,R.RasterTileSource=_a,R.ScaleControl=class{constructor(h){this._onMove=()=>{il(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,il(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ba),h)}getDefaultPosition(){return"bottom-left"}onAdd(h){return this._map=h,this._container=Ne.create("div","maplibregl-ctrl maplibregl-ctrl-scale",h.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){Ne.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},R.ScrollZoomHandler=Cr,R.Style=xt,R.TerrainControl=class{constructor(h){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=h}onAdd(h){return this._map=h,this._container=Ne.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Ne.create("button","maplibregl-ctrl-terrain",this._container),Ne.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Ne.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},R.TwoFingersTouchPitchHandler=l1,R.TwoFingersTouchRotateHandler=zi,R.TwoFingersTouchZoomHandler=Gr,R.TwoFingersTouchZoomRotateHandler=jl,R.VectorTileSource=Ha,R.VideoSource=Wa,R.addSourceType=(h,e)=>u._(void 0,void 0,void 0,function*(){if(Ja(h))throw new Error(`A source type called "${h}" already exists.`);((r,o)=>{Xa[r]=o})(h,e)}),R.clearPrewarmedResources=function(){let h=Xs;h&&(h.isPreloaded()&&h.numActive()===1?(h.release(Fr),Xs=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},R.createTileMesh=yt,R.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},R.getRTLTextPluginStatus=function(){return Ya().getRTLTextPluginStatus()},R.getVersion=function(){return Us},R.getWorkerCount=function(){return Ws.workerCount},R.getWorkerUrl=function(){return u.a.WORKER_URL},R.importScriptInWorkers=function(h){return Pa().broadcast("IS",h)},R.prewarm=function(){Ma().acquire(Fr)},R.setMaxParallelImageRequests=function(h){u.a.MAX_PARALLEL_IMAGE_REQUESTS=h},R.setRTLTextPlugin=function(h,e){return Ya().setRTLTextPlugin(h,e)},R.setWorkerCount=function(h){Ws.workerCount=h},R.setWorkerUrl=function(h){u.a.WORKER_URL=h}});var ee=y;return ee})});var Bh={};B3(Bh,{afterMain:()=>ef,afterRead:()=>Yp,afterWrite:()=>nf,applyStyles:()=>mu,arrow:()=>kh,auto:()=>Hu,basePlacements:()=>T1,beforeMain:()=>Kp,beforeRead:()=>Xp,beforeWrite:()=>tf,bottom:()=>ga,clippingParents:()=>V2,computeStyles:()=>_u,createPopper:()=>ih,createPopperBase:()=>pf,createPopperLite:()=>ff,detectOverflow:()=>To,end:()=>rc,eventListeners:()=>yu,flip:()=>Nh,hide:()=>zh,left:()=>Ms,main:()=>Qp,modifierPhases:()=>q2,offset:()=>$h,placements:()=>Xu,popper:()=>Pc,popperGenerator:()=>$c,popperOffsets:()=>xu,preventOverflow:()=>Fh,read:()=>Jp,reference:()=>U2,right:()=>Hs,start:()=>Ql,top:()=>vs,variationPlacements:()=>Rh,viewport:()=>Wu,write:()=>rf});var vs="top",ga="bottom",Hs="right",Ms="left",Hu="auto",T1=[vs,ga,Hs,Ms],Ql="start",rc="end",V2="clippingParents",Wu="viewport",Pc="popper",U2="reference",Rh=T1.reduce(function(y,w){return y.concat([w+"-"+Ql,w+"-"+rc])},[]),Xu=[].concat(T1,[Hu]).reduce(function(y,w){return y.concat([w,w+"-"+Ql,w+"-"+rc])},[]),Xp="beforeRead",Jp="read",Yp="afterRead",Kp="beforeMain",Qp="main",ef="afterMain",tf="beforeWrite",rf="write",nf="afterWrite",q2=[Xp,Jp,Yp,Kp,Qp,ef,tf,rf,nf];function La(y){return y?(y.nodeName||"").toLowerCase():null}function us(y){if(y==null)return window;if(y.toString()!=="[object Window]"){var w=y.ownerDocument;return w&&w.defaultView||window}return y}function hl(y){var w=us(y).Element;return y instanceof w||y instanceof Element}function Ca(y){var w=us(y).HTMLElement;return y instanceof w||y instanceof HTMLElement}function fu(y){if(typeof ShadowRoot>"u")return!1;var w=us(y).ShadowRoot;return y instanceof w||y instanceof ShadowRoot}function V3(y){var w=y.state;Object.keys(w.elements).forEach(function(N){var ee=w.styles[N]||{},R=w.attributes[N]||{},u=w.elements[N];!Ca(u)||!La(u)||(Object.assign(u.style,ee),Object.keys(R).forEach(function(tt){var Nt=R[tt];Nt===!1?u.removeAttribute(tt):u.setAttribute(tt,Nt===!0?"":Nt)}))})}function U3(y){var w=y.state,N={popper:{position:w.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(w.elements.popper.style,N.popper),w.styles=N,w.elements.arrow&&Object.assign(w.elements.arrow.style,N.arrow),function(){Object.keys(w.elements).forEach(function(ee){var R=w.elements[ee],u=w.attributes[ee]||{},tt=Object.keys(w.styles.hasOwnProperty(ee)?w.styles[ee]:N[ee]),Nt=tt.reduce(function(ai,ci){return ai[ci]="",ai},{});!Ca(R)||!La(R)||(Object.assign(R.style,Nt),Object.keys(u).forEach(function(ai){R.removeAttribute(ai)}))})}}var mu={name:"applyStyles",enabled:!0,phase:"write",fn:V3,effect:U3,requires:["computeStyles"]};function Oa(y){return y.split("-")[0]}var Il=Math.max,Rc=Math.min,S1=Math.round;function gu(){var y=navigator.userAgentData;return y!=null&&y.brands&&Array.isArray(y.brands)?y.brands.map(function(w){return w.brand+"/"+w.version}).join(" "):navigator.userAgent}function Ju(){return!/^((?!chrome|android).)*safari/i.test(gu())}function dl(y,w,N){w===void 0&&(w=!1),N===void 0&&(N=!1);var ee=y.getBoundingClientRect(),R=1,u=1;w&&Ca(y)&&(R=y.offsetWidth>0&&S1(ee.width)/y.offsetWidth||1,u=y.offsetHeight>0&&S1(ee.height)/y.offsetHeight||1);var tt=hl(y)?us(y):window,Nt=tt.visualViewport,ai=!Ju()&&N,ci=(ee.left+(ai&&Nt?Nt.offsetLeft:0))/R,Vt=(ee.top+(ai&&Nt?Nt.offsetTop:0))/u,Ne=ee.width/R,bi=ee.height/u;return{width:Ne,height:bi,top:Vt,right:ci+Ne,bottom:Vt+bi,left:ci,x:ci,y:Vt}}function kc(y){var w=dl(y),N=y.offsetWidth,ee=y.offsetHeight;return Math.abs(w.width-N)<=1&&(N=w.width),Math.abs(w.height-ee)<=1&&(ee=w.height),{x:y.offsetLeft,y:y.offsetTop,width:N,height:ee}}function Yu(y,w){var N=w.getRootNode&&w.getRootNode();if(y.contains(w))return!0;if(N&&fu(N)){var ee=w;do{if(ee&&y.isSameNode(ee))return!0;ee=ee.parentNode||ee.host}while(ee)}return!1}function Eo(y){return us(y).getComputedStyle(y)}function G2(y){return["table","td","th"].indexOf(La(y))>=0}function Za(y){return((hl(y)?y.ownerDocument:y.document)||window.document).documentElement}function A1(y){return La(y)==="html"?y:y.assignedSlot||y.parentNode||(fu(y)?y.host:null)||Za(y)}function sf(y){return!Ca(y)||Eo(y).position==="fixed"?null:y.offsetParent}function q3(y){var w=/firefox/i.test(gu()),N=/Trident/i.test(gu());if(N&&Ca(y)){var ee=Eo(y);if(ee.position==="fixed")return null}var R=A1(y);for(fu(R)&&(R=R.host);Ca(R)&&["html","body"].indexOf(La(R))<0;){var u=Eo(R);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||w&&u.willChange==="filter"||w&&u.filter&&u.filter!=="none")return R;R=R.parentNode}return null}function Ml(y){for(var w=us(y),N=sf(y);N&&G2(N)&&Eo(N).position==="static";)N=sf(N);return N&&(La(N)==="html"||La(N)==="body"&&Eo(N).position==="static")?w:N||q3(y)||w}function Dc(y){return["top","bottom"].indexOf(y)>=0?"x":"y"}function Lc(y,w,N){return Il(y,Rc(w,N))}function af(y,w,N){var ee=Lc(y,w,N);return ee>N?N:ee}function Ku(){return{top:0,right:0,bottom:0,left:0}}function Qu(y){return Object.assign({},Ku(),y)}function eh(y,w){return w.reduce(function(N,ee){return N[ee]=y,N},{})}var G3=function(w,N){return w=typeof w=="function"?w(Object.assign({},N.rects,{placement:N.placement})):w,Qu(typeof w!="number"?w:eh(w,T1))};function Z3(y){var w,N=y.state,ee=y.name,R=y.options,u=N.elements.arrow,tt=N.modifiersData.popperOffsets,Nt=Oa(N.placement),ai=Dc(Nt),ci=[Ms,Hs].indexOf(Nt)>=0,Vt=ci?"height":"width";if(!(!u||!tt)){var Ne=G3(R.padding,N),bi=kc(u),gr=ai==="y"?vs:Ms,Hr=ai==="y"?ga:Hs,Ar=N.rects.reference[Vt]+N.rects.reference[ai]-tt[ai]-N.rects.popper[Vt],Mr=tt[ai]-N.rects.reference[ai],en=Ml(u),Nr=en?ai==="y"?en.clientHeight||0:en.clientWidth||0:0,Pr=Ar/2-Mr/2,ur=Ne[gr],zr=Nr-bi[Vt]-Ne[Hr],yr=Nr/2-bi[Vt]/2+Pr,xn=Lc(ur,yr,zr),qn=ai;N.modifiersData[ee]=(w={},w[qn]=xn,w.centerOffset=xn-yr,w)}}function H3(y){var w=y.state,N=y.options,ee=N.element,R=ee===void 0?"[data-popper-arrow]":ee;R!=null&&(typeof R=="string"&&(R=w.elements.popper.querySelector(R),!R)||Yu(w.elements.popper,R)&&(w.elements.arrow=R))}var kh={name:"arrow",enabled:!0,phase:"main",fn:Z3,effect:H3,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function pl(y){return y.split("-")[1]}var W3={top:"auto",right:"auto",bottom:"auto",left:"auto"};function X3(y,w){var N=y.x,ee=y.y,R=w.devicePixelRatio||1;return{x:S1(N*R)/R||0,y:S1(ee*R)/R||0}}function of(y){var w,N=y.popper,ee=y.popperRect,R=y.placement,u=y.variation,tt=y.offsets,Nt=y.position,ai=y.gpuAcceleration,ci=y.adaptive,Vt=y.roundOffsets,Ne=y.isFixed,bi=tt.x,gr=bi===void 0?0:bi,Hr=tt.y,Ar=Hr===void 0?0:Hr,Mr=typeof Vt=="function"?Vt({x:gr,y:Ar}):{x:gr,y:Ar};gr=Mr.x,Ar=Mr.y;var en=tt.hasOwnProperty("x"),Nr=tt.hasOwnProperty("y"),Pr=Ms,ur=vs,zr=window;if(ci){var yr=Ml(N),xn="clientHeight",qn="clientWidth";if(yr===us(N)&&(yr=Za(N),Eo(yr).position!=="static"&&Nt==="absolute"&&(xn="scrollHeight",qn="scrollWidth")),yr=yr,R===vs||(R===Ms||R===Hs)&&u===rc){ur=ga;var $r=Ne&&yr===zr&&zr.visualViewport?zr.visualViewport.height:yr[xn];Ar-=$r-ee.height,Ar*=ai?1:-1}if(R===Ms||(R===vs||R===ga)&&u===rc){Pr=Hs;var rn=Ne&&yr===zr&&zr.visualViewport?zr.visualViewport.width:yr[qn];gr-=rn-ee.width,gr*=ai?1:-1}}var cn=Object.assign({position:Nt},ci&&W3),un=Vt===!0?X3({x:gr,y:Ar},us(N)):{x:gr,y:Ar};if(gr=un.x,Ar=un.y,ai){var Gn;return Object.assign({},cn,(Gn={},Gn[ur]=Nr?"0":"",Gn[Pr]=en?"0":"",Gn.transform=(zr.devicePixelRatio||1)<=1?"translate("+gr+"px, "+Ar+"px)":"translate3d("+gr+"px, "+Ar+"px, 0)",Gn))}return Object.assign({},cn,(w={},w[ur]=Nr?Ar+"px":"",w[Pr]=en?gr+"px":"",w.transform="",w))}function J3(y){var w=y.state,N=y.options,ee=N.gpuAcceleration,R=ee===void 0?!0:ee,u=N.adaptive,tt=u===void 0?!0:u,Nt=N.roundOffsets,ai=Nt===void 0?!0:Nt,ci={placement:Oa(w.placement),variation:pl(w.placement),popper:w.elements.popper,popperRect:w.rects.popper,gpuAcceleration:R,isFixed:w.options.strategy==="fixed"};w.modifiersData.popperOffsets!=null&&(w.styles.popper=Object.assign({},w.styles.popper,of(Object.assign({},ci,{offsets:w.modifiersData.popperOffsets,position:w.options.strategy,adaptive:tt,roundOffsets:ai})))),w.modifiersData.arrow!=null&&(w.styles.arrow=Object.assign({},w.styles.arrow,of(Object.assign({},ci,{offsets:w.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ai})))),w.attributes.popper=Object.assign({},w.attributes.popper,{"data-popper-placement":w.placement})}var _u={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:J3,data:{}};var Dh={passive:!0};function Y3(y){var w=y.state,N=y.instance,ee=y.options,R=ee.scroll,u=R===void 0?!0:R,tt=ee.resize,Nt=tt===void 0?!0:tt,ai=us(w.elements.popper),ci=[].concat(w.scrollParents.reference,w.scrollParents.popper);return u&&ci.forEach(function(Vt){Vt.addEventListener("scroll",N.update,Dh)}),Nt&&ai.addEventListener("resize",N.update,Dh),function(){u&&ci.forEach(function(Vt){Vt.removeEventListener("scroll",N.update,Dh)}),Nt&&ai.removeEventListener("resize",N.update,Dh)}}var yu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Y3,data:{}};var K3={left:"right",right:"left",bottom:"top",top:"bottom"};function bu(y){return y.replace(/left|right|bottom|top/g,function(w){return K3[w]})}var Q3={start:"end",end:"start"};function Lh(y){return y.replace(/start|end/g,function(w){return Q3[w]})}function Oc(y){var w=us(y),N=w.pageXOffset,ee=w.pageYOffset;return{scrollLeft:N,scrollTop:ee}}function Nc(y){return dl(Za(y)).left+Oc(y).scrollLeft}function Z2(y,w){var N=us(y),ee=Za(y),R=N.visualViewport,u=ee.clientWidth,tt=ee.clientHeight,Nt=0,ai=0;if(R){u=R.width,tt=R.height;var ci=Ju();(ci||!ci&&w==="fixed")&&(Nt=R.offsetLeft,ai=R.offsetTop)}return{width:u,height:tt,x:Nt+Nc(y),y:ai}}function H2(y){var w,N=Za(y),ee=Oc(y),R=(w=y.ownerDocument)==null?void 0:w.body,u=Il(N.scrollWidth,N.clientWidth,R?R.scrollWidth:0,R?R.clientWidth:0),tt=Il(N.scrollHeight,N.clientHeight,R?R.scrollHeight:0,R?R.clientHeight:0),Nt=-ee.scrollLeft+Nc(y),ai=-ee.scrollTop;return Eo(R||N).direction==="rtl"&&(Nt+=Il(N.clientWidth,R?R.clientWidth:0)-u),{width:u,height:tt,x:Nt,y:ai}}function zc(y){var w=Eo(y),N=w.overflow,ee=w.overflowX,R=w.overflowY;return/auto|scroll|overlay|hidden/.test(N+R+ee)}function Oh(y){return["html","body","#document"].indexOf(La(y))>=0?y.ownerDocument.body:Ca(y)&&zc(y)?y:Oh(A1(y))}function nc(y,w){var N;w===void 0&&(w=[]);var ee=Oh(y),R=ee===((N=y.ownerDocument)==null?void 0:N.body),u=us(ee),tt=R?[u].concat(u.visualViewport||[],zc(ee)?ee:[]):ee,Nt=w.concat(tt);return R?Nt:Nt.concat(nc(A1(tt)))}function vu(y){return Object.assign({},y,{left:y.x,top:y.y,right:y.x+y.width,bottom:y.y+y.height})}function em(y,w){var N=dl(y,!1,w==="fixed");return N.top=N.top+y.clientTop,N.left=N.left+y.clientLeft,N.bottom=N.top+y.clientHeight,N.right=N.left+y.clientWidth,N.width=y.clientWidth,N.height=y.clientHeight,N.x=N.left,N.y=N.top,N}function lf(y,w,N){return w===Wu?vu(Z2(y,N)):hl(w)?em(w,N):vu(H2(Za(y)))}function tm(y){var w=nc(A1(y)),N=["absolute","fixed"].indexOf(Eo(y).position)>=0,ee=N&&Ca(y)?Ml(y):y;return hl(ee)?w.filter(function(R){return hl(R)&&Yu(R,ee)&&La(R)!=="body"}):[]}function W2(y,w,N,ee){var R=w==="clippingParents"?tm(y):[].concat(w),u=[].concat(R,[N]),tt=u[0],Nt=u.reduce(function(ai,ci){var Vt=lf(y,ci,ee);return ai.top=Il(Vt.top,ai.top),ai.right=Rc(Vt.right,ai.right),ai.bottom=Rc(Vt.bottom,ai.bottom),ai.left=Il(Vt.left,ai.left),ai},lf(y,tt,ee));return Nt.width=Nt.right-Nt.left,Nt.height=Nt.bottom-Nt.top,Nt.x=Nt.left,Nt.y=Nt.top,Nt}function th(y){var w=y.reference,N=y.element,ee=y.placement,R=ee?Oa(ee):null,u=ee?pl(ee):null,tt=w.x+w.width/2-N.width/2,Nt=w.y+w.height/2-N.height/2,ai;switch(R){case vs:ai={x:tt,y:w.y-N.height};break;case ga:ai={x:tt,y:w.y+w.height};break;case Hs:ai={x:w.x+w.width,y:Nt};break;case Ms:ai={x:w.x-N.width,y:Nt};break;default:ai={x:w.x,y:w.y}}var ci=R?Dc(R):null;if(ci!=null){var Vt=ci==="y"?"height":"width";switch(u){case Ql:ai[ci]=ai[ci]-(w[Vt]/2-N[Vt]/2);break;case rc:ai[ci]=ai[ci]+(w[Vt]/2-N[Vt]/2);break;default:}}return ai}function To(y,w){w===void 0&&(w={});var N=w,ee=N.placement,R=ee===void 0?y.placement:ee,u=N.strategy,tt=u===void 0?y.strategy:u,Nt=N.boundary,ai=Nt===void 0?V2:Nt,ci=N.rootBoundary,Vt=ci===void 0?Wu:ci,Ne=N.elementContext,bi=Ne===void 0?Pc:Ne,gr=N.altBoundary,Hr=gr===void 0?!1:gr,Ar=N.padding,Mr=Ar===void 0?0:Ar,en=Qu(typeof Mr!="number"?Mr:eh(Mr,T1)),Nr=bi===Pc?U2:Pc,Pr=y.rects.popper,ur=y.elements[Hr?Nr:bi],zr=W2(hl(ur)?ur:ur.contextElement||Za(y.elements.popper),ai,Vt,tt),yr=dl(y.elements.reference),xn=th({reference:yr,element:Pr,strategy:"absolute",placement:R}),qn=vu(Object.assign({},Pr,xn)),$r=bi===Pc?qn:yr,rn={top:zr.top-$r.top+en.top,bottom:$r.bottom-zr.bottom+en.bottom,left:zr.left-$r.left+en.left,right:$r.right-zr.right+en.right},cn=y.modifiersData.offset;if(bi===Pc&&cn){var un=cn[R];Object.keys(rn).forEach(function(Gn){var Ia=[Hs,ga].indexOf(Gn)>=0?1:-1,Na=[vs,ga].indexOf(Gn)>=0?"y":"x";rn[Gn]+=un[Na]*Ia})}return rn}function X2(y,w){w===void 0&&(w={});var N=w,ee=N.placement,R=N.boundary,u=N.rootBoundary,tt=N.padding,Nt=N.flipVariations,ai=N.allowedAutoPlacements,ci=ai===void 0?Xu:ai,Vt=pl(ee),Ne=Vt?Nt?Rh:Rh.filter(function(Hr){return pl(Hr)===Vt}):T1,bi=Ne.filter(function(Hr){return ci.indexOf(Hr)>=0});bi.length===0&&(bi=Ne);var gr=bi.reduce(function(Hr,Ar){return Hr[Ar]=To(y,{placement:Ar,boundary:R,rootBoundary:u,padding:tt})[Oa(Ar)],Hr},{});return Object.keys(gr).sort(function(Hr,Ar){return gr[Hr]-gr[Ar]})}function im(y){if(Oa(y)===Hu)return[];var w=bu(y);return[Lh(y),w,Lh(w)]}function rm(y){var w=y.state,N=y.options,ee=y.name;if(!w.modifiersData[ee]._skip){for(var R=N.mainAxis,u=R===void 0?!0:R,tt=N.altAxis,Nt=tt===void 0?!0:tt,ai=N.fallbackPlacements,ci=N.padding,Vt=N.boundary,Ne=N.rootBoundary,bi=N.altBoundary,gr=N.flipVariations,Hr=gr===void 0?!0:gr,Ar=N.allowedAutoPlacements,Mr=w.options.placement,en=Oa(Mr),Nr=en===Mr,Pr=ai||(Nr||!Hr?[bu(Mr)]:im(Mr)),ur=[Mr].concat(Pr).reduce(function(Ma,Hn){return Ma.concat(Oa(Hn)===Hu?X2(w,{placement:Hn,boundary:Vt,rootBoundary:Ne,padding:ci,flipVariations:Hr,allowedAutoPlacements:Ar}):Hn)},[]),zr=w.rects.reference,yr=w.rects.popper,xn=new Map,qn=!0,$r=ur[0],rn=0;rn<ur.length;rn++){var cn=ur[rn],un=Oa(cn),Gn=pl(cn)===Ql,Ia=[vs,ga].indexOf(un)>=0,Na=Ia?"width":"height",Er=To(w,{placement:cn,boundary:Vt,rootBoundary:Ne,altBoundary:bi,padding:ci}),An=Ia?Gn?Hs:Ms:Gn?ga:vs;zr[Na]>yr[Na]&&(An=bu(An));var Ps=bu(An),Fr=[];if(u&&Fr.push(Er[un]<=0),Nt&&Fr.push(Er[An]<=0,Er[Ps]<=0),Fr.every(function(Ma){return Ma})){$r=cn,qn=!1;break}xn.set(cn,Fr)}if(qn)for(var Ws=Hr?3:1,Jo=function(Hn){var Pa=ur.find(function(oo){var Rs=xn.get(oo);if(Rs)return Rs.slice(0,Hn).every(function(xs){return xs})});if(Pa)return $r=Pa,"break"},Xs=Ws;Xs>0;Xs--){var Zn=Jo(Xs);if(Zn==="break")break}w.placement!==$r&&(w.modifiersData[ee]._skip=!0,w.placement=$r,w.reset=!0)}}var Nh={name:"flip",enabled:!0,phase:"main",fn:rm,requiresIfExists:["offset"],data:{_skip:!1}};function cf(y,w,N){return N===void 0&&(N={x:0,y:0}),{top:y.top-w.height-N.y,right:y.right-w.width+N.x,bottom:y.bottom-w.height+N.y,left:y.left-w.width-N.x}}function uf(y){return[vs,Hs,ga,Ms].some(function(w){return y[w]>=0})}function nm(y){var w=y.state,N=y.name,ee=w.rects.reference,R=w.rects.popper,u=w.modifiersData.preventOverflow,tt=To(w,{elementContext:"reference"}),Nt=To(w,{altBoundary:!0}),ai=cf(tt,ee),ci=cf(Nt,R,u),Vt=uf(ai),Ne=uf(ci);w.modifiersData[N]={referenceClippingOffsets:ai,popperEscapeOffsets:ci,isReferenceHidden:Vt,hasPopperEscaped:Ne},w.attributes.popper=Object.assign({},w.attributes.popper,{"data-popper-reference-hidden":Vt,"data-popper-escaped":Ne})}var zh={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nm};function sm(y,w,N){var ee=Oa(y),R=[Ms,vs].indexOf(ee)>=0?-1:1,u=typeof N=="function"?N(Object.assign({},w,{placement:y})):N,tt=u[0],Nt=u[1];return tt=tt||0,Nt=(Nt||0)*R,[Ms,Hs].indexOf(ee)>=0?{x:Nt,y:tt}:{x:tt,y:Nt}}function am(y){var w=y.state,N=y.options,ee=y.name,R=N.offset,u=R===void 0?[0,0]:R,tt=Xu.reduce(function(Vt,Ne){return Vt[Ne]=sm(Ne,w.rects,u),Vt},{}),Nt=tt[w.placement],ai=Nt.x,ci=Nt.y;w.modifiersData.popperOffsets!=null&&(w.modifiersData.popperOffsets.x+=ai,w.modifiersData.popperOffsets.y+=ci),w.modifiersData[ee]=tt}var $h={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:am};function om(y){var w=y.state,N=y.name;w.modifiersData[N]=th({reference:w.rects.reference,element:w.rects.popper,strategy:"absolute",placement:w.placement})}var xu={name:"popperOffsets",enabled:!0,phase:"read",fn:om,data:{}};function J2(y){return y==="x"?"y":"x"}function lm(y){var w=y.state,N=y.options,ee=y.name,R=N.mainAxis,u=R===void 0?!0:R,tt=N.altAxis,Nt=tt===void 0?!1:tt,ai=N.boundary,ci=N.rootBoundary,Vt=N.altBoundary,Ne=N.padding,bi=N.tether,gr=bi===void 0?!0:bi,Hr=N.tetherOffset,Ar=Hr===void 0?0:Hr,Mr=To(w,{boundary:ai,rootBoundary:ci,padding:Ne,altBoundary:Vt}),en=Oa(w.placement),Nr=pl(w.placement),Pr=!Nr,ur=Dc(en),zr=J2(ur),yr=w.modifiersData.popperOffsets,xn=w.rects.reference,qn=w.rects.popper,$r=typeof Ar=="function"?Ar(Object.assign({},w.rects,{placement:w.placement})):Ar,rn=typeof $r=="number"?{mainAxis:$r,altAxis:$r}:Object.assign({mainAxis:0,altAxis:0},$r),cn=w.modifiersData.offset?w.modifiersData.offset[w.placement]:null,un={x:0,y:0};if(yr){if(u){var Gn,Ia=ur==="y"?vs:Ms,Na=ur==="y"?ga:Hs,Er=ur==="y"?"height":"width",An=yr[ur],Ps=An+Mr[Ia],Fr=An-Mr[Na],Ws=gr?-qn[Er]/2:0,Jo=Nr===Ql?xn[Er]:qn[Er],Xs=Nr===Ql?-qn[Er]:-xn[Er],Zn=w.elements.arrow,Ma=gr&&Zn?kc(Zn):{width:0,height:0},Hn=w.modifiersData["arrow#persistent"]?w.modifiersData["arrow#persistent"].padding:Ku(),Pa=Hn[Ia],oo=Hn[Na],Rs=Lc(0,xn[Er],Ma[Er]),xs=Pr?xn[Er]/2-Ws-Rs-Pa-rn.mainAxis:Jo-Rs-Pa-rn.mainAxis,Js=Pr?-xn[Er]/2+Ws+Rs+oo+rn.mainAxis:Xs+Rs+oo+rn.mainAxis,hs=w.elements.arrow&&Ml(w.elements.arrow),on=hs?ur==="y"?hs.clientTop||0:hs.clientLeft||0:0,ks=(Gn=cn?.[ur])!=null?Gn:0,Ha=An+xs-ks-on,_a=An+Js-ks,Yo=Lc(gr?Rc(Ps,Ha):Ps,An,gr?Il(Fr,_a):Fr);yr[ur]=Yo,un[ur]=Yo-An}if(Nt){var No,ya=ur==="x"?vs:Ms,Wa=ur==="x"?ga:Hs,de=yr[zr],Xa=zr==="y"?"height":"width",Ja=de+Mr[ya],So=de-Mr[Wa],lo=[vs,Ms].indexOf(en)!==-1,zo=(No=cn?.[zr])!=null?No:0,Ya=lo?Ja:de-xn[Xa]-qn[Xa]-zo+rn.altAxis,Ka=lo?de+xn[Xa]+qn[Xa]-zo-rn.altAxis:So,Ys=gr&&lo?af(Ya,de,Ka):Lc(gr?Ya:Ja,de,gr?Ka:So);yr[zr]=Ys,un[zr]=Ys-de}w.modifiersData[ee]=un}}var Fh={name:"preventOverflow",enabled:!0,phase:"main",fn:lm,requiresIfExists:["offset"]};function Y2(y){return{scrollLeft:y.scrollLeft,scrollTop:y.scrollTop}}function K2(y){return y===us(y)||!Ca(y)?Oc(y):Y2(y)}function cm(y){var w=y.getBoundingClientRect(),N=S1(w.width)/y.offsetWidth||1,ee=S1(w.height)/y.offsetHeight||1;return N!==1||ee!==1}function Q2(y,w,N){N===void 0&&(N=!1);var ee=Ca(w),R=Ca(w)&&cm(w),u=Za(w),tt=dl(y,R,N),Nt={scrollLeft:0,scrollTop:0},ai={x:0,y:0};return(ee||!ee&&!N)&&((La(w)!=="body"||zc(u))&&(Nt=K2(w)),Ca(w)?(ai=dl(w,!0),ai.x+=w.clientLeft,ai.y+=w.clientTop):u&&(ai.x=Nc(u))),{x:tt.left+Nt.scrollLeft-ai.x,y:tt.top+Nt.scrollTop-ai.y,width:tt.width,height:tt.height}}function um(y){var w=new Map,N=new Set,ee=[];y.forEach(function(u){w.set(u.name,u)});function R(u){N.add(u.name);var tt=[].concat(u.requires||[],u.requiresIfExists||[]);tt.forEach(function(Nt){if(!N.has(Nt)){var ai=w.get(Nt);ai&&R(ai)}}),ee.push(u)}return y.forEach(function(u){N.has(u.name)||R(u)}),ee}function ed(y){var w=um(y);return q2.reduce(function(N,ee){return N.concat(w.filter(function(R){return R.phase===ee}))},[])}function td(y){var w;return function(){return w||(w=new Promise(function(N){Promise.resolve().then(function(){w=void 0,N(y())})})),w}}function id(y){var w=y.reduce(function(N,ee){var R=N[ee.name];return N[ee.name]=R?Object.assign({},R,ee,{options:Object.assign({},R.options,ee.options),data:Object.assign({},R.data,ee.data)}):ee,N},{});return Object.keys(w).map(function(N){return w[N]})}var hf={placement:"bottom",modifiers:[],strategy:"absolute"};function df(){for(var y=arguments.length,w=new Array(y),N=0;N<y;N++)w[N]=arguments[N];return!w.some(function(ee){return!(ee&&typeof ee.getBoundingClientRect=="function")})}function $c(y){y===void 0&&(y={});var w=y,N=w.defaultModifiers,ee=N===void 0?[]:N,R=w.defaultOptions,u=R===void 0?hf:R;return function(Nt,ai,ci){ci===void 0&&(ci=u);var Vt={placement:"bottom",orderedModifiers:[],options:Object.assign({},hf,u),modifiersData:{},elements:{reference:Nt,popper:ai},attributes:{},styles:{}},Ne=[],bi=!1,gr={state:Vt,setOptions:function(en){var Nr=typeof en=="function"?en(Vt.options):en;Ar(),Vt.options=Object.assign({},u,Vt.options,Nr),Vt.scrollParents={reference:hl(Nt)?nc(Nt):Nt.contextElement?nc(Nt.contextElement):[],popper:nc(ai)};var Pr=ed(id([].concat(ee,Vt.options.modifiers)));return Vt.orderedModifiers=Pr.filter(function(ur){return ur.enabled}),Hr(),gr.update()},forceUpdate:function(){if(!bi){var en=Vt.elements,Nr=en.reference,Pr=en.popper;if(df(Nr,Pr)){Vt.rects={reference:Q2(Nr,Ml(Pr),Vt.options.strategy==="fixed"),popper:kc(Pr)},Vt.reset=!1,Vt.placement=Vt.options.placement,Vt.orderedModifiers.forEach(function(rn){return Vt.modifiersData[rn.name]=Object.assign({},rn.data)});for(var ur=0;ur<Vt.orderedModifiers.length;ur++){if(Vt.reset===!0){Vt.reset=!1,ur=-1;continue}var zr=Vt.orderedModifiers[ur],yr=zr.fn,xn=zr.options,qn=xn===void 0?{}:xn,$r=zr.name;typeof yr=="function"&&(Vt=yr({state:Vt,options:qn,name:$r,instance:gr})||Vt)}}}},update:td(function(){return new Promise(function(Mr){gr.forceUpdate(),Mr(Vt)})}),destroy:function(){Ar(),bi=!0}};if(!df(Nt,ai))return gr;gr.setOptions(ci).then(function(Mr){!bi&&ci.onFirstUpdate&&ci.onFirstUpdate(Mr)});function Hr(){Vt.orderedModifiers.forEach(function(Mr){var en=Mr.name,Nr=Mr.options,Pr=Nr===void 0?{}:Nr,ur=Mr.effect;if(typeof ur=="function"){var zr=ur({state:Vt,name:en,instance:gr,options:Pr}),yr=function(){};Ne.push(zr||yr)}})}function Ar(){Ne.forEach(function(Mr){return Mr()}),Ne=[]}return gr}}var pf=$c();var hm=[yu,xu,_u,mu],ff=$c({defaultModifiers:hm});var dm=[yu,xu,_u,mu,$h,Nh,Fh,kh,zh],ih=$c({defaultModifiers:dm});var sc=new Map,rd={set(y,w,N){sc.has(y)||sc.set(y,new Map);let ee=sc.get(y);if(!ee.has(w)&&ee.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(ee.keys())[0]}.`);return}ee.set(w,N)},get(y,w){return sc.has(y)&&sc.get(y).get(w)||null},remove(y,w){if(!sc.has(y))return;let N=sc.get(y);N.delete(w),N.size===0&&sc.delete(y)}},pm=1e6,fm=1e3,yd="transitionend",Uf=y=>(y&&window.CSS&&window.CSS.escape&&(y=y.replace(/#([^\s"#']+)/g,(w,N)=>`#${CSS.escape(N)}`)),y),mm=y=>y==null?`${y}`:Object.prototype.toString.call(y).match(/\s([a-z]+)/i)[1].toLowerCase(),gm=y=>{do y+=Math.floor(Math.random()*pm);while(document.getElementById(y));return y},_m=y=>{if(!y)return 0;let{transitionDuration:w,transitionDelay:N}=window.getComputedStyle(y),ee=Number.parseFloat(w),R=Number.parseFloat(N);return!ee&&!R?0:(w=w.split(",")[0],N=N.split(",")[0],(Number.parseFloat(w)+Number.parseFloat(N))*fm)},qf=y=>{y.dispatchEvent(new Event(yd))},C1=y=>!y||typeof y!="object"?!1:(typeof y.jquery<"u"&&(y=y[0]),typeof y.nodeType<"u"),ac=y=>C1(y)?y.jquery?y[0]:y:typeof y=="string"&&y.length>0?document.querySelector(Uf(y)):null,Mu=y=>{if(!C1(y)||y.getClientRects().length===0)return!1;let w=getComputedStyle(y).getPropertyValue("visibility")==="visible",N=y.closest("details:not([open])");if(!N)return w;if(N!==y){let ee=y.closest("summary");if(ee&&ee.parentNode!==N||ee===null)return!1}return w},oc=y=>!y||y.nodeType!==Node.ELEMENT_NODE||y.classList.contains("disabled")?!0:typeof y.disabled<"u"?y.disabled:y.hasAttribute("disabled")&&y.getAttribute("disabled")!=="false",Gf=y=>{if(!document.documentElement.attachShadow)return null;if(typeof y.getRootNode=="function"){let w=y.getRootNode();return w instanceof ShadowRoot?w:null}return y instanceof ShadowRoot?y:y.parentNode?Gf(y.parentNode):null},Xh=()=>{},lh=y=>{y.offsetHeight},Zf=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,nd=[],ym=y=>{document.readyState==="loading"?(nd.length||document.addEventListener("DOMContentLoaded",()=>{for(let w of nd)w()}),nd.push(y)):y()},fl=()=>document.documentElement.dir==="rtl",gl=y=>{ym(()=>{let w=Zf();if(w){let N=y.NAME,ee=w.fn[N];w.fn[N]=y.jQueryInterface,w.fn[N].Constructor=y,w.fn[N].noConflict=()=>(w.fn[N]=ee,y.jQueryInterface)}})},Oo=(y,w=[],N=y)=>typeof y=="function"?y.call(...w):N,Hf=(y,w,N=!0)=>{if(!N){Oo(y);return}let R=_m(w)+5,u=!1,tt=({target:Nt})=>{Nt===w&&(u=!0,w.removeEventListener(yd,tt),Oo(y))};w.addEventListener(yd,tt),setTimeout(()=>{u||qf(w)},R)},Ed=(y,w,N,ee)=>{let R=y.length,u=y.indexOf(w);return u===-1?!N&&ee?y[R-1]:y[0]:(u+=N?1:-1,ee&&(u=(u+R)%R),y[Math.max(0,Math.min(u,R-1))])},bm=/[^.]*(?=\..*)\.|.*/,vm=/\..*/,xm=/::\d+$/,sd={},mf=1,Wf={mouseenter:"mouseover",mouseleave:"mouseout"},wm=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Xf(y,w){return w&&`${w}::${mf++}`||y.uidEvent||mf++}function Jf(y){let w=Xf(y);return y.uidEvent=w,sd[w]=sd[w]||{},sd[w]}function Em(y,w){return function N(ee){return Td(ee,{delegateTarget:y}),N.oneOff&&vi.off(y,ee.type,w),w.apply(y,[ee])}}function Tm(y,w,N){return function ee(R){let u=y.querySelectorAll(w);for(let{target:tt}=R;tt&&tt!==this;tt=tt.parentNode)for(let Nt of u)if(Nt===tt)return Td(R,{delegateTarget:tt}),ee.oneOff&&vi.off(y,R.type,w,N),N.apply(tt,[R])}}function Yf(y,w,N=null){return Object.values(y).find(ee=>ee.callable===w&&ee.delegationSelector===N)}function Kf(y,w,N){let ee=typeof w=="string",R=ee?N:w||N,u=Qf(y);return wm.has(u)||(u=y),[ee,R,u]}function gf(y,w,N,ee,R){if(typeof w!="string"||!y)return;let[u,tt,Nt]=Kf(w,N,ee);w in Wf&&(tt=(Hr=>function(Ar){if(!Ar.relatedTarget||Ar.relatedTarget!==Ar.delegateTarget&&!Ar.delegateTarget.contains(Ar.relatedTarget))return Hr.call(this,Ar)})(tt));let ai=Jf(y),ci=ai[Nt]||(ai[Nt]={}),Vt=Yf(ci,tt,u?N:null);if(Vt){Vt.oneOff=Vt.oneOff&&R;return}let Ne=Xf(tt,w.replace(bm,"")),bi=u?Tm(y,N,tt):Em(y,tt);bi.delegationSelector=u?N:null,bi.callable=tt,bi.oneOff=R,bi.uidEvent=Ne,ci[Ne]=bi,y.addEventListener(Nt,bi,u)}function bd(y,w,N,ee,R){let u=Yf(w[N],ee,R);u&&(y.removeEventListener(N,u,!!R),delete w[N][u.uidEvent])}function Sm(y,w,N,ee){let R=w[N]||{};for(let[u,tt]of Object.entries(R))u.includes(ee)&&bd(y,w,N,tt.callable,tt.delegationSelector)}function Qf(y){return y=y.replace(vm,""),Wf[y]||y}var vi={on(y,w,N,ee){gf(y,w,N,ee,!1)},one(y,w,N,ee){gf(y,w,N,ee,!0)},off(y,w,N,ee){if(typeof w!="string"||!y)return;let[R,u,tt]=Kf(w,N,ee),Nt=tt!==w,ai=Jf(y),ci=ai[tt]||{},Vt=w.startsWith(".");if(typeof u<"u"){if(!Object.keys(ci).length)return;bd(y,ai,tt,u,R?N:null);return}if(Vt)for(let Ne of Object.keys(ai))Sm(y,ai,Ne,w.slice(1));for(let[Ne,bi]of Object.entries(ci)){let gr=Ne.replace(xm,"");(!Nt||w.includes(gr))&&bd(y,ai,tt,bi.callable,bi.delegationSelector)}},trigger(y,w,N){if(typeof w!="string"||!y)return null;let ee=Zf(),R=Qf(w),u=w!==R,tt=null,Nt=!0,ai=!0,ci=!1;u&&ee&&(tt=ee.Event(w,N),ee(y).trigger(tt),Nt=!tt.isPropagationStopped(),ai=!tt.isImmediatePropagationStopped(),ci=tt.isDefaultPrevented());let Vt=Td(new Event(w,{bubbles:Nt,cancelable:!0}),N);return ci&&Vt.preventDefault(),ai&&y.dispatchEvent(Vt),Vt.defaultPrevented&&tt&&tt.preventDefault(),Vt}};function Td(y,w={}){for(let[N,ee]of Object.entries(w))try{y[N]=ee}catch{Object.defineProperty(y,N,{configurable:!0,get(){return ee}})}return y}function _f(y){if(y==="true")return!0;if(y==="false")return!1;if(y===Number(y).toString())return Number(y);if(y===""||y==="null")return null;if(typeof y!="string")return y;try{return JSON.parse(decodeURIComponent(y))}catch{return y}}function ad(y){return y.replace(/[A-Z]/g,w=>`-${w.toLowerCase()}`)}var I1={setDataAttribute(y,w,N){y.setAttribute(`data-bs-${ad(w)}`,N)},removeDataAttribute(y,w){y.removeAttribute(`data-bs-${ad(w)}`)},getDataAttributes(y){if(!y)return{};let w={},N=Object.keys(y.dataset).filter(ee=>ee.startsWith("bs")&&!ee.startsWith("bsConfig"));for(let ee of N){let R=ee.replace(/^bs/,"");R=R.charAt(0).toLowerCase()+R.slice(1),w[R]=_f(y.dataset[ee])}return w},getDataAttribute(y,w){return _f(y.getAttribute(`data-bs-${ad(w)}`))}},jc=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(w){return w=this._mergeConfigObj(w),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}_configAfterMerge(w){return w}_mergeConfigObj(w,N){let ee=C1(N)?I1.getDataAttribute(N,"config"):{};return{...this.constructor.Default,...typeof ee=="object"?ee:{},...C1(N)?I1.getDataAttributes(N):{},...typeof w=="object"?w:{}}}_typeCheckConfig(w,N=this.constructor.DefaultType){for(let[ee,R]of Object.entries(N)){let u=w[ee],tt=C1(u)?"element":mm(u);if(!new RegExp(R).test(tt))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${ee}" provided type "${tt}" but expected type "${R}".`)}}},Am="5.3.6",Xo=class extends jc{constructor(w,N){super(),w=ac(w),w&&(this._element=w,this._config=this._getConfig(N),rd.set(this._element,this.constructor.DATA_KEY,this))}dispose(){rd.remove(this._element,this.constructor.DATA_KEY),vi.off(this._element,this.constructor.EVENT_KEY);for(let w of Object.getOwnPropertyNames(this))this[w]=null}_queueCallback(w,N,ee=!0){Hf(w,N,ee)}_getConfig(w){return w=this._mergeConfigObj(w,this._element),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}static getInstance(w){return rd.get(ac(w),this.DATA_KEY)}static getOrCreateInstance(w,N={}){return this.getInstance(w)||new this(w,typeof N=="object"?N:null)}static get VERSION(){return Am}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(w){return`${w}${this.EVENT_KEY}`}},od=y=>{let w=y.getAttribute("data-bs-target");if(!w||w==="#"){let N=y.getAttribute("href");if(!N||!N.includes("#")&&!N.startsWith("."))return null;N.includes("#")&&!N.startsWith("#")&&(N=`#${N.split("#")[1]}`),w=N&&N!=="#"?N.trim():null}return w?w.split(",").map(N=>Uf(N)).join(","):null},wr={find(y,w=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(w,y))},findOne(y,w=document.documentElement){return Element.prototype.querySelector.call(w,y)},children(y,w){return[].concat(...y.children).filter(N=>N.matches(w))},parents(y,w){let N=[],ee=y.parentNode.closest(w);for(;ee;)N.push(ee),ee=ee.parentNode.closest(w);return N},prev(y,w){let N=y.previousElementSibling;for(;N;){if(N.matches(w))return[N];N=N.previousElementSibling}return[]},next(y,w){let N=y.nextElementSibling;for(;N;){if(N.matches(w))return[N];N=N.nextElementSibling}return[]},focusableChildren(y){let w=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(N=>`${N}:not([tabindex^="-"])`).join(",");return this.find(w,y).filter(N=>!oc(N)&&Mu(N))},getSelectorFromElement(y){let w=od(y);return w&&wr.findOne(w)?w:null},getElementFromSelector(y){let w=od(y);return w?wr.findOne(w):null},getMultipleElementsFromSelector(y){let w=od(y);return w?wr.find(w):[]}},s2=(y,w="hide")=>{let N=`click.dismiss${y.EVENT_KEY}`,ee=y.NAME;vi.on(document,N,`[data-bs-dismiss="${ee}"]`,function(R){if(["A","AREA"].includes(this.tagName)&&R.preventDefault(),oc(this))return;let u=wr.getElementFromSelector(this)||this.closest(`.${ee}`);y.getOrCreateInstance(u)[w]()})},Cm="alert",Im="bs.alert",e0=`.${Im}`,Mm=`close${e0}`,Pm=`closed${e0}`,Rm="fade",km="show",Jh=class y extends Xo{static get NAME(){return Cm}close(){if(vi.trigger(this._element,Mm).defaultPrevented)return;this._element.classList.remove(km);let N=this._element.classList.contains(Rm);this._queueCallback(()=>this._destroyElement(),this._element,N)}_destroyElement(){this._element.remove(),vi.trigger(this._element,Pm),this.dispose()}static jQueryInterface(w){return this.each(function(){let N=y.getOrCreateInstance(this);if(typeof w=="string"){if(N[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);N[w](this)}})}};s2(Jh,"close");gl(Jh);var Dm="button",Lm="bs.button",Om=`.${Lm}`,Nm=".data-api",zm="active",yf='[data-bs-toggle="button"]',$m=`click${Om}${Nm}`,Yh=class y extends Xo{static get NAME(){return Dm}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(zm))}static jQueryInterface(w){return this.each(function(){let N=y.getOrCreateInstance(this);w==="toggle"&&N[w]()})}};vi.on(document,$m,yf,y=>{y.preventDefault();let w=y.target.closest(yf);Yh.getOrCreateInstance(w).toggle()});gl(Yh);var Fm="swipe",Pu=".bs.swipe",Bm=`touchstart${Pu}`,jm=`touchmove${Pu}`,Vm=`touchend${Pu}`,Um=`pointerdown${Pu}`,qm=`pointerup${Pu}`,Gm="touch",Zm="pen",Hm="pointer-event",Wm=40,Xm={endCallback:null,leftCallback:null,rightCallback:null},Jm={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},Kh=class y extends jc{constructor(w,N){super(),this._element=w,!(!w||!y.isSupported())&&(this._config=this._getConfig(N),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Xm}static get DefaultType(){return Jm}static get NAME(){return Fm}dispose(){vi.off(this._element,Pu)}_start(w){if(!this._supportPointerEvents){this._deltaX=w.touches[0].clientX;return}this._eventIsPointerPenTouch(w)&&(this._deltaX=w.clientX)}_end(w){this._eventIsPointerPenTouch(w)&&(this._deltaX=w.clientX-this._deltaX),this._handleSwipe(),Oo(this._config.endCallback)}_move(w){this._deltaX=w.touches&&w.touches.length>1?0:w.touches[0].clientX-this._deltaX}_handleSwipe(){let w=Math.abs(this._deltaX);if(w<=Wm)return;let N=w/this._deltaX;this._deltaX=0,N&&Oo(N>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(vi.on(this._element,Um,w=>this._start(w)),vi.on(this._element,qm,w=>this._end(w)),this._element.classList.add(Hm)):(vi.on(this._element,Bm,w=>this._start(w)),vi.on(this._element,jm,w=>this._move(w)),vi.on(this._element,Vm,w=>this._end(w)))}_eventIsPointerPenTouch(w){return this._supportPointerEvents&&(w.pointerType===Zm||w.pointerType===Gm)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}},Ym="carousel",Km="bs.carousel",uc=`.${Km}`,t0=".data-api",Qm="ArrowLeft",eg="ArrowRight",tg=500,rh="next",wu="prev",Tu="left",Hh="right",ig=`slide${uc}`,ld=`slid${uc}`,rg=`keydown${uc}`,ng=`mouseenter${uc}`,sg=`mouseleave${uc}`,ag=`dragstart${uc}`,og=`load${uc}${t0}`,lg=`click${uc}${t0}`,i0="carousel",jh="active",cg="slide",ug="carousel-item-end",hg="carousel-item-start",dg="carousel-item-next",pg="carousel-item-prev",r0=".active",n0=".carousel-item",fg=r0+n0,mg=".carousel-item img",gg=".carousel-indicators",_g="[data-bs-slide], [data-bs-slide-to]",yg='[data-bs-ride="carousel"]',bg={[Qm]:Hh,[eg]:Tu},vg={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},xg={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},sh=class y extends Xo{constructor(w,N){super(w,N),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=wr.findOne(gg,this._element),this._addEventListeners(),this._config.ride===i0&&this.cycle()}static get Default(){return vg}static get DefaultType(){return xg}static get NAME(){return Ym}next(){this._slide(rh)}nextWhenVisible(){!document.hidden&&Mu(this._element)&&this.next()}prev(){this._slide(wu)}pause(){this._isSliding&&qf(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){vi.one(this._element,ld,()=>this.cycle());return}this.cycle()}}to(w){let N=this._getItems();if(w>N.length-1||w<0)return;if(this._isSliding){vi.one(this._element,ld,()=>this.to(w));return}let ee=this._getItemIndex(this._getActive());if(ee===w)return;let R=w>ee?rh:wu;this._slide(R,N[w])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(w){return w.defaultInterval=w.interval,w}_addEventListeners(){this._config.keyboard&&vi.on(this._element,rg,w=>this._keydown(w)),this._config.pause==="hover"&&(vi.on(this._element,ng,()=>this.pause()),vi.on(this._element,sg,()=>this._maybeEnableCycle())),this._config.touch&&Kh.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let ee of wr.find(mg,this._element))vi.on(ee,ag,R=>R.preventDefault());let N={leftCallback:()=>this._slide(this._directionToOrder(Tu)),rightCallback:()=>this._slide(this._directionToOrder(Hh)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),tg+this._config.interval))}};this._swipeHelper=new Kh(this._element,N)}_keydown(w){if(/input|textarea/i.test(w.target.tagName))return;let N=bg[w.key];N&&(w.preventDefault(),this._slide(this._directionToOrder(N)))}_getItemIndex(w){return this._getItems().indexOf(w)}_setActiveIndicatorElement(w){if(!this._indicatorsElement)return;let N=wr.findOne(r0,this._indicatorsElement);N.classList.remove(jh),N.removeAttribute("aria-current");let ee=wr.findOne(`[data-bs-slide-to="${w}"]`,this._indicatorsElement);ee&&(ee.classList.add(jh),ee.setAttribute("aria-current","true"))}_updateInterval(){let w=this._activeElement||this._getActive();if(!w)return;let N=Number.parseInt(w.getAttribute("data-bs-interval"),10);this._config.interval=N||this._config.defaultInterval}_slide(w,N=null){if(this._isSliding)return;let ee=this._getActive(),R=w===rh,u=N||Ed(this._getItems(),ee,R,this._config.wrap);if(u===ee)return;let tt=this._getItemIndex(u),Nt=gr=>vi.trigger(this._element,gr,{relatedTarget:u,direction:this._orderToDirection(w),from:this._getItemIndex(ee),to:tt});if(Nt(ig).defaultPrevented||!ee||!u)return;let ci=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(tt),this._activeElement=u;let Vt=R?hg:ug,Ne=R?dg:pg;u.classList.add(Ne),lh(u),ee.classList.add(Vt),u.classList.add(Vt);let bi=()=>{u.classList.remove(Vt,Ne),u.classList.add(jh),ee.classList.remove(jh,Ne,Vt),this._isSliding=!1,Nt(ld)};this._queueCallback(bi,ee,this._isAnimated()),ci&&this.cycle()}_isAnimated(){return this._element.classList.contains(cg)}_getActive(){return wr.findOne(fg,this._element)}_getItems(){return wr.find(n0,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(w){return fl()?w===Tu?wu:rh:w===Tu?rh:wu}_orderToDirection(w){return fl()?w===wu?Tu:Hh:w===wu?Hh:Tu}static jQueryInterface(w){return this.each(function(){let N=y.getOrCreateInstance(this,w);if(typeof w=="number"){N.to(w);return}if(typeof w=="string"){if(N[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);N[w]()}})}};vi.on(document,lg,_g,function(y){let w=wr.getElementFromSelector(this);if(!w||!w.classList.contains(i0))return;y.preventDefault();let N=sh.getOrCreateInstance(w),ee=this.getAttribute("data-bs-slide-to");if(ee){N.to(ee),N._maybeEnableCycle();return}if(I1.getDataAttribute(this,"slide")==="next"){N.next(),N._maybeEnableCycle();return}N.prev(),N._maybeEnableCycle()});vi.on(window,og,()=>{let y=wr.find(yg);for(let w of y)sh.getOrCreateInstance(w)});gl(sh);var wg="collapse",Eg="bs.collapse",ch=`.${Eg}`,Tg=".data-api",Sg=`show${ch}`,Ag=`shown${ch}`,Cg=`hide${ch}`,Ig=`hidden${ch}`,Mg=`click${ch}${Tg}`,cd="show",Au="collapse",Vh="collapsing",Pg="collapsed",Rg=`:scope .${Au} .${Au}`,kg="collapse-horizontal",Dg="width",Lg="height",Og=".collapse.show, .collapse.collapsing",vd='[data-bs-toggle="collapse"]',Ng={parent:null,toggle:!0},zg={parent:"(null|element)",toggle:"boolean"},Qh=class y extends Xo{constructor(w,N){super(w,N),this._isTransitioning=!1,this._triggerArray=[];let ee=wr.find(vd);for(let R of ee){let u=wr.getSelectorFromElement(R),tt=wr.find(u).filter(Nt=>Nt===this._element);u!==null&&tt.length&&this._triggerArray.push(R)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ng}static get DefaultType(){return zg}static get NAME(){return wg}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let w=[];if(this._config.parent&&(w=this._getFirstLevelChildren(Og).filter(Nt=>Nt!==this._element).map(Nt=>y.getOrCreateInstance(Nt,{toggle:!1}))),w.length&&w[0]._isTransitioning||vi.trigger(this._element,Sg).defaultPrevented)return;for(let Nt of w)Nt.hide();let ee=this._getDimension();this._element.classList.remove(Au),this._element.classList.add(Vh),this._element.style[ee]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let R=()=>{this._isTransitioning=!1,this._element.classList.remove(Vh),this._element.classList.add(Au,cd),this._element.style[ee]="",vi.trigger(this._element,Ag)},tt=`scroll${ee[0].toUpperCase()+ee.slice(1)}`;this._queueCallback(R,this._element,!0),this._element.style[ee]=`${this._element[tt]}px`}hide(){if(this._isTransitioning||!this._isShown()||vi.trigger(this._element,Cg).defaultPrevented)return;let N=this._getDimension();this._element.style[N]=`${this._element.getBoundingClientRect()[N]}px`,lh(this._element),this._element.classList.add(Vh),this._element.classList.remove(Au,cd);for(let R of this._triggerArray){let u=wr.getElementFromSelector(R);u&&!this._isShown(u)&&this._addAriaAndCollapsedClass([R],!1)}this._isTransitioning=!0;let ee=()=>{this._isTransitioning=!1,this._element.classList.remove(Vh),this._element.classList.add(Au),vi.trigger(this._element,Ig)};this._element.style[N]="",this._queueCallback(ee,this._element,!0)}_isShown(w=this._element){return w.classList.contains(cd)}_configAfterMerge(w){return w.toggle=!!w.toggle,w.parent=ac(w.parent),w}_getDimension(){return this._element.classList.contains(kg)?Dg:Lg}_initializeChildren(){if(!this._config.parent)return;let w=this._getFirstLevelChildren(vd);for(let N of w){let ee=wr.getElementFromSelector(N);ee&&this._addAriaAndCollapsedClass([N],this._isShown(ee))}}_getFirstLevelChildren(w){let N=wr.find(Rg,this._config.parent);return wr.find(w,this._config.parent).filter(ee=>!N.includes(ee))}_addAriaAndCollapsedClass(w,N){if(w.length)for(let ee of w)ee.classList.toggle(Pg,!N),ee.setAttribute("aria-expanded",N)}static jQueryInterface(w){let N={};return typeof w=="string"&&/show|hide/.test(w)&&(N.toggle=!1),this.each(function(){let ee=y.getOrCreateInstance(this,N);if(typeof w=="string"){if(typeof ee[w]>"u")throw new TypeError(`No method named "${w}"`);ee[w]()}})}};vi.on(document,Mg,vd,function(y){(y.target.tagName==="A"||y.delegateTarget&&y.delegateTarget.tagName==="A")&&y.preventDefault();for(let w of wr.getMultipleElementsFromSelector(this))Qh.getOrCreateInstance(w,{toggle:!1}).toggle()});gl(Qh);var bf="dropdown",$g="bs.dropdown",Vc=`.${$g}`,Sd=".data-api",Fg="Escape",vf="Tab",Bg="ArrowUp",xf="ArrowDown",jg=2,Vg=`hide${Vc}`,Ug=`hidden${Vc}`,qg=`show${Vc}`,Gg=`shown${Vc}`,s0=`click${Vc}${Sd}`,a0=`keydown${Vc}${Sd}`,Zg=`keyup${Vc}${Sd}`,Su="show",Hg="dropup",Wg="dropend",Xg="dropstart",Jg="dropup-center",Yg="dropdown-center",Fc='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Kg=`${Fc}.${Su}`,Wh=".dropdown-menu",Qg=".navbar",e4=".navbar-nav",t4=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",i4=fl()?"top-end":"top-start",r4=fl()?"top-start":"top-end",n4=fl()?"bottom-end":"bottom-start",s4=fl()?"bottom-start":"bottom-end",a4=fl()?"left-start":"right-start",o4=fl()?"right-start":"left-start",l4="top",c4="bottom",u4={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},h4={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},lc=class y extends Xo{constructor(w,N){super(w,N),this._popper=null,this._parent=this._element.parentNode,this._menu=wr.next(this._element,Wh)[0]||wr.prev(this._element,Wh)[0]||wr.findOne(Wh,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return u4}static get DefaultType(){return h4}static get NAME(){return bf}toggle(){return this._isShown()?this.hide():this.show()}show(){if(oc(this._element)||this._isShown())return;let w={relatedTarget:this._element};if(!vi.trigger(this._element,qg,w).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(e4))for(let ee of[].concat(...document.body.children))vi.on(ee,"mouseover",Xh);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Su),this._element.classList.add(Su),vi.trigger(this._element,Gg,w)}}hide(){if(oc(this._element)||!this._isShown())return;let w={relatedTarget:this._element};this._completeHide(w)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(w){if(!vi.trigger(this._element,Vg,w).defaultPrevented){if("ontouchstart"in document.documentElement)for(let ee of[].concat(...document.body.children))vi.off(ee,"mouseover",Xh);this._popper&&this._popper.destroy(),this._menu.classList.remove(Su),this._element.classList.remove(Su),this._element.setAttribute("aria-expanded","false"),I1.removeDataAttribute(this._menu,"popper"),vi.trigger(this._element,Ug,w),this._element.focus()}}_getConfig(w){if(w=super._getConfig(w),typeof w.reference=="object"&&!C1(w.reference)&&typeof w.reference.getBoundingClientRect!="function")throw new TypeError(`${bf.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return w}_createPopper(){if(typeof Bh>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let w=this._element;this._config.reference==="parent"?w=this._parent:C1(this._config.reference)?w=ac(this._config.reference):typeof this._config.reference=="object"&&(w=this._config.reference);let N=this._getPopperConfig();this._popper=ih(w,this._menu,N)}_isShown(){return this._menu.classList.contains(Su)}_getPlacement(){let w=this._parent;if(w.classList.contains(Wg))return a4;if(w.classList.contains(Xg))return o4;if(w.classList.contains(Jg))return l4;if(w.classList.contains(Yg))return c4;let N=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return w.classList.contains(Hg)?N?r4:i4:N?s4:n4}_detectNavbar(){return this._element.closest(Qg)!==null}_getOffset(){let{offset:w}=this._config;return typeof w=="string"?w.split(",").map(N=>Number.parseInt(N,10)):typeof w=="function"?N=>w(N,this._element):w}_getPopperConfig(){let w={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(I1.setDataAttribute(this._menu,"popper","static"),w.modifiers=[{name:"applyStyles",enabled:!1}]),{...w,...Oo(this._config.popperConfig,[void 0,w])}}_selectMenuItem({key:w,target:N}){let ee=wr.find(t4,this._menu).filter(R=>Mu(R));ee.length&&Ed(ee,N,w===xf,!ee.includes(N)).focus()}static jQueryInterface(w){return this.each(function(){let N=y.getOrCreateInstance(this,w);if(typeof w=="string"){if(typeof N[w]>"u")throw new TypeError(`No method named "${w}"`);N[w]()}})}static clearMenus(w){if(w.button===jg||w.type==="keyup"&&w.key!==vf)return;let N=wr.find(Kg);for(let ee of N){let R=y.getInstance(ee);if(!R||R._config.autoClose===!1)continue;let u=w.composedPath(),tt=u.includes(R._menu);if(u.includes(R._element)||R._config.autoClose==="inside"&&!tt||R._config.autoClose==="outside"&&tt||R._menu.contains(w.target)&&(w.type==="keyup"&&w.key===vf||/input|select|option|textarea|form/i.test(w.target.tagName)))continue;let Nt={relatedTarget:R._element};w.type==="click"&&(Nt.clickEvent=w),R._completeHide(Nt)}}static dataApiKeydownHandler(w){let N=/input|textarea/i.test(w.target.tagName),ee=w.key===Fg,R=[Bg,xf].includes(w.key);if(!R&&!ee||N&&!ee)return;w.preventDefault();let u=this.matches(Fc)?this:wr.prev(this,Fc)[0]||wr.next(this,Fc)[0]||wr.findOne(Fc,w.delegateTarget.parentNode),tt=y.getOrCreateInstance(u);if(R){w.stopPropagation(),tt.show(),tt._selectMenuItem(w);return}tt._isShown()&&(w.stopPropagation(),tt.hide(),u.focus())}};vi.on(document,a0,Fc,lc.dataApiKeydownHandler);vi.on(document,a0,Wh,lc.dataApiKeydownHandler);vi.on(document,s0,lc.clearMenus);vi.on(document,Zg,lc.clearMenus);vi.on(document,s0,Fc,function(y){y.preventDefault(),lc.getOrCreateInstance(this).toggle()});gl(lc);var o0="backdrop",d4="fade",wf="show",Ef=`mousedown.bs.${o0}`,p4={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},f4={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},e2=class extends jc{constructor(w){super(),this._config=this._getConfig(w),this._isAppended=!1,this._element=null}static get Default(){return p4}static get DefaultType(){return f4}static get NAME(){return o0}show(w){if(!this._config.isVisible){Oo(w);return}this._append();let N=this._getElement();this._config.isAnimated&&lh(N),N.classList.add(wf),this._emulateAnimation(()=>{Oo(w)})}hide(w){if(!this._config.isVisible){Oo(w);return}this._getElement().classList.remove(wf),this._emulateAnimation(()=>{this.dispose(),Oo(w)})}dispose(){this._isAppended&&(vi.off(this._element,Ef),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let w=document.createElement("div");w.className=this._config.className,this._config.isAnimated&&w.classList.add(d4),this._element=w}return this._element}_configAfterMerge(w){return w.rootElement=ac(w.rootElement),w}_append(){if(this._isAppended)return;let w=this._getElement();this._config.rootElement.append(w),vi.on(w,Ef,()=>{Oo(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(w){Hf(w,this._getElement(),this._config.isAnimated)}},m4="focustrap",g4="bs.focustrap",t2=`.${g4}`,_4=`focusin${t2}`,y4=`keydown.tab${t2}`,b4="Tab",v4="forward",Tf="backward",x4={autofocus:!0,trapElement:null},w4={autofocus:"boolean",trapElement:"element"},i2=class extends jc{constructor(w){super(),this._config=this._getConfig(w),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return x4}static get DefaultType(){return w4}static get NAME(){return m4}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),vi.off(document,t2),vi.on(document,_4,w=>this._handleFocusin(w)),vi.on(document,y4,w=>this._handleKeydown(w)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,vi.off(document,t2))}_handleFocusin(w){let{trapElement:N}=this._config;if(w.target===document||w.target===N||N.contains(w.target))return;let ee=wr.focusableChildren(N);ee.length===0?N.focus():this._lastTabNavDirection===Tf?ee[ee.length-1].focus():ee[0].focus()}_handleKeydown(w){w.key===b4&&(this._lastTabNavDirection=w.shiftKey?Tf:v4)}},Sf=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Af=".sticky-top",Uh="padding-right",Cf="margin-right",ah=class{constructor(){this._element=document.body}getWidth(){let w=document.documentElement.clientWidth;return Math.abs(window.innerWidth-w)}hide(){let w=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Uh,N=>N+w),this._setElementAttributes(Sf,Uh,N=>N+w),this._setElementAttributes(Af,Cf,N=>N-w)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Uh),this._resetElementAttributes(Sf,Uh),this._resetElementAttributes(Af,Cf)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(w,N,ee){let R=this.getWidth(),u=tt=>{if(tt!==this._element&&window.innerWidth>tt.clientWidth+R)return;this._saveInitialAttribute(tt,N);let Nt=window.getComputedStyle(tt).getPropertyValue(N);tt.style.setProperty(N,`${ee(Number.parseFloat(Nt))}px`)};this._applyManipulationCallback(w,u)}_saveInitialAttribute(w,N){let ee=w.style.getPropertyValue(N);ee&&I1.setDataAttribute(w,N,ee)}_resetElementAttributes(w,N){let ee=R=>{let u=I1.getDataAttribute(R,N);if(u===null){R.style.removeProperty(N);return}I1.removeDataAttribute(R,N),R.style.setProperty(N,u)};this._applyManipulationCallback(w,ee)}_applyManipulationCallback(w,N){if(C1(w)){N(w);return}for(let ee of wr.find(w,this._element))N(ee)}},E4="modal",T4="bs.modal",ml=`.${T4}`,S4=".data-api",A4="Escape",C4=`hide${ml}`,I4=`hidePrevented${ml}`,l0=`hidden${ml}`,c0=`show${ml}`,M4=`shown${ml}`,P4=`resize${ml}`,R4=`click.dismiss${ml}`,k4=`mousedown.dismiss${ml}`,D4=`keydown.dismiss${ml}`,L4=`click${ml}${S4}`,If="modal-open",O4="fade",Mf="show",ud="modal-static",N4=".modal.show",z4=".modal-dialog",$4=".modal-body",F4='[data-bs-toggle="modal"]',B4={backdrop:!0,focus:!0,keyboard:!0},j4={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},Cu=class y extends Xo{constructor(w,N){super(w,N),this._dialog=wr.findOne(z4,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ah,this._addEventListeners()}static get Default(){return B4}static get DefaultType(){return j4}static get NAME(){return E4}toggle(w){return this._isShown?this.hide():this.show(w)}show(w){this._isShown||this._isTransitioning||vi.trigger(this._element,c0,{relatedTarget:w}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(If),this._adjustDialog(),this._backdrop.show(()=>this._showElement(w)))}hide(){!this._isShown||this._isTransitioning||vi.trigger(this._element,C4).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Mf),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){vi.off(window,ml),vi.off(this._dialog,ml),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new e2({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new i2({trapElement:this._element})}_showElement(w){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let N=wr.findOne($4,this._dialog);N&&(N.scrollTop=0),lh(this._element),this._element.classList.add(Mf);let ee=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,vi.trigger(this._element,M4,{relatedTarget:w})};this._queueCallback(ee,this._dialog,this._isAnimated())}_addEventListeners(){vi.on(this._element,D4,w=>{if(w.key===A4){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),vi.on(window,P4,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),vi.on(this._element,k4,w=>{vi.one(this._element,R4,N=>{if(!(this._element!==w.target||this._element!==N.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(If),this._resetAdjustments(),this._scrollBar.reset(),vi.trigger(this._element,l0)})}_isAnimated(){return this._element.classList.contains(O4)}_triggerBackdropTransition(){if(vi.trigger(this._element,I4).defaultPrevented)return;let N=this._element.scrollHeight>document.documentElement.clientHeight,ee=this._element.style.overflowY;ee==="hidden"||this._element.classList.contains(ud)||(N||(this._element.style.overflowY="hidden"),this._element.classList.add(ud),this._queueCallback(()=>{this._element.classList.remove(ud),this._queueCallback(()=>{this._element.style.overflowY=ee},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let w=this._element.scrollHeight>document.documentElement.clientHeight,N=this._scrollBar.getWidth(),ee=N>0;if(ee&&!w){let R=fl()?"paddingLeft":"paddingRight";this._element.style[R]=`${N}px`}if(!ee&&w){let R=fl()?"paddingRight":"paddingLeft";this._element.style[R]=`${N}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(w,N){return this.each(function(){let ee=y.getOrCreateInstance(this,w);if(typeof w=="string"){if(typeof ee[w]>"u")throw new TypeError(`No method named "${w}"`);ee[w](N)}})}};vi.on(document,L4,F4,function(y){let w=wr.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&y.preventDefault(),vi.one(w,c0,R=>{R.defaultPrevented||vi.one(w,l0,()=>{Mu(this)&&this.focus()})});let N=wr.findOne(N4);N&&Cu.getInstance(N).hide(),Cu.getOrCreateInstance(w).toggle(this)});s2(Cu);gl(Cu);var V4="offcanvas",U4="bs.offcanvas",M1=`.${U4}`,u0=".data-api",q4=`load${M1}${u0}`,G4="Escape",Pf="show",Rf="showing",kf="hiding",Z4="offcanvas-backdrop",h0=".offcanvas.show",H4=`show${M1}`,W4=`shown${M1}`,X4=`hide${M1}`,Df=`hidePrevented${M1}`,d0=`hidden${M1}`,J4=`resize${M1}`,Y4=`click${M1}${u0}`,K4=`keydown.dismiss${M1}`,Q4='[data-bs-toggle="offcanvas"]',e5={backdrop:!0,keyboard:!0,scroll:!1},t5={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"},cc=class y extends Xo{constructor(w,N){super(w,N),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return e5}static get DefaultType(){return t5}static get NAME(){return V4}toggle(w){return this._isShown?this.hide():this.show(w)}show(w){if(this._isShown||vi.trigger(this._element,H4,{relatedTarget:w}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ah().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Rf);let ee=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Pf),this._element.classList.remove(Rf),vi.trigger(this._element,W4,{relatedTarget:w})};this._queueCallback(ee,this._element,!0)}hide(){if(!this._isShown||vi.trigger(this._element,X4).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(kf),this._backdrop.hide();let N=()=>{this._element.classList.remove(Pf,kf),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ah().reset(),vi.trigger(this._element,d0)};this._queueCallback(N,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let w=()=>{if(this._config.backdrop==="static"){vi.trigger(this._element,Df);return}this.hide()},N=!!this._config.backdrop;return new e2({className:Z4,isVisible:N,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:N?w:null})}_initializeFocusTrap(){return new i2({trapElement:this._element})}_addEventListeners(){vi.on(this._element,K4,w=>{if(w.key===G4){if(this._config.keyboard){this.hide();return}vi.trigger(this._element,Df)}})}static jQueryInterface(w){return this.each(function(){let N=y.getOrCreateInstance(this,w);if(typeof w=="string"){if(N[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);N[w](this)}})}};vi.on(document,Y4,Q4,function(y){let w=wr.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&y.preventDefault(),oc(this))return;vi.one(w,d0,()=>{Mu(this)&&this.focus()});let N=wr.findOne(h0);N&&N!==w&&cc.getInstance(N).hide(),cc.getOrCreateInstance(w).toggle(this)});vi.on(window,q4,()=>{for(let y of wr.find(h0))cc.getOrCreateInstance(y).show()});vi.on(window,J4,()=>{for(let y of wr.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(y).position!=="fixed"&&cc.getOrCreateInstance(y).hide()});s2(cc);gl(cc);var i5=/^aria-[\w-]*$/i,p0={"*":["class","dir","id","lang","role",i5],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},r5=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),n5=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,s5=(y,w)=>{let N=y.nodeName.toLowerCase();return w.includes(N)?r5.has(N)?!!n5.test(y.nodeValue):!0:w.filter(ee=>ee instanceof RegExp).some(ee=>ee.test(N))};function a5(y,w,N){if(!y.length)return y;if(N&&typeof N=="function")return N(y);let R=new window.DOMParser().parseFromString(y,"text/html"),u=[].concat(...R.body.querySelectorAll("*"));for(let tt of u){let Nt=tt.nodeName.toLowerCase();if(!Object.keys(w).includes(Nt)){tt.remove();continue}let ai=[].concat(...tt.attributes),ci=[].concat(w["*"]||[],w[Nt]||[]);for(let Vt of ai)s5(Vt,ci)||tt.removeAttribute(Vt.nodeName)}return R.body.innerHTML}var o5="TemplateFactory",l5={allowList:p0,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},c5={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},u5={entry:"(string|element|function|null)",selector:"(string|element)"},xd=class extends jc{constructor(w){super(),this._config=this._getConfig(w)}static get Default(){return l5}static get DefaultType(){return c5}static get NAME(){return o5}getContent(){return Object.values(this._config.content).map(w=>this._resolvePossibleFunction(w)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(w){return this._checkContent(w),this._config.content={...this._config.content,...w},this}toHtml(){let w=document.createElement("div");w.innerHTML=this._maybeSanitize(this._config.template);for(let[R,u]of Object.entries(this._config.content))this._setContent(w,u,R);let N=w.children[0],ee=this._resolvePossibleFunction(this._config.extraClass);return ee&&N.classList.add(...ee.split(" ")),N}_typeCheckConfig(w){super._typeCheckConfig(w),this._checkContent(w.content)}_checkContent(w){for(let[N,ee]of Object.entries(w))super._typeCheckConfig({selector:N,entry:ee},u5)}_setContent(w,N,ee){let R=wr.findOne(ee,w);if(R){if(N=this._resolvePossibleFunction(N),!N){R.remove();return}if(C1(N)){this._putElementInTemplate(ac(N),R);return}if(this._config.html){R.innerHTML=this._maybeSanitize(N);return}R.textContent=N}}_maybeSanitize(w){return this._config.sanitize?a5(w,this._config.allowList,this._config.sanitizeFn):w}_resolvePossibleFunction(w){return Oo(w,[void 0,this])}_putElementInTemplate(w,N){if(this._config.html){N.innerHTML="",N.append(w);return}N.textContent=w.textContent}},h5="tooltip",d5=new Set(["sanitize","allowList","sanitizeFn"]),hd="fade",p5="modal",qh="show",f5=".tooltip-inner",Lf=`.${p5}`,Of="hide.bs.modal",nh="hover",dd="focus",m5="click",g5="manual",_5="hide",y5="hidden",b5="show",v5="shown",x5="inserted",w5="click",E5="focusin",T5="focusout",S5="mouseenter",A5="mouseleave",C5={AUTO:"auto",TOP:"top",RIGHT:fl()?"left":"right",BOTTOM:"bottom",LEFT:fl()?"right":"left"},I5={allowList:p0,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},M5={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},Iu=class y extends Xo{constructor(w,N){if(typeof Bh>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(w,N),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return I5}static get DefaultType(){return M5}static get NAME(){return h5}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),vi.off(this._element.closest(Lf),Of,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let w=vi.trigger(this._element,this.constructor.eventName(b5)),ee=(Gf(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(w.defaultPrevented||!ee)return;this._disposePopper();let R=this._getTipElement();this._element.setAttribute("aria-describedby",R.getAttribute("id"));let{container:u}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(u.append(R),vi.trigger(this._element,this.constructor.eventName(x5))),this._popper=this._createPopper(R),R.classList.add(qh),"ontouchstart"in document.documentElement)for(let Nt of[].concat(...document.body.children))vi.on(Nt,"mouseover",Xh);let tt=()=>{vi.trigger(this._element,this.constructor.eventName(v5)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(tt,this.tip,this._isAnimated())}hide(){if(!this._isShown()||vi.trigger(this._element,this.constructor.eventName(_5)).defaultPrevented)return;if(this._getTipElement().classList.remove(qh),"ontouchstart"in document.documentElement)for(let R of[].concat(...document.body.children))vi.off(R,"mouseover",Xh);this._activeTrigger[m5]=!1,this._activeTrigger[dd]=!1,this._activeTrigger[nh]=!1,this._isHovered=null;let ee=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),vi.trigger(this._element,this.constructor.eventName(y5)))};this._queueCallback(ee,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(w){let N=this._getTemplateFactory(w).toHtml();if(!N)return null;N.classList.remove(hd,qh),N.classList.add(`bs-${this.constructor.NAME}-auto`);let ee=gm(this.constructor.NAME).toString();return N.setAttribute("id",ee),this._isAnimated()&&N.classList.add(hd),N}setContent(w){this._newContent=w,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(w){return this._templateFactory?this._templateFactory.changeContent(w):this._templateFactory=new xd({...this._config,content:w,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[f5]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(w){return this.constructor.getOrCreateInstance(w.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(hd)}_isShown(){return this.tip&&this.tip.classList.contains(qh)}_createPopper(w){let N=Oo(this._config.placement,[this,w,this._element]),ee=C5[N.toUpperCase()];return ih(this._element,w,this._getPopperConfig(ee))}_getOffset(){let{offset:w}=this._config;return typeof w=="string"?w.split(",").map(N=>Number.parseInt(N,10)):typeof w=="function"?N=>w(N,this._element):w}_resolvePossibleFunction(w){return Oo(w,[this._element,this._element])}_getPopperConfig(w){let N={placement:w,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:ee=>{this._getTipElement().setAttribute("data-popper-placement",ee.state.placement)}}]};return{...N,...Oo(this._config.popperConfig,[void 0,N])}}_setListeners(){let w=this._config.trigger.split(" ");for(let N of w)if(N==="click")vi.on(this._element,this.constructor.eventName(w5),this._config.selector,ee=>{this._initializeOnDelegatedTarget(ee).toggle()});else if(N!==g5){let ee=N===nh?this.constructor.eventName(S5):this.constructor.eventName(E5),R=N===nh?this.constructor.eventName(A5):this.constructor.eventName(T5);vi.on(this._element,ee,this._config.selector,u=>{let tt=this._initializeOnDelegatedTarget(u);tt._activeTrigger[u.type==="focusin"?dd:nh]=!0,tt._enter()}),vi.on(this._element,R,this._config.selector,u=>{let tt=this._initializeOnDelegatedTarget(u);tt._activeTrigger[u.type==="focusout"?dd:nh]=tt._element.contains(u.relatedTarget),tt._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},vi.on(this._element.closest(Lf),Of,this._hideModalHandler)}_fixTitle(){let w=this._element.getAttribute("title");w&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",w),this._element.setAttribute("data-bs-original-title",w),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(w,N){clearTimeout(this._timeout),this._timeout=setTimeout(w,N)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(w){let N=I1.getDataAttributes(this._element);for(let ee of Object.keys(N))d5.has(ee)&&delete N[ee];return w={...N,...typeof w=="object"&&w?w:{}},w=this._mergeConfigObj(w),w=this._configAfterMerge(w),this._typeCheckConfig(w),w}_configAfterMerge(w){return w.container=w.container===!1?document.body:ac(w.container),typeof w.delay=="number"&&(w.delay={show:w.delay,hide:w.delay}),typeof w.title=="number"&&(w.title=w.title.toString()),typeof w.content=="number"&&(w.content=w.content.toString()),w}_getDelegateConfig(){let w={};for(let[N,ee]of Object.entries(this._config))this.constructor.Default[N]!==ee&&(w[N]=ee);return w.selector=!1,w.trigger="manual",w}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(w){return this.each(function(){let N=y.getOrCreateInstance(this,w);if(typeof w=="string"){if(typeof N[w]>"u")throw new TypeError(`No method named "${w}"`);N[w]()}})}};gl(Iu);var P5="popover",R5=".popover-header",k5=".popover-body",D5={...Iu.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},L5={...Iu.DefaultType,content:"(null|string|element|function)"},wd=class y extends Iu{static get Default(){return D5}static get DefaultType(){return L5}static get NAME(){return P5}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[R5]:this._getTitle(),[k5]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(w){return this.each(function(){let N=y.getOrCreateInstance(this,w);if(typeof w=="string"){if(typeof N[w]>"u")throw new TypeError(`No method named "${w}"`);N[w]()}})}};gl(wd);var O5="scrollspy",N5="bs.scrollspy",Ad=`.${N5}`,z5=".data-api",$5=`activate${Ad}`,Nf=`click${Ad}`,F5=`load${Ad}${z5}`,B5="dropdown-item",Eu="active",j5='[data-bs-spy="scroll"]',pd="[href]",V5=".nav, .list-group",zf=".nav-link",U5=".nav-item",q5=".list-group-item",G5=`${zf}, ${U5} > ${zf}, ${q5}`,Z5=".dropdown",H5=".dropdown-toggle",W5={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},X5={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},r2=class y extends Xo{constructor(w,N){super(w,N),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return W5}static get DefaultType(){return X5}static get NAME(){return O5}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let w of this._observableSections.values())this._observer.observe(w)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(w){return w.target=ac(w.target)||document.body,w.rootMargin=w.offset?`${w.offset}px 0px -30%`:w.rootMargin,typeof w.threshold=="string"&&(w.threshold=w.threshold.split(",").map(N=>Number.parseFloat(N))),w}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(vi.off(this._config.target,Nf),vi.on(this._config.target,Nf,pd,w=>{let N=this._observableSections.get(w.target.hash);if(N){w.preventDefault();let ee=this._rootElement||window,R=N.offsetTop-this._element.offsetTop;if(ee.scrollTo){ee.scrollTo({top:R,behavior:"smooth"});return}ee.scrollTop=R}}))}_getNewObserver(){let w={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(N=>this._observerCallback(N),w)}_observerCallback(w){let N=tt=>this._targetLinks.get(`#${tt.target.id}`),ee=tt=>{this._previousScrollData.visibleEntryTop=tt.target.offsetTop,this._process(N(tt))},R=(this._rootElement||document.documentElement).scrollTop,u=R>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=R;for(let tt of w){if(!tt.isIntersecting){this._activeTarget=null,this._clearActiveClass(N(tt));continue}let Nt=tt.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(u&&Nt){if(ee(tt),!R)return;continue}!u&&!Nt&&ee(tt)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let w=wr.find(pd,this._config.target);for(let N of w){if(!N.hash||oc(N))continue;let ee=wr.findOne(decodeURI(N.hash),this._element);Mu(ee)&&(this._targetLinks.set(decodeURI(N.hash),N),this._observableSections.set(N.hash,ee))}}_process(w){this._activeTarget!==w&&(this._clearActiveClass(this._config.target),this._activeTarget=w,w.classList.add(Eu),this._activateParents(w),vi.trigger(this._element,$5,{relatedTarget:w}))}_activateParents(w){if(w.classList.contains(B5)){wr.findOne(H5,w.closest(Z5)).classList.add(Eu);return}for(let N of wr.parents(w,V5))for(let ee of wr.prev(N,G5))ee.classList.add(Eu)}_clearActiveClass(w){w.classList.remove(Eu);let N=wr.find(`${pd}.${Eu}`,w);for(let ee of N)ee.classList.remove(Eu)}static jQueryInterface(w){return this.each(function(){let N=y.getOrCreateInstance(this,w);if(typeof w=="string"){if(N[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);N[w]()}})}};vi.on(window,F5,()=>{for(let y of wr.find(j5))r2.getOrCreateInstance(y)});gl(r2);var J5="tab",Y5="bs.tab",Uc=`.${Y5}`,K5=`hide${Uc}`,Q5=`hidden${Uc}`,e_=`show${Uc}`,t_=`shown${Uc}`,i_=`click${Uc}`,r_=`keydown${Uc}`,n_=`load${Uc}`,s_="ArrowLeft",$f="ArrowRight",a_="ArrowUp",Ff="ArrowDown",fd="Home",Bf="End",Bc="active",jf="fade",md="show",o_="dropdown",f0=".dropdown-toggle",l_=".dropdown-menu",gd=`:not(${f0})`,c_='.list-group, .nav, [role="tablist"]',u_=".nav-item, .list-group-item",h_=`.nav-link${gd}, .list-group-item${gd}, [role="tab"]${gd}`,m0='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',_d=`${h_}, ${m0}`,d_=`.${Bc}[data-bs-toggle="tab"], .${Bc}[data-bs-toggle="pill"], .${Bc}[data-bs-toggle="list"]`,oh=class y extends Xo{constructor(w){super(w),this._parent=this._element.closest(c_),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),vi.on(this._element,r_,N=>this._keydown(N)))}static get NAME(){return J5}show(){let w=this._element;if(this._elemIsActive(w))return;let N=this._getActiveElem(),ee=N?vi.trigger(N,K5,{relatedTarget:w}):null;vi.trigger(w,e_,{relatedTarget:N}).defaultPrevented||ee&&ee.defaultPrevented||(this._deactivate(N,w),this._activate(w,N))}_activate(w,N){if(!w)return;w.classList.add(Bc),this._activate(wr.getElementFromSelector(w));let ee=()=>{if(w.getAttribute("role")!=="tab"){w.classList.add(md);return}w.removeAttribute("tabindex"),w.setAttribute("aria-selected",!0),this._toggleDropDown(w,!0),vi.trigger(w,t_,{relatedTarget:N})};this._queueCallback(ee,w,w.classList.contains(jf))}_deactivate(w,N){if(!w)return;w.classList.remove(Bc),w.blur(),this._deactivate(wr.getElementFromSelector(w));let ee=()=>{if(w.getAttribute("role")!=="tab"){w.classList.remove(md);return}w.setAttribute("aria-selected",!1),w.setAttribute("tabindex","-1"),this._toggleDropDown(w,!1),vi.trigger(w,Q5,{relatedTarget:N})};this._queueCallback(ee,w,w.classList.contains(jf))}_keydown(w){if(![s_,$f,a_,Ff,fd,Bf].includes(w.key))return;w.stopPropagation(),w.preventDefault();let N=this._getChildren().filter(R=>!oc(R)),ee;if([fd,Bf].includes(w.key))ee=N[w.key===fd?0:N.length-1];else{let R=[$f,Ff].includes(w.key);ee=Ed(N,w.target,R,!0)}ee&&(ee.focus({preventScroll:!0}),y.getOrCreateInstance(ee).show())}_getChildren(){return wr.find(_d,this._parent)}_getActiveElem(){return this._getChildren().find(w=>this._elemIsActive(w))||null}_setInitialAttributes(w,N){this._setAttributeIfNotExists(w,"role","tablist");for(let ee of N)this._setInitialAttributesOnChild(ee)}_setInitialAttributesOnChild(w){w=this._getInnerElement(w);let N=this._elemIsActive(w),ee=this._getOuterElement(w);w.setAttribute("aria-selected",N),ee!==w&&this._setAttributeIfNotExists(ee,"role","presentation"),N||w.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(w,"role","tab"),this._setInitialAttributesOnTargetPanel(w)}_setInitialAttributesOnTargetPanel(w){let N=wr.getElementFromSelector(w);N&&(this._setAttributeIfNotExists(N,"role","tabpanel"),w.id&&this._setAttributeIfNotExists(N,"aria-labelledby",`${w.id}`))}_toggleDropDown(w,N){let ee=this._getOuterElement(w);if(!ee.classList.contains(o_))return;let R=(u,tt)=>{let Nt=wr.findOne(u,ee);Nt&&Nt.classList.toggle(tt,N)};R(f0,Bc),R(l_,md),ee.setAttribute("aria-expanded",N)}_setAttributeIfNotExists(w,N,ee){w.hasAttribute(N)||w.setAttribute(N,ee)}_elemIsActive(w){return w.classList.contains(Bc)}_getInnerElement(w){return w.matches(_d)?w:wr.findOne(_d,w)}_getOuterElement(w){return w.closest(u_)||w}static jQueryInterface(w){return this.each(function(){let N=y.getOrCreateInstance(this);if(typeof w=="string"){if(N[w]===void 0||w.startsWith("_")||w==="constructor")throw new TypeError(`No method named "${w}"`);N[w]()}})}};vi.on(document,i_,m0,function(y){["A","AREA"].includes(this.tagName)&&y.preventDefault(),!oc(this)&&oh.getOrCreateInstance(this).show()});vi.on(window,n_,()=>{for(let y of wr.find(d_))oh.getOrCreateInstance(y)});gl(oh);var p_="toast",f_="bs.toast",hc=`.${f_}`,m_=`mouseover${hc}`,g_=`mouseout${hc}`,__=`focusin${hc}`,y_=`focusout${hc}`,b_=`hide${hc}`,v_=`hidden${hc}`,x_=`show${hc}`,w_=`shown${hc}`,E_="fade",Vf="hide",Gh="show",Zh="showing",T_={animation:"boolean",autohide:"boolean",delay:"number"},S_={animation:!0,autohide:!0,delay:5e3},n2=class y extends Xo{constructor(w,N){super(w,N),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return S_}static get DefaultType(){return T_}static get NAME(){return p_}show(){if(vi.trigger(this._element,x_).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(E_);let N=()=>{this._element.classList.remove(Zh),vi.trigger(this._element,w_),this._maybeScheduleHide()};this._element.classList.remove(Vf),lh(this._element),this._element.classList.add(Gh,Zh),this._queueCallback(N,this._element,this._config.animation)}hide(){if(!this.isShown()||vi.trigger(this._element,b_).defaultPrevented)return;let N=()=>{this._element.classList.add(Vf),this._element.classList.remove(Zh,Gh),vi.trigger(this._element,v_)};this._element.classList.add(Zh),this._queueCallback(N,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Gh),super.dispose()}isShown(){return this._element.classList.contains(Gh)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(w,N){switch(w.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=N;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=N;break}}if(N){this._clearTimeout();return}let ee=w.relatedTarget;this._element===ee||this._element.contains(ee)||this._maybeScheduleHide()}_setListeners(){vi.on(this._element,m_,w=>this._onInteraction(w,!0)),vi.on(this._element,g_,w=>this._onInteraction(w,!1)),vi.on(this._element,__,w=>this._onInteraction(w,!0)),vi.on(this._element,y_,w=>this._onInteraction(w,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(w){return this.each(function(){let N=y.getOrCreateInstance(this,w);if(typeof w=="string"){if(typeof N[w]>"u")throw new TypeError(`No method named "${w}"`);N[w](this)}})}};s2(n2);gl(n2);var v0=j2(Cd());var b0=j2(_0());var y0=document.createElement("canvas"),A_=y0.getContext("webgl")||y0.getContext("experimental-webgl");if(!A_)throw document.getElementById("webgl-warning").classList.remove("d-none"),new Error("WebGL not supported. Stopping script.");document.getElementById("map").classList.remove("d-none");var wv=new b0.Map({container:"map",style:"https://demotiles.maplibre.org/style.json",center:[80.7,7.9],zoom:6,maxBounds:[[76,5.5],[85,10.2]]});var Pl=j2(Cd());(0,Pl.default)("CREATE TABLE provinces (id INT NOT NULL, name_en STRING, name_si STRING, name_ta STRING)");(0,Pl.default)("INSERT INTO provinces VALUES (1, 'Western', '\u0DB6\u0DC3\u0DCA\u0DB1\u0DCF\u0DC4\u0DD2\u0DBB', '\u0BAE\u0BC7\u0BB2\u0BCD')");(0,Pl.default)("INSERT INTO provinces VALUES (2, 'Central', '\u0DB8\u0DB0\u0DCA\u200D\u0DBA\u0DB8', '\u0BAE\u0BA4\u0BCD\u0BA4\u0BBF\u0BAF')");(0,Pl.default)("INSERT INTO provinces VALUES (3, 'Southern', '\u0DAF\u0D9A\u0DD4\u0DAB\u0DD4', '\u0BA4\u0BC6\u0BA9\u0BCD')");(0,Pl.default)("INSERT INTO provinces VALUES (4, 'North Western', '\u0DC0\u0DBA\u0DB9', '\u0BB5\u0B9F \u0BAE\u0BC7\u0BB2\u0BCD')");(0,Pl.default)("INSERT INTO provinces VALUES (5, 'Sabaragamuwa', '\u0DC3\u0DB6\u0DBB\u0D9C\u0DB8\u0DD4\u0DC0', '\u0B9A\u0BAA\u0BB0\u0B95\u0BAE\u0BC1\u0BB5')");(0,Pl.default)("INSERT INTO provinces VALUES (6, 'Eastern', '\u0DB1\u0DD0\u0D9C\u0DD9\u0DB1\u0DC4\u0DD2\u0DBB', '\u0B95\u0BBF\u0BB4\u0B95\u0BCD\u0B95\u0BC1')");(0,Pl.default)("INSERT INTO provinces VALUES (7, 'Uva', '\u0D8C\u0DC0', '\u0B8A\u0BB5\u0BBE')");(0,Pl.default)("INSERT INTO provinces VALUES (8, 'North Central', '\u0D8B\u0DAD\u0DD4\u0DBB\u0DD4 \u0DB8\u0DD0\u0DAF', '\u0BB5\u0B9F \u0BAE\u0BA4\u0BCD\u0BA4\u0BBF\u0BAF')");(0,Pl.default)("INSERT INTO provinces VALUES (9, 'Northern', '\u0D8B\u0DAD\u0DD4\u0DBB\u0DD4', '\u0BB5\u0B9F')");var C_=document.getElementById("province-dropdown"),I_=(0,v0.default)("SELECT id, name_en, name_si, name_ta FROM provinces");I_.forEach(y=>{let w=document.createElement("li");w.className="dropdown-item";let N=document.createElement("label");N.className="checkbox";let ee=document.createElement("input");ee.type="checkbox",ee.value=y.id;let R=document.createTextNode(`${y.name_en} / ${y.name_si} / ${y.name_ta}`);N.appendChild(ee),N.appendChild(R),w.appendChild(N),C_.appendChild(w)});})();
/*! Bundled license information:

alasql/dist/alasql.min.js:
  (*! AlaSQL v4.6.5 build: develop-f6e298b2 | © 2014-2024 Andrey Gershun & Mathias Wulff | License: MIT *)
  (*
  @module alasql
  @version 4.6.5
  
  AlaSQL - JavaScript SQL database
  © 2014-2024	Andrey Gershun & Mathias Wulff
  
  @license
  The MIT License (MIT)
  
  Copyright 2014-2024 Andrey Gershun (agershun@gmail.com) & Mathias Wulff (m@rawu.dk)
  
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  
  The above copyright notice and this permission notice shall be included in all
  copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  SOFTWARE.
  *)
  (*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.5.0/LICENSE.txt
   *)

bootstrap/dist/js/bootstrap.esm.js:
  (*!
    * Bootstrap v5.3.6 (https://getbootstrap.com/)
    * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
    *)
*/
